(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{440:(Yt,at,W)=>{"use strict";W.d(at,{nm:()=>Ws});var E=W(5813);W(4650),W(5867);var Z=W(5861),xe=W(9681),We=W(4859),_t=W(2090),Et=W(1877);const H=new Map,he={activated:!1,tokenObservers:[]},fe={initialized:!1,enabled:!1};function Fe(wt){return H.get(wt)||Object.assign({},he)}function Ge(){return fe}class Ht{constructor(ft,Mt,an,wn,kn){if(this.operation=ft,this.retryPolicy=Mt,this.getWaitDuration=an,this.lowerBound=wn,this.upperBound=kn,this.pending=null,this.nextErrorWaitInterval=wn,wn>kn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ft){var Mt=this;return(0,Z.Z)(function*(){Mt.stop();try{Mt.pending=new _t.BH,yield function $t(wt){return new Promise(ft=>{setTimeout(ft,wt)})}(Mt.getNextRun(ft)),Mt.pending.resolve(),yield Mt.pending.promise,Mt.pending=new _t.BH,yield Mt.operation(),Mt.pending.resolve(),yield Mt.pending.promise,Mt.process(!0).catch(()=>{})}catch(an){Mt.retryPolicy(an)?Mt.process(!1).catch(()=>{}):Mt.stop()}})()}getNextRun(ft){if(ft)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Mt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Mt}}}const Bt=new _t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Jt(wt){if(!Fe(wt).activated)throw Bt.create("use-before-activation",{appName:wt.name})}function wr(wt,ft){return vr.apply(this,arguments)}function vr(){return(vr=(0,Z.Z)(function*({url:wt,body:ft},Mt){var an,wn;const kn={"Content-Type":"application/json"},Tr=Mt.getImmediate({optional:!0});if(Tr){const zs=yield Tr.getHeartbeatsHeader();zs&&(kn["X-Firebase-Client"]=zs)}const oi={method:"POST",body:JSON.stringify(ft),headers:kn};let Xr,Rs;try{Xr=yield fetch(wt,oi)}catch(zs){throw Bt.create("fetch-network-error",{originalErrorMessage:null===(an=zs)||void 0===an?void 0:an.message})}if(200!==Xr.status)throw Bt.create("fetch-status-error",{httpStatus:Xr.status});try{Rs=yield Xr.json()}catch(zs){throw Bt.create("fetch-parse-error",{originalErrorMessage:null===(wn=zs)||void 0===wn?void 0:wn.message})}const Wi=Rs.ttl.match(/^([\d.]+)(s)$/);if(!Wi||!Wi[2]||isNaN(Number(Wi[1])))throw Bt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Rs.ttl}`});const Vo=1e3*Number(Wi[1]),zi=Date.now();return{token:Rs.token,expireTimeMillis:zi+Vo,issuedAtTimeMillis:zi}})).apply(this,arguments)}function tr(wt,ft){const{projectId:Mt,appId:an,apiKey:wn}=wt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Mt}/apps/${an}:exchangeDebugToken?key=${wn}`,body:{debug_token:ft}}}const yr="firebase-app-check-store";let pr=null;function Or(){return pr||(pr=new Promise((wt,ft)=>{var Mt;try{const an=indexedDB.open("firebase-app-check-database",1);an.onsuccess=wn=>{wt(wn.target.result)},an.onerror=wn=>{var kn;ft(Bt.create("storage-open",{originalErrorMessage:null===(kn=wn.target.error)||void 0===kn?void 0:kn.message}))},an.onupgradeneeded=wn=>{0===wn.oldVersion&&wn.target.result.createObjectStore(yr,{keyPath:"compositeKey"})}}catch(an){ft(Bt.create("storage-open",{originalErrorMessage:null===(Mt=an)||void 0===Mt?void 0:Mt.message}))}}),pr)}function si(){return(si=(0,Z.Z)(function*(wt,ft){const an=(yield Or()).transaction(yr,"readwrite"),kn=an.objectStore(yr).put({compositeKey:wt,value:ft});return new Promise((Tr,oi)=>{kn.onsuccess=Xr=>{Tr()},an.onerror=Xr=>{var Rs;oi(Bt.create("storage-set",{originalErrorMessage:null===(Rs=Xr.target.error)||void 0===Rs?void 0:Rs.message}))}})})).apply(this,arguments)}const vi=new Et.Yd("@firebase/app-check");function or(wt,ft){return(0,_t.hl)()?function _r(wt,ft){return function Wr(wt,ft){return si.apply(this,arguments)}(function Yr(wt){return`${wt.options.appId}-${wt.name}`}(wt),ft)}(wt,ft).catch(Mt=>{vi.warn(`Failed to write token to IndexedDB. Error: ${Mt}`)}):Promise.resolve()}function ki(){return Ge().enabled}function Mr(){return ri.apply(this,arguments)}function ri(){return(ri=(0,Z.Z)(function*(){const wt=Ge();if(wt.enabled&&wt.token)return wt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Mn={error:"UNKNOWN_ERROR"};function Qt(wt){return _t.US.encodeString(JSON.stringify(wt),!1)}function Rn(wt){return rr.apply(this,arguments)}function rr(){return(rr=(0,Z.Z)(function*(wt,ft=!1){const Mt=wt.app;Jt(Mt);const an=Fe(Mt);let kn,wn=an.token;if(wn&&!qt(wn)&&(an.token=void 0,wn=void 0),!wn){const Xr=yield an.cachedTokenPromise;Xr&&(qt(Xr)?wn=Xr:yield or(Mt,void 0))}if(!ft&&wn&&qt(wn))return{token:wn.token};let oi,Tr=!1;if(ki()){an.exchangeTokenPromise||(an.exchangeTokenPromise=wr(tr(Mt,yield Mr()),wt.heartbeatServiceProvider).finally(()=>{an.exchangeTokenPromise=void 0}),Tr=!0);const Xr=yield an.exchangeTokenPromise;return yield or(Mt,Xr),an.token=Xr,{token:Xr.token}}try{an.exchangeTokenPromise||(an.exchangeTokenPromise=an.provider.getToken().finally(()=>{an.exchangeTokenPromise=void 0}),Tr=!0),wn=yield Fe(Mt).exchangeTokenPromise}catch(Xr){"appCheck/throttled"===Xr.code?vi.warn(Xr.message):vi.error(Xr),kn=Xr}return wn?kn?oi=qt(wn)?{token:wn.token,internalError:kn}:bt(kn):(oi={token:wn.token},an.token=wn,yield or(Mt,wn)):oi=bt(kn),Tr&&ht(Mt,oi),oi})).apply(this,arguments)}function Dn(wt,ft){const Mt=Fe(wt),an=Mt.tokenObservers.filter(wn=>wn.next!==ft);0===an.length&&Mt.tokenRefresher&&Mt.tokenRefresher.isRunning()&&Mt.tokenRefresher.stop(),Mt.tokenObservers=an}function it(wt){const{app:ft}=wt,Mt=Fe(ft);let an=Mt.tokenRefresher;an||(an=function rt(wt){const{app:ft}=wt;return new Ht((0,Z.Z)(function*(){let an;if(an=Fe(ft).token?yield Rn(wt,!0):yield Rn(wt),an.error)throw an.error;if(an.internalError)throw an.internalError}),()=>!0,()=>{const Mt=Fe(ft);if(Mt.token){let an=Mt.token.issuedAtTimeMillis+.5*(Mt.token.expireTimeMillis-Mt.token.issuedAtTimeMillis)+3e5;return an=Math.min(an,Mt.token.expireTimeMillis-3e5),Math.max(0,an-Date.now())}return 0},3e4,96e4)}(wt),Mt.tokenRefresher=an),!an.isRunning()&&Mt.isTokenAutoRefreshEnabled&&an.start()}function ht(wt,ft){const Mt=Fe(wt).tokenObservers;for(const an of Mt)try{"EXTERNAL"===an.type&&null!=ft.error?an.error(ft.error):an.next(ft)}catch{}}function qt(wt){return wt.expireTimeMillis-Date.now()>0}function bt(wt){return{token:Qt(Mn),error:wt}}class Sn{constructor(ft,Mt){this.app=ft,this.heartbeatServiceProvider=Mt}_delete(){const{tokenObservers:ft}=Fe(this.app);for(const Mt of ft)Dn(this.app,Mt.next);return Promise.resolve()}}const _s="app-check-internal";!function js(){(0,xe._registerComponent)(new We.wA("app-check",wt=>function An(wt,ft){return new Sn(wt,ft)}(wt.getProvider("app").getImmediate(),wt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((wt,ft,Mt)=>{wt.getProvider(_s).initialize()})),(0,xe._registerComponent)(new We.wA(_s,wt=>function $r(wt){return{getToken:ft=>Rn(wt,ft),addTokenListener:ft=>function sr(wt,ft,Mt,an){const{app:wn}=wt,kn=Fe(wn);if(kn.tokenObservers=[...kn.tokenObservers,{next:Mt,error:an,type:ft}],kn.token&&qt(kn.token)){const oi=kn.token;Promise.resolve().then(()=>{Mt({token:oi.token}),it(wt)}).catch(()=>{})}kn.cachedTokenPromise.then(()=>it(wt))}(wt,"INTERNAL",ft),removeTokenListener:ft=>Dn(wt.app,ft)}}(wt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)("@firebase/app-check","0.5.17")}();class Ws{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},1205:(Yt,at,W)=>{"use strict";W.d(at,{zQ:()=>ct,ww:()=>St,rT:()=>fe,f7:()=>Me,L6:()=>H,_Q:()=>he,lh:()=>Fe,Qv:()=>Et,nw:()=>Ge});var E=W(4650),k=W(7579),ee=W(9646),Ue=W(9751),Pe=W(8996),Le=W(6451),se=W(5363),Ke=W(3900),Ae=W(4004),Ie=W(6063);class Re extends k.x{constructor(Pt=1/0,kt=1/0,dt=Ie.l){super(),this._bufferSize=Pt,this._windowTime=kt,this._timestampProvider=dt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=kt===1/0,this._bufferSize=Math.max(1,Pt),this._windowTime=Math.max(1,kt)}next(Pt){const{isStopped:kt,_buffer:dt,_infiniteTimeWindow:Ht,_timestampProvider:$t,_windowTime:rn}=this;kt||(dt.push(Pt),!Ht&&dt.push($t.now()+rn)),this._trimBuffer(),super.next(Pt)}_subscribe(Pt){this._throwIfClosed(),this._trimBuffer();const kt=this._innerSubscribe(Pt),{_infiniteTimeWindow:dt,_buffer:Ht}=this,$t=Ht.slice();for(let rn=0;rn<$t.length&&!Pt.closed;rn+=dt?1:2)Pt.next($t[rn]);return this._checkFinalizedStatuses(Pt),kt}_trimBuffer(){const{_bufferSize:Pt,_timestampProvider:kt,_buffer:dt,_infiniteTimeWindow:Ht}=this,$t=(Ht?1:2)*Pt;if(Pt<1/0&&$t<dt.length&&dt.splice(0,dt.length-$t),!Ht){const rn=kt.now();let Bt=0;for(let _n=1;_n<dt.length&&dt[_n]<=rn;_n+=2)Bt=_n;Bt&&dt.splice(0,Bt+1)}}}var Se=W(3099);function ut(Tt,Pt,kt){let dt,Ht=!1;return Tt&&"object"==typeof Tt?({bufferSize:dt=1/0,windowTime:Pt=1/0,refCount:Ht=!1,scheduler:kt}=Tt):dt=Tt??1/0,(0,Se.B)({connector:()=>new Re(dt,Pt,kt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ht})}var mt=W(590),$e=W(576);function jt(Tt,Pt){return(0,$e.m)(Pt)?(0,Ke.w)(()=>Tt,Pt):(0,Ke.w)(()=>Tt)}var Be=W(9468),ze=W(9300),yt=W(5813),le=W(2011),Z=W(6895),xe=W(440),We=W(127);const Et=new E.OlP("angularfire2.auth.use-emulator"),H=new E.OlP("angularfire2.auth.settings"),he=new E.OlP("angularfire2.auth.tenant-id"),fe=new E.OlP("angularfire2.auth.langugage-code"),Fe=new E.OlP("angularfire2.auth.use-device-language"),Me=new E.OlP("angularfire.auth.persistence"),Ge=(Tt,Pt,kt,dt,Ht,$t,rn,Bt)=>(0,le.cc)(`${Tt.name}.auth`,"AngularFireAuth",Tt.name,()=>{const _n=Pt.runOutsideAngular(()=>Tt.auth());if(kt&&_n.useEmulator(...kt),dt&&(_n.tenantId=dt),_n.languageCode=Ht,$t&&_n.useDeviceLanguage(),rn)for(const[Jt,qn]of Object.entries(rn))_n.settings[Jt]=qn;return Bt&&_n.setPersistence(Bt),_n},[kt,dt,Ht,$t,rn,Bt]);let ct=(()=>{class Tt{constructor(kt,dt,Ht,$t,rn,Bt,_n,Jt,qn,Qn,wr,vr){const Ci=new k.x,cr=(0,ee.of)(void 0).pipe((0,se.Q)(rn.outsideAngular),(0,Ke.w)(()=>$t.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,1277)))),(0,Ae.U)(()=>(0,le.on)(kt,$t,dt)),(0,Ae.U)(tr=>Ge(tr,$t,Bt,Jt,qn,Qn,_n,wr)),ut({bufferSize:1,refCount:!1}));if((0,Z.PM)(Ht))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ee.of)(null);else{cr.pipe((0,mt.P)()).subscribe();const Nr=cr.pipe((0,Ke.w)(en=>en.getRedirectResult().then(pr=>pr,()=>null)),yt.iC,ut({bufferSize:1,refCount:!1})),ti=cr.pipe((0,Ke.w)(en=>new Ue.y(pr=>({unsubscribe:$t.runOutsideAngular(()=>en.onAuthStateChanged(Or=>pr.next(Or),Or=>pr.error(Or),()=>pr.complete()))})))),yr=cr.pipe((0,Ke.w)(en=>new Ue.y(pr=>({unsubscribe:$t.runOutsideAngular(()=>en.onIdTokenChanged(Or=>pr.next(Or),Or=>pr.error(Or),()=>pr.complete()))}))));this.authState=Nr.pipe(jt(ti),(0,Be.R)(rn.outsideAngular),(0,se.Q)(rn.insideAngular)),this.user=Nr.pipe(jt(yr),(0,Be.R)(rn.outsideAngular),(0,se.Q)(rn.insideAngular)),this.idToken=this.user.pipe((0,Ke.w)(en=>en?(0,Pe.D)(en.getIdToken()):(0,ee.of)(null))),this.idTokenResult=this.user.pipe((0,Ke.w)(en=>en?(0,Pe.D)(en.getIdTokenResult()):(0,ee.of)(null))),this.credential=(0,Le.T)(Nr,Ci,this.authState.pipe((0,ze.h)(en=>!en))).pipe((0,Ae.U)(en=>en?.user?en:null),(0,Be.R)(rn.outsideAngular),(0,se.Q)(rn.insideAngular))}return(0,le.pX)(this,cr,$t,{spy:{apply:(tr,Nr,ti)=>{(tr.startsWith("signIn")||tr.startsWith("createUser"))&&ti.then(yr=>Ci.next(yr))}}})}}return Tt.\u0275fac=function(kt){return new(kt||Tt)(E.LFG(le.Dh),E.LFG(le.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(yt.HU),E.LFG(Et,8),E.LFG(H,8),E.LFG(he,8),E.LFG(fe,8),E.LFG(Fe,8),E.LFG(Me,8),E.LFG(xe.nm,8))},Tt.\u0275prov=E.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"any"}),Tt})(),St=(()=>{class Tt{constructor(){We.Z.registerVersion("angularfire",yt.q4.full,"auth-compat")}}return Tt.\u0275fac=function(kt){return new(kt||Tt)},Tt.\u0275mod=E.oAB({type:Tt}),Tt.\u0275inj=E.cJS({providers:[ct]}),Tt})()},7566:(Yt,at,W)=>{"use strict";W.d(at,{ST:()=>Ah,yb:()=>xf});var E=W(4650),k=W(4986),ee=W(9751),Ue=W(8996),Pe=W(9646),Le=W(5813),se=W(8675),Ke=W(4482),Ae=W(5403);function Ie(){return(0,Ke.e)((l,e)=>{let n,d=!1;l.subscribe((0,Ae.x)(e,p=>{const _=n;n=p,d&&e.next([_,p]),d=!0}))})}var Re=W(4004),Se=W(5026),ut=W(4671);function $e(l,e){return l===e}var fe,jt=W(9300),Be=W(2011),ze=W(6895),le=(W(1277),W(3942)),Z=W(5861),xe=W(9681),We=W(4859),_t=W(1877),Et=W(2090),H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={},Fe=Fe||{},Me=H||self;function Ge(){}function ct(l){var e=typeof l;return"array"==(e="object"!=e?e:l?Array.isArray(l)?"array":e:"null")||"object"==e&&"number"==typeof l.length}function St(l){var e=typeof l;return"object"==e&&null!=l||"function"==e}var Pt="closure_uid_"+(1e9*Math.random()>>>0),kt=0;function dt(l,e,n){return l.call.apply(l.bind,arguments)}function Ht(l,e,n){if(!l)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,d),l.apply(e,p)}}return function(){return l.apply(e,arguments)}}function $t(l,e,n){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dt:Ht).apply(null,arguments)}function rn(l,e){var n=Array.prototype.slice.call(arguments,1);return function(){var d=n.slice();return d.push.apply(d,arguments),l.apply(this,d)}}function Bt(l,e){function n(){}n.prototype=e.prototype,l.X=e.prototype,l.prototype=new n,l.prototype.constructor=l,l.Wb=function(d,p,_){for(var w=Array(arguments.length-2),N=2;N<arguments.length;N++)w[N-2]=arguments[N];return e.prototype[p].apply(d,w)}}function _n(){this.s=this.s,this.o=this.o}_n.prototype.s=!1,_n.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Tt(l){Object.prototype.hasOwnProperty.call(l,Pt)&&l[Pt]||(l[Pt]=++kt)}(this)},_n.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qn=Array.prototype.indexOf?function(l,e){return Array.prototype.indexOf.call(l,e,void 0)}:function(l,e){if("string"==typeof l)return"string"!=typeof e||1!=e.length?-1:l.indexOf(e,0);for(let n=0;n<l.length;n++)if(n in l&&l[n]===e)return n;return-1};function Qn(l){const e=l.length;if(0<e){const n=Array(e);for(let d=0;d<e;d++)n[d]=l[d];return n}return[]}function wr(l,e){for(let n=1;n<arguments.length;n++){const d=arguments[n];if(ct(d)){const p=l.length||0,_=d.length||0;l.length=p+_;for(let w=0;w<_;w++)l[p+w]=d[w]}else l.push(d)}}function vr(l,e){this.type=l,this.g=this.target=e,this.defaultPrevented=!1}vr.prototype.h=function(){this.defaultPrevented=!0};var Ci=function(){if(!Me.addEventListener||!Object.defineProperty)return!1;var l=!1,e=Object.defineProperty({},"passive",{get:function(){l=!0}});try{Me.addEventListener("test",Ge,e),Me.removeEventListener("test",Ge,e)}catch{}return l}();function cr(l){return/^[\s\xa0]*$/.test(l)}var tr=String.prototype.trim?function(l){return l.trim()}:function(l){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(l)[1]};function Nr(l,e){return l<e?-1:l>e?1:0}function ti(){var l=Me.navigator;return l&&(l=l.userAgent)?l:""}function yr(l){return-1!=ti().indexOf(l)}function en(l){return en[" "](l),l}en[" "]=Ge;var nr,l,Or=yr("Opera"),ni=yr("Trident")||yr("MSIE"),_r=yr("Edge"),ci=_r||ni,Zr=yr("Gecko")&&!(-1!=ti().toLowerCase().indexOf("webkit")&&!yr("Edge"))&&!(yr("Trident")||yr("MSIE"))&&!yr("Edge"),Wr=-1!=ti().toLowerCase().indexOf("webkit")&&!yr("Edge");function si(){var l=Me.document;return l?l.documentMode:void 0}e:{var Zn="",Yr=(l=ti(),Zr?/rv:([^\);]+)(\)|;)/.exec(l):_r?/Edge\/([\d\.]+)/.exec(l):ni?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(l):Wr?/WebKit\/(\S+)/.exec(l):Or?/(?:Version)[ \/]?(\S+)/.exec(l):void 0);if(Yr&&(Zn=Yr?Yr[1]:""),ni){var vi=si();if(null!=vi&&vi>parseFloat(Zn)){nr=String(vi);break e}}nr=Zn}var Qr={};var Un=Me.document&&ni&&(si()||parseInt(nr,10))||void 0;function ki(l,e){if(vr.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var n=this.type=l.type,d=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=e,e=l.relatedTarget){if(Zr){e:{try{en(e.nodeName);var p=!0;break e}catch{}p=!1}p||(e=null)}}else"mouseover"==n?e=l.fromElement:"mouseout"==n&&(e=l.toElement);this.relatedTarget=e,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:Mr[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ki.X.h.call(this)}}Bt(ki,vr);var Mr={2:"touch",3:"pen",4:"mouse"};ki.prototype.h=function(){ki.X.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ri="closure_listenable_"+(1e6*Math.random()|0),Qi=0;function Mn(l,e,n,d,p){this.listener=l,this.proxy=null,this.src=e,this.type=n,this.capture=!!d,this.ha=p,this.key=++Qi,this.ba=this.ea=!1}function Qt(l){l.ba=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rn(l,e,n){for(const d in l)e.call(n,l[d],d,l)}function rr(l){const e={};for(const n in l)e[n]=l[n];return e}const sr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dn(l,e){let n,d;for(let p=1;p<arguments.length;p++){for(n in d=arguments[p],d)l[n]=d[n];for(let _=0;_<sr.length;_++)n=sr[_],Object.prototype.hasOwnProperty.call(d,n)&&(l[n]=d[n])}}function it(l){this.src=l,this.g={},this.h=0}function rt(l,e){var n=e.type;if(n in l.g){var _,d=l.g[n],p=qn(d,e);(_=0<=p)&&Array.prototype.splice.call(d,p,1),_&&(Qt(e),0==l.g[n].length&&(delete l.g[n],l.h--))}}function ht(l,e,n,d){for(var p=0;p<l.length;++p){var _=l[p];if(!_.ba&&_.listener==e&&_.capture==!!n&&_.ha==d)return p}return-1}it.prototype.add=function(l,e,n,d,p){var _=l.toString();(l=this.g[_])||(l=this.g[_]=[],this.h++);var w=ht(l,e,d,p);return-1<w?(e=l[w],n||(e.ea=!1)):((e=new Mn(e,this.src,_,!!d,p)).ea=n,l.push(e)),e};var qt="closure_lm_"+(1e6*Math.random()|0),bt={};function Sn(l,e,n,d,p){if(d&&d.once)return ai(l,e,n,d,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Sn(l,e[_],n,d,p);return null}return n=dn(n),l&&l[ri]?l.N(e,n,St(d)?!!d.capture:!!d,p):An(l,e,n,!1,d,p)}function An(l,e,n,d,p,_){if(!e)throw Error("Invalid event type");var w=St(p)?!!p.capture:!!p,N=Ze(l);if(N||(l[qt]=N=new it(l)),(n=N.add(e,n,d,w,_)).proxy)return n;if(d=function $r(){const e=ve;return function l(n){return e.call(l.src,l.listener,n)}}(),n.proxy=d,d.src=l,d.listener=n,l.addEventListener)Ci||(p=w),void 0===p&&(p=!1),l.addEventListener(e.toString(),d,p);else if(l.attachEvent)l.attachEvent(ae(e.toString()),d);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(d)}return n}function ai(l,e,n,d,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)ai(l,e[_],n,d,p);return null}return n=dn(n),l&&l[ri]?l.O(e,n,St(d)?!!d.capture:!!d,p):An(l,e,n,!0,d,p)}function ye(l,e,n,d,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)ye(l,e[_],n,d,p);else d=St(d)?!!d.capture:!!d,n=dn(n),l&&l[ri]?(l=l.i,(e=String(e).toString())in l.g&&-1<(n=ht(_=l.g[e],n,d,p))&&(Qt(_[n]),Array.prototype.splice.call(_,n,1),0==_.length&&(delete l.g[e],l.h--))):l&&(l=Ze(l))&&(e=l.g[e.toString()],l=-1,e&&(l=ht(e,n,d,p)),(n=-1<l?e[l]:null)&&K(n))}function K(l){if("number"!=typeof l&&l&&!l.ba){var e=l.src;if(e&&e[ri])rt(e.i,l);else{var n=l.type,d=l.proxy;e.removeEventListener?e.removeEventListener(n,d,l.capture):e.detachEvent?e.detachEvent(ae(n),d):e.addListener&&e.removeListener&&e.removeListener(d),(n=Ze(e))?(rt(n,l),0==n.h&&(n.src=null,e[qt]=null)):Qt(l)}}}function ae(l){return l in bt?bt[l]:bt[l]="on"+l}function ve(l,e){if(l.ba)l=!0;else{e=new ki(e,this);var n=l.listener,d=l.ha||l.src;l.ea&&K(l),l=n.call(d,e)}return l}function Ze(l){return(l=l[qt])instanceof it?l:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function dn(l){return"function"==typeof l?l:(l[xt]||(l[xt]=function(e){return l.handleEvent(e)}),l[xt])}function Ln(){_n.call(this),this.i=new it(this),this.P=this,this.I=null}function Kn(l,e){var n,d=l.I;if(d)for(n=[];d;d=d.I)n.push(d);if(l=l.P,d=e.type||e,"string"==typeof e)e=new vr(e,l);else if(e instanceof vr)e.target=e.target||l;else{var p=e;Dn(e=new vr(d,l),p)}if(p=!0,n)for(var _=n.length-1;0<=_;_--){var w=e.g=n[_];p=br(w,d,!0,e)&&p}if(p=br(w=e.g=l,d,!0,e)&&p,p=br(w,d,!1,e)&&p,n)for(_=0;_<n.length;_++)p=br(w=e.g=n[_],d,!1,e)&&p}function br(l,e,n,d){if(!(e=l.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var w=e[_];if(w&&!w.ba&&w.capture==n){var N=w.listener,oe=w.ha||w.src;w.ea&&rt(l.i,w),p=!1!==N.call(oe,d)&&p}}return p&&!d.defaultPrevented}Bt(Ln,_n),Ln.prototype[ri]=!0,Ln.prototype.removeEventListener=function(l,e,n,d){ye(this,l,e,n,d)},Ln.prototype.M=function(){if(Ln.X.M.call(this),this.i){var e,l=this.i;for(e in l.g){for(var n=l.g[e],d=0;d<n.length;d++)Qt(n[d]);delete l.g[e],l.h--}}this.I=null},Ln.prototype.N=function(l,e,n,d){return this.i.add(String(l),e,!1,n,d)},Ln.prototype.O=function(l,e,n,d){return this.i.add(String(l),e,!0,n,d)};var yi=Me.JSON.stringify;function ar(){var l=Bi;let e=null;return l.g&&(e=l.g,l.g=l.g.next,l.g||(l.h=null),e.next=null),e}var bi,Xi=new class{constructor(l,e){this.i=l,this.j=e,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}(()=>new Mi,l=>l.reset());class Mi{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ni(l){Me.setTimeout(()=>{throw l},0)}function _i(l,e){bi||function gs(){var l=Me.Promise.resolve(void 0);bi=function(){l.then(Yo)}}(),Pi||(bi(),Pi=!0),Bi.add(l,e)}var Pi=!1,Bi=new class zr{constructor(){this.h=this.g=null}add(e,n){const d=Xi.get();d.set(e,n),this.h?this.h.next=d:this.g=d,this.h=d}};function Yo(){for(var l;l=ar();){try{l.h.call(l.g)}catch(n){Ni(n)}var e=Xi;e.j(l),100>e.h&&(e.h++,l.next=e.g,e.g=l)}Pi=!1}function di(l,e){Ln.call(this),this.h=l||1,this.g=e||Me,this.j=$t(this.lb,this),this.l=Date.now()}function _o(l){l.ca=!1,l.R&&(l.g.clearTimeout(l.R),l.R=null)}function _s(l,e,n){if("function"==typeof l)n&&(l=$t(l,n));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=$t(l.handleEvent,l)}return 2147483647<Number(e)?-1:Me.setTimeout(l,e||0)}function js(l){l.g=_s(()=>{l.g=null,l.i&&(l.i=!1,js(l))},l.j);const e=l.h;l.h=null,l.m.apply(null,e)}Bt(di,Ln),(fe=di.prototype).ca=!1,fe.R=null,fe.lb=function(){if(this.ca){var l=Date.now()-this.l;0<l&&l<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-l):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kn(this,"tick"),this.ca&&(_o(this),this.start()))}},fe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.M=function(){di.X.M.call(this),_o(this),delete this.g};class co extends _n{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:js(this)}M(){super.M(),this.g&&(Me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(l){_n.call(this),this.h=l,this.g={}}Bt(Us,_n);var Ws=[];function eo(l,e,n,d){Array.isArray(n)||(n&&(Ws[0]=n.toString()),n=Ws);for(var p=0;p<n.length;p++){var _=Sn(e,n[p],d||l.handleEvent,!1,l.h||l);if(!_)break;l.g[_.key]=_}}function Si(l){Rn(l.g,function(e,n){this.g.hasOwnProperty(n)&&K(e)},l),l.g={}}function Bo(){this.g=!0}function Ao(l,e,n,d){l.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Pa(l,e){if(!l.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(l=0;l<n.length;l++)if(Array.isArray(n[l])){var d=n[l];if(!(2>d.length)){var p=d[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var w=1;w<p.length;w++)p[w]=""}}}return yi(n)}catch{return e}}(l,n)+(d?" "+d:"")})}Us.prototype.M=function(){Us.X.M.call(this),Si(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bo.prototype.Aa=function(){this.g=!1},Bo.prototype.info=function(){};var ns={},lu=null;function xs(){return lu=lu||new Ln}function qa(l){vr.call(this,ns.Pa,l)}function Qo(l){const e=xs();Kn(e,new qa(e))}function Oa(l,e){vr.call(this,ns.STAT_EVENT,l),this.stat=e}function hi(l){const e=xs();Kn(e,new Oa(e,l))}function wt(l,e){vr.call(this,ns.Qa,l),this.size=e}function ft(l,e){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return Me.setTimeout(function(){l()},e)}ns.Pa="serverreachability",Bt(qa,vr),ns.STAT_EVENT="statevent",Bt(Oa,vr),ns.Qa="timingevent",Bt(wt,vr);var Mt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},an={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wn(){}function Tr(){}wn.prototype.h=null;var Wi,oi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Xr(){vr.call(this,"d")}function Rs(){vr.call(this,"c")}function Vo(){}function zi(l,e,n,d){this.l=l,this.j=e,this.m=n,this.U=d||1,this.S=new Us(this),this.O=Bu,this.T=new di(l=ci?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}Bt(Xr,vr),Bt(Rs,vr),Bt(Vo,wn),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Wi=new Vo;var Bu=45e3,bo={},Ra={};function to(l,e,n){l.K=1,l.v=Eo(xi(e)),l.s=n,l.P=!0,ho(l,null)}function ho(l,e){l.F=Date.now(),Bs(l),l.A=xi(l.v);var n=l.A,d=l.U;Array.isArray(d)||(d=[String(d)]),fa(n.i,"t",d),l.C=0,n=l.l.H,l.h=new zs,l.g=ma(l.l,n?e:null,!l.s),0<l.N&&(l.L=new co($t(l.La,l,l.g),l.N)),eo(l.S,l.g,"readystatechange",l.ib),e=l.H?rr(l.H):{},l.s?(l.u||(l.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",l.g.da(l.A,l.u,l.s,e)):(l.u="GET",l.g.da(l.A,l.u,null,e)),Qo(),function qr(l,e,n,d,p,_){l.info(function(){if(l.g)if(_)for(var w="",N=_.split("&"),oe=0;oe<N.length;oe++){var me=N[oe].split("=");if(1<me.length){var Ne=me[0];me=me[1];var st=Ne.split("_");w=2<=st.length&&"type"==st[1]?w+(Ne+"=")+me+"&":w+(Ne+"=redacted&")}}else w=null;else w=_;return"XMLHTTP REQ ("+d+") [attempt "+p+"]: "+e+"\n"+n+"\n"+w})}(l.j,l.u,l.A,l.m,l.U,l.s)}function fo(l){return!!l.g&&"GET"==l.u&&2!=l.K&&l.l.Da}function To(l,e,n){let p,d=!0;for(;!l.I&&l.C<n.length;){if(p=Na(l,n),p==Ra){4==e&&(l.o=4,hi(14),d=!1),Ao(l.j,l.m,null,"[Incomplete Response]");break}if(p==bo){l.o=4,hi(15),Ao(l.j,l.m,n,"[Invalid Chunk]"),d=!1;break}Ao(l.j,l.m,p,null),go(l,p)}fo(l)&&p!=Ra&&p!=bo&&(l.h.g="",l.C=0),4!=e||0!=n.length||l.h.h||(l.o=1,hi(16),d=!1),l.i=l.i&&d,d?0<n.length&&!l.$&&(l.$=!0,(e=l.l).g==l&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),fi(e),e.K=!0,hi(11))):(Ao(l.j,l.m,n,"[Invalid Chunked Response]"),qs(l),po(l))}function Na(l,e){var n=l.C,d=e.indexOf("\n",n);return-1==d?Ra:(n=Number(e.substring(n,d)),isNaN(n)?bo:(d+=1)+n>e.length?Ra:(e=e.substr(d,n),l.C=d+n,e))}function Bs(l){l.V=Date.now()+l.O,Ka(l,l.O)}function Ka(l,e){if(null!=l.B)throw Error("WatchDog timer not null");l.B=ft($t(l.gb,l),e)}function Za(l){l.B&&(Me.clearTimeout(l.B),l.B=null)}function po(l){0==l.l.G||l.I||es(l.l,l)}function qs(l){Za(l);var e=l.L;e&&"function"==typeof e.na&&e.na(),l.L=null,_o(l.T),Si(l.S),l.g&&(e=l.g,l.g=null,e.abort(),e.na())}function go(l,e){try{var n=l.l;if(0!=n.G&&(n.g==l||ea(n.h,l)))if(!l.J&&ea(n.h,l)&&3==n.G){try{var d=n.Fa.g.parse(e)}catch{d=null}if(Array.isArray(d)&&3==d.length){var p=d;if(0==p[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<l.F))break e;li(n),z(n)}Di(n),hi(18)}}else n.Ba=p[1],0<n.Ba-n.T&&37500>p[2]&&n.L&&0==n.A&&!n.v&&(n.v=ft($t(n.cb,n),6e3));if(1>=Jr(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else mo(n,11)}else if((l.J||n.g==l)&&li(n),!cr(e))for(p=n.Fa.g.parse(e),e=0;e<p.length;e++){let me=p[e];if(n.T=me[0],me=me[1],2==n.G)if("c"==me[0]){n.I=me[1],n.ka=me[2];const Ne=me[3];null!=Ne&&(n.ma=Ne,n.j.info("VER="+n.ma));const st=me[4];null!=st&&(n.Ca=st,n.j.info("SVER="+n.Ca));const Lt=me[5];null!=Lt&&"number"==typeof Lt&&0<Lt&&(n.J=d=1.5*Lt,n.j.info("backChannelRequestTimeoutMs_="+d)),d=n;const nn=l.g;if(nn){const Zt=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zt){var _=d.h;_.g||-1==Zt.indexOf("spdy")&&-1==Zt.indexOf("quic")&&-1==Zt.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(ta(_,_.h),_.h=null))}if(d.D){const Xn=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xn&&(d.za=Xn,ui(d.F,d.D,Xn))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-l.F,n.j.info("Handshake RTT: "+n.P+"ms"));var w=l;if((d=n).sa=wo(d,d.H?d.ka:null,d.V),w.J){ds(d.h,w);var N=w,oe=d.J;oe&&N.setTimeout(oe),N.B&&(Za(N),Bs(N)),d.g=w}else Ii(d);0<n.i.length&&et(n)}else"stop"!=me[0]&&"close"!=me[0]||mo(n,7);else 3==n.G&&("stop"==me[0]||"close"==me[0]?"stop"==me[0]?mo(n,7):ge(n):"noop"!=me[0]&&n.l&&n.l.wa(me),n.A=0)}Qo()}catch{}}function da(l,e){if(l.forEach&&"function"==typeof l.forEach)l.forEach(e,void 0);else if(ct(l)||"string"==typeof l)Array.prototype.forEach.call(l,e,void 0);else for(var n=function ca(l){if(l.oa&&"function"==typeof l.oa)return l.oa();if(!l.W||"function"!=typeof l.W){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(ct(l)||"string"==typeof l){var e=[];l=l.length;for(var n=0;n<l;n++)e.push(n);return e}e=[],n=0;for(const d in l)e[n++]=d;return e}}}(l),d=function Ks(l){if(l.W&&"function"==typeof l.W)return l.W();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(ct(l)){for(var e=[],n=l.length,d=0;d<n;d++)e.push(l[d]);return e}for(d in e=[],n=0,l)e[n++]=l[d];return e}(l),p=d.length,_=0;_<p;_++)e.call(void 0,d[_],n&&n[_],l)}(fe=zi.prototype).setTimeout=function(l){this.O=l},fe.ib=function(l){l=l.target;const e=this.L;e&&3==mi(l)?e.l():this.La(l)},fe.La=function(l){try{if(l==this.g)e:{const Ne=mi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ne)&&(3!=Ne||ci||this.g&&(this.h.h||this.g.fa()||hs(this.g)))){this.I||4!=Ne||7==e||Qo(),Za(this);var n=this.g.aa();this.Y=n;t:if(fo(this)){var d=hs(this.g);l="";var p=d.length,_=4==mi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qs(this),po(this);var w="";break t}this.h.i=new Me.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,l+=this.h.i.decode(d[e],{stream:_&&e==p-1});d.splice(0,p),this.h.g+=l,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==n,function bs(l,e,n,d,p,_,w){l.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+p+"]: "+e+"\n"+n+"\n"+_+" "+w})}(this.j,this.u,this.A,this.m,this.U,Ne,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,oe=this.g;if((N=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cr(N)){var me=N;break t}}me=null}if(!(n=me)){this.i=!1,this.o=3,hi(12),qs(this),po(this);break e}Ao(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,go(this,n)}this.P?(To(this,Ne,w),ci&&this.i&&3==Ne&&(eo(this.S,this.T,"tick",this.hb),this.T.start())):(Ao(this.j,this.m,w,null),go(this,w)),4==Ne&&qs(this),this.i&&!this.I&&(4==Ne?es(this.l,this):(this.i=!1,Bs(this)))}else 400==n&&0<w.indexOf("Unknown SID")?(this.o=3,hi(12)):(this.o=0,hi(13)),qs(this),po(this)}}}catch{}},fe.hb=function(){if(this.g){var l=mi(this.g),e=this.g.fa();this.C<e.length&&(Za(this),To(this,l,e),this.i&&4!=l&&Bs(this))}},fe.cancel=function(){this.I=!0,qs(this)},fe.gb=function(){this.B=null;const l=Date.now();0<=l-this.V?(function ko(l,e){l.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qo(),hi(17)),qs(this),this.o=2,po(this)):Ka(this,this.V-l)};var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ha(l,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,l instanceof ha){this.h=void 0!==e?e:l.h,La(this,l.j),this.s=l.s,this.g=l.g,Sa(this,l.m),this.l=l.l,e=l.i;var n=new fr;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Vs(this,n),this.o=l.o}else l&&(n=String(l).match(ms))?(this.h=!!e,La(this,n[1]||"",!0),this.s=Mo(n[2]||""),this.g=Mo(n[3]||"",!0),Sa(this,n[4]),this.l=Mo(n[5]||"",!0),Vs(this,n[6]||"",!0),this.o=Mo(n[7]||"")):(this.h=!!e,this.i=new fr(null,this.h))}function xi(l){return new ha(l)}function La(l,e,n){l.j=n?Mo(e,!0):e,l.j&&(l.j=l.j.replace(/:$/,""))}function Sa(l,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);l.m=e}else l.m=null}function Vs(l,e,n){e instanceof fr?(l.i=e,function Au(l,e){e&&!l.j&&(ur(l),l.i=null,l.g.forEach(function(n,d){var p=d.toLowerCase();d!=p&&(cu(this,d),fa(this,p,n))},l)),l.j=e}(l.i,l.h)):(n||(e=Ji(e,no)),l.i=new fr(e,l.h))}function ui(l,e,n){l.i.set(e,n)}function Eo(l){return ui(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mo(l,e){return l?e?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ji(l,e,n){return"string"==typeof l?(l=encodeURI(l).replace(e,Br),n&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Br(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}ha.prototype.toString=function(){var l=[],e=this.j;e&&l.push(Ji(e,Jo,!0),":");var n=this.g;return(n||"file"==e)&&(l.push("//"),(e=this.s)&&l.push(Ji(e,Jo,!0),"@"),l.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&l.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&l.push("/"),l.push(Ji(n,"/"==n.charAt(0)?Ya:Po,!0))),(n=this.i.toString())&&l.push("?",n),(n=this.o)&&l.push("#",Ji(n,is)),l.join("")};var Jo=/[#\/\?@]/g,Po=/[#\?:]/g,Ya=/[#\?]/g,no=/[#\?@]/g,is=/#/g;function fr(l,e){this.h=this.g=null,this.i=l||null,this.j=!!e}function ur(l){l.g||(l.g=new Map,l.h=0,l.i&&function Xo(l,e){if(l){l=l.split("&");for(var n=0;n<l.length;n++){var d=l[n].indexOf("="),p=null;if(0<=d){var _=l[n].substring(0,d);p=l[n].substring(d+1)}else _=l[n];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(l.i,function(e,n){l.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function cu(l,e){ur(l),e=So(l,e),l.g.has(e)&&(l.i=null,l.h-=l.g.get(e).length,l.g.delete(e))}function wa(l,e){return ur(l),e=So(l,e),l.g.has(e)}function fa(l,e,n){cu(l,e),0<n.length&&(l.i=null,l.g.set(So(l,e),Qn(n)),l.h+=n.length)}function So(l,e){return e=String(e),l.j&&(e=e.toLowerCase()),e}function pa(l){this.l=l||ga,l=Me.PerformanceNavigationTiming?0<(l=Me.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(Me.g&&Me.g.Ga&&Me.g.Ga()&&Me.g.Ga().$b),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=fr.prototype).add=function(l,e){ur(this),this.i=null,l=So(this,l);var n=this.g.get(l);return n||this.g.set(l,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(l,e){ur(this),this.g.forEach(function(n,d){n.forEach(function(p){l.call(e,p,d,this)},this)},this)},fe.oa=function(){ur(this);const l=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let d=0;d<e.length;d++){const p=l[d];for(let _=0;_<p.length;_++)n.push(e[d])}return n},fe.W=function(l){ur(this);let e=[];if("string"==typeof l)wa(this,l)&&(e=e.concat(this.g.get(So(this,l))));else{l=Array.from(this.g.values());for(let n=0;n<l.length;n++)e=e.concat(l[n])}return e},fe.set=function(l,e){return ur(this),this.i=null,wa(this,l=So(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[e]),this.h+=1,this},fe.get=function(l,e){return l&&0<(l=this.W(l)).length?String(l[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var d=e[n];const _=encodeURIComponent(String(d)),w=this.W(d);for(d=0;d<w.length;d++){var p=_;""!==w[d]&&(p+="="+encodeURIComponent(String(w[d]))),l.push(p)}}return this.i=l.join("&")};var ga=10;function hn(l){return!!l.h||!!l.g&&l.g.size>=l.j}function Jr(l){return l.h?1:l.g?l.g.size:0}function ea(l,e){return l.h?l.h==e:!!l.g&&l.g.has(e)}function ta(l,e){l.g?l.g.add(e):l.h=e}function ds(l,e){l.h&&l.h==e?l.h=null:l.g&&l.g.has(e)&&l.g.delete(e)}function ie(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let e=l.i;for(const n of l.g.values())e=e.concat(n.D);return e}return Qn(l.i)}function Q(){}function q(){this.g=new Q}function ke(l,e,n){const d=n||"";try{da(l,function(p,_){let w=p;St(p)&&(w=yi(p)),e.push(d+_+"="+encodeURIComponent(w))})}catch(p){throw e.push(d+"type="+encodeURIComponent("_badmap")),p}}function re(l,e,n,d,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(d)}catch{}}function J(l){this.l=l.ac||null,this.j=l.jb||!1}function Oe(l,e){Ln.call(this),this.D=l,this.u=e,this.m=void 0,this.readyState=Je,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pa.prototype.cancel=function(){if(this.i=ie(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}},Q.prototype.stringify=function(l){return Me.JSON.stringify(l,void 0)},Q.prototype.parse=function(l){return Me.JSON.parse(l,void 0)},Bt(J,wn),J.prototype.g=function(){return new Oe(this.l,this.j)},J.prototype.i=function(l){return function(){return l}}({}),Bt(Oe,Ln);var Je=0;function ot(l){l.j.read().then(l.Ta.bind(l)).catch(l.ga.bind(l))}function Nt(l){l.readyState=4,l.l=null,l.j=null,l.A=null,fn(l)}function fn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}(fe=Oe.prototype).open=function(l,e){if(this.readyState!=Je)throw this.abort(),Error("Error reopening a connection");this.C=l,this.B=e,this.readyState=1,fn(this)},fe.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};l&&(e.body=l),(this.D||Me).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=Je},fe.Wa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,fn(this)),this.g&&(this.readyState=3,fn(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Me.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ot(this)}else l.text().then(this.Va.bind(this),this.ga.bind(this))},fe.Ta=function(l){if(this.g){if(this.u&&l.value)this.response.push(l.value);else if(!this.u){var e=l.value?l.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!l.done}))&&(this.response=this.responseText+=e)}l.done?Nt(this):fn(this),3==this.readyState&&ot(this)}},fe.Va=function(l){this.g&&(this.response=this.responseText=l,Nt(this))},fe.Ua=function(l){this.g&&(this.response=l,Nt(this))},fe.ga=function(){this.g&&Nt(this)},fe.setRequestHeader=function(l,e){this.v.append(l,e)},fe.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],e=this.h.entries();for(var n=e.next();!n.done;)l.push((n=n.value)[0]+": "+n[1]),n=e.next();return l.join("\r\n")},Object.defineProperty(Oe.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}});var Hn=Me.JSON.parse;function Tn(l){Ln.call(this),this.headers=new Map,this.u=l||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mr,this.K=this.L=!1}Bt(Tn,Ln);var mr="",Gr=/^https?$/i,Is=["POST","PUT"];function Oi(l,e){l.h=!1,l.g&&(l.l=!0,l.g.abort(),l.l=!1),l.j=e,l.m=5,Hi(l),wi(l)}function Hi(l){l.D||(l.D=!0,Kn(l,"complete"),Kn(l,"error"))}function Ns(l){if(l.h&&typeof Fe<"u"&&(!l.C[1]||4!=mi(l)||2!=l.aa()))if(l.v&&4==mi(l))_s(l.Ha,0,l);else if(Kn(l,"readystatechange"),4==mi(l)){l.h=!1;try{const N=l.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var d;if(d=0===N){var p=String(l.H).match(ms)[1]||null;if(!p&&Me.self&&Me.self.location){var _=Me.self.location.protocol;p=_.substr(0,_.length-1)}d=!Gr.test(p?p.toLowerCase():"")}n=d}if(n)Kn(l,"complete"),Kn(l,"success");else{l.m=6;try{var w=2<mi(l)?l.g.statusText:""}catch{w=""}l.j=w+" ["+l.aa()+"]",Hi(l)}}finally{wi(l)}}}function wi(l,e){if(l.g){ro(l);const n=l.g,d=l.C[0]?Ge:null;l.g=null,l.C=null,e||Kn(l,"ready");try{n.onreadystatechange=d}catch{}}}function ro(l){l.g&&l.K&&(l.g.ontimeout=null),l.A&&(Me.clearTimeout(l.A),l.A=null)}function mi(l){return l.g?l.g.readyState:0}function hs(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.J){case mr:case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ts(l){let e="";return Rn(l,function(n,d){e+=d,e+=":",e+=n,e+="\r\n"}),e}function Dr(l,e,n){e:{for(d in n){var d=!1;break e}d=!0}d||(n=Ts(n),"string"==typeof l?null!=n&&encodeURIComponent(String(n)):ui(l,e,n))}function Oo(l,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[l]||e}function B(l){this.Ca=0,this.i=[],this.j=new Bo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Oo("failFast",!1,l),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Oo("baseRetryDelayMs",5e3,l),this.bb=Oo("retryDelaySeedMs",1e4,l),this.$a=Oo("forwardChannelMaxRetries",2,l),this.ta=Oo("forwardChannelRequestTimeoutMs",2e4,l),this.ra=l&&l.xmlHttpFactory||void 0,this.Da=l&&l.Zb||!1,this.J=void 0,this.H=l&&l.supportsCrossDomainXhr||!1,this.I="",this.h=new pa(l&&l.concurrentRequestLimit),this.Fa=new q,this.O=l&&l.fastHandshake||!1,this.N=l&&l.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=l&&l.Xb||!1,l&&l.Aa&&this.j.Aa(),l&&l.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&l&&l.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ge(l){if(we(l),3==l.G){var e=l.U++,n=xi(l.F);ui(n,"SID",l.I),ui(n,"RID",e),ui(n,"TYPE","terminate"),Bn(l,n),(e=new zi(l,l.j,e,void 0)).K=2,e.v=Eo(xi(n)),n=!1,Me.navigator&&Me.navigator.sendBeacon&&(n=Me.navigator.sendBeacon(e.v.toString(),"")),!n&&Me.Image&&((new Image).src=e.v,n=!0),n||(e.g=ma(e.l,null),e.g.da(e.v)),e.F=Date.now(),Bs(e)}Ro(l)}function z(l){l.g&&(fi(l),l.g.cancel(),l.g=null)}function we(l){z(l),l.u&&(Me.clearTimeout(l.u),l.u=null),li(l),l.h.cancel(),l.m&&("number"==typeof l.m&&Me.clearTimeout(l.m),l.m=null)}function et(l){hn(l.h)||l.m||(l.m=!0,_i(l.Ja,l),l.C=0)}function Kt(l,e){var n;n=e?e.m:l.U++;const d=xi(l.F);ui(d,"SID",l.I),ui(d,"RID",n),ui(d,"AID",l.T),Bn(l,d),l.o&&l.s&&Dr(d,l.o,l.s),n=new zi(l,l.j,n,l.C+1),null===l.o&&(n.H=l.s),e&&(l.i=e.D.concat(l.i)),e=Cr(l,n,1e3),n.setTimeout(Math.round(.5*l.ta)+Math.round(.5*l.ta*Math.random())),ta(l.h,n),to(n,d,e)}function Bn(l,e){l.ia&&Rn(l.ia,function(n,d){ui(e,d,n)}),l.l&&da({},function(n,d){ui(e,d,n)})}function Cr(l,e,n){n=Math.min(l.i.length,n);var d=l.l?$t(l.l.Ra,l.l,l):null;e:{var p=l.i;let _=-1;for(;;){const w=["count="+n];-1==_?0<n?(_=p[0].h,w.push("ofs="+_)):_=0:w.push("ofs="+_);let N=!0;for(let oe=0;oe<n;oe++){let me=p[oe].h;const Ne=p[oe].g;if(me-=_,0>me)_=Math.max(0,p[oe].h-100),N=!1;else try{ke(Ne,w,"req"+me+"_")}catch{d&&d(Ne)}}if(N){d=w.join("&");break e}}}return l=l.i.splice(0,n),e.D=l,d}function Ii(l){l.g||l.u||(l.Z=1,_i(l.Ia,l),l.A=0)}function Di(l){return!(l.g||l.u||3<=l.A||(l.Z++,l.u=ft($t(l.Ia,l),Fa(l,l.A)),l.A++,0))}function fi(l){null!=l.B&&(Me.clearTimeout(l.B),l.B=null)}function io(l){l.g=new zi(l,l.j,"rpc",l.Z),null===l.o&&(l.g.H=l.s),l.g.N=0;var e=xi(l.sa);ui(e,"RID","rpc"),ui(e,"SID",l.I),ui(e,"CI",l.L?"0":"1"),ui(e,"AID",l.T),ui(e,"TYPE","xmlhttp"),Bn(l,e),l.o&&l.s&&Dr(e,l.o,l.s),l.J&&l.g.setTimeout(l.J);var n=l.g;l=l.ka,n.K=1,n.v=Eo(xi(e)),n.s=null,n.P=!0,ho(n,l)}function li(l){null!=l.v&&(Me.clearTimeout(l.v),l.v=null)}function es(l,e){var n=null;if(l.g==e){li(l),fi(l),l.g=null;var d=2}else{if(!ea(l.h,e))return;n=e.D,ds(l.h,e),d=1}if(0!=l.G)if(l.pa=e.Y,e.i)if(1==d){n=e.s?e.s.length:0,e=Date.now()-e.F;var p=l.C;Kn(d=xs(),new wt(d,n)),et(l)}else Ii(l);else if(3==(p=e.o)||0==p&&0<l.pa||!(1==d&&function Ot(l,e){return!(Jr(l.h)>=l.h.j-(l.m?1:0)||(l.m?(l.i=e.D.concat(l.i),0):1==l.G||2==l.G||l.C>=(l.Za?0:l.$a)||(l.m=ft($t(l.Ja,l,e),Fa(l,l.C)),l.C++,0)))}(l,e)||2==d&&Di(l)))switch(n&&0<n.length&&(e=l.h,e.i=e.i.concat(n)),p){case 1:mo(l,5);break;case 4:mo(l,10);break;case 3:mo(l,6);break;default:mo(l,2)}}function Fa(l,e){let n=l.Xa+Math.floor(Math.random()*l.bb);return l.l||(n*=2),n*e}function mo(l,e){if(l.j.info("Error code "+e),2==e){var n=null;l.l&&(n=null);var d=$t(l.kb,l);n||(n=new ha("//www.google.com/images/cleardot.gif"),Me.location&&"http"==Me.location.protocol||La(n,"https"),Eo(n)),function Ut(l,e){const n=new Bo;if(Me.Image){const d=new Image;d.onload=rn(re,n,d,"TestLoadImage: loaded",!0,e),d.onerror=rn(re,n,d,"TestLoadImage: error",!1,e),d.onabort=rn(re,n,d,"TestLoadImage: abort",!1,e),d.ontimeout=rn(re,n,d,"TestLoadImage: timeout",!1,e),Me.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=l}else e(!1)}(n.toString(),d)}else hi(2);l.G=0,l.l&&l.l.va(e),Ro(l),we(l)}function Ro(l){if(l.G=0,l.la=[],l.l){const e=ie(l.h);(0!=e.length||0!=l.i.length)&&(wr(l.la,e),wr(l.la,l.i),l.h.i.length=0,Qn(l.i),l.i.length=0),l.l.ua()}}function wo(l,e,n){var d=n instanceof ha?xi(n):new ha(n,void 0);if(""!=d.g)e&&(d.g=e+"."+d.g),Sa(d,d.m);else{var p=Me.location;d=p.protocol,e=e?e+"."+p.hostname:p.hostname,p=+p.port;var _=new ha(null,void 0);d&&La(_,d),e&&(_.g=e),p&&Sa(_,p),n&&(_.l=n),d=_}return e=l.za,(n=l.D)&&e&&ui(d,n,e),ui(d,"VER",l.ma),Bn(l,d),d}function ma(l,e,n){if(e&&!l.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tn(n&&l.Da&&!l.ra?new J({jb:!0}):l.ra)).Ka(l.H),e}function Ho(){}function na(){if(ni&&!(10<=Number(Un)))throw Error("Environmental error: no available transport.")}function Co(l,e){Ln.call(this),this.g=new B(e),this.l=l,this.h=e&&e.messageUrlParams||null,l=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.s=l,l=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(l?l["X-WebChannel-Content-Type"]=e.messageContentType:l={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(l?l["X-WebChannel-Client-Profile"]=e.ya:l={"X-WebChannel-Client-Profile":e.ya}),this.g.S=l,(l=e&&e.Yb)&&!cr(l)&&(this.g.o=l),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cr(e)&&(this.g.D=e,null!==(l=this.h)&&e in l&&e in(l=this.h)&&delete l[e]),this.j=new ku(this)}function fs(l){Xr.call(this);var e=l.__sm__;if(e){e:{for(const n in e){l=n;break e}l=void 0}(this.i=l)&&(l=this.i,e=null!==e&&l in e?e[l]:void 0),this.data=e}else this.data=l}function Vu(){Rs.call(this),this.status=1}function ku(l){this.g=l}(fe=Tn.prototype).Ka=function(l){this.L=l},fe.da=function(l,e,n,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+l);e=e?e.toUpperCase():"GET",this.H=l,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wi.g(),this.C=function kn(l){return l.h||(l.h=l.i())}(this.u?this.u:Wi),this.g.onreadystatechange=$t(this.Ha,this);try{this.F=!0,this.g.open(e,String(l),!0),this.F=!1}catch(_){return void Oi(this,_)}if(l=n||"",n=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var p in d)n.set(p,d[p]);else{if("function"!=typeof d.keys||"function"!=typeof d.get)throw Error("Unknown input type for opt_headers: "+String(d));for(const _ of d.keys())n.set(_,d.get(_))}d=Array.from(n.keys()).find(_=>"content-type"==_.toLowerCase()),p=Me.FormData&&l instanceof Me.FormData,!(0<=qn(Is,e))||d||p||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of n)this.g.setRequestHeader(_,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ro(this),0<this.B&&((this.K=function Vi(l){return ni&&function sn(){return function pr(l){var e=Qr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=l(9)}(function(){let l=0;const e=tr(String(nr)).split("."),n=tr("9").split("."),d=Math.max(e.length,n.length);for(let w=0;0==l&&w<d;w++){var p=e[w]||"",_=n[w]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;l=Nr(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||Nr(0==p[2].length,0==_[2].length)||Nr(p[2],_[2]),p=p[3],_=_[3]}while(0==l)}return 0<=l})}()&&"number"==typeof l.timeout&&void 0!==l.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.qa,this)):this.A=_s(this.qa,this.B,this)),this.v=!0,this.g.send(l),this.v=!1}catch(_){Oi(this,_)}},fe.qa=function(){typeof Fe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kn(this,"timeout"),this.abort(8))},fe.abort=function(l){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=l||7,Kn(this,"complete"),Kn(this,"abort"),wi(this))},fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wi(this,!0)),Tn.X.M.call(this)},fe.Ha=function(){this.s||(this.F||this.v||this.l?Ns(this):this.fb())},fe.fb=function(){Ns(this)},fe.aa=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},fe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Sa=function(l){if(this.g){var e=this.g.responseText;return l&&0==e.indexOf(l)&&(e=e.substring(l.length)),Hn(e)}},fe.Ea=function(){return this.m},fe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=B.prototype).ma=8,fe.G=1,fe.Ja=function(l){if(this.m)if(this.m=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const p=new zi(this,this.j,l,void 0);let _=this.s;if(this.S&&(_?(_=rr(_),Dn(_,this.S)):_=this.S),null!==this.o||this.N||(p.H=_,_=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var d=this.i[n];if(void 0===(d="__data__"in d.g&&"string"==typeof(d=d.g.__data__)?d.length:void 0))break;if(4096<(e+=d)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Cr(this,p,e),ui(n=xi(this.F),"RID",l),ui(n,"CVER",22),this.D&&ui(n,"X-HTTP-Session-Id",this.D),Bn(this,n),_&&(this.N?e="headers="+encodeURIComponent(String(Ts(_)))+"&"+e:this.o&&Dr(n,this.o,_)),ta(this.h,p),this.Ya&&ui(n,"TYPE","init"),this.O?(ui(n,"$req",e),ui(n,"SID","null"),p.Z=!0,to(p,n,null)):to(p,n,e),this.G=2}}else 3==this.G&&(l?Kt(this,l):0==this.i.length||hn(this.h)||Kt(this))},fe.Ia=function(){if(this.u=null,io(this),this.$&&!(this.K||null==this.g||0>=this.P)){var l=2*this.P;this.j.info("BP detection timer enabled: "+l),this.B=ft($t(this.eb,this),l)}},fe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,hi(10),z(this),io(this))},fe.cb=function(){null!=this.v&&(this.v=null,z(this),Di(this),hi(19))},fe.kb=function(l){l?(this.j.info("Successfully pinged google.com"),hi(2)):(this.j.info("Failed to ping google.com"),hi(1))},(fe=Ho.prototype).xa=function(){},fe.wa=function(){},fe.va=function(){},fe.ua=function(){},fe.Ra=function(){},na.prototype.g=function(l,e){return new Co(l,e)},Bt(Co,Ln),Co.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var l=this.g,e=this.l,n=this.h||void 0;hi(0),l.V=e,l.ia=n||{},l.L=l.Y,l.F=wo(l,null,l.V),et(l)},Co.prototype.close=function(){ge(this.g)},Co.prototype.u=function(l){var e=this.g;if("string"==typeof l){var n={};n.__data__=l,l=n}else this.v&&((n={}).__data__=yi(l),l=n);e.i.push(new class{constructor(l,e){this.h=l,this.g=e}}(e.ab++,l)),3==e.G&&et(e)},Co.prototype.M=function(){this.g.l=null,delete this.j,ge(this.g),delete this.g,Co.X.M.call(this)},Bt(fs,Xr),Bt(Vu,Rs),Bt(ku,Ho),ku.prototype.xa=function(){Kn(this.g,"a")},ku.prototype.wa=function(l){Kn(this.g,new fs(l))},ku.prototype.va=function(l){Kn(this.g,new Vu)},ku.prototype.ua=function(){Kn(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,Co.prototype.send=Co.prototype.u,Co.prototype.open=Co.prototype.m,Co.prototype.close=Co.prototype.close,Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,an.COMPLETE="complete",Tr.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Ln.prototype.listen=Ln.prototype.N,Tn.prototype.listenOnce=Tn.prototype.O,Tn.prototype.getLastError=Tn.prototype.Oa,Tn.prototype.getLastErrorCode=Tn.prototype.Ea,Tn.prototype.getStatus=Tn.prototype.aa,Tn.prototype.getResponseJson=Tn.prototype.Sa,Tn.prototype.getResponseText=Tn.prototype.fa,Tn.prototype.send=Tn.prototype.da,Tn.prototype.setWithCredentials=Tn.prototype.Ka;var $o=he.createWebChannelTransport=function(){return new na},Tl=he.getStatEventTarget=function(){return xs()},ul=he.ErrorCode=Mt,Hl=he.EventType=an,Hu=he.Event=ns,fc=he.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Mu=he.FetchXmlHttpFactory=J,du=he.WebChannel=Tr,Uc=he.XhrIo=Tn;const so="@firebase/firestore";class gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let No="9.14.0";const oo=new _t.Yd("@firebase/firestore");function ja(){return oo.logLevel}function En(l,...e){if(oo.logLevel<=_t.in.DEBUG){const n=e.map(Ss);oo.debug(`Firestore (${No}): ${l}`,...n)}}function Es(l,...e){if(oo.logLevel<=_t.in.ERROR){const n=e.map(Ss);oo.error(`Firestore (${No}): ${l}`,...n)}}function vs(l,...e){if(oo.logLevel<=_t.in.WARN){const n=e.map(Ss);oo.warn(`Firestore (${No}): ${l}`,...n)}}function Ss(l){if("string"==typeof l)return l;try{return JSON.stringify(l)}catch{return l}}function Jn(l="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+l;throw Es(e),new Error(e)}function dr(l,e){l||Jn()}function $n(l,e){return l}const Gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ln extends Et.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Qa{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gr.UNAUTHENTICATED))}shutdown(){}}class fu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class El{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var d=this;let p=this.i;const _=me=>this.i!==p?(p=this.i,n(me)):Promise.resolve();let w=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Ls,e.enqueueRetryable(()=>_(this.currentUser))};const N=()=>{const me=w;e.enqueueRetryable((0,Z.Z)(function*(){yield me.promise,yield _(d.currentUser)}))},oe=me=>{En("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=me,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(me=>oe(me)),setTimeout(()=>{if(!this.auth){const me=this.t.getImmediate({optional:!0});me?oe(me):(En("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Ls)}},0),N()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(d=>this.i!==e?(En("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?(dr("string"==typeof d.accessToken),new Qa(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dr(null===e||"string"==typeof e),new gr(e)}}class Sl{constructor(e,n,d,p){this.h=e,this.l=n,this.m=d,this.g=p,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(dr(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ds{constructor(e,n,d,p){this.h=e,this.l=n,this.m=d,this.g=p}getToken(){return Promise.resolve(new Sl(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const d=_=>{null!=_.error&&En("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const w=_.token!==this.A;return this.A=_.token,En("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?n(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>d(_))};const p=_=>{En("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?p(_):En("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dr("string"==typeof n.token),this.A=n.token,new Ca(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pu(l){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(l);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let d=0;d<l;d++)n[d]=Math.floor(256*Math.random());return n}class Ja{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let d="";for(;d.length<20;){const p=pu(40);for(let _=0;_<p.length;++_)d.length<20&&p[_]<n&&(d+=e.charAt(p[_]%e.length))}return d}}function Lr(l,e){return l<e?-1:l>e?1:0}function Gu(l,e,n){return l.length===e.length&&l.every((d,p)=>n(d,e[p]))}function Cl(l){return l+"\0"}class ts{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ln(Gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ln(Gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ln(Gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ln(Gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ts.fromMillis(Date.now())}static fromDate(e){return ts.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),d=Math.floor(1e6*(e-1e3*n));return new ts(n,d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lr(this.nanoseconds,e.nanoseconds):Lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Er(e)}static min(){return new Er(new ts(0,0))}static max(){return new Er(new ts(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gu{constructor(e,n,d){void 0===n?n=0:n>e.length&&Jn(),void 0===d?d=e.length-n:d>e.length-n&&Jn(),this.segments=e,this.offset=n,this.len=d}get length(){return this.len}isEqual(e){return 0===gu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gu?e.forEach(d=>{n.push(d)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,d=this.limit();n<d;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const d=Math.min(e.length,n.length);for(let p=0;p<d;p++){const _=e.get(p),w=n.get(p);if(_<w)return-1;if(_>w)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fr extends gu{construct(e,n,d){return new Fr(e,n,d)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const d of e){if(d.indexOf("//")>=0)throw new ln(Gt.INVALID_ARGUMENT,`Invalid segment (${d}). Paths must not contain // in them.`);n.push(...d.split("/").filter(p=>p.length>0))}return new Fr(n)}static emptyPath(){return new Fr([])}}const Ua=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends gu{construct(e,n,d){return new Ai(e,n,d)}static isValidIdentifier(e){return Ua.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ai(["__name__"])}static fromServerFormat(e){const n=[];let d="",p=0;const _=()=>{if(0===d.length)throw new ln(Gt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(d),d=""};let w=!1;for(;p<e.length;){const N=e[p];if("\\"===N){if(p+1===e.length)throw new ln(Gt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const oe=e[p+1];if("\\"!==oe&&"."!==oe&&"`"!==oe)throw new ln(Gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);d+=oe,p+=2}else"`"===N?(w=!w,p++):"."!==N||w?(d+=N,p++):(_(),p++)}if(_(),w)throw new ln(Gt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(n)}static emptyPath(){return new Ai([])}}class Pn{constructor(e){this.path=e}static fromPath(e){return new Pn(Fr.fromString(e))}static fromName(e){return new Pn(Fr.fromString(e).popFirst(5))}static empty(){return new Pn(Fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Fr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pn(new Fr(e.slice()))}}class ps{constructor(e,n,d,p){this.indexId=e,this.collectionGroup=n,this.fields=d,this.indexState=p}}function Ba(l){return l.fields.find(e=>2===e.kind)}function ra(l){return l.fields.filter(e=>2!==e.kind)}ps.UNKNOWN_ID=-1;class Li{constructor(e,n){this.fieldPath=e,this.kind=n}}class gc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gc(0,xo.min())}}function va(l,e){const n=l.toTimestamp().seconds,d=l.toTimestamp().nanoseconds+1,p=Er.fromTimestamp(1e9===d?new ts(n+1,0):new ts(n,d));return new xo(p,Pn.empty(),e)}function Go(l){return new xo(l.readTime,l.key,-1)}class xo{constructor(e,n,d){this.readTime=e,this.documentKey=n,this.largestBatchId=d}static min(){return new xo(Er.min(),Pn.empty(),-1)}static max(){return new xo(Er.max(),Pn.empty(),-1)}}function ll(l,e){let n=l.readTime.compareTo(e.readTime);return 0!==n?n:(n=Pn.comparator(l.documentKey,e.documentKey),0!==n?n:Lr(l.largestBatchId,e.largestBatchId))}const Mh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wo(l){return ys.apply(this,arguments)}function ys(){return ys=(0,Z.Z)(function*(l){if(l.code!==Gt.FAILED_PRECONDITION||l.message!==Mh)throw l;En("LocalStore","Unexpectedly lost primary lease")}),ys.apply(this,arguments)}class At{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Jn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new At((d,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(d,p)},this.catchCallback=_=>{this.wrapFailure(n,_).next(d,p)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof At?n:At.resolve(n)}catch(n){return At.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):At.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):At.reject(n)}static resolve(e){return new At((n,d)=>{n(e)})}static reject(e){return new At((n,d)=>{d(e)})}static waitFor(e){return new At((n,d)=>{let p=0,_=0,w=!1;e.forEach(N=>{++p,N.next(()=>{++_,w&&_===p&&n()},oe=>d(oe))}),w=!0,_===p&&n()})}static or(e){let n=At.resolve(!1);for(const d of e)n=n.next(p=>p?At.resolve(p):d());return n}static forEach(e,n){const d=[];return e.forEach((p,_)=>{d.push(n.call(this,p,_))}),this.waitFor(d)}static mapArray(e,n){return new At((d,p)=>{const _=e.length,w=new Array(_);let N=0;for(let oe=0;oe<_;oe++){const me=oe;n(e[me]).next(Ne=>{w[me]=Ne,++N,N===_&&d(w)},Ne=>p(Ne))}})}static doWhile(e,n){return new At((d,p)=>{const _=()=>{!0===e()?n().next(()=>{_()},p):d()};_()})}}class xl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Ls,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new eu(e,n.error)):this.P.resolve()},this.transaction.onerror=d=>{const p=ru(d.target.error);this.P.reject(new eu(e,p))}}static open(e,n,d,p){try{return new xl(n,e.transaction(p,d))}catch(_){throw new eu(n,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(En("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tu(n)}}class Fi{constructor(e,n,d){this.name=e,this.version=n,this.S=d,12.2===Fi.D((0,Et.z$)())&&Es("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return En("SimpleDb","Removing database:",e),vu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Et.hl)())return!1;if(Fi.N())return!0;const e=(0,Et.z$)(),n=Fi.D(e),d=0<n&&n<10,p=Fi.k(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||d||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),d=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(d)}static k(e){const n=e.match(/Android ([\d.]+)/i),d=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(d)}F(e){var n=this;return(0,Z.Z)(function*(){return n.db||(En("SimpleDb","Opening database:",n.name),n.db=yield new Promise((d,p)=>{const _=indexedDB.open(n.name,n.version);_.onsuccess=w=>{d(w.target.result)},_.onblocked=()=>{p(new eu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=w=>{const N=w.target.error;p("VersionError"===N.name?new ln(Gt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new ln(Gt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new eu(e,N))},_.onupgradeneeded=w=>{En("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',w.oldVersion),n.S.$(w.target.result,_.transaction,w.oldVersion,n.version).next(()=>{En("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=d=>n.B(d)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,d,p){var _=this;return(0,Z.Z)(function*(){const w="readonly"===n;let N=0;for(;;){++N;try{_.db=yield _.F(e);const oe=xl.open(_.db,e,w?"readonly":"readwrite",d),me=p(oe).next(Ne=>(oe.V(),Ne)).catch(Ne=>(oe.abort(Ne),At.reject(Ne))).toPromise();return me.catch(()=>{}),yield oe.v,me}catch(oe){const me=oe,Ne="FirebaseError"!==me.name&&N<3;if(En("SimpleDb","Transaction failed with error:",me.message,"Retrying:",Ne),_.close(),!Ne)return Promise.reject(me)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class $l{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return vu(this.U.delete())}}class eu extends ln{constructor(e,n){super(Gt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ss(l){return"IndexedDbTransactionError"===l.name}class tu{constructor(e){this.store=e}put(e,n){let d;return void 0!==n?(En("SimpleDb","PUT",this.store.name,e,n),d=this.store.put(n,e)):(En("SimpleDb","PUT",this.store.name,"<auto-key>",e),d=this.store.put(e)),vu(d)}add(e){return En("SimpleDb","ADD",this.store.name,e,e),vu(this.store.add(e))}get(e){return vu(this.store.get(e)).next(n=>(void 0===n&&(n=null),En("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return En("SimpleDb","DELETE",this.store.name,e),vu(this.store.delete(e))}count(){return En("SimpleDb","COUNT",this.store.name),vu(this.store.count())}W(e,n){const d=this.options(e,n);if(d.index||"function"!=typeof this.store.getAll){const p=this.cursor(d),_=[];return this.H(p,(w,N)=>{_.push(N)}).next(()=>_)}{const p=this.store.getAll(d.range);return new At((_,w)=>{p.onerror=N=>{w(N.target.error)},p.onsuccess=N=>{_(N.target.result)}})}}J(e,n){const d=this.store.getAll(e,null===n?void 0:n);return new At((p,_)=>{d.onerror=w=>{_(w.target.error)},d.onsuccess=w=>{p(w.target.result)}})}Y(e,n){En("SimpleDb","DELETE ALL",this.store.name);const d=this.options(e,n);d.X=!1;const p=this.cursor(d);return this.H(p,(_,w,N)=>N.delete())}Z(e,n){let d;n?d=e:(d={},n=e);const p=this.cursor(d);return this.H(p,n)}tt(e){const n=this.cursor({});return new At((d,p)=>{n.onerror=_=>{const w=ru(_.target.error);p(w)},n.onsuccess=_=>{const w=_.target.result;w?e(w.primaryKey,w.value).next(N=>{N?w.continue():d()}):d()}})}H(e,n){const d=[];return new At((p,_)=>{e.onerror=w=>{_(w.target.error)},e.onsuccess=w=>{const N=w.target.result;if(!N)return void p();const oe=new $l(N),me=n(N.primaryKey,N.value,oe);if(me instanceof At){const Ne=me.catch(st=>(oe.done(),At.reject(st)));d.push(Ne)}oe.isDone?p():null===oe.G?N.continue():N.continue(oe.G)}}).next(()=>At.waitFor(d))}options(e,n){let d;return void 0!==e&&("string"==typeof e?d=e:n=e),{index:d,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const d=this.store.index(e.index);return e.X?d.openKeyCursor(e.range,n):d.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function vu(l){return new At((e,n)=>{l.onsuccess=d=>{e(d.target.result)},l.onerror=d=>{const p=ru(d.target.error);n(p)}})}let nu=!1;function ru(l){const e=Fi.D((0,Et.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(l.message.indexOf(n)>=0){const d=new ln("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nu||(nu=!0,setTimeout(()=>{throw d},0)),d}}return l}class mc{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;En("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Z.Z)(function*(){n.task=null;try{En("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(d){ss(d)?En("IndexBackiller","Ignoring IndexedDB error during index backfill: ",d):yield Wo(d)}yield n.nt(6e4)}))}}class M{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,Z.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",d=>n.it(d,e))})()}it(e,n){const d=new Set;let p=n,_=!0;return At.doWhile(()=>!0===_&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!d.has(w))return En("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,p).next(N=>{p-=N,d.add(w)});_=!1})).next(()=>n-p)}rt(e,n,d){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(p=>this.localStore.localDocuments.getNextDocuments(e,n,p,d).next(_=>{const w=_.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(p,_)).next(N=>(En("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,n,N))).next(()=>w.size)}))}ot(e,n){let d=e;return n.changes.forEach((p,_)=>{const w=Go(_);ll(w,d)>0&&(d=w)}),new xo(d.readTime,d.documentKey,Math.max(n.batchId,e.largestBatchId))}}class O{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=d=>this.ut(d),this.ct=d=>n.writeSequenceNumber(d))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function D(l){let e=0;for(const n in l)Object.prototype.hasOwnProperty.call(l,n)&&e++;return e}function U(l,e){for(const n in l)Object.prototype.hasOwnProperty.call(l,n)&&e(n,l[n])}function X(l){for(const e in l)if(Object.prototype.hasOwnProperty.call(l,e))return!1;return!0}O.at=-1;class _e{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const d=this.comparator(e,n.key);if(0===d)return n.value;d<0?n=n.left:d>0&&(n=n.right)}return null}indexOf(e){let n=0,d=this.root;for(;!d.isEmpty();){const p=this.comparator(e,d.key);if(0===p)return n+d.left.size;p<0?d=d.left:(n+=d.left.size+1,d=d.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,d)=>(e(n,d),!1))}toString(){const e=[];return this.inorderTraversal((n,d)=>(e.push(`${n}:${d}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xe(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xe(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xe(this.root,e,this.comparator,!0)}}class Xe{constructor(e,n,d,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=n?d(e.key,n):1,n&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,d,p,_){this.key=e,this.value=n,this.color=d??Qe.RED,this.left=p??Qe.EMPTY,this.right=_??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,d,p,_){return new Qe(e??this.key,n??this.value,d??this.color,p??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,d){let p=this;const _=d(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,n,d),null):0===_?p.copy(null,n,null,null,null):p.copy(null,null,null,null,p.right.insert(e,n,d)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let d,p=this;if(n(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,n),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===n(e,p.key)){if(p.right.isEmpty())return Qe.EMPTY;d=p.right.min(),p=p.copy(d.key,d.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,n))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jn();const e=this.left.check();if(e!==this.right.check())throw Jn();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1,Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Jn()}get value(){throw Jn()}get color(){throw Jn()}get left(){throw Jn()}get right(){throw Jn()}copy(l,e,n,d,p){return this}insert(l,e,n){return new Qe(l,e)}remove(l,e){return this}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rt{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,d)=>(e(n),!1))}forEachInRange(e,n){const d=this.data.getIteratorFrom(e[0]);for(;d.hasNext();){const p=d.getNext();if(this.comparator(p.key,e[1])>=0)return;n(p.key)}}forEachWhile(e,n){let d;for(d=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();d.hasNext();)if(!e(d.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bn(this.data.getIterator())}getIteratorFrom(e){return new bn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(d=>{n=n.add(d)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),d=e.data.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=d.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class bn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vr(l){return l.hasNext()?l.getNext():void 0}class Gn{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Rt(Ai.comparator);for(const d of this.fields)n=n.add(d);for(const d of e)n=n.add(d);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gu(this.fields,e.fields,(n,d)=>n.isEqual(d))}}class Ui{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ui(n)}static fromUint8Array(e){const n=function(d){let p="";for(let _=0;_<d.length;++_)p+=String.fromCharCode(d[_]);return p}(e);return new Ui(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let d=0;d<e.length;d++)n[d]=e.charCodeAt(d);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ui.EMPTY_BYTE_STRING=new Ui("");const gn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(l){if(dr(!!l),"string"==typeof l){let e=0;const n=gn.exec(l);if(dr(!!n),n[1]){let p=n[1];p=(p+"000000000").substr(0,9),e=Number(p)}const d=new Date(l);return{seconds:Math.floor(d.getTime()/1e3),nanos:e}}return{seconds:Ei(l.seconds),nanos:Ei(l.nanos)}}function Ei(l){return"number"==typeof l?l:"string"==typeof l?Number(l):0}function ia(l){return"string"==typeof l?Ui.fromBase64String(l):Ui.fromUint8Array(l)}function Lo(l){var e,n;return"server_timestamp"===(null===(n=((null===(e=l?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Va(l){const e=l.mapValue.fields.__previous_value__;return Lo(e)?Va(e):e}function vo(l){const e=xa(l.mapValue.fields.__local_write_time__.timestampValue);return new ts(e.seconds,e.nanos)}class cl{constructor(e,n,d,p,_,w,N,oe){this.databaseId=e,this.appId=n,this.persistenceKey=d,this.host=p,this.ssl=_,this.forceLongPolling=w,this.autoDetectLongPolling=N,this.useFetchStreams=oe}}class Io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}function ya(l){return null==l}function Ia(l){return 0===l&&1/l==-1/0}function Hd(l){return"number"==typeof l&&Number.isInteger(l)&&!Ia(l)&&l<=Number.MAX_SAFE_INTEGER&&l>=Number.MIN_SAFE_INTEGER}const iu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yu={nullValue:"NULL_VALUE"};function zu(l){return"nullValue"in l?0:"booleanValue"in l?1:"integerValue"in l||"doubleValue"in l?2:"timestampValue"in l?3:"stringValue"in l?5:"bytesValue"in l?6:"referenceValue"in l?7:"geoPointValue"in l?8:"arrayValue"in l?9:"mapValue"in l?Lo(l)?4:Ir(l)?9007199254740991:10:Jn()}function $i(l,e){if(l===e)return!0;const n=zu(l);if(n!==zu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return l.booleanValue===e.booleanValue;case 4:return vo(l).isEqual(vo(e));case 3:return function(d,p){if("string"==typeof d.timestampValue&&"string"==typeof p.timestampValue&&d.timestampValue.length===p.timestampValue.length)return d.timestampValue===p.timestampValue;const _=xa(d.timestampValue),w=xa(p.timestampValue);return _.seconds===w.seconds&&_.nanos===w.nanos}(l,e);case 5:return l.stringValue===e.stringValue;case 6:return p=e,ia(l.bytesValue).isEqual(ia(p.bytesValue));case 7:return l.referenceValue===e.referenceValue;case 8:return function(d,p){return Ei(d.geoPointValue.latitude)===Ei(p.geoPointValue.latitude)&&Ei(d.geoPointValue.longitude)===Ei(p.geoPointValue.longitude)}(l,e);case 2:return function(d,p){if("integerValue"in d&&"integerValue"in p)return Ei(d.integerValue)===Ei(p.integerValue);if("doubleValue"in d&&"doubleValue"in p){const _=Ei(d.doubleValue),w=Ei(p.doubleValue);return _===w?Ia(_)===Ia(w):isNaN(_)&&isNaN(w)}return!1}(l,e);case 9:return Gu(l.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:return function(d,p){const _=d.mapValue.fields||{},w=p.mapValue.fields||{};if(D(_)!==D(w))return!1;for(const N in _)if(_.hasOwnProperty(N)&&(void 0===w[N]||!$i(_[N],w[N])))return!1;return!0}(l,e);default:return Jn()}var p}function qu(l,e){return void 0!==(l.values||[]).find(n=>$i(n,e))}function G(l,e){if(l===e)return 0;const n=zu(l),d=zu(e);if(n!==d)return Lr(n,d);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lr(l.booleanValue,e.booleanValue);case 2:return function(p,_){const w=Ei(p.integerValue||p.doubleValue),N=Ei(_.integerValue||_.doubleValue);return w<N?-1:w>N?1:w===N?0:isNaN(w)?isNaN(N)?0:-1:1}(l,e);case 3:return te(l.timestampValue,e.timestampValue);case 4:return te(vo(l),vo(e));case 5:return Lr(l.stringValue,e.stringValue);case 6:return function(p,_){const w=ia(p),N=ia(_);return w.compareTo(N)}(l.bytesValue,e.bytesValue);case 7:return function(p,_){const w=p.split("/"),N=_.split("/");for(let oe=0;oe<w.length&&oe<N.length;oe++){const me=Lr(w[oe],N[oe]);if(0!==me)return me}return Lr(w.length,N.length)}(l.referenceValue,e.referenceValue);case 8:return function(p,_){const w=Lr(Ei(p.latitude),Ei(_.latitude));return 0!==w?w:Lr(Ei(p.longitude),Ei(_.longitude))}(l.geoPointValue,e.geoPointValue);case 9:return function(p,_){const w=p.values||[],N=_.values||[];for(let oe=0;oe<w.length&&oe<N.length;++oe){const me=G(w[oe],N[oe]);if(me)return me}return Lr(w.length,N.length)}(l.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===iu.mapValue&&_===iu.mapValue)return 0;if(p===iu.mapValue)return 1;if(_===iu.mapValue)return-1;const w=p.fields||{},N=Object.keys(w),oe=_.fields||{},me=Object.keys(oe);N.sort(),me.sort();for(let Ne=0;Ne<N.length&&Ne<me.length;++Ne){const st=Lr(N[Ne],me[Ne]);if(0!==st)return st;const Lt=G(w[N[Ne]],oe[me[Ne]]);if(0!==Lt)return Lt}return Lr(N.length,me.length)}(l.mapValue,e.mapValue);default:throw Jn()}}function te(l,e){if("string"==typeof l&&"string"==typeof e&&l.length===e.length)return Lr(l,e);const n=xa(l),d=xa(e),p=Lr(n.seconds,d.seconds);return 0!==p?p:Lr(n.nanos,d.nanos)}function be(l){return tt(l)}function tt(l){return"nullValue"in l?"null":"booleanValue"in l?""+l.booleanValue:"integerValue"in l?""+l.integerValue:"doubleValue"in l?""+l.doubleValue:"timestampValue"in l?function(d){const p=xa(d);return`time(${p.seconds},${p.nanos})`}(l.timestampValue):"stringValue"in l?l.stringValue:"bytesValue"in l?ia(l.bytesValue).toBase64():"referenceValue"in l?Pn.fromName(l.referenceValue).toString():"geoPointValue"in l?`geo(${(e=l.geoPointValue).latitude},${e.longitude})`:"arrayValue"in l?function(d){let p="[",_=!0;for(const w of d.values||[])_?_=!1:p+=",",p+=tt(w);return p+"]"}(l.arrayValue):"mapValue"in l?function(d){const p=Object.keys(d.fields||{}).sort();let _="{",w=!0;for(const N of p)w?w=!1:_+=",",_+=`${N}:${tt(d.fields[N])}`;return _+"}"}(l.mapValue):Jn();var e}function Ct(l,e){return{referenceValue:`projects/${l.projectId}/databases/${l.database}/documents/${e.path.canonicalString()}`}}function Vt(l){return!!l&&"integerValue"in l}function vn(l){return!!l&&"arrayValue"in l}function Wn(l){return!!l&&"nullValue"in l}function xr(l){return!!l&&"doubleValue"in l&&isNaN(Number(l.doubleValue))}function Pr(l){return!!l&&"mapValue"in l}function ii(l){if(l.geoPointValue)return{geoPointValue:Object.assign({},l.geoPointValue)};if(l.timestampValue&&"object"==typeof l.timestampValue)return{timestampValue:Object.assign({},l.timestampValue)};if(l.mapValue){const e={mapValue:{fields:{}}};return U(l.mapValue.fields,(n,d)=>e.mapValue.fields[n]=ii(d)),e}if(l.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(l.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ii(l.arrayValue.values[n]);return e}return Object.assign({},l)}function Ir(l){return"__max__"===(((l.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hs(l){return"nullValue"in l?yu:"booleanValue"in l?{booleanValue:!1}:"integerValue"in l||"doubleValue"in l?{doubleValue:NaN}:"timestampValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in l?{stringValue:""}:"bytesValue"in l?{bytesValue:""}:"referenceValue"in l?Ct(Io.empty(),Pn.empty()):"geoPointValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in l?{arrayValue:{}}:"mapValue"in l?{mapValue:{}}:Jn()}function zo(l){return"nullValue"in l?{booleanValue:!1}:"booleanValue"in l?{doubleValue:NaN}:"integerValue"in l||"doubleValue"in l?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in l?{stringValue:""}:"stringValue"in l?{bytesValue:""}:"bytesValue"in l?Ct(Io.empty(),Pn.empty()):"referenceValue"in l?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in l?{arrayValue:{}}:"arrayValue"in l?{mapValue:{}}:"mapValue"in l?iu:Jn()}function Il(l,e){const n=G(l.value,e.value);return 0!==n?n:l.inclusive&&!e.inclusive?-1:!l.inclusive&&e.inclusive?1:0}function dl(l,e){const n=G(l.value,e.value);return 0!==n?n:l.inclusive&&!e.inclusive?1:!l.inclusive&&e.inclusive?-1:0}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let d=0;d<e.length-1;++d)if(n=(n.mapValue.fields||{})[e.get(d)],!Pr(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ii(n)}setAll(e){let n=Ai.emptyPath(),d={},p=[];e.forEach((w,N)=>{if(!n.isImmediateParentOf(N)){const oe=this.getFieldsMap(n);this.applyChanges(oe,d,p),d={},p=[],n=N.popLast()}w?d[N.lastSegment()]=ii(w):p.push(N.lastSegment())});const _=this.getFieldsMap(n);this.applyChanges(_,d,p)}delete(e){const n=this.field(e.popLast());Pr(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let d=0;d<e.length;++d){let p=n.mapValue.fields[e.get(d)];Pr(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},n.mapValue.fields[e.get(d)]=p),n=p}return n.mapValue.fields}applyChanges(e,n,d){U(n,(p,_)=>e[p]=_);for(const p of d)delete e[p]}clone(){return new As(ii(this.value))}}function Gl(l){const e=[];return U(l.fields,(n,d)=>{const p=new Ai([n]);if(Pr(d)){const _=Gl(d.mapValue).fields;if(0===_.length)e.push(p);else for(const w of _)e.push(p.child(w))}else e.push(p)}),new Gn(e)}class Gi{constructor(e,n,d,p,_,w){this.key=e,this.documentType=n,this.version=d,this.readTime=p,this.data=_,this.documentState=w}static newInvalidDocument(e){return new Gi(e,0,Er.min(),Er.min(),As.empty(),0)}static newFoundDocument(e,n,d){return new Gi(e,1,n,Er.min(),d,0)}static newNoDocument(e,n){return new Gi(e,2,n,Er.min(),As.empty(),0)}static newUnknownDocument(e,n){return new Gi(e,3,n,Er.min(),As.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dl{constructor(e,n=null,d=[],p=[],_=null,w=null,N=null){this.path=e,this.collectionGroup=n,this.orderBy=d,this.filters=p,this.limit=_,this.startAt=w,this.endAt=N,this.ht=null}}function Pu(l,e=null,n=[],d=[],p=null,_=null,w=null){return new Dl(l,e,n,d,p,_,w)}function Ha(l){const e=$n(l);if(null===e.ht){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(d=>{return(p=d).field.canonicalString()+p.op.toString()+be(p.value);var p}).join(","),n+="|ob:",n+=e.orderBy.map(d=>{return(p=d).field.canonicalString()+p.dir;var p}).join(","),ya(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(d=>be(d)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(d=>be(d)).join(",")),e.ht=n}return e.ht}function Bc(l,e){if(l.limit!==e.limit||l.orderBy.length!==e.orderBy.length)return!1;for(let p=0;p<l.orderBy.length;p++)if(!od(l.orderBy[p],e.orderBy[p]))return!1;if(l.filters.length!==e.filters.length)return!1;for(let p=0;p<l.filters.length;p++)if((n=l.filters[p]).op!==(d=e.filters[p]).op||!n.field.isEqual(d.field)||!$i(n.value,d.value))return!1;var n,d;return l.collectionGroup===e.collectionGroup&&!!l.path.isEqual(e.path)&&!!Pf(l.startAt,e.startAt)&&Pf(l.endAt,e.endAt)}function Ph(l){return Pn.isDocumentKey(l.path)&&null===l.collectionGroup&&0===l.filters.length}function Gd(l,e){return l.filters.filter(n=>n instanceof os&&n.field.isEqual(e))}function Mf(l,e,n){let d=yu,p=!0;for(const _ of Gd(l,e)){let w=yu,N=!0;switch(_.op){case"<":case"<=":w=Hs(_.value);break;case"==":case"in":case">=":w=_.value;break;case">":w=_.value,N=!1;break;case"!=":case"not-in":w=yu}Il({value:d,inclusive:p},{value:w,inclusive:N})<0&&(d=w,p=N)}if(null!==n)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=n.position[_];Il({value:d,inclusive:p},{value:w,inclusive:n.inclusive})<0&&(d=w,p=n.inclusive);break}return{value:d,inclusive:p}}function Al(l,e,n){let d=iu,p=!0;for(const _ of Gd(l,e)){let w=iu,N=!0;switch(_.op){case">=":case">":w=zo(_.value),N=!1;break;case"==":case"in":case"<=":w=_.value;break;case"<":w=_.value,N=!1;break;case"!=":case"not-in":w=iu}dl({value:d,inclusive:p},{value:w,inclusive:N})>0&&(d=w,p=N)}if(null!==n)for(let _=0;_<l.orderBy.length;++_)if(l.orderBy[_].field.isEqual(e)){const w=n.position[_];dl({value:d,inclusive:p},{value:w,inclusive:n.inclusive})>0&&(d=w,p=n.inclusive);break}return{value:d,inclusive:p}}class os extends class{}{constructor(e,n,d){super(),this.field=e,this.op=n,this.value=d}static create(e,n,d){return e.isKeyField()?"in"===n||"not-in"===n?this.lt(e,n,d):new id(e,n,d):"array-contains"===n?new sd(e,d):"in"===n?new Wd(e,d):"not-in"===n?new Oh(e,d):"array-contains-any"===n?new Lp(e,d):new os(e,n,d)}static lt(e,n,d){return"in"===n?new $a(e,d):new Hv(e,d)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.ft(G(n,this.value)):null!==n&&zu(this.value)===zu(n)&&this.ft(G(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class id extends os{constructor(e,n,d){super(e,n,d),this.key=Pn.fromName(d.referenceValue)}matches(e){const n=Pn.comparator(e.key,this.key);return this.ft(n)}}class $a extends os{constructor(e,n){super(e,"in",n),this.keys=ws(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Hv extends os{constructor(e,n){super(e,"not-in",n),this.keys=ws(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ws(l,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(d=>Pn.fromName(d.referenceValue))}class sd extends os{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vn(n)&&qu(n.arrayValue,this.value)}}class Wd extends os{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&qu(this.value.arrayValue,n)}}class Oh extends os{constructor(e,n){super(e,"not-in",n)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!qu(this.value.arrayValue,n)}}class Lp extends os{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vn(n)||!n.arrayValue.values)&&n.arrayValue.values.some(d=>qu(this.value.arrayValue,d))}}class Ou{constructor(e,n){this.position=e,this.inclusive=n}}class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function od(l,e){return l.dir===e.dir&&l.field.isEqual(e.field)}function Fp(l,e,n){let d=0;for(let p=0;p<l.position.length;p++){const _=e[p],w=l.position[p];if(d=_.field.isKeyField()?Pn.comparator(Pn.fromName(w.referenceValue),n.key):G(w,n.data.field(_.field)),"desc"===_.dir&&(d*=-1),0!==d)break}return d}function Pf(l,e){if(null===l)return null===e;if(null===e||l.inclusive!==e.inclusive||l.position.length!==e.position.length)return!1;for(let n=0;n<l.position.length;n++)if(!$i(l.position[n],e.position[n]))return!1;return!0}class yc{constructor(e,n=null,d=[],p=[],_=null,w="F",N=null,oe=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=d,this.filters=p,this.limit=_,this.limitType=w,this.startAt=N,this.endAt=oe,this._t=null,this.wt=null}}function ad(l,e,n,d,p,_,w,N){return new yc(l,e,n,d,p,_,w,N)}function Wl(l){return new yc(l)}function zd(l){return 0===l.filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())}function Rh(l){return l.explicitOrderBy.length>0?l.explicitOrderBy[0].field:null}function Nh(l){for(const e of l.filters)if(e.dt())return e.field;return null}function hl(l){return null!==l.collectionGroup}function Ku(l){const e=$n(l);if(null===e._t){e._t=[];const n=Nh(e),d=Rh(e);if(null!==n&&null===d)n.isKeyField()||e._t.push(new vc(n)),e._t.push(new vc(Ai.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e._t.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new vc(Ai.keyField(),_))}}}return e._t}function Da(l){const e=$n(l);if(!e.wt)if("F"===e.limitType)e.wt=Pu(e.path,e.collectionGroup,Ku(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const _ of Ku(e))n.push(new vc(_.field,"desc"===_.dir?"asc":"desc"));const d=e.endAt?new Ou(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new Ou(e.startAt.position,e.startAt.inclusive):null;e.wt=Pu(e.path,e.collectionGroup,n,e.filters,e.limit,d,p)}return e.wt}function Vc(l,e,n){return new yc(l.path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),e,n,l.startAt,l.endAt)}function ud(l,e){return Bc(Da(l),Da(e))&&l.limitType===e.limitType}function jp(l){return`${Ha(Da(l))}|lt:${l.limitType}`}function _u(l){return`Query(target=${function $d(l){let e=l.path.canonicalString();return null!==l.collectionGroup&&(e+=" collectionGroup="+l.collectionGroup),l.filters.length>0&&(e+=`, filters: [${l.filters.map(n=>{return`${(d=n).field.canonicalString()} ${d.op} ${be(d.value)}`;var d}).join(", ")}]`),ya(l.limit)||(e+=", limit: "+l.limit),l.orderBy.length>0&&(e+=`, orderBy: [${l.orderBy.map(n=>{return`${(d=n).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),l.startAt&&(e+=", startAt: ",e+=l.startAt.inclusive?"b:":"a:",e+=l.startAt.position.map(n=>be(n)).join(",")),l.endAt&&(e+=", endAt: ",e+=l.endAt.inclusive?"a:":"b:",e+=l.endAt.position.map(n=>be(n)).join(",")),`Target(${e})`}(Da(l))}; limitType=${l.limitType})`}function _c(l,e){return e.isFoundDocument()&&function(n,d){const p=d.key.path;return null!==n.collectionGroup?d.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(p):Pn.isDocumentKey(n.path)?n.path.isEqual(p):n.path.isImmediateParentOf(p)}(l,e)&&function(n,d){for(const p of n.explicitOrderBy)if(!p.field.isKeyField()&&null===d.data.field(p.field))return!1;return!0}(l,e)&&function(n,d){for(const p of n.filters)if(!p.matches(d))return!1;return!0}(l,e)&&(d=e,!((n=l).startAt&&!function(p,_,w){const N=Fp(p,_,w);return p.inclusive?N<=0:N<0}(n.startAt,Ku(n),d)||n.endAt&&!function(p,_,w){const N=Fp(p,_,w);return p.inclusive?N>=0:N>0}(n.endAt,Ku(n),d)));var n,d}function ld(l){return l.collectionGroup||(l.path.length%2==1?l.path.lastSegment():l.path.get(l.path.length-2))}function Of(l){return(e,n)=>{let d=!1;for(const p of Ku(l)){const _=Zu(p,e,n);if(0!==_)return _;d=d||p.field.isKeyField()}return 0}}function Zu(l,e,n){const d=l.field.isKeyField()?Pn.comparator(e.key,n.key):function(p,_,w){const N=_.data.field(p),oe=w.data.field(p);return null!==N&&null!==oe?G(N,oe):Jn()}(l.field,e,n);switch(l.dir){case"asc":return d;case"desc":return-1*d;default:return Jn()}}function Rf(l,e){if(l.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ia(e)?"-0":e}}function Up(l){return{integerValue:""+l}}function Lh(l,e){return Hd(e)?Up(e):Rf(l,e)}class Hc{constructor(){this._=void 0}}function Bp(l,e,n){return l instanceof Ru?function(d,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(n,e):l instanceof kl?pl(l,e):l instanceof bu?qd(l,e):function(d,p){const _=fl(d,p),w=Nf(_)+Nf(d.yt);return Vt(_)&&Vt(d.yt)?Up(w):Rf(d.It,w)}(l,e)}function hm(l,e,n){return l instanceof kl?pl(l,e):l instanceof bu?qd(l,e):n}function fl(l,e){return l instanceof zl?Vt(n=e)||(d=n)&&"doubleValue"in d?e:{integerValue:0}:null;var d,n}class Ru extends Hc{}class kl extends Hc{constructor(e){super(),this.elements=e}}function pl(l,e){const n=cd(e);for(const d of l.elements)n.some(p=>$i(p,d))||n.push(d);return{arrayValue:{values:n}}}class bu extends Hc{constructor(e){super(),this.elements=e}}function qd(l,e){let n=cd(e);for(const d of l.elements)n=n.filter(p=>!$i(p,d));return{arrayValue:{values:n}}}class zl extends Hc{constructor(e,n){super(),this.It=e,this.yt=n}}function Nf(l){return Ei(l.integerValue||l.doubleValue)}function cd(l){return vn(l)&&l.arrayValue.values?l.arrayValue.values.slice():[]}class gl{constructor(e,n){this.field=e,this.transform=n}}class Kd{constructor(e,n){this.version=e,this.transformResults=n}}class ks{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(l,e){return void 0!==l.updateTime?e.isFoundDocument()&&e.version.isEqual(l.updateTime):void 0===l.exists||l.exists===e.isFoundDocument()}class Lf{}function Fh(l,e){if(!l.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return l.isNoDocument()?new Ms(l.key,ks.none()):new Gc(l.key,l.data,ks.none());{const n=l.data,d=As.empty();let p=new Rt(Ai.comparator);for(let _ of e.fields)if(!p.has(_)){let w=n.field(_);null===w&&_.length>1&&(_=_.popLast(),w=n.field(_)),null===w?d.delete(_):d.set(_,w),p=p.add(_)}return new Tu(l.key,d,new Gn(p.toArray()),ks.none())}}function jh(l,e,n){l instanceof Gc?function(d,p,_){const w=d.value.clone(),N=ql(d.fieldTransforms,p,_.transformResults);w.setAll(N),p.convertToFoundDocument(_.version,w).setHasCommittedMutations()}(l,e,n):l instanceof Tu?function(d,p,_){if(!Zd(d.precondition,p))return void p.convertToUnknownDocument(_.version);const w=ql(d.fieldTransforms,p,_.transformResults),N=p.data;N.setAll(dd(d)),N.setAll(w),p.convertToFoundDocument(_.version,N).setHasCommittedMutations()}(l,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function $c(l,e,n,d){return l instanceof Gc?function(p,_,w,N){if(!Zd(p.precondition,_))return w;const oe=p.value.clone(),me=Ff(p.fieldTransforms,N,_);return oe.setAll(me),_.convertToFoundDocument(_.version,oe).setHasLocalMutations(),null}(l,e,n,d):l instanceof Tu?function(p,_,w,N){if(!Zd(p.precondition,_))return w;const oe=Ff(p.fieldTransforms,N,_),me=_.data;return me.setAll(dd(p)),me.setAll(oe),_.convertToFoundDocument(_.version,me).setHasLocalMutations(),null===w?null:w.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(Ne=>Ne.field))}(l,e,n,d):(w=n,Zd(l.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):w);var _,w}function Uh(l,e){let n=null;for(const d of l.fieldTransforms){const p=e.data.field(d.field),_=fl(d.transform,p||null);null!=_&&(null===n&&(n=As.empty()),n.set(d.field,_))}return n||null}function Bh(l,e){return l.type===e.type&&!!l.key.isEqual(e.key)&&!!l.precondition.isEqual(e.precondition)&&(d=e.fieldTransforms,!!(void 0===(n=l.fieldTransforms)&&void 0===d||n&&d&&Gu(n,d,(p,_)=>function Vp(l,e){return l.field.isEqual(e.field)&&(d=e.transform,(n=l.transform)instanceof kl&&d instanceof kl||n instanceof bu&&d instanceof bu?Gu(n.elements,d.elements,$i):n instanceof zl&&d instanceof zl?$i(n.yt,d.yt):n instanceof Ru&&d instanceof Ru);var n,d}(p,_))))&&(0===l.type?l.value.isEqual(e.value):1!==l.type||l.data.isEqual(e.data)&&l.fieldMask.isEqual(e.fieldMask));var n,d}class Gc extends Lf{constructor(e,n,d,p=[]){super(),this.key=e,this.value=n,this.precondition=d,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class Tu extends Lf{constructor(e,n,d,p,_=[]){super(),this.key=e,this.data=n,this.fieldMask=d,this.precondition=p,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function dd(l){const e=new Map;return l.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const d=l.data.field(n);e.set(n,d)}}),e}function ql(l,e,n){const d=new Map;dr(l.length===n.length);for(let p=0;p<n.length;p++){const _=l[p],w=_.transform,N=e.data.field(_.field);d.set(_.field,hm(w,N,n[p]))}return d}function Ff(l,e,n){const d=new Map;for(const p of l){const _=p.transform,w=n.data.field(p.field);d.set(p.field,Bp(_,w,e))}return d}class Ms extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wc extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hp{constructor(e){this.count=e}}var yo,qi;function jf(l){switch(l){default:return Jn();case Gt.CANCELLED:case Gt.UNKNOWN:case Gt.DEADLINE_EXCEEDED:case Gt.RESOURCE_EXHAUSTED:case Gt.INTERNAL:case Gt.UNAVAILABLE:case Gt.UNAUTHENTICATED:return!1;case Gt.INVALID_ARGUMENT:case Gt.NOT_FOUND:case Gt.ALREADY_EXISTS:case Gt.PERMISSION_DENIED:case Gt.FAILED_PRECONDITION:case Gt.ABORTED:case Gt.OUT_OF_RANGE:case Gt.UNIMPLEMENTED:case Gt.DATA_LOSS:return!0}}function $p(l){if(void 0===l)return Es("GRPC error has no .code"),Gt.UNKNOWN;switch(l){case yo.OK:return Gt.OK;case yo.CANCELLED:return Gt.CANCELLED;case yo.UNKNOWN:return Gt.UNKNOWN;case yo.DEADLINE_EXCEEDED:return Gt.DEADLINE_EXCEEDED;case yo.RESOURCE_EXHAUSTED:return Gt.RESOURCE_EXHAUSTED;case yo.INTERNAL:return Gt.INTERNAL;case yo.UNAVAILABLE:return Gt.UNAVAILABLE;case yo.UNAUTHENTICATED:return Gt.UNAUTHENTICATED;case yo.INVALID_ARGUMENT:return Gt.INVALID_ARGUMENT;case yo.NOT_FOUND:return Gt.NOT_FOUND;case yo.ALREADY_EXISTS:return Gt.ALREADY_EXISTS;case yo.PERMISSION_DENIED:return Gt.PERMISSION_DENIED;case yo.FAILED_PRECONDITION:return Gt.FAILED_PRECONDITION;case yo.ABORTED:return Gt.ABORTED;case yo.OUT_OF_RANGE:return Gt.OUT_OF_RANGE;case yo.UNIMPLEMENTED:return Gt.UNIMPLEMENTED;case yo.DATA_LOSS:return Gt.DATA_LOSS;default:return Jn()}}(qi=yo||(yo={}))[qi.OK=0]="OK",qi[qi.CANCELLED=1]="CANCELLED",qi[qi.UNKNOWN=2]="UNKNOWN",qi[qi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qi[qi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qi[qi.NOT_FOUND=5]="NOT_FOUND",qi[qi.ALREADY_EXISTS=6]="ALREADY_EXISTS",qi[qi.PERMISSION_DENIED=7]="PERMISSION_DENIED",qi[qi.UNAUTHENTICATED=16]="UNAUTHENTICATED",qi[qi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qi[qi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qi[qi.ABORTED=10]="ABORTED",qi[qi.OUT_OF_RANGE=11]="OUT_OF_RANGE",qi[qi.UNIMPLEMENTED=12]="UNIMPLEMENTED",qi[qi.INTERNAL=13]="INTERNAL",qi[qi.UNAVAILABLE=14]="UNAVAILABLE",qi[qi.DATA_LOSS=15]="DATA_LOSS";class Kl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),d=this.inner[n];if(void 0!==d)for(const[p,_]of d)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,n){const d=this.mapKeyFn(e),p=this.inner[d];if(void 0===p)return this.inner[d]=[[e,n]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,n]);p.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),d=this.inner[n];if(void 0===d)return!1;for(let p=0;p<d.length;p++)if(this.equalsFn(d[p][0],e))return 1===d.length?delete this.inner[n]:d.splice(p,1),this.innerSize--,!0;return!1}forEach(e){U(this.inner,(n,d)=>{for(const[p,_]of d)e(p,_)})}isEmpty(){return X(this.inner)}size(){return this.innerSize}}const Vh=new _e(Pn.comparator);function su(){return Vh}const Yd=new _e(Pn.comparator);function Qd(...l){let e=Yd;for(const n of l)e=e.insert(n.key,n);return e}function bc(l){let e=Yd;return l.forEach((n,d)=>e=e.insert(n,d.overlayedDocument)),e}function Nu(){return Tc()}function Xd(){return Tc()}function Tc(){return new Kl(l=>l.toString(),(l,e)=>l.isEqual(e))}const Gp=new _e(Pn.comparator),hd=new Rt(Pn.comparator);function Kr(...l){let e=hd;for(const n of l)e=e.add(n);return e}const Jd=new Rt(Lr);function Yu(){return Jd}class eh{constructor(e,n,d,p,_){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=d,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,n,d){const p=new Map;return p.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,n,d)),new eh(Er.min(),p,Yu(),su(),Kr())}}class Zl{constructor(e,n,d,p,_){this.resumeToken=e,this.current=n,this.addedDocuments=d,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,n,d){return new Zl(d,n,Kr(),Kr(),Kr())}}class Ec{constructor(e,n,d,p){this.Tt=e,this.removedTargetIds=n,this.key=d,this.Et=p}}class Aa{constructor(e,n){this.targetId=e,this.At=n}}class Yl{constructor(e,n,d=Ui.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=n,this.resumeToken=d,this.cause=p}}class ml{constructor(){this.Rt=0,this.bt=wc(),this.Pt=Ui.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Kr(),n=Kr(),d=Kr();return this.bt.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:n=n.add(p);break;case 1:d=d.add(p);break;default:Jn()}}),new Zl(this.Pt,this.vt,e,n,d)}Nt(){this.Vt=!1,this.bt=wc()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Wp{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=su(),this.qt=Sc(),this.Kt=new Rt(Lr)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const d=this.zt(n);switch(e.state){case 0:this.Ht(n)&&d.Ct(e.resumeToken);break;case 1:d.Ft(),d.St||d.Nt(),d.Ct(e.resumeToken);break;case 2:d.Ft(),d.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(d.$t(),d.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),d.Ct(e.resumeToken));break;default:Jn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((d,p)=>{this.Ht(p)&&n(p)})}Yt(e){const n=e.targetId,d=e.At.count,p=this.Xt(n);if(p){const _=p.target;if(Ph(_))if(0===d){const w=new Pn(_.path);this.jt(n,w,Gi.newNoDocument(w,Er.min()))}else dr(1===d);else this.Zt(n)!==d&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((_,w)=>{const N=this.Xt(w);if(N){if(_.current&&Ph(N.target)){const oe=new Pn(N.target.path);null!==this.Ut.get(oe)||this.ee(w,oe)||this.jt(w,oe,Gi.newNoDocument(oe,e))}_.Dt&&(n.set(w,_.xt()),_.Nt())}});let d=Kr();this.qt.forEach((_,w)=>{let N=!0;w.forEachWhile(oe=>{const me=this.Xt(oe);return!me||2===me.purpose||(N=!1,!1)}),N&&(d=d.add(_))}),this.Ut.forEach((_,w)=>w.setReadTime(e));const p=new eh(e,n,this.Kt,this.Ut,d);return this.Ut=su(),this.qt=Sc(),this.Kt=new Rt(Lr),p}Qt(e,n){if(!this.Ht(e))return;const d=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,d),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,d){if(!this.Ht(e))return;const p=this.zt(e);this.ee(e,n)?p.kt(n,1):p.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),d&&(this.Ut=this.Ut.insert(n,d))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new ml,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Rt(Lr),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=null!==this.Xt(e);return n||En("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new ml),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function Sc(){return new _e(Pn.comparator)}function wc(){return new _e(Pn.comparator)}const zp={asc:"ASCENDING",desc:"DESCENDING"},fd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class th{constructor(e,n){this.databaseId=e,this.gt=n}}function sa(l,e){return l.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hh(l,e){return l.gt?e.toBase64():e.toUint8Array()}function pd(l,e){return sa(l,e.toTimestamp())}function oa(l){return dr(!!l),Er.fromTimestamp(function(e){const n=xa(e);return new ts(n.seconds,n.nanos)}(l))}function nh(l,e){return(n=l,new Fr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function rh(l){const e=Fr.fromString(l);return dr(Ar(e)),e}function ao(l,e){return nh(l.databaseId,e.path)}function Lu(l,e){const n=rh(e);if(n.get(1)!==l.databaseId.projectId)throw new ln(Gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+l.databaseId.projectId);if(n.get(3)!==l.databaseId.database)throw new ln(Gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+l.databaseId.database);return new Pn(Ql(n))}function gd(l,e){return nh(l.databaseId,e)}function Uf(l){const e=rh(l);return 4===e.length?Fr.emptyPath():Ql(e)}function Eu(l){return new Fr(["projects",l.databaseId.projectId,"databases",l.databaseId.database]).canonicalString()}function Ql(l){return dr(l.length>4&&"documents"===l.get(4)),l.popFirst(5)}function $h(l,e,n){return{name:ao(l,e),fields:n.value.mapValue.fields}}function md(l,e,n){const d=Lu(l,e.name),p=oa(e.updateTime),_=new As({mapValue:{fields:e.fields}}),w=Gi.newFoundDocument(d,p,_);return n&&w.setHasCommittedMutations(),n?w.setHasCommittedMutations():w}function Ml(l,e){let n;if(e instanceof Gc)n={update:$h(l,e.key,e.value)};else if(e instanceof Ms)n={delete:ao(l,e.key)};else if(e instanceof Tu)n={update:$h(l,e.key,e.data),updateMask:Rr(e.fieldMask)};else{if(!(e instanceof Wc))return Jn();n={verify:ao(l,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(d=>function(p,_){const w=_.transform;if(w instanceof Ru)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof kl)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof bu)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof zl)return{fieldPath:_.field.canonicalString(),increment:w.yt};throw Jn()}(0,d))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:pd(l,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Jn()),n;var p}function Gh(l,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?ks.updateTime(oa(p.updateTime)):void 0!==p.exists?ks.exists(p.exists):ks.none():ks.none(),d=e.updateTransforms?e.updateTransforms.map(p=>function(_,w){let N=null;"setToServerValue"in w?(dr("REQUEST_TIME"===w.setToServerValue),N=new Ru):"appendMissingElements"in w?N=new kl(w.appendMissingElements.values||[]):"removeAllFromArray"in w?N=new bu(w.removeAllFromArray.values||[]):"increment"in w?N=new zl(_,w.increment):Jn();const oe=Ai.fromServerFormat(w.fieldPath);return new gl(oe,N)}(l,p)):[];var p;if(e.update){const p=Lu(l,e.update.name),_=new As({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Gn((e.updateMask.fieldPaths||[]).map(me=>Ai.fromServerFormat(me)));return new Tu(p,_,w,n,d)}return new Gc(p,_,n,d)}if(e.delete){const p=Lu(l,e.delete);return new Ms(p,n)}if(e.verify){const p=Lu(l,e.verify);return new Wc(p,n)}return Jn()}function qp(l,e){return{documents:[gd(l,e.path)]}}function C(l,e){const n={structuredQuery:{}},d=e.path;null!==e.collectionGroup?(n.parent=gd(l,d),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=gd(l,d.popLast()),n.structuredQuery.from=[{collectionId:d.lastSegment()}]);const p=function(oe){if(0===oe.length)return;const me=oe.map(Ne=>function(st){if("=="===st.op){if(xr(st.value))return{unaryFilter:{field:gt(st.field),op:"IS_NAN"}};if(Wn(st.value))return{unaryFilter:{field:gt(st.field),op:"IS_NULL"}}}else if("!="===st.op){if(xr(st.value))return{unaryFilter:{field:gt(st.field),op:"IS_NOT_NAN"}};if(Wn(st.value))return{unaryFilter:{field:gt(st.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gt(st.field),op:De(st.op),value:st.value}}}(Ne));return 1===me.length?me[0]:{compositeFilter:{op:"AND",filters:me}}}(e.filters);p&&(n.structuredQuery.where=p);const _=function(oe){if(0!==oe.length)return oe.map(me=>{return{field:gt((Ne=me).field),direction:de(Ne.dir)};var Ne})}(e.orderBy);_&&(n.structuredQuery.orderBy=_);const w=(me=e.limit,l.gt||ya(me)?me:{value:me});var me,N,oe;return null!==w&&(n.structuredQuery.limit=w),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt={before:!(oe=e.endAt).inclusive,values:oe.position}),n}function y(l){let e=Uf(l.parent);const n=l.structuredQuery,d=n.from?n.from.length:0;let p=null;if(d>0){dr(1===d);const Ne=n.from[0];Ne.allDescendants?p=Ne.collectionId:e=e.child(Ne.collectionId)}let _=[];n.where&&(_=P(n.where));let w=[];n.orderBy&&(w=n.orderBy.map(Ne=>{return new vc(zt((st=Ne).field),function(Lt){switch(Lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(st.direction));var st}));let N=null;n.limit&&(N=function(Ne){let st;return st="object"==typeof Ne?Ne.value:Ne,ya(st)?null:st}(n.limit));let oe=null;var Ne;n.startAt&&(oe=new Ou((Ne=n.startAt).values||[],!!Ne.before));let me=null;return n.endAt&&(me=function(Ne){return new Ou(Ne.values||[],!Ne.before)}(n.endAt)),ad(e,p,w,_,N,"F",oe,me)}function P(l){return l?void 0!==l.unaryFilter?[lr(l)]:void 0!==l.fieldFilter?[On(l)]:void 0!==l.compositeFilter?l.compositeFilter.filters.map(e=>P(e)).reduce((e,n)=>e.concat(n)):Jn():[]}function de(l){return zp[l]}function De(l){return fd[l]}function gt(l){return{fieldPath:l.canonicalString()}}function zt(l){return Ai.fromServerFormat(l.fieldPath)}function On(l){return os.create(zt(l.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jn()}}(l.fieldFilter.op),l.fieldFilter.value)}function lr(l){switch(l.unaryFilter.op){case"IS_NAN":const e=zt(l.unaryFilter.field);return os.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=zt(l.unaryFilter.field);return os.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=zt(l.unaryFilter.field);return os.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=zt(l.unaryFilter.field);return os.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Jn()}}function Rr(l){const e=[];return l.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ar(l){return l.length>=4&&"projects"===l.get(0)&&"databases"===l.get(2)}function Ki(l){let e="";for(let n=0;n<l.length;n++)e.length>0&&(e=zc(e)),e=Fn(l.get(n),e);return zc(e)}function Fn(l,e){let n=e;const d=l.length;for(let p=0;p<d;p++){const _=l.charAt(p);switch(_){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=_}}return n}function zc(l){return l+"\x01\x01"}function vl(l){const e=l.length;if(dr(e>=2),2===e)return dr("\x01"===l.charAt(0)&&"\x01"===l.charAt(1)),Fr.emptyPath();const n=e-2,d=[];let p="";for(let _=0;_<e;){const w=l.indexOf("\x01",_);switch((w<0||w>n)&&Jn(),l.charAt(w+1)){case"\x01":const N=l.substring(_,w);let oe;0===p.length?oe=N:(p+=N,oe=p,p=""),d.push(oe);break;case"\x10":p+=l.substring(_,w),p+="\0";break;case"\x11":p+=l.substring(_,w+1);break;default:Jn()}_=w+2}return new Fr(d)}const Cc=["userId","batchId"];function vd(l,e){return[l,Ki(e)]}function oh(l,e,n){return[l,Ki(e),n]}const Kp={},qo=["prefixPath","collectionGroup","readTime","documentId"],ah=["prefixPath","collectionGroup","documentId"],yd=["collectionGroup","readTime","prefixPath","documentId"],xc=["canonicalId","targetId"],Ic=["targetId","path"],qc=["path","targetId"],uh=["collectionId","parent"],fm=["indexId","uid"],Wh=["uid","sequenceNumber"],e_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zp=["indexId","uid","orderedDocumentKey"],Qu=["userId","collectionPath","documentId"],t_=["userId","collectionPath","largestBatchId"],$v=["userId","collectionGroup","largestBatchId"],It=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vf=[...It,"documentOverlays"],Yp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pl=Yp,Qp=[...Pl,"indexConfiguration","indexState","indexEntries"];class yl extends Wu{constructor(e,n){super(),this.ie=e,this.currentSequenceNumber=n}}function Zs(l,e){const n=$n(l);return Fi.M(n.ie,e)}class Ol{constructor(e,n,d,p){this.batchId=e,this.localWriteTime=n,this.baseMutations=d,this.mutations=p}applyToRemoteDocument(e,n){const d=n.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&jh(_,e,d[p])}}applyToLocalView(e,n){for(const d of this.baseMutations)d.key.isEqual(e.key)&&(n=$c(d,e,n,this.localWriteTime));for(const d of this.mutations)d.key.isEqual(e.key)&&(n=$c(d,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const d=Xd();return this.mutations.forEach(p=>{const _=e.get(p.key),w=_.overlayedDocument;let N=this.applyToLocalView(w,_.mutatedFields);N=n.has(p.key)?null:N;const oe=Fh(w,N);null!==oe&&d.set(p.key,oe),w.isValidDocument()||w.convertToNoDocument(Er.min())}),d}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Kr())}isEqual(e){return this.batchId===e.batchId&&Gu(this.mutations,e.mutations,(n,d)=>Bh(n,d))&&Gu(this.baseMutations,e.baseMutations,(n,d)=>Bh(n,d))}}class Xp{constructor(e,n,d,p){this.batch=e,this.commitVersion=n,this.mutationResults=d,this.docVersions=p}static from(e,n,d){dr(e.mutations.length===d.length);let p=Gp;const _=e.mutations;for(let w=0;w<_.length;w++)p=p.insert(_[w].key,d[w].version);return new Xp(e,n,d,p)}}class _d{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rl{constructor(e,n,d,p,_=Er.min(),w=Er.min(),N=Ui.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=d,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=N}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gv{constructor(e){this.re=e}}function ou(l,e){const n=e.key,d={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())d.document={name:ao(p=l.re,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:sa(p,_.version.toTimestamp())};else if(e.isNoDocument())d.noDocument={path:n.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return Jn();d.unknownDocument={path:n.path.toArray(),version:Xu(e.version)}}var p,_;return d}function zh(l){const e=l.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(l){const e=l.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kc(l){const e=new ts(l.seconds,l.nanoseconds);return Er.fromTimestamp(e)}function Fo(l,e){const n=(e.baseMutations||[]).map(_=>Gh(l.re,_));for(let _=0;_<e.mutations.length-1;++_){const w=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(w.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const d=e.mutations.map(_=>Gh(l.re,_)),p=ts.fromMillis(e.localWriteTimeMs);return new Ol(e.batchId,p,n,d)}function Xl(l){const e=Kc(l.readTime),n=void 0!==l.lastLimboFreeSnapshotVersion?Kc(l.lastLimboFreeSnapshotVersion):Er.min();let d;var p;return void 0!==l.query.documents?(dr(1===(p=l.query).documents.length),d=Da(Wl(Uf(p.documents[0])))):d=Da(y(l.query)),new Rl(d,l.targetId,0,l.lastListenSequenceNumber,e,n,Ui.fromBase64String(l.resumeToken))}function Jp(l,e){const n=Xu(e.snapshotVersion),d=Xu(e.lastLimboFreeSnapshotVersion);let p;p=Ph(e.target)?qp(l.re,e.target):C(l.re,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ha(e.target),readTime:n,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:d,query:p}}function Hf(l){const e=y({parent:l.parent,structuredQuery:l.structuredQuery});return"LAST"===l.limitType?Vc(e,e.limit,"L"):e}function $f(l,e){return new _d(e.largestBatchId,Gh(l.re,e.overlayMutation))}function eg(l,e){const n=e.path.lastSegment();return[l,Ki(e.path.popLast()),n]}function pm(l,e,n,d){return{indexId:l,uid:e.uid||"",sequenceNumber:n,readTime:Xu(d.readTime),documentKey:Ki(d.documentKey.path),largestBatchId:d.largestBatchId}}class gm{getBundleMetadata(e,n){return Wv(e).get(n).next(d=>{if(d)return{id:(p=d).bundleId,createTime:Kc(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return Wv(e).put({bundleId:(d=n).id,createTime:Xu(oa(d.createTime)),version:d.version});var d}getNamedQuery(e,n){return mm(e).get(n).next(d=>{if(d)return{name:(p=d).name,query:Hf(p.bundledQuery),readTime:Kc(p.readTime)};var p})}saveNamedQuery(e,n){return mm(e).put({name:(d=n).name,readTime:Xu(oa(d.readTime)),bundledQuery:d.bundledQuery});var d}}function Wv(l){return Zs(l,"bundles")}function mm(l){return Zs(l,"namedQueries")}class Gf{constructor(e,n){this.It=e,this.userId=n}static oe(e,n){return new Gf(e,n.uid||"")}getOverlay(e,n){return qh(e).get(eg(this.userId,n)).next(d=>d?$f(this.It,d):null)}getOverlays(e,n){const d=Nu();return At.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&d.set(p,_)})).next(()=>d)}saveOverlays(e,n,d){const p=[];return d.forEach((_,w)=>{const N=new _d(n,w);p.push(this.ue(e,N))}),At.waitFor(p)}removeOverlaysForBatchId(e,n,d){const p=new Set;n.forEach(w=>p.add(Ki(w.getCollectionPath())));const _=[];return p.forEach(w=>{const N=IDBKeyRange.bound([this.userId,w,d],[this.userId,w,d+1],!1,!0);_.push(qh(e).Y("collectionPathOverlayIndex",N))}),At.waitFor(_)}getOverlaysForCollection(e,n,d){const p=Nu(),_=Ki(n),w=IDBKeyRange.bound([this.userId,_,d],[this.userId,_,Number.POSITIVE_INFINITY],!0);return qh(e).W("collectionPathOverlayIndex",w).next(N=>{for(const oe of N){const me=$f(this.It,oe);p.set(me.getKey(),me)}return p})}getOverlaysForCollectionGroup(e,n,d,p){const _=Nu();let w;const N=IDBKeyRange.bound([this.userId,n,d],[this.userId,n,Number.POSITIVE_INFINITY],!0);return qh(e).Z({index:"collectionGroupOverlayIndex",range:N},(oe,me,Ne)=>{const st=$f(this.It,me);_.size()<p||st.largestBatchId===w?(_.set(st.getKey(),st),w=st.largestBatchId):Ne.done()}).next(()=>_)}ue(e,n){return qh(e).put(function(d,p,_){const[w,N,oe]=eg(p,_.mutation.key);return{userId:p,collectionPath:N,documentId:oe,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:Ml(d.re,_.mutation)}}(this.It,this.userId,n))}}function qh(l){return Zs(l,"documentOverlays")}class Jl{constructor(){}ce(e,n){this.ae(e,n),n.he()}ae(e,n){if("nullValue"in e)this.le(n,5);else if("booleanValue"in e)this.le(n,10),n.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(n,15),n.fe(Ei(e.integerValue));else if("doubleValue"in e){const d=Ei(e.doubleValue);isNaN(d)?this.le(n,13):(this.le(n,15),Ia(d)?n.fe(0):n.fe(d))}else if("timestampValue"in e){const d=e.timestampValue;this.le(n,20),"string"==typeof d?n.de(d):(n.de(`${d.seconds||""}`),n.fe(d.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,n),this.we(n);else if("bytesValue"in e)this.le(n,30),n.me(ia(e.bytesValue)),this.we(n);else if("referenceValue"in e)this.ge(e.referenceValue,n);else if("geoPointValue"in e){const d=e.geoPointValue;this.le(n,45),n.fe(d.latitude||0),n.fe(d.longitude||0)}else"mapValue"in e?Ir(e)?this.le(n,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,n),this.we(n)):"arrayValue"in e?(this.pe(e.arrayValue,n),this.we(n)):Jn()}_e(e,n){this.le(n,25),this.Ie(e,n)}Ie(e,n){n.de(e)}ye(e,n){const d=e.fields||{};this.le(n,55);for(const p of Object.keys(d))this._e(p,n),this.ae(d[p],n)}pe(e,n){const d=e.values||[];this.le(n,50);for(const p of d)this.ae(p,n)}ge(e,n){this.le(n,37),Pn.fromName(e).path.forEach(d=>{this.le(n,60),this.Ie(d,n)})}le(e,n){e.fe(n)}we(e){e.fe(2)}}function zv(l){if(0===l)return 8;let e=0;return l>>4==0&&(e+=4,l<<=4),l>>6==0&&(e+=2,l<<=2),l>>7==0&&(e+=1),e}function qv(l){const e=64-function(n){let d=0;for(let p=0;p<8;++p){const _=zv(255&n[p]);if(d+=_,8!==_)break}return d}(l);return Math.ceil(e/8)}Jl.Te=new Jl;class Kh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const n=e[Symbol.iterator]();let d=n.next();for(;!d.done;)this.Ae(d.value),d=n.next();this.Re()}be(e){const n=e[Symbol.iterator]();let d=n.next();for(;!d.done;)this.Pe(d.value),d=n.next();this.ve()}Ve(e){for(const n of e){const d=n.charCodeAt(0);if(d<128)this.Ae(d);else if(d<2048)this.Ae(960|d>>>6),this.Ae(128|63&d);else if(n<"\ud800"||"\udbff"<n)this.Ae(480|d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d);else{const p=n.codePointAt(0);this.Ae(240|p>>>18),this.Ae(128|63&p>>>12),this.Ae(128|63&p>>>6),this.Ae(128|63&p)}}this.Re()}Se(e){for(const n of e){const d=n.charCodeAt(0);if(d<128)this.Pe(d);else if(d<2048)this.Pe(960|d>>>6),this.Pe(128|63&d);else if(n<"\ud800"||"\udbff"<n)this.Pe(480|d>>>12),this.Pe(128|63&d>>>6),this.Pe(128|63&d);else{const p=n.codePointAt(0);this.Pe(240|p>>>18),this.Pe(128|63&p>>>12),this.Pe(128|63&p>>>6),this.Pe(128|63&p)}}this.ve()}De(e){const n=this.Ce(e),d=qv(n);this.xe(1+d),this.buffer[this.position++]=255&d;for(let p=n.length-d;p<n.length;++p)this.buffer[this.position++]=255&n[p]}Ne(e){const n=this.Ce(e),d=qv(n);this.xe(1+d),this.buffer[this.position++]=~(255&d);for(let p=n.length-d;p<n.length;++p)this.buffer[this.position++]=~(255&n[p])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const n=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),d=0!=(128&n[0]);n[0]^=d?255:128;for(let p=1;p<n.length;++p)n[p]^=d?255:0;return n}Ae(e){const n=255&e;0===n?(this.Oe(0),this.Oe(255)):255===n?(this.Oe(255),this.Oe(0)):this.Oe(n)}Pe(e){const n=255&e;0===n?(this.Fe(0),this.Fe(255)):255===n?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const n=e+this.position;if(n<=this.buffer.length)return;let d=2*this.buffer.length;d<n&&(d=n);const p=new Uint8Array(d);p.set(this.buffer),this.buffer=p}}class Dc{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class vm{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class bd{constructor(){this.Be=new Kh,this.Le=new Dc(this.Be),this.Ue=new vm(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Zh{constructor(e,n,d,p){this.indexId=e,this.documentKey=n,this.arrayValue=d,this.directionalValue=p}Ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,d=new Uint8Array(n);return d.set(this.directionalValue,0),n!==e?d.set([0],this.directionalValue.length):++d[d.length-1],new Zh(this.indexId,this.documentKey,this.arrayValue,d)}}function Yh(l,e){let n=l.indexId-e.indexId;return 0!==n?n:(n=tg(l.arrayValue,e.arrayValue),0!==n?n:(n=tg(l.directionalValue,e.directionalValue),0!==n?n:Pn.comparator(l.documentKey,e.documentKey)))}function tg(l,e){for(let n=0;n<l.length&&n<e.length;++n){const d=l[n]-e[n];if(0!==d)return d}return l.length-e.length}class q_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const n of e.filters){const d=n;d.dt()?this.je=d:this.Qe.push(d)}}We(e){const n=Ba(e);if(void 0!==n&&!this.ze(n))return!1;const d=ra(e);let p=0,_=0;for(;p<d.length&&this.ze(d[p]);++p);if(p===d.length)return!0;if(void 0!==this.je){const w=d[p];if(!this.He(this.je,w)||!this.Je(this.Ge[_++],w))return!1;++p}for(;p<d.length;++p){const w=d[p];if(_>=this.Ge.length||!this.Je(this.Ge[_++],w))return!1}return!0}ze(e){for(const n of this.Qe)if(this.He(n,e))return!0;return!1}He(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class Nl{constructor(){this.Ye=new lh}addToCollectionParentIndex(e,n){return this.Ye.add(n),At.resolve()}getCollectionParents(e,n){return At.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return At.resolve()}deleteFieldIndex(e,n){return At.resolve()}getDocumentsMatchingTarget(e,n){return At.resolve(null)}getIndexType(e,n){return At.resolve(0)}getFieldIndexes(e,n){return At.resolve([])}getNextCollectionGroupToUpdate(e){return At.resolve(null)}getMinOffset(e,n){return At.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return At.resolve(xo.min())}updateCollectionGroup(e,n,d){return At.resolve()}updateIndexEntries(e,n){return At.resolve()}}class lh{constructor(){this.index={}}add(e){const n=e.lastSegment(),d=e.popLast(),p=this.index[n]||new Rt(Fr.comparator),_=!p.has(d);return this.index[n]=p.add(d),_}has(e){const n=e.lastSegment(),d=e.popLast(),p=this.index[n];return p&&p.has(d)}getEntries(e){return(this.index[e]||new Rt(Fr.comparator)).toArray()}}const ch=new Uint8Array(0);class Wf{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new lh,this.Ze=new Kl(d=>Ha(d),(d,p)=>Bc(d,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const d=n.lastSegment(),p=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const _={collectionId:d,parent:Ki(p)};return Su(e).put(_)}return At.resolve()}getCollectionParents(e,n){const d=[],p=IDBKeyRange.bound([n,""],[Cl(n),""],!1,!0);return Su(e).W(p).next(_=>{for(const w of _){if(w.collectionId!==n)break;d.push(vl(w.parent))}return d})}addFieldIndex(e,n){const d=Ac(e),p={indexId:(w=n).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var w;delete p.indexId;const _=d.add(p);if(n.indexState){const w=zf(e);return _.next(N=>{w.put(pm(N,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return _.next()}deleteFieldIndex(e,n){const d=Ac(e),p=zf(e),_=Qh(e);return d.delete(n.indexId).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const d=Qh(e);let p=!0;const _=new Map;return At.forEach(this.tn(n),w=>this.en(e,w).next(N=>{p&&(p=!!N),_.set(w,N)})).next(()=>{if(p){let w=Kr();const N=[];return At.forEach(_,(oe,me)=>{var Ne;En("IndexedDbIndexManager",`Using index ${Ne=oe,`id=${Ne.indexId}|cg=${Ne.collectionGroup}|f=${Ne.fields.map(us=>`${us.fieldPath}:${us.kind}`).join(",")}`} to execute ${Ha(n)}`);const st=function(us,Uo){const ls=Ba(Uo);if(void 0===ls)return null;for(const cs of Gd(us,ls.fieldPath))switch(cs.op){case"array-contains-any":return cs.value.arrayValue.values||[];case"array-contains":return[cs.value]}return null}(me,oe),Lt=function(us,Uo){const ls=new Map;for(const cs of ra(Uo))for(const Ta of Gd(us,cs.fieldPath))switch(Ta.op){case"==":case"in":ls.set(cs.fieldPath.canonicalString(),Ta.value);break;case"not-in":case"!=":return ls.set(cs.fieldPath.canonicalString(),Ta.value),Array.from(ls.values())}return null}(me,oe),nn=function(us,Uo){const ls=[];let cs=!0;for(const Ta of ra(Uo)){const If=0===Ta.kind?Mf(us,Ta.fieldPath,us.startAt):Al(us,Ta.fieldPath,us.startAt);ls.push(If.value),cs&&(cs=If.inclusive)}return new Ou(ls,cs)}(me,oe),Zt=function(us,Uo){const ls=[];let cs=!0;for(const Ta of ra(Uo)){const If=0===Ta.kind?Al(us,Ta.fieldPath,us.endAt):Mf(us,Ta.fieldPath,us.endAt);ls.push(If.value),cs&&(cs=If.inclusive)}return new Ou(ls,cs)}(me,oe),Xn=this.nn(oe,me,nn),ir=this.nn(oe,me,Zt),Yi=this.sn(oe,me,Lt),Gs=this.rn(oe.indexId,st,Xn,nn.inclusive,ir,Zt.inclusive,Yi);return At.forEach(Gs,us=>d.J(us,n.limit).next(Uo=>{Uo.forEach(ls=>{const cs=Pn.fromSegments(ls.documentKey);w.has(cs)||(w=w.add(cs),N.push(cs))})}))}).next(()=>N)}return At.resolve(null)})}tn(e){let n=this.Ze.get(e);return n||(n=[e],this.Ze.set(e,n),n)}rn(e,n,d,p,_,w,N){const oe=(null!=n?n.length:1)*Math.max(d.length,_.length),me=oe/(null!=n?n.length:1),Ne=[];for(let st=0;st<oe;++st){const Lt=n?this.on(n[st/me]):ch,nn=this.un(e,Lt,d[st%me],p),Zt=this.cn(e,Lt,_[st%me],w),Xn=N.map(ir=>this.un(e,Lt,ir,!0));Ne.push(...this.createRange(nn,Zt,Xn))}return Ne}un(e,n,d,p){const _=new Zh(e,Pn.empty(),n,d);return p?_:_.Ke()}cn(e,n,d,p){const _=new Zh(e,Pn.empty(),n,d);return p?_.Ke():_}en(e,n){const d=new q_(n),p=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let w=null;for(const N of _)d.We(N)&&(!w||N.fields.length>w.fields.length)&&(w=N);return w})}getIndexType(e,n){let d=2;return At.forEach(this.tn(n),p=>this.en(e,p).next(_=>{_?0!==d&&_.fields.length<function(w){let N=new Rt(Ai.comparator),oe=!1;for(const me of w.filters){const Ne=me;Ne.field.isKeyField()||("array-contains"===Ne.op||"array-contains-any"===Ne.op?oe=!0:N=N.add(Ne.field))}for(const me of w.orderBy)me.field.isKeyField()||(N=N.add(me.field));return N.size+(oe?1:0)}(p)&&(d=1):d=0})).next(()=>d)}an(e,n){const d=new bd;for(const p of ra(e)){const _=n.data.field(p.fieldPath);if(null==_)return null;const w=d.qe(p.kind);Jl.Te.ce(_,w)}return d.$e()}on(e){const n=new bd;return Jl.Te.ce(e,n.qe(0)),n.$e()}hn(e,n){const d=new bd;return Jl.Te.ce(Ct(this.databaseId,n),d.qe(function(p){const _=ra(p);return 0===_.length?0:_[_.length-1].kind}(e))),d.$e()}sn(e,n,d){if(null===d)return[];let p=[];p.push(new bd);let _=0;for(const w of ra(e)){const N=d[_++];for(const oe of p)if(this.ln(n,w.fieldPath)&&vn(N))p=this.fn(p,w,N);else{const me=oe.qe(w.kind);Jl.Te.ce(N,me)}}return this.dn(p)}nn(e,n,d){return this.sn(e,n,d.position)}dn(e){const n=[];for(let d=0;d<e.length;++d)n[d]=e[d].$e();return n}fn(e,n,d){const p=[...e],_=[];for(const w of d.arrayValue.values||[])for(const N of p){const oe=new bd;oe.seed(N.$e()),Jl.Te.ce(w,oe.qe(n.kind)),_.push(oe)}return _}ln(e,n){return!!e.filters.find(d=>d instanceof os&&d.field.isEqual(n)&&("in"===d.op||"not-in"===d.op))}getFieldIndexes(e,n){const d=Ac(e),p=zf(e);return(n?d.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):d.W()).next(_=>{const w=[];return At.forEach(_,N=>p.get([N.indexId,this.uid]).next(oe=>{w.push(function(me,Ne){const st=Ne?new gc(Ne.sequenceNumber,new xo(Kc(Ne.readTime),new Pn(vl(Ne.documentKey)),Ne.largestBatchId)):gc.empty(),Lt=me.fields.map(([nn,Zt])=>new Li(Ai.fromServerFormat(nn),Zt));return new ps(me.indexId,me.collectionGroup,Lt,st)}(N,oe))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((d,p)=>{const _=d.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:Lr(d.collectionGroup,p.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,d){const p=Ac(e),_=zf(e);return this._n(e).next(w=>p.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(N=>At.forEach(N,oe=>_.put(pm(oe.indexId,this.user,w,d)))))}updateIndexEntries(e,n){const d=new Map;return At.forEach(n,(p,_)=>{const w=d.get(p.collectionGroup);return(w?At.resolve(w):this.getFieldIndexes(e,p.collectionGroup)).next(N=>(d.set(p.collectionGroup,N),At.forEach(N,oe=>this.wn(e,p,oe).next(me=>{const Ne=this.mn(_,oe);return me.isEqual(Ne)?At.resolve():this.gn(e,_,oe,me,Ne)}))))})}yn(e,n,d,p){return Qh(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.hn(d,n.key),documentKey:n.key.path.toArray()})}pn(e,n,d,p){return Qh(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.hn(d,n.key),n.key.path.toArray()])}wn(e,n,d){const p=Qh(e);let _=new Rt(Yh);return p.Z({index:"documentKeyIndex",range:IDBKeyRange.only([d.indexId,this.uid,this.hn(d,n)])},(w,N)=>{_=_.add(new Zh(d.indexId,n,N.arrayValue,N.directionalValue))}).next(()=>_)}mn(e,n){let d=new Rt(Yh);const p=this.an(n,e);if(null==p)return d;const _=Ba(n);if(null!=_){const w=e.data.field(_.fieldPath);if(vn(w))for(const N of w.arrayValue.values||[])d=d.add(new Zh(n.indexId,e.key,this.on(N),p))}else d=d.add(new Zh(n.indexId,e.key,ch,p));return d}gn(e,n,d,p,_){En("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const w=[];return function(N,oe,me,Ne,st){const Lt=N.getIterator(),nn=oe.getIterator();let Zt=Vr(Lt),Xn=Vr(nn);for(;Zt||Xn;){let ir=!1,Yi=!1;if(Zt&&Xn){const Gs=me(Zt,Xn);Gs<0?Yi=!0:Gs>0&&(ir=!0)}else null!=Zt?Yi=!0:ir=!0;ir?(Ne(Xn),Xn=Vr(nn)):Yi?(st(Zt),Zt=Vr(Lt)):(Zt=Vr(Lt),Xn=Vr(nn))}}(p,_,Yh,N=>{w.push(this.yn(e,n,d,N))},N=>{w.push(this.pn(e,n,d,N))}),At.waitFor(w)}_n(e){let n=1;return zf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(d,p,_)=>{_.done(),n=p.sequenceNumber+1}).next(()=>n)}createRange(e,n,d){d=d.sort((w,N)=>Yh(w,N)).filter((w,N,oe)=>!N||0!==Yh(w,oe[N-1]));const p=[];p.push(e);for(const w of d){const N=Yh(w,e),oe=Yh(w,n);if(0===N)p[0]=e.Ke();else if(N>0&&oe<0)p.push(w),p.push(w.Ke());else if(oe>0)break}p.push(n);const _=[];for(let w=0;w<p.length;w+=2)_.push(IDBKeyRange.bound([p[w].indexId,this.uid,p[w].arrayValue,p[w].directionalValue,ch,[]],[p[w+1].indexId,this.uid,p[w+1].arrayValue,p[w+1].directionalValue,ch,[]]));return _}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Xh)}getMinOffset(e,n){return At.mapArray(this.tn(n),d=>this.en(e,d).next(p=>p||Jn())).next(Xh)}}function Su(l){return Zs(l,"collectionParents")}function Qh(l){return Zs(l,"indexEntries")}function Ac(l){return Zs(l,"indexConfiguration")}function zf(l){return Zs(l,"indexState")}function Xh(l){dr(0!==l.length);let e=l[0].indexState.offset,n=e.largestBatchId;for(let d=1;d<l.length;d++){const p=l[d].indexState.offset;ll(p,e)<0&&(e=p),n<p.largestBatchId&&(n=p.largestBatchId)}return new xo(e.readTime,e.documentKey,n)}const qf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wu{constructor(e,n,d){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=d}static withCacheSize(e){return new wu(e,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ym(l,e,n){const d=l.store("mutations"),p=l.store("documentMutations"),_=[],w=IDBKeyRange.only(n.batchId);let N=0;const oe=d.Z({range:w},(Ne,st,Lt)=>(N++,Lt.delete()));_.push(oe.next(()=>{dr(1===N)}));const me=[];for(const Ne of n.mutations){const st=oh(e,Ne.key.path,n.batchId);_.push(p.delete(st)),me.push(Ne.key)}return At.waitFor(_).next(()=>me)}function _m(l){if(!l)return 0;let e;if(l.document)e=l.document;else if(l.unknownDocument)e=l.unknownDocument;else{if(!l.noDocument)throw Jn();e=l.noDocument}return JSON.stringify(e).length}wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(41943040,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);class kc{constructor(e,n,d,p){this.userId=e,this.It=n,this.indexManager=d,this.referenceDelegate=p,this.In={}}static oe(e,n,d,p){dr(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new kc(_,n,d,p)}checkEmpty(e){let n=!0;const d=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).Z({index:"userMutationsIndex",range:d},(p,_,w)=>{n=!1,w.done()}).next(()=>n)}addMutationBatch(e,n,d,p){const _=Jh(e),w=Zc(e);return w.add({}).next(N=>{dr("number"==typeof N);const oe=new Ol(N,n,d,p),me=function(Lt,nn,Zt){const Xn=Zt.baseMutations.map(Yi=>Ml(Lt.re,Yi)),ir=Zt.mutations.map(Yi=>Ml(Lt.re,Yi));return{userId:nn,batchId:Zt.batchId,localWriteTimeMs:Zt.localWriteTime.toMillis(),baseMutations:Xn,mutations:ir}}(this.It,this.userId,oe),Ne=[];let st=new Rt((Lt,nn)=>Lr(Lt.canonicalString(),nn.canonicalString()));for(const Lt of p){const nn=oh(this.userId,Lt.key.path,N);st=st.add(Lt.key.path.popLast()),Ne.push(w.put(me)),Ne.push(_.put(nn,Kp))}return st.forEach(Lt=>{Ne.push(this.indexManager.addToCollectionParentIndex(e,Lt))}),e.addOnCommittedListener(()=>{this.In[N]=oe.keys()}),At.waitFor(Ne).next(()=>oe)})}lookupMutationBatch(e,n){return Zc(e).get(n).next(d=>d?(dr(d.userId===this.userId),Fo(this.It,d)):null)}Tn(e,n){return this.In[n]?At.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(d=>{if(d){const p=d.keys();return this.In[n]=p,p}return null})}getNextMutationBatchAfterBatchId(e,n){const d=n+1,p=IDBKeyRange.lowerBound([this.userId,d]);let _=null;return Zc(e).Z({index:"userMutationsIndex",range:p},(w,N,oe)=>{N.userId===this.userId&&(dr(N.batchId>=d),_=Fo(this.It,N)),oe.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let d=-1;return Zc(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(p,_,w)=>{d=_.batchId,w.done()}).next(()=>d)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zc(e).W("userMutationsIndex",n).next(d=>d.map(p=>Fo(this.It,p)))}getAllMutationBatchesAffectingDocumentKey(e,n){const d=vd(this.userId,n.path),p=IDBKeyRange.lowerBound(d),_=[];return Jh(e).Z({range:p},(w,N,oe)=>{const[me,Ne,st]=w,Lt=vl(Ne);if(me===this.userId&&n.path.isEqual(Lt))return Zc(e).get(st).next(nn=>{if(!nn)throw Jn();dr(nn.userId===this.userId),_.push(Fo(this.It,nn))});oe.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let d=new Rt(Lr);const p=[];return n.forEach(_=>{const w=vd(this.userId,_.path),N=IDBKeyRange.lowerBound(w),oe=Jh(e).Z({range:N},(me,Ne,st)=>{const[Lt,nn,Zt]=me,Xn=vl(nn);Lt===this.userId&&_.path.isEqual(Xn)?d=d.add(Zt):st.done()});p.push(oe)}),At.waitFor(p).next(()=>this.En(e,d))}getAllMutationBatchesAffectingQuery(e,n){const d=n.path,p=d.length+1,_=vd(this.userId,d),w=IDBKeyRange.lowerBound(_);let N=new Rt(Lr);return Jh(e).Z({range:w},(oe,me,Ne)=>{const[st,Lt,nn]=oe,Zt=vl(Lt);st===this.userId&&d.isPrefixOf(Zt)?Zt.length===p&&(N=N.add(nn)):Ne.done()}).next(()=>this.En(e,N))}En(e,n){const d=[],p=[];return n.forEach(_=>{p.push(Zc(e).get(_).next(w=>{if(null===w)throw Jn();dr(w.userId===this.userId),d.push(Fo(this.It,w))}))}),At.waitFor(p).next(()=>d)}removeMutationBatch(e,n){return ym(e.ie,this.userId,n).next(d=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),At.forEach(d,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return At.resolve();const d=IDBKeyRange.lowerBound([this.userId]),p=[];return Jh(e).Z({range:d},(_,w,N)=>{if(_[0]===this.userId){const oe=vl(_[1]);p.push(oe)}else N.done()}).next(()=>{dr(0===p.length)})})}containsKey(e,n){return dh(e,this.userId,n)}Rn(e){return ng(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dh(l,e,n){const d=vd(e,n.path),p=d[1],_=IDBKeyRange.lowerBound(d);let w=!1;return Jh(l).Z({range:_,X:!0},(N,oe,me)=>{const[Ne,st,Lt]=N;Ne===e&&st===p&&(w=!0),me.done()}).next(()=>w)}function Zc(l){return Zs(l,"mutations")}function Jh(l){return Zs(l,"documentMutations")}function ng(l){return Zs(l,"mutationQueues")}class hh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hh(0)}static vn(){return new hh(-1)}}class Kv{constructor(e,n){this.referenceDelegate=e,this.It=n}allocateTargetId(e){return this.Vn(e).next(n=>{const d=new hh(n.highestTargetId);return n.highestTargetId=d.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>Er.fromTimestamp(new ts(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,d){return this.Vn(e).next(p=>(p.highestListenSequenceNumber=n,d&&(p.lastRemoteSnapshotVersion=d.toTimestamp()),n>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=n),this.Sn(e,p)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(d=>(d.targetCount+=1,this.Cn(n,d),this.Sn(e,d))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fh(e).delete(n.targetId)).next(()=>this.Vn(e)).next(d=>(dr(d.targetCount>0),d.targetCount-=1,this.Sn(e,d)))}removeTargets(e,n,d){let p=0;const _=[];return fh(e).Z((w,N)=>{const oe=Xl(N);oe.sequenceNumber<=n&&null===d.get(oe.targetId)&&(p++,_.push(this.removeTargetData(e,oe)))}).next(()=>At.waitFor(_)).next(()=>p)}forEachTarget(e,n){return fh(e).Z((d,p)=>{const _=Xl(p);n(_)})}Vn(e){return bm(e).get("targetGlobalKey").next(n=>(dr(null!==n),n))}Sn(e,n){return bm(e).put("targetGlobalKey",n)}Dn(e,n){return fh(e).put(Jp(this.It,n))}Cn(e,n){let d=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,d=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,d=!0),d}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const d=Ha(n),p=IDBKeyRange.bound([d,Number.NEGATIVE_INFINITY],[d,Number.POSITIVE_INFINITY]);let _=null;return fh(e).Z({range:p,index:"queryTargetsIndex"},(w,N,oe)=>{const me=Xl(N);Bc(n,me.target)&&(_=me,oe.done())}).next(()=>_)}addMatchingKeys(e,n,d){const p=[],_=Mc(e);return n.forEach(w=>{const N=Ki(w.path);p.push(_.put({targetId:d,path:N})),p.push(this.referenceDelegate.addReference(e,d,w))}),At.waitFor(p)}removeMatchingKeys(e,n,d){const p=Mc(e);return At.forEach(n,_=>{const w=Ki(_.path);return At.waitFor([p.delete([d,w]),this.referenceDelegate.removeReference(e,d,_)])})}removeMatchingKeysForTargetId(e,n){const d=Mc(e),p=IDBKeyRange.bound([n],[n+1],!1,!0);return d.delete(p)}getMatchingKeysForTargetId(e,n){const d=IDBKeyRange.bound([n],[n+1],!1,!0),p=Mc(e);let _=Kr();return p.Z({range:d,X:!0},(w,N,oe)=>{const me=vl(w[1]),Ne=new Pn(me);_=_.add(Ne)}).next(()=>_)}containsKey(e,n){const d=Ki(n.path),p=IDBKeyRange.bound([d],[Cl(d)],!1,!0);let _=0;return Mc(e).Z({index:"documentTargetsIndex",X:!0,range:p},([w,N],oe,me)=>{0!==w&&(_++,me.done())}).next(()=>_>0)}se(e,n){return fh(e).get(n).next(d=>d?Xl(d):null)}}function fh(l){return Zs(l,"targets")}function bm(l){return Zs(l,"targetGlobal")}function Mc(l){return Zs(l,"targetDocuments")}function rg([l,e],[n,d]){const p=Lr(l,n);return 0===p?Lr(e,d):p}class ph{constructor(e){this.xn=e,this.buffer=new Rt(rg),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const d=this.buffer.last();rg(n,d)<0&&(this.buffer=this.buffer.delete(d).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Tm{constructor(e,n,d){this.garbageCollector=e,this.asyncQueue=n,this.localStore=d,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var n=this;En("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Z.Z)(function*(){n.Mn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(d){ss(d)?En("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield Wo(d)}yield n.Fn(3e5)}))}}class Zv{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(d=>Math.floor(n/100*d))}nthSequenceNumber(e,n){if(0===n)return At.resolve(O.at);const d=new ph(n);return this.$n.forEachTarget(e,p=>d.On(p.sequenceNumber)).next(()=>this.$n.Ln(e,p=>d.On(p))).next(()=>d.maxValue)}removeTargets(e,n,d){return this.$n.removeTargets(e,n,d)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector","Garbage collection skipped; disabled"),At.resolve(qf)):this.getCacheSize(e).next(d=>d<this.params.cacheSizeCollectionThreshold?(En("LruGarbageCollector",`Garbage collection skipped; Cache size ${d} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qf):this.Un(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,n){let d,p,_,w,N,oe,me;const Ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(st=>(st>this.params.maximumSequenceNumbersToCollect?(En("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${st}`),p=this.params.maximumSequenceNumbersToCollect):p=st,w=Date.now(),this.nthSequenceNumber(e,p))).next(st=>(d=st,N=Date.now(),this.removeTargets(e,d,n))).next(st=>(_=st,oe=Date.now(),this.removeOrphanedDocuments(e,d))).next(st=>(me=Date.now(),ja()<=_t.in.DEBUG&&En("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-Ne}ms\n\tDetermined least recently used ${p} in `+(N-w)+`ms\n\tRemoved ${_} targets in `+(oe-N)+`ms\n\tRemoved ${st} documents in `+(me-oe)+`ms\nTotal Duration: ${me-Ne}ms`),At.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:st})))}}class Kf{constructor(e,n){this.db=e,this.garbageCollector=new Zv(this,n)}Bn(e){const n=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(d=>n.next(p=>d+p))}qn(e){let n=0;return this.Ln(e,d=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(d,p)=>n(p))}addReference(e,n,d){return Zf(e,d)}removeReference(e,n,d){return Zf(e,d)}removeTargets(e,n,d){return this.db.getTargetCache().removeTargets(e,n,d)}markPotentiallyOrphaned(e,n){return Zf(e,n)}Gn(e,n){return function(d,p){let _=!1;return ng(d).tt(w=>dh(d,w,p).next(N=>(N&&(_=!0),At.resolve(!N)))).next(()=>_)}(e,n)}removeOrphanedDocuments(e,n){const d=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Kn(e,(w,N)=>{if(N<=n){const oe=this.Gn(e,w).next(me=>{if(!me)return _++,d.getEntry(e,w).next(()=>(d.removeEntry(w,Er.min()),Mc(e).delete([0,Ki(w.path)])))});p.push(oe)}}).next(()=>At.waitFor(p)).next(()=>d.apply(e)).next(()=>_)}removeTarget(e,n){const d=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,d)}updateLimboDocument(e,n){return Zf(e,n)}Kn(e,n){const d=Mc(e);let p,_=O.at;return d.Z({index:"documentTargetsIndex"},([w,N],{path:oe,sequenceNumber:me})=>{0===w?(_!==O.at&&n(new Pn(vl(p)),_),_=me,p=oe):_=O.at}).next(()=>{_!==O.at&&n(new Pn(vl(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zf(l,e){return Mc(l).put((d=l.currentSequenceNumber,{targetId:0,path:Ki(e.path),sequenceNumber:d}));var d}class Yv{constructor(){this.changes=new Kl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const d=this.changes.get(n);return void 0!==d?At.resolve(d):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ig{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,d){return Yc(e).put(d)}removeEntry(e,n,d){return Yc(e).delete(function(p,_){const w=p.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],zh(_),w[w.length-1]]}(n,d))}updateMetadata(e,n){return this.getMetadata(e).next(d=>(d.byteSize+=n,this.Qn(e,d)))}getEntry(e,n){let d=Gi.newInvalidDocument(n);return Yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Td(n))},(p,_)=>{d=this.jn(n,_)}).next(()=>d)}Wn(e,n){let d={size:0,document:Gi.newInvalidDocument(n)};return Yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Td(n))},(p,_)=>{d={document:this.jn(n,_),size:_m(_)}}).next(()=>d)}getEntries(e,n){let d=su();return this.zn(e,n,(p,_)=>{const w=this.jn(p,_);d=d.insert(p,w)}).next(()=>d)}Hn(e,n){let d=su(),p=new _e(Pn.comparator);return this.zn(e,n,(_,w)=>{const N=this.jn(_,w);d=d.insert(_,N),p=p.insert(_,_m(w))}).next(()=>({documents:d,Jn:p}))}zn(e,n,d){if(n.isEmpty())return At.resolve();let p=new Rt(ef);n.forEach(oe=>p=p.add(oe));const _=IDBKeyRange.bound(Td(p.first()),Td(p.last())),w=p.getIterator();let N=w.getNext();return Yc(e).Z({index:"documentKeyIndex",range:_},(oe,me,Ne)=>{const st=Pn.fromSegments([...me.prefixPath,me.collectionGroup,me.documentId]);for(;N&&ef(N,st)<0;)d(N,null),N=w.getNext();N&&N.isEqual(st)&&(d(N,me),N=w.hasNext()?w.getNext():null),N?Ne.j(Td(N)):Ne.done()}).next(()=>{for(;N;)d(N,null),N=w.hasNext()?w.getNext():null})}getAllFromCollection(e,n,d){const p=[n.popLast().toArray(),n.lastSegment(),zh(d.readTime),d.documentKey.path.isEmpty()?"":d.documentKey.path.lastSegment()],_=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).W(IDBKeyRange.bound(p,_,!0)).next(w=>{let N=su();for(const oe of w){const me=this.jn(Pn.fromSegments(oe.prefixPath.concat(oe.collectionGroup,oe.documentId)),oe);N=N.insert(me.key,me)}return N})}getAllFromCollectionGroup(e,n,d,p){let _=su();const w=Qv(n,d),N=Qv(n,xo.max());return Yc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,N,!0)},(oe,me,Ne)=>{const st=this.jn(Pn.fromSegments(me.prefixPath.concat(me.collectionGroup,me.documentId)),me);_=_.insert(st.key,st),_.size===p&&Ne.done()}).next(()=>_)}newChangeBuffer(e){return new gh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Sm(e).get("remoteDocumentGlobalKey").next(n=>(dr(!!n),n))}Qn(e,n){return Sm(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const d=function n_(l,e){let n;if(e.document)n=md(l.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const d=Pn.fromSegments(e.noDocument.path),p=Kc(e.noDocument.readTime);n=Gi.newNoDocument(d,p),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Jn();{const d=Pn.fromSegments(e.unknownDocument.path),p=Kc(e.unknownDocument.version);n=Gi.newUnknownDocument(d,p)}}return e.readTime&&n.setReadTime(function(d){const p=new ts(d[0],d[1]);return Er.fromTimestamp(p)}(e.readTime)),n}(this.It,n);if(!d.isNoDocument()||!d.version.isEqual(Er.min()))return d}return Gi.newInvalidDocument(e)}}function Em(l){return new ig(l)}class gh extends Yv{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Kl(d=>d.toString(),(d,p)=>d.isEqual(p))}applyChanges(e){const n=[];let d=0,p=new Rt((_,w)=>Lr(_.canonicalString(),w.canonicalString()));return this.changes.forEach((_,w)=>{const N=this.Xn.get(_);if(n.push(this.Yn.removeEntry(e,_,N.readTime)),w.isValidDocument()){const oe=ou(this.Yn.It,w);p=p.add(_.path.popLast()),d+=_m(oe)-N.size,n.push(this.Yn.addEntry(e,_,oe))}else if(d-=N.size,this.trackRemovals){const oe=ou(this.Yn.It,w.convertToNoDocument(Er.min()));n.push(this.Yn.addEntry(e,_,oe))}}),p.forEach(_=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,_))}),n.push(this.Yn.updateMetadata(e,d)),At.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(d=>(this.Xn.set(n,{size:d.size,readTime:d.document.readTime}),d.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:d,Jn:p})=>(p.forEach((_,w)=>{this.Xn.set(_,{size:w,readTime:d.get(_).readTime})}),d))}}function Sm(l){return Zs(l,"remoteDocumentGlobal")}function Yc(l){return Zs(l,"remoteDocumentsV14")}function Td(l){const e=l.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qv(l,e){const n=e.documentKey.path.toArray();return[l,zh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ef(l,e){const n=l.path.toArray(),d=e.path.toArray();let p=0;for(let _=0;_<n.length-2&&_<d.length-2;++_)if(p=Lr(n[_],d[_]),p)return p;return p=Lr(n.length,d.length),p||(p=Lr(n[n.length-2],d[d.length-2]),p||Lr(n[n.length-1],d[d.length-1]))}class r_{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class wm{constructor(e,n,d,p){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=d,this.indexManager=p}getDocument(e,n){let d=null;return this.documentOverlayCache.getOverlay(e,n).next(p=>(d=p,this.getBaseDocument(e,n,d))).next(p=>(null!==d&&$c(d.mutation,p,Gn.empty(),ts.now()),p))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(d=>this.getLocalViewOfDocuments(e,d,Kr()).next(()=>d))}getLocalViewOfDocuments(e,n,d=Kr()){const p=Nu();return this.populateOverlays(e,p,n).next(()=>this.computeViews(e,n,p,d).next(_=>{let w=Qd();return _.forEach((N,oe)=>{w=w.insert(N,oe.overlayedDocument)}),w}))}getOverlayedDocuments(e,n){const d=Nu();return this.populateOverlays(e,d,n).next(()=>this.computeViews(e,n,d,Kr()))}populateOverlays(e,n,d){const p=[];return d.forEach(_=>{n.has(_)||p.push(_)}),this.documentOverlayCache.getOverlays(e,p).next(_=>{_.forEach((w,N)=>{n.set(w,N)})})}computeViews(e,n,d,p){let _=su();const w=Tc(),N=Tc();return n.forEach((oe,me)=>{const Ne=d.get(me.key);p.has(me.key)&&(void 0===Ne||Ne.mutation instanceof Tu)?_=_.insert(me.key,me):void 0!==Ne&&(w.set(me.key,Ne.mutation.getFieldMask()),$c(Ne.mutation,me,Ne.mutation.getFieldMask(),ts.now()))}),this.recalculateAndSaveOverlays(e,_).next(oe=>(oe.forEach((me,Ne)=>w.set(me,Ne)),n.forEach((me,Ne)=>{var st;return N.set(me,new r_(Ne,null!==(st=w.get(me))&&void 0!==st?st:null))}),N))}recalculateAndSaveOverlays(e,n){const d=Tc();let p=new _e((w,N)=>w-N),_=Kr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(w=>{for(const N of w)N.keys().forEach(oe=>{const me=n.get(oe);if(null===me)return;let Ne=d.get(oe)||Gn.empty();Ne=N.applyToLocalView(me,Ne),d.set(oe,Ne);const st=(p.get(N.batchId)||Kr()).add(oe);p=p.insert(N.batchId,st)})}).next(()=>{const w=[],N=p.getReverseIterator();for(;N.hasNext();){const oe=N.getNext(),me=oe.key,Ne=oe.value,st=Xd();Ne.forEach(Lt=>{if(!_.has(Lt)){const nn=Fh(n.get(Lt),d.get(Lt));null!==nn&&st.set(Lt,nn),_=_.add(Lt)}}),w.push(this.documentOverlayCache.saveOverlays(e,me,st))}return At.waitFor(w)}).next(()=>d)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(d=>this.recalculateAndSaveOverlays(e,d))}getDocumentsMatchingQuery(e,n,d){return Pn.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):hl(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,d):this.getDocumentsMatchingCollectionQuery(e,n,d);var p}getNextDocuments(e,n,d,p){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,d,p).next(_=>{const w=p-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,d.largestBatchId,p-_.size):At.resolve(Nu());let N=-1,oe=_;return w.next(me=>At.forEach(me,(Ne,st)=>(N<st.largestBatchId&&(N=st.largestBatchId),_.get(Ne)?At.resolve():this.getBaseDocument(e,Ne,st).next(Lt=>{oe=oe.insert(Ne,Lt)}))).next(()=>this.populateOverlays(e,me,_)).next(()=>this.computeViews(e,oe,me,Kr())).next(Ne=>({batchId:N,changes:bc(Ne)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pn(n)).next(d=>{let p=Qd();return d.isFoundDocument()&&(p=p.insert(d.key,d)),p})}getDocumentsMatchingCollectionGroupQuery(e,n,d){const p=n.collectionGroup;let _=Qd();return this.indexManager.getCollectionParents(e,p).next(w=>At.forEach(w,N=>{const oe=(me=n,Ne=N.child(p),new yc(Ne,null,me.explicitOrderBy.slice(),me.filters.slice(),me.limit,me.limitType,me.startAt,me.endAt));var me,Ne;return this.getDocumentsMatchingCollectionQuery(e,oe,d).next(me=>{me.forEach((Ne,st)=>{_=_.insert(Ne,st)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,n,d){let p;return this.remoteDocumentCache.getAllFromCollection(e,n.path,d).next(_=>(p=_,this.documentOverlayCache.getOverlaysForCollection(e,n.path,d.largestBatchId))).next(_=>{_.forEach((N,oe)=>{const me=oe.getKey();null===p.get(me)&&(p=p.insert(me,Gi.newInvalidDocument(me)))});let w=Qd();return p.forEach((N,oe)=>{const me=_.get(N);void 0!==me&&$c(me.mutation,oe,Gn.empty(),ts.now()),_c(n,oe)&&(w=w.insert(N,oe))}),w})}getBaseDocument(e,n,d){return null===d||1===d.mutation.type?this.remoteDocumentCache.getEntry(e,n):At.resolve(Gi.newInvalidDocument(n))}}class Xv{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return At.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var d;return this.Zn.set(n.id,{id:(d=n).id,version:d.version,createTime:oa(d.createTime)}),At.resolve()}getNamedQuery(e,n){return At.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(d=n).name,query:Hf(d.bundledQuery),readTime:oa(d.readTime)}),At.resolve();var d}}class Cm{constructor(){this.overlays=new _e(Pn.comparator),this.es=new Map}getOverlay(e,n){return At.resolve(this.overlays.get(n))}getOverlays(e,n){const d=Nu();return At.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&d.set(p,_)})).next(()=>d)}saveOverlays(e,n,d){return d.forEach((p,_)=>{this.ue(e,n,_)}),At.resolve()}removeOverlaysForBatchId(e,n,d){const p=this.es.get(d);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.es.delete(d)),At.resolve()}getOverlaysForCollection(e,n,d){const p=Nu(),_=n.length+1,w=new Pn(n.child("")),N=this.overlays.getIteratorFrom(w);for(;N.hasNext();){const oe=N.getNext().value,me=oe.getKey();if(!n.isPrefixOf(me.path))break;me.path.length===_&&oe.largestBatchId>d&&p.set(oe.getKey(),oe)}return At.resolve(p)}getOverlaysForCollectionGroup(e,n,d,p){let _=new _e((me,Ne)=>me-Ne);const w=this.overlays.getIterator();for(;w.hasNext();){const me=w.getNext().value;if(me.getKey().getCollectionGroup()===n&&me.largestBatchId>d){let Ne=_.get(me.largestBatchId);null===Ne&&(Ne=Nu(),_=_.insert(me.largestBatchId,Ne)),Ne.set(me.getKey(),me)}}const N=Nu(),oe=_.getIterator();for(;oe.hasNext()&&(oe.getNext().value.forEach((me,Ne)=>N.set(me,Ne)),!(N.size()>=p)););return At.resolve(N)}ue(e,n,d){const p=this.overlays.get(d.key);if(null!==p){const w=this.es.get(p.largestBatchId).delete(d.key);this.es.set(p.largestBatchId,w)}this.overlays=this.overlays.insert(d.key,new _d(n,d));let _=this.es.get(n);void 0===_&&(_=Kr(),this.es.set(n,_)),this.es.set(n,_.add(d.key))}}class Yf{constructor(){this.ns=new Rt(ka.ss),this.rs=new Rt(ka.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const d=new ka(e,n);this.ns=this.ns.add(d),this.rs=this.rs.add(d)}us(e,n){e.forEach(d=>this.addReference(d,n))}removeReference(e,n){this.cs(new ka(e,n))}hs(e,n){e.forEach(d=>this.removeReference(d,n))}ls(e){const n=new Pn(new Fr([])),d=new ka(n,e),p=new ka(n,e+1),_=[];return this.rs.forEachInRange([d,p],w=>{this.cs(w),_.push(w.key)}),_}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new Pn(new Fr([])),d=new ka(n,e),p=new ka(n,e+1);let _=Kr();return this.rs.forEachInRange([d,p],w=>{_=_.add(w.key)}),_}containsKey(e){const n=new ka(e,0),d=this.ns.firstAfterOrEqual(n);return null!==d&&e.isEqual(d.key)}}class ka{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return Pn.comparator(e.key,n.key)||Lr(e._s,n._s)}static os(e,n){return Lr(e._s,n._s)||Pn.comparator(e.key,n.key)}}class sg{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Rt(ka.ss)}checkEmpty(e){return At.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,d,p){const _=this.ws;this.ws++;const w=new Ol(_,n,d,p);this.mutationQueue.push(w);for(const N of p)this.gs=this.gs.add(new ka(N.key,_)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return At.resolve(w)}lookupMutationBatch(e,n){return At.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const p=this.ps(n+1),_=p<0?0:p;return At.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const d=new ka(n,0),p=new ka(n,Number.POSITIVE_INFINITY),_=[];return this.gs.forEachInRange([d,p],w=>{const N=this.ys(w._s);_.push(N)}),At.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let d=new Rt(Lr);return n.forEach(p=>{const _=new ka(p,0),w=new ka(p,Number.POSITIVE_INFINITY);this.gs.forEachInRange([_,w],N=>{d=d.add(N._s)})}),At.resolve(this.Is(d))}getAllMutationBatchesAffectingQuery(e,n){const d=n.path,p=d.length+1;let _=d;Pn.isDocumentKey(_)||(_=_.child(""));const w=new ka(new Pn(_),0);let N=new Rt(Lr);return this.gs.forEachWhile(oe=>{const me=oe.key.path;return!!d.isPrefixOf(me)&&(me.length===p&&(N=N.add(oe._s)),!0)},w),At.resolve(this.Is(N))}Is(e){const n=[];return e.forEach(d=>{const p=this.ys(d);null!==p&&n.push(p)}),n}removeMutationBatch(e,n){dr(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let d=this.gs;return At.forEach(n.mutations,p=>{const _=new ka(p.key,n.batchId);return d=d.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.gs=d})}An(e){}containsKey(e,n){const d=new ka(n,0),p=this.gs.firstAfterOrEqual(d);return At.resolve(n.isEqual(p&&p.key))}performConsistencyCheck(e){return At.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class og{constructor(e){this.Es=e,this.docs=new _e(Pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const d=n.key,p=this.docs.get(d),_=p?p.size:0,w=this.Es(n);return this.docs=this.docs.insert(d,{document:n.mutableCopy(),size:w}),this.size+=w-_,this.indexManager.addToCollectionParentIndex(e,d.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const d=this.docs.get(n);return At.resolve(d?d.document.mutableCopy():Gi.newInvalidDocument(n))}getEntries(e,n){let d=su();return n.forEach(p=>{const _=this.docs.get(p);d=d.insert(p,_?_.document.mutableCopy():Gi.newInvalidDocument(p))}),At.resolve(d)}getAllFromCollection(e,n,d){let p=su();const _=new Pn(n.child("")),w=this.docs.getIteratorFrom(_);for(;w.hasNext();){const{key:N,value:{document:oe}}=w.getNext();if(!n.isPrefixOf(N.path))break;N.path.length>n.length+1||ll(Go(oe),d)<=0||(p=p.insert(oe.key,oe.mutableCopy()))}return At.resolve(p)}getAllFromCollectionGroup(e,n,d,p){Jn()}As(e,n){return At.forEach(this.docs,d=>n(d))}newChangeBuffer(e){return new Jv(this)}getSize(e){return At.resolve(this.size)}}class Jv extends Yv{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((d,p)=>{p.isValidDocument()?n.push(this.Yn.addEntry(e,p)):this.Yn.removeEntry(d)}),At.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class xm{constructor(e){this.persistence=e,this.Rs=new Kl(n=>Ha(n),Bc),this.lastRemoteSnapshotVersion=Er.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Yf,this.targetCount=0,this.vs=hh.Pn()}forEachTarget(e,n){return this.Rs.forEach((d,p)=>n(p)),At.resolve()}getLastRemoteSnapshotVersion(e){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return At.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(e,n,d){return d&&(this.lastRemoteSnapshotVersion=d),n>this.bs&&(this.bs=n),At.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new hh(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,At.resolve()}updateTargetData(e,n){return this.Dn(n),At.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,At.resolve()}removeTargets(e,n,d){let p=0;const _=[];return this.Rs.forEach((w,N)=>{N.sequenceNumber<=n&&null===d.get(N.targetId)&&(this.Rs.delete(w),_.push(this.removeMatchingKeysForTargetId(e,N.targetId)),p++)}),At.waitFor(_).next(()=>p)}getTargetCount(e){return At.resolve(this.targetCount)}getTargetData(e,n){const d=this.Rs.get(n)||null;return At.resolve(d)}addMatchingKeys(e,n,d){return this.Ps.us(n,d),At.resolve()}removeMatchingKeys(e,n,d){this.Ps.hs(n,d);const p=this.persistence.referenceDelegate,_=[];return p&&n.forEach(w=>{_.push(p.markPotentiallyOrphaned(e,w))}),At.waitFor(_)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),At.resolve()}getMatchingKeysForTargetId(e,n){const d=this.Ps.ds(n);return At.resolve(d)}containsKey(e,n){return At.resolve(this.Ps.containsKey(n))}}class Im{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new O(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new xm(this),this.indexManager=new Nl,this.remoteDocumentCache=new og(d=>this.referenceDelegate.xs(d)),this.It=new Gv(n),this.Ns=new Xv(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let d=this.Vs[e.toKey()];return d||(d=new sg(n,this.referenceDelegate),this.Vs[e.toKey()]=d),d}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,d){En("MemoryPersistence","Starting transaction:",e);const p=new Dm(this.Ss.next());return this.referenceDelegate.ks(),d(p).next(_=>this.referenceDelegate.Os(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}Ms(e,n){return At.or(Object.values(this.Vs).map(d=>()=>d.containsKey(e,n)))}}class Dm extends Wu{constructor(e){super(),this.currentSequenceNumber=e}}class Pc{constructor(e){this.persistence=e,this.Fs=new Yf,this.$s=null}static Bs(e){return new Pc(e)}get Ls(){if(this.$s)return this.$s;throw Jn()}addReference(e,n,d){return this.Fs.addReference(d,n),this.Ls.delete(d.toString()),At.resolve()}removeReference(e,n,d){return this.Fs.removeReference(d,n),this.Ls.add(d.toString()),At.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),At.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(p=>this.Ls.add(p.toString()));const d=this.persistence.getTargetCache();return d.getMatchingKeysForTargetId(e,n.targetId).next(p=>{p.forEach(_=>this.Ls.add(_.toString()))}).next(()=>d.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.Ls,d=>{const p=Pn.fromPath(d);return this.Us(e,p).next(_=>{_||n.removeEntry(p,Er.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(d=>{d?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return At.or([()=>At.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class i_{constructor(e){this.It=e}$(e,n,d,p){const _=new xl("createOrUpgrade",n);var N;d<1&&p>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cc,{unique:!0}),N.createObjectStore("documentMutations"),Am(e),function(N){N.createObjectStore("remoteDocuments")}(e));let w=At.resolve();return d<3&&p>=3&&(0!==d&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Am(e)),w=w.next(()=>function(N){const oe=N.store("targetGlobal"),me={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Er.min().toTimestamp(),targetCount:0};return oe.put("targetGlobalKey",me)}(_))),d<4&&p>=4&&(0!==d&&(w=w.next(()=>function(N,oe){return oe.store("mutations").W().next(me=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cc,{unique:!0});const Ne=oe.store("mutations"),st=me.map(Lt=>Ne.put(Lt));return At.waitFor(st)})}(e,_))),w=w.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),d<5&&p>=5&&(w=w.next(()=>this.qs(_))),d<6&&p>=6&&(w=w.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(_)))),d<7&&p>=7&&(w=w.next(()=>this.Gs(_))),d<8&&p>=8&&(w=w.next(()=>this.Qs(e,_))),d<9&&p>=9&&(w=w.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),d<10&&p>=10&&(w=w.next(()=>this.js(_))),d<11&&p>=11&&(w=w.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),d<12&&p>=12&&(w=w.next(()=>{!function(N){const oe=N.createObjectStore("documentOverlays",{keyPath:Qu});oe.createIndex("collectionPathOverlayIndex",t_,{unique:!1}),oe.createIndex("collectionGroupOverlayIndex",$v,{unique:!1})}(e)})),d<13&&p>=13&&(w=w.next(()=>function(N){const oe=N.createObjectStore("remoteDocumentsV14",{keyPath:qo});oe.createIndex("documentKeyIndex",ah),oe.createIndex("collectionGroupIndex",yd)}(e)).next(()=>this.Ws(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),d<14&&p>=14&&(w=w.next(()=>this.zs(e,_))),d<15&&p>=15&&(w=w.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:fm}).createIndex("sequenceNumberIndex",Wh,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:e_}).createIndex("documentKeyIndex",Zp,{unique:!1})}(e))),w}Ks(e){let n=0;return e.store("remoteDocuments").Z((d,p)=>{n+=_m(p)}).next(()=>{const d={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",d)})}qs(e){const n=e.store("mutationQueues"),d=e.store("mutations");return n.W().next(p=>At.forEach(p,_=>{const w=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return d.W("userMutationsIndex",w).next(N=>At.forEach(N,oe=>{dr(oe.userId===_.userId);const me=Fo(this.It,oe);return ym(e,_.userId,me).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),d=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return d.Z((w,N)=>{const oe=new Fr(w),me=[0,Ki(oe)];_.push(n.get(me).next(Ne=>Ne?At.resolve():n.put({targetId:0,path:Ki(oe),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>At.waitFor(_))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:uh});const d=n.store("collectionParents"),p=new lh,_=w=>{if(p.add(w)){const N=w.lastSegment(),oe=w.popLast();return d.put({collectionId:N,parent:Ki(oe)})}};return n.store("remoteDocuments").Z({X:!0},(w,N)=>{const oe=new Fr(w);return _(oe.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([w,N,oe],me)=>{const Ne=vl(N);return _(Ne.popLast())}))}js(e){const n=e.store("targets");return n.Z((d,p)=>{const _=Xl(p),w=Jp(this.It,_);return n.put(w)})}Ws(e,n){const d=n.store("remoteDocuments"),p=[];return d.Z((_,w)=>{const N=n.store("remoteDocumentsV14"),oe=(me=w,me.document?new Pn(Fr.fromString(me.document.name).popFirst(5)):me.noDocument?Pn.fromSegments(me.noDocument.path):me.unknownDocument?Pn.fromSegments(me.unknownDocument.path):Jn()).path.toArray();var me;const Ne={prefixPath:oe.slice(0,oe.length-2),collectionGroup:oe[oe.length-2],documentId:oe[oe.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};p.push(N.put(Ne))}).next(()=>At.waitFor(p))}zs(e,n){const d=n.store("mutations"),p=Em(this.It),_=new Im(Pc.Bs,this.It.re);return d.W().next(w=>{const N=new Map;return w.forEach(oe=>{var me;let Ne=null!==(me=N.get(oe.userId))&&void 0!==me?me:Kr();Fo(this.It,oe).keys().forEach(st=>Ne=Ne.add(st)),N.set(oe.userId,Ne)}),At.forEach(N,(oe,me)=>{const Ne=new gr(me),st=Gf.oe(this.It,Ne),Lt=_.getIndexManager(Ne),nn=kc.oe(Ne,this.It,Lt,_.referenceDelegate);return new wm(p,nn,st,Lt).recalculateAndSaveOverlaysForDocumentKeys(new yl(n,O.at),oe).next()})})}}function Am(l){l.createObjectStore("targetDocuments",{keyPath:Ic}).createIndex("documentTargetsIndex",qc,{unique:!0}),l.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xc,{unique:!0}),l.createObjectStore("targetGlobal")}const ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ug{constructor(e,n,d,p,_,w,N,oe,me,Ne,st=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=d,this.Hs=_,this.window=w,this.document=N,this.Js=me,this.Ys=Ne,this.Xs=st,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Lt=>Promise.resolve(),!ug.C())throw new ln(Gt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kf(this,p),this.ii=n+"main",this.It=new Gv(oe),this.ri=new Fi(this.ii,this.Xs,new i_(this.It)),this.Cs=new Kv(this.referenceDelegate,this.It),this.remoteDocumentCache=Em(this.It),this.Ns=new gm,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Ne&&Es("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ln(Gt.FAILED_PRECONDITION,ag);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new O(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var d=(0,Z.Z)(function*(p){if(n.started)return e(p)});return function(p){return d.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=(0,Z.Z)(function*(d){null===d.newVersion&&(yield e())});return function(d){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Z.Z)(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ss(e))return En("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return En("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return tf(e).get("owner").next(n=>At.resolve(this.mi(n)))}gi(e){return nf(e).delete(this.clientId)}yi(){var e=this;return(0,Z.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",d=>{const p=Zs(d,"clientMetadata");return p.W().next(_=>{const w=e.Ii(_,18e5),N=_.filter(oe=>-1===w.indexOf(oe));return At.forEach(N,oe=>p.delete(oe.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const d of n)e.oi.removeItem(e.Ti(d.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?At.resolve(!0):tf(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new ln(Gt.FAILED_PRECONDITION,ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||nf(e).W().next(d=>void 0===this.Ii(d,5e3).find(p=>{if(this.clientId!==p.clientId){const w=!this.inForeground&&p.inForeground,N=this.networkEnabled===p.networkEnabled;if(!this.networkEnabled&&p.networkEnabled||w&&N)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&En("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Z.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const d=new yl(n,O.at);return e._i(d).next(()=>e.gi(d))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(d=>this.pi(d.updateTimeMs,n)&&!this.Ei(d.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>nf(e).W().next(n=>this.Ii(n,18e5).map(d=>d.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return kc.oe(e,this.It,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wf(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Gf.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,n,d){En("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===n?"readonly":"readwrite",_=15===(w=this.Xs)?Qp:14===w?Pl:13===w?Yp:12===w?Vf:11===w?It:void Jn();var w;let N;return this.ri.runTransaction(e,p,_,oe=>(N=new yl(oe,this.Ss?this.Ss.next():O.at),"readwrite-primary"===n?this.fi(N).next(me=>!!me||this.di(N)).next(me=>{if(!me)throw Es(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new ln(Gt.FAILED_PRECONDITION,Mh);return d(N)}).next(me=>this.wi(N).next(()=>me)):this.Vi(N).next(()=>d(N)))).then(oe=>(N.raiseOnCommittedEvent(),oe))}Vi(e){return tf(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ln(Gt.FAILED_PRECONDITION,ag)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tf(e).put("owner",n)}static C(){return Fi.C()}_i(e){const n=tf(e);return n.get("owner").next(d=>this.mi(d)?(En("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):At.resolve())}pi(e,n){const d=Date.now();return!(e<d-n||e>d&&(Es(`Detected an update time that is in the future: ${e} > ${d}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Et.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const d=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return En("IndexedDbPersistence",`Client '${e}' ${d?"is":"is not"} zombied in LocalStorage`),d}catch(d){return Es("IndexedDbPersistence","Failed to get zombied client id.",d),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Es("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tf(l){return Zs(l,"owner")}function nf(l){return Zs(l,"clientMetadata")}function lg(l,e){let n=l.projectId;return l.isDefaultDatabase||(n+="."+l.database),"firestore/"+e+"/"+n+"/"}class km{constructor(e,n,d,p){this.targetId=e,this.fromCache=n,this.Si=d,this.Di=p}static Ci(e,n){let d=Kr(),p=Kr();for(const _ of n.docChanges)switch(_.type){case 0:d=d.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new km(e,n.fromCache,d,p)}}class Mm{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,d,p){return this.ki(e,n).next(_=>_||this.Oi(e,n,p,d)).next(_=>_||this.Mi(e,n))}ki(e,n){if(zd(n))return At.resolve(null);let d=Da(n);return this.indexManager.getIndexType(e,d).next(p=>0===p?null:(null!==n.limit&&1===p&&(n=Vc(n,null,"F"),d=Da(n)),this.indexManager.getDocumentsMatchingTarget(e,d).next(_=>{const w=Kr(..._);return this.Ni.getDocuments(e,w).next(N=>this.indexManager.getMinOffset(e,d).next(oe=>{const me=this.Fi(n,N);return this.$i(n,me,w,oe.readTime)?this.ki(e,Vc(n,null,"F")):this.Bi(e,me,n,oe)}))})))}Oi(e,n,d,p){return zd(n)||p.isEqual(Er.min())?this.Mi(e,n):this.Ni.getDocuments(e,d).next(_=>{const w=this.Fi(n,_);return this.$i(n,w,d,p)?this.Mi(e,n):(ja()<=_t.in.DEBUG&&En("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),_u(n)),this.Bi(e,w,n,va(p,-1)))})}Fi(e,n){let d=new Rt(Of(e));return n.forEach((p,_)=>{_c(e,_)&&(d=d.add(_))}),d}$i(e,n,d,p){if(null===e.limit)return!1;if(d.size!==n.size)return!0;const _="F"===e.limitType?n.last():n.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}Mi(e,n){return ja()<=_t.in.DEBUG&&En("QueryEngine","Using full collection scan to execute query:",_u(n)),this.Ni.getDocumentsMatchingQuery(e,n,xo.min())}Bi(e,n,d,p){return this.Ni.getDocumentsMatchingQuery(e,d,p).next(_=>(n.forEach(w=>{_=_.insert(w.key,w)}),_))}}class Pm{constructor(e,n,d,p){this.persistence=e,this.Li=n,this.It=p,this.Ui=new _e(Lr),this.qi=new Kl(_=>Ha(_),Bc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(d)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wm(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function _a(l,e,n,d){return new Pm(l,e,n,d)}function ey(l,e){return cg.apply(this,arguments)}function cg(){return cg=(0,Z.Z)(function*(l,e){const n=$n(l);return yield n.persistence.runTransaction("Handle user change","readonly",d=>{let p;return n.mutationQueue.getAllMutationBatches(d).next(_=>(p=_,n.Qi(e),n.mutationQueue.getAllMutationBatches(d))).next(_=>{const w=[],N=[];let oe=Kr();for(const me of p){w.push(me.batchId);for(const Ne of me.mutations)oe=oe.add(Ne.key)}for(const me of _){N.push(me.batchId);for(const Ne of me.mutations)oe=oe.add(Ne.key)}return n.localDocuments.getDocuments(d,oe).next(me=>({ji:me,removedBatchIds:w,addedBatchIds:N}))})})}),cg.apply(this,arguments)}function ec(l,e){const n=$n(l);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",d=>{const p=e.batch.keys(),_=n.Gi.newChangeBuffer({trackRemovals:!0});return function(w,N,oe,me){const Ne=oe.batch,st=Ne.keys();let Lt=At.resolve();return st.forEach(nn=>{Lt=Lt.next(()=>me.getEntry(N,nn)).next(Zt=>{const Xn=oe.docVersions.get(nn);dr(null!==Xn),Zt.version.compareTo(Xn)<0&&(Ne.applyToRemoteDocument(Zt,oe),Zt.isValidDocument()&&(Zt.setReadTime(oe.commitVersion),me.addEntry(Zt)))})}),Lt.next(()=>w.mutationQueue.removeMutationBatch(N,Ne))}(n,d,e,_).next(()=>_.apply(d)).next(()=>n.mutationQueue.performConsistencyCheck(d)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(d,p,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,function(w){let N=Kr();for(let oe=0;oe<w.mutationResults.length;++oe)w.mutationResults[oe].transformResults.length>0&&(N=N.add(w.batch.mutations[oe].key));return N}(e))).next(()=>n.localDocuments.getDocuments(d,p))})}function Om(l){const e=$n(l);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Rm(l,e){const n=$n(l),d=e.snapshotVersion;let p=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const w=n.Gi.newChangeBuffer({trackRemovals:!0});p=n.Ui;const N=[];e.targetChanges.forEach((Ne,st)=>{const Lt=p.get(st);if(!Lt)return;N.push(n.Cs.removeMatchingKeys(_,Ne.removedDocuments,st).next(()=>n.Cs.addMatchingKeys(_,Ne.addedDocuments,st)));let nn=Lt.withSequenceNumber(_.currentSequenceNumber);var Zt,Xn,ir;e.targetMismatches.has(st)?nn=nn.withResumeToken(Ui.EMPTY_BYTE_STRING,Er.min()).withLastLimboFreeSnapshotVersion(Er.min()):Ne.resumeToken.approximateByteSize()>0&&(nn=nn.withResumeToken(Ne.resumeToken,d)),p=p.insert(st,nn),Xn=nn,ir=Ne,(0===(Zt=Lt).resumeToken.approximateByteSize()||Xn.snapshotVersion.toMicroseconds()-Zt.snapshotVersion.toMicroseconds()>=3e8||ir.addedDocuments.size+ir.modifiedDocuments.size+ir.removedDocuments.size>0)&&N.push(n.Cs.updateTargetData(_,nn))});let oe=su(),me=Kr();if(e.documentUpdates.forEach(Ne=>{e.resolvedLimboDocuments.has(Ne)&&N.push(n.persistence.referenceDelegate.updateLimboDocument(_,Ne))}),N.push(Nm(_,w,e.documentUpdates).next(Ne=>{oe=Ne.Wi,me=Ne.zi})),!d.isEqual(Er.min())){const Ne=n.Cs.getLastRemoteSnapshotVersion(_).next(st=>n.Cs.setTargetsMetadata(_,_.currentSequenceNumber,d));N.push(Ne)}return At.waitFor(N).next(()=>w.apply(_)).next(()=>n.localDocuments.getLocalViewOfDocuments(_,oe,me)).next(()=>oe)}).then(_=>(n.Ui=p,_))}function Nm(l,e,n){let d=Kr(),p=Kr();return n.forEach(_=>d=d.add(_)),e.getEntries(l,d).next(_=>{let w=su();return n.forEach((N,oe)=>{const me=_.get(N);oe.isFoundDocument()!==me.isFoundDocument()&&(p=p.add(N)),oe.isNoDocument()&&oe.version.isEqual(Er.min())?(e.removeEntry(N,oe.readTime),w=w.insert(N,oe)):!me.isValidDocument()||oe.version.compareTo(me.version)>0||0===oe.version.compareTo(me.version)&&me.hasPendingWrites?(e.addEntry(oe),w=w.insert(N,oe)):En("LocalStore","Ignoring outdated watch update for ",N,". Current version:",me.version," Watch version:",oe.version)}),{Wi:w,zi:p}})}function s_(l,e){const n=$n(l);return n.persistence.runTransaction("Get next mutation batch","readonly",d=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(d,e)))}function rf(l,e){const n=$n(l);return n.persistence.runTransaction("Allocate target","readwrite",d=>{let p;return n.Cs.getTargetData(d,e).next(_=>_?(p=_,At.resolve(p)):n.Cs.allocateTargetId(d).next(w=>(p=new Rl(e,w,0,d.currentSequenceNumber),n.Cs.addTargetData(d,p).next(()=>p))))}).then(d=>{const p=n.Ui.get(d.targetId);return(null===p||d.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(d.targetId,d),n.qi.set(e,d.targetId)),d})}function sf(l,e,n){return dg.apply(this,arguments)}function dg(){return dg=(0,Z.Z)(function*(l,e,n){const d=$n(l),p=d.Ui.get(e),_=n?"readwrite":"readwrite-primary";try{n||(yield d.persistence.runTransaction("Release target",_,w=>d.persistence.referenceDelegate.removeTarget(w,p)))}catch(w){if(!ss(w))throw w;En("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}d.Ui=d.Ui.remove(e),d.qi.delete(p.target)}),dg.apply(this,arguments)}function hg(l,e,n){const d=$n(l);let p=Er.min(),_=Kr();return d.persistence.runTransaction("Execute query","readonly",w=>function(N,oe,me){const Ne=$n(N),st=Ne.qi.get(me);return void 0!==st?At.resolve(Ne.Ui.get(st)):Ne.Cs.getTargetData(oe,me)}(d,w,Da(e)).next(N=>{if(N)return p=N.lastLimboFreeSnapshotVersion,d.Cs.getMatchingKeysForTargetId(w,N.targetId).next(oe=>{_=oe})}).next(()=>d.Li.getDocumentsMatchingQuery(w,e,n?p:Er.min(),n?_:Kr())).next(N=>(pi(d,ld(e),N),{documents:N,Hi:_})))}function Lm(l,e){const n=$n(l),d=$n(n.Cs),p=n.Ui.get(e);return p?Promise.resolve(p.target):n.persistence.runTransaction("Get target data","readonly",_=>d.se(_,e).next(w=>w?w.target:null))}function Fm(l,e){const n=$n(l),d=n.Ki.get(e)||Er.min();return n.persistence.runTransaction("Get new document changes","readonly",p=>n.Gi.getAllFromCollectionGroup(p,e,va(d,-1),Number.MAX_SAFE_INTEGER)).then(p=>(pi(n,e,p),p))}function pi(l,e,n){let d=l.Ki.get(e)||Er.min();n.forEach((p,_)=>{_.readTime.compareTo(d)>0&&(d=_.readTime)}),l.Ki.set(e,d)}function fg(){return fg=(0,Z.Z)(function*(l,e,n,d){const p=$n(l);let _=Kr(),w=su();for(const me of n){const Ne=e.Ji(me.metadata.name);me.document&&(_=_.add(Ne));const st=e.Yi(me);st.setReadTime(e.Xi(me.metadata.readTime)),w=w.insert(Ne,st)}const N=p.Gi.newChangeBuffer({trackRemovals:!0}),oe=yield rf(p,(me=d,Da(Wl(Fr.fromString(`__bundle__/docs/${me}`)))));var me;return p.persistence.runTransaction("Apply bundle documents","readwrite",me=>Nm(me,N,w).next(Ne=>(N.apply(me),Ne)).next(Ne=>p.Cs.removeMatchingKeysForTargetId(me,oe.targetId).next(()=>p.Cs.addMatchingKeys(me,_,oe.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(me,Ne.Wi,Ne.zi)).next(()=>Ne.Wi)))}),fg.apply(this,arguments)}function ty(l,e){return pg.apply(this,arguments)}function pg(){return pg=(0,Z.Z)(function*(l,e,n=Kr()){const d=yield rf(l,Da(Hf(e.bundledQuery))),p=$n(l);return p.persistence.runTransaction("Save named query","readwrite",_=>{const w=oa(e.readTime);if(d.snapshotVersion.compareTo(w)>=0)return p.Ns.saveNamedQuery(_,e);const N=d.withResumeToken(Ui.EMPTY_BYTE_STRING,w);return p.Ui=p.Ui.insert(N.targetId,N),p.Cs.updateTargetData(_,N).next(()=>p.Cs.removeMatchingKeysForTargetId(_,d.targetId)).next(()=>p.Cs.addMatchingKeys(_,n,d.targetId)).next(()=>p.Ns.saveNamedQuery(_,e))})}),pg.apply(this,arguments)}function ny(l,e){return`firestore_clients_${l}_${e}`}function Qf(l,e,n){let d=`firestore_mutations_${l}_${n}`;return e.isAuthenticated()&&(d+=`_${e.uid}`),d}function af(l,e){return`firestore_targets_${l}_${e}`}class Ju{constructor(e,n,d,p){this.user=e,this.batchId=n,this.state=d,this.error=p}static Zi(e,n,d){const p=JSON.parse(d);let _,w="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return w&&p.error&&(w="string"==typeof p.error.message&&"string"==typeof p.error.code,w&&(_=new ln(p.error.code,p.error.message))),w?new Ju(e,n,p.state,_):(Es("SharedClientState",`Failed to parse mutation state for ID '${n}': ${d}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,n,d){this.targetId=e,this.state=n,this.error=d}static Zi(e,n){const d=JSON.parse(n);let p,_="object"==typeof d&&-1!==["not-current","current","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return _&&d.error&&(_="string"==typeof d.error.message&&"string"==typeof d.error.code,_&&(p=new ln(d.error.code,d.error.message))),_?new mh(e,d.state,p):(Es("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const d=JSON.parse(n);let p="object"==typeof d&&d.activeTargetIds instanceof Array,_=Yu();for(let w=0;p&&w<d.activeTargetIds.length;++w)p=Hd(d.activeTargetIds[w]),_=_.add(d.activeTargetIds[w]);return p?new gg(e,_):(Es("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ry{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new ry(n.clientId,n.onlineState):(Es("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uf{constructor(){this.activeTargetIds=Yu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xf{constructor(e,n,d,p,_){this.window=e,this.Hs=n,this.persistenceKey=d,this.sr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new _e(Lr),this.started=!1,this.cr=[];const w=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.ar=ny(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new uf),this.lr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Z.Z)(function*(){const n=yield e.syncEngine.vi();for(const p of n){if(p===e.sr)continue;const _=e.getItem(ny(e.persistenceKey,p));if(_){const w=gg.Zi(p,_);w&&(e.ur=e.ur.insert(w.clientId,w))}}e.gr();const d=e.storage.getItem(e.wr);if(d){const p=e.yr(d);p&&e.pr(p)}for(const p of e.cr)e.rr(p);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((d,p)=>{p.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,d){this.Tr(e,n,d),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const d=this.storage.getItem(af(this.persistenceKey,e));if(d){const p=mh.Zi(e,d);p&&(n=p.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(af(this.persistenceKey,e))}updateQueryState(e,n,d){this.Rr(e,n,d)}handleUserChange(e,n,d){n.forEach(p=>{this.Er(p)}),this.currentUser=e,d.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return En("SharedClientState","READ",e,n),n}setItem(e,n){En("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){En("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const d=e;if(d.storageArea===this.storage){if(En("SharedClientState","EVENT",d.key,d.newValue),d.key===this.ar)return void Es("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Z.Z)(function*(){if(n.started){if(null!==d.key)if(n.lr.test(d.key)){if(null==d.newValue){const p=n.vr(d.key);return n.Vr(p,null)}{const p=n.Sr(d.key,d.newValue);if(p)return n.Vr(p.clientId,p)}}else if(n.dr.test(d.key)){if(null!==d.newValue){const p=n.Dr(d.key,d.newValue);if(p)return n.Cr(p)}}else if(n._r.test(d.key)){if(null!==d.newValue){const p=n.Nr(d.key,d.newValue);if(p)return n.kr(p)}}else if(d.key===n.wr){if(null!==d.newValue){const p=n.yr(d.newValue);if(p)return n.pr(p)}}else if(d.key===n.hr){const p=function(_){let w=O.at;if(null!=_)try{const N=JSON.parse(_);dr("number"==typeof N),w=N}catch(N){Es("SharedClientState","Failed to read sequence number from WebStorage",N)}return w}(d.newValue);p!==O.at&&n.sequenceNumberHandler(p)}else if(d.key===n.mr){const p=n.Or(d.newValue);yield Promise.all(p.map(_=>n.syncEngine.Mr(_)))}}else n.cr.push(d)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,d){const p=new Ju(this.currentUser,e,n,d),_=Qf(this.persistenceKey,this.currentUser,e);this.setItem(_,p.tr())}Er(e){const n=Qf(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,d){const p=af(this.persistenceKey,e),_=new mh(e,n,d);this.setItem(p,_.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const d=this.vr(e);return gg.Zi(d,n)}Dr(e,n){const d=this.dr.exec(e),p=Number(d[1]);return Ju.Zi(new gr(void 0!==d[2]?d[2]:null),p,n)}Nr(e,n){const d=this._r.exec(e),p=Number(d[1]);return mh.Zi(p,n)}yr(e){return ry.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var n=this;return(0,Z.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);En("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const d=n?this.ur.insert(e,n):this.ur.remove(e),p=this.Ir(this.ur),_=this.Ir(d),w=[],N=[];return _.forEach(oe=>{p.has(oe)||w.push(oe)}),p.forEach(oe=>{_.has(oe)||N.push(oe)}),this.syncEngine.Br(w,N).then(()=>{this.ur=d})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=Yu();return e.forEach((d,p)=>{n=n.unionWith(p.activeTargetIds)}),n}}class Qc{constructor(){this.Lr=new uf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,d){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,d){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new uf,Promise.resolve()}handleUserChange(e,n,d){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o_{qr(e){}shutdown(){}}class mg{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){En("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){En("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Um={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iy{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class a_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,d,p,_){const w=this.ho(e,n);En("RestConnection","Sending: ",w,d);const N={};return this.lo(N,p,_),this.fo(e,w,N,d).then(oe=>(En("RestConnection","Received: ",oe),oe),oe=>{throw vs("RestConnection",`${e} failed with error: `,oe,"url: ",w,"request:",d),oe})}_o(e,n,d,p,_,w){return this.ao(e,n,d,p,_)}lo(e,n,d){e["X-Goog-Api-Client"]="gl-js/ fire/"+No,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((p,_)=>e[_]=p),d&&d.headers.forEach((p,_)=>e[_]=p)}ho(e,n){return`${this.oo}/v1/${n}:${Um[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,d,p){return new Promise((_,w)=>{const N=new Uc;N.setWithCredentials(!0),N.listenOnce(Hl.COMPLETE,()=>{var me;try{switch(N.getLastErrorCode()){case ul.NO_ERROR:const Ne=N.getResponseJson();En("Connection","XHR received:",JSON.stringify(Ne)),_(Ne);break;case ul.TIMEOUT:En("Connection",'RPC "'+e+'" timed out'),w(new ln(Gt.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:const st=N.getStatus();if(En("Connection",'RPC "'+e+'" failed with status:',st,"response text:",N.getResponseText()),st>0){let Lt=N.getResponseJson();Array.isArray(Lt)&&(Lt=Lt[0]);const nn=null===(me=Lt)||void 0===me?void 0:me.error;if(nn&&nn.status&&nn.message){const Zt=function(Xn){const ir=Xn.toLowerCase().replace(/_/g,"-");return Object.values(Gt).indexOf(ir)>=0?ir:Gt.UNKNOWN}(nn.status);w(new ln(Zt,nn.message))}else w(new ln(Gt.UNKNOWN,"Server responded with status "+N.getStatus()))}else w(new ln(Gt.UNAVAILABLE,"Connection failed."));break;default:Jn()}}finally{En("Connection",'RPC "'+e+'" completed.')}});const oe=JSON.stringify(p);N.send(n,"POST",oe,d,15)})}wo(e,n,d){const p=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=$o(),w=Tl(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new Mu({})),this.lo(N.initMessageHeaders,n,d),N.encodeInitMessageHeaders=!0;const oe=p.join("");En("Connection","Creating WebChannel: "+oe,N);const me=_.createWebChannel(oe,N);let Ne=!1,st=!1;const Lt=new iy({Hr:Zt=>{st?En("Connection","Not sending because WebChannel is closed:",Zt):(Ne||(En("Connection","Opening WebChannel transport."),me.open(),Ne=!0),En("Connection","WebChannel sending:",Zt),me.send(Zt))},Jr:()=>me.close()}),nn=(Zt,Xn,ir)=>{Zt.listen(Xn,Yi=>{try{ir(Yi)}catch(Gs){setTimeout(()=>{throw Gs},0)}})};return nn(me,du.EventType.OPEN,()=>{st||En("Connection","WebChannel transport opened.")}),nn(me,du.EventType.CLOSE,()=>{st||(st=!0,En("Connection","WebChannel transport closed"),Lt.io())}),nn(me,du.EventType.ERROR,Zt=>{st||(st=!0,vs("Connection","WebChannel transport errored:",Zt),Lt.io(new ln(Gt.UNAVAILABLE,"The operation could not be completed")))}),nn(me,du.EventType.MESSAGE,Zt=>{var Xn;if(!st){const ir=Zt.data[0];dr(!!ir);const Yi=ir,Gs=Yi.error||(null===(Xn=Yi[0])||void 0===Xn?void 0:Xn.error);if(Gs){En("Connection","WebChannel received error:",Gs);const us=Gs.status;let Uo=function(cs){const Ta=yo[cs];if(void 0!==Ta)return $p(Ta)}(us),ls=Gs.message;void 0===Uo&&(Uo=Gt.INTERNAL,ls="Unknown error status: "+us+" with message "+Gs.message),st=!0,Lt.io(new ln(Uo,ls)),me.close()}else En("Connection","WebChannel received:",ir),Lt.ro(ir)}}),nn(w,Hu.STAT_EVENT,Zt=>{Zt.stat===fc.PROXY?En("Connection","Detected buffering proxy"):Zt.stat===fc.NOPROXY&&En("Connection","Detected no buffering proxy")}),setTimeout(()=>{Lt.so()},0),Lt}}function u_(){return typeof window<"u"?window:null}function Bm(){return typeof document<"u"?document:null}function Jf(l){return new th(l,!0)}class vg{constructor(e,n,d=1e3,p=1.5,_=6e4){this.Hs=e,this.timerId=n,this.mo=d,this.yo=p,this.po=_,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),d=Math.max(0,Date.now()-this.Eo),p=Math.max(0,n-d);p>0&&En("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${d} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,p,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class l_{constructor(e,n,d,p,_,w,N,oe){this.Hs=e,this.vo=d,this.Vo=p,this.connection=_,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=N,this.listener=oe,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vg(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Z.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Z.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var d=this;return(0,Z.Z)(function*(){d.Lo(),d.Uo(),d.xo.cancel(),d.So++,4!==e?d.xo.reset():n&&n.code===Gt.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),d.xo.Ao()):n&&n.code===Gt.UNAUTHENTICATED&&3!==d.state&&(d.authCredentialsProvider.invalidateToken(),d.appCheckCredentialsProvider.invalidateToken()),null!==d.stream&&(d.qo(),d.stream.close(),d.stream=null),d.state=e,yield d.listener.Zr(n)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([d,p])=>{this.So===n&&this.Go(d,p)},d=>{e(()=>{const p=new ln(Gt.UNKNOWN,"Fetching auth token failed: "+d.message);return this.Qo(p)})})}Go(e,n){const d=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{d(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(p=>{d(()=>this.Qo(p))}),this.stream.onMessage(p=>{d(()=>this.onMessage(p))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Z.Z)(function*(){e.state=0,e.start()}))}Qo(e){return En("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(En("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c_ extends l_{constructor(e,n,d,p,_,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,d,p,w),this.It=_}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=function ih(l,e){let n;if("targetChange"in e){const d="NO_CHANGE"===(oe=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===oe?1:"REMOVE"===oe?2:"CURRENT"===oe?3:"RESET"===oe?4:Jn(),p=e.targetChange.targetIds||[],_=function(oe,me){return oe.gt?(dr(void 0===me||"string"==typeof me),Ui.fromBase64String(me||"")):(dr(void 0===me||me instanceof Uint8Array),Ui.fromUint8Array(me||new Uint8Array))}(l,e.targetChange.resumeToken),w=e.targetChange.cause,N=w&&function(oe){const me=void 0===oe.code?Gt.UNKNOWN:$p(oe.code);return new ln(me,oe.message||"")}(w);n=new Yl(d,p,_,N||null)}else if("documentChange"in e){const d=e.documentChange,p=Lu(l,d.document.name),_=oa(d.document.updateTime),w=new As({mapValue:{fields:d.document.fields}}),N=Gi.newFoundDocument(p,_,w);n=new Ec(d.targetIds||[],d.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const d=e.documentDelete,p=Lu(l,d.document),_=d.readTime?oa(d.readTime):Er.min(),w=Gi.newNoDocument(p,_);n=new Ec([],d.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const d=e.documentRemove,p=Lu(l,d.document);n=new Ec([],d.removedTargetIds||[],p,null)}else{if(!("filter"in e))return Jn();{const d=e.filter,_=new Hp(d.count||0);n=new Aa(d.targetId,_)}}var oe;return n}(this.It,e),d=function(p){if(!("targetChange"in p))return Er.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?Er.min():_.readTime?oa(_.readTime):Er.min()}(e);return this.listener.Wo(n,d)}zo(e){const n={};n.database=Eu(this.It),n.addTarget=function(p,_){let w;const N=_.target;return w=Ph(N)?{documents:qp(p,N)}:{query:C(p,N)},w.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?w.resumeToken=Hh(p,_.resumeToken):_.snapshotVersion.compareTo(Er.min())>0&&(w.readTime=sa(p,_.snapshotVersion.toTimestamp())),w}(this.It,e);const d=function T(l,e){const n=function(d,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);d&&(n.labels=d),this.Bo(n)}Ho(e){const n={};n.database=Eu(this.It),n.removeTarget=e,this.Bo(n)}}class lf extends l_{constructor(e,n,d,p,_,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,d,p,w),this.It=_,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(dr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function sh(l,e){return l&&l.length>0?(dr(void 0!==e),l.map(n=>function(d,p){let _=oa(d.updateTime?d.updateTime:p);return _.isEqual(Er.min())&&(_=oa(p)),new Kd(_,d.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),d=oa(e.commitTime);return this.listener.Zo(d,n)}return dr(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Eu(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(d=>Ml(this.It,d))};this.Bo(n)}}class sy extends class{}{constructor(e,n,d,p){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=d,this.It=p,this.nu=!1}su(){if(this.nu)throw new ln(Gt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.connection.ao(e,n,d,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ln(Gt.UNKNOWN,p.toString())})}_o(e,n,d,p){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,w])=>this.connection._o(e,n,d,_,w,p)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new ln(Gt.UNKNOWN,_.toString())})}terminate(){this.nu=!0}}class ay{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Es(n),this.ou=!1):En("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class cf{constructor(e,n,d,p,_){var w=this;this.localStore=e,this.datastore=n,this.asyncQueue=d,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=_,this.mu.qr(N=>{d.enqueueAndForget((0,Z.Z)(function*(){var oe;wd(w)&&(En("RemoteStore","Restarting streams for network reachability change."),yield(oe=(0,Z.Z)(function*(me){const Ne=$n(me);Ne._u.add(4),yield Jc(Ne),Ne.gu.set("Unknown"),Ne._u.delete(4),yield Ed(Ne)}),function(me){return oe.apply(this,arguments)})(w))}))}),this.gu=new ay(d,p)}}function Ed(l){return yg.apply(this,arguments)}function yg(){return yg=(0,Z.Z)(function*(l){if(wd(l))for(const e of l.wu)yield e(!0)}),yg.apply(this,arguments)}function Jc(l){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,Z.Z)(function*(l){for(const e of l.wu)yield e(!1)}),Sd.apply(this,arguments)}function df(l,e){const n=$n(l);n.du.has(e.targetId)||(n.du.set(e.targetId,e),ep(n)?Tg(n):Fu(n).ko()&&_g(n,e))}function hf(l,e){const n=$n(l),d=Fu(n);n.du.delete(e),d.ko()&&bg(n,e),0===n.du.size&&(d.ko()?d.Fo():wd(n)&&n.gu.set("Unknown"))}function _g(l,e){l.yu.Mt(e.targetId),Fu(l).zo(e)}function bg(l,e){l.yu.Mt(e),Fu(l).Ho(e)}function Tg(l){l.yu=new Wp({getRemoteKeysForTarget:e=>l.remoteSyncer.getRemoteKeysForTarget(e),se:e=>l.du.get(e)||null}),Fu(l).start(),l.gu.uu()}function ep(l){return wd(l)&&!Fu(l).No()&&l.du.size>0}function wd(l){return 0===$n(l)._u.size}function Eg(l){l.yu=void 0}function d_(l){return uy.apply(this,arguments)}function uy(){return uy=(0,Z.Z)(function*(l){l.du.forEach((e,n)=>{_g(l,e)})}),uy.apply(this,arguments)}function ff(l,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Z.Z)(function*(l,e){Eg(l),ep(l)?(l.gu.hu(e),Tg(l)):l.gu.set("Unknown")}),Sg.apply(this,arguments)}function ly(l,e,n){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,Z.Z)(function*(l,e,n){if(l.gu.set("Online"),e instanceof Yl&&2===e.state&&e.cause)try{yield(d=(0,Z.Z)(function*(p,_){const w=_.cause;for(const N of _.targetIds)p.du.has(N)&&(yield p.remoteSyncer.rejectListen(N,w),p.du.delete(N),p.yu.removeTarget(N))}),function(p,_){return d.apply(this,arguments)})(l,e)}catch(d){En("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),d),yield el(l,d)}else if(e instanceof Ec?l.yu.Gt(e):e instanceof Aa?l.yu.Yt(e):l.yu.Wt(e),!n.isEqual(Er.min()))try{const d=yield Om(l.localStore);n.compareTo(d)>=0&&(yield function(p,_){const w=p.yu.te(_);return w.targetChanges.forEach((N,oe)=>{if(N.resumeToken.approximateByteSize()>0){const me=p.du.get(oe);me&&p.du.set(oe,me.withResumeToken(N.resumeToken,_))}}),w.targetMismatches.forEach(N=>{const oe=p.du.get(N);if(!oe)return;p.du.set(N,oe.withResumeToken(Ui.EMPTY_BYTE_STRING,oe.snapshotVersion)),bg(p,N);const me=new Rl(oe.target,N,1,oe.sequenceNumber);_g(p,me)}),p.remoteSyncer.applyRemoteEvent(w)}(l,n))}catch(d){En("RemoteStore","Failed to raise snapshot:",d),yield el(l,d)}var d}),Oc.apply(this,arguments)}function el(l,e,n){return wg.apply(this,arguments)}function wg(){return wg=(0,Z.Z)(function*(l,e,n){if(!ss(e))throw e;l._u.add(1),yield Jc(l),l.gu.set("Offline"),n||(n=()=>Om(l.localStore)),l.asyncQueue.enqueueRetryable((0,Z.Z)(function*(){En("RemoteStore","Retrying IndexedDB access"),yield n(),l._u.delete(1),yield Ed(l)}))}),wg.apply(this,arguments)}function cy(l,e){return e().catch(n=>el(l,n,e))}function Cd(l){return tc.apply(this,arguments)}function tc(){return tc=(0,Z.Z)(function*(l){const e=$n(l),n=Dd(e);let d=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Cg(e);)try{const p=yield s_(e.localStore,d);if(null===p){0===e.fu.length&&n.Fo();break}d=p.batchId,dy(e,p)}catch(p){yield el(e,p)}xd(e)&&h_(e)}),tc.apply(this,arguments)}function Cg(l){return wd(l)&&l.fu.length<10}function dy(l,e){l.fu.push(e);const n=Dd(l);n.ko()&&n.Yo&&n.Xo(e.mutations)}function xd(l){return wd(l)&&!Dd(l).No()&&l.fu.length>0}function h_(l){Dd(l).start()}function Vm(l){return tp.apply(this,arguments)}function tp(){return tp=(0,Z.Z)(function*(l){Dd(l).eu()}),tp.apply(this,arguments)}function xg(l){return pf.apply(this,arguments)}function pf(){return pf=(0,Z.Z)(function*(l){const e=Dd(l);for(const n of l.fu)e.Xo(n.mutations)}),pf.apply(this,arguments)}function Id(l,e,n){return gf.apply(this,arguments)}function gf(){return gf=(0,Z.Z)(function*(l,e,n){const d=l.fu.shift(),p=Xp.from(d,e,n);yield cy(l,()=>l.remoteSyncer.applySuccessfulWrite(p)),yield Cd(l)}),gf.apply(this,arguments)}function Hm(l,e){return $m.apply(this,arguments)}function $m(){return $m=(0,Z.Z)(function*(l,e){var n;e&&Dd(l).Yo&&(yield(n=(0,Z.Z)(function*(d,p){if(jf(_=p.code)&&_!==Gt.ABORTED){const w=d.fu.shift();Dd(d).Mo(),yield cy(d,()=>d.remoteSyncer.rejectFailedWrite(w.batchId,p)),yield Cd(d)}var _}),function(d,p){return n.apply(this,arguments)})(l,e)),xd(l)&&h_(l)}),$m.apply(this,arguments)}function hy(l,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Z.Z)(function*(l,e){const n=$n(l);n.asyncQueue.verifyOperationInProgress(),En("RemoteStore","RemoteStore received new credentials");const d=wd(n);n._u.add(3),yield Jc(n),d&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield Ed(n)}),Ig.apply(this,arguments)}function Gm(l,e){return np.apply(this,arguments)}function np(){return np=(0,Z.Z)(function*(l,e){const n=$n(l);e?(n._u.delete(2),yield Ed(n)):e||(n._u.add(2),yield Jc(n),n.gu.set("Unknown"))}),np.apply(this,arguments)}function Fu(l){return l.pu||(l.pu=function(e,n,d){const p=$n(e);return p.su(),new c_(n,p.connection,p.authCredentials,p.appCheckCredentials,p.It,d)}(l.datastore,l.asyncQueue,{Yr:d_.bind(null,l),Zr:ff.bind(null,l),Wo:ly.bind(null,l)}),l.wu.push(function(){var e=(0,Z.Z)(function*(n){n?(l.pu.Mo(),ep(l)?Tg(l):l.gu.set("Unknown")):(yield l.pu.stop(),Eg(l))});return function(n){return e.apply(this,arguments)}}())),l.pu}function Dd(l){return l.Iu||(l.Iu=function(e,n,d){const p=$n(e);return p.su(),new lf(n,p.connection,p.authCredentials,p.appCheckCredentials,p.It,d)}(l.datastore,l.asyncQueue,{Yr:Vm.bind(null,l),Zr:Hm.bind(null,l),tu:xg.bind(null,l),Zo:Id.bind(null,l)}),l.wu.push(function(){var e=(0,Z.Z)(function*(n){n?(l.Iu.Mo(),yield Cd(l)):(yield l.Iu.stop(),l.fu.length>0&&(En("RemoteStore",`Stopping write stream with ${l.fu.length} pending writes`),l.fu=[]))});return function(n){return e.apply(this,arguments)}}())),l.Iu}class Wm{constructor(e,n,d,p,_){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=d,this.op=p,this.removalCallback=_,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,n,d,p,_){const w=Date.now()+d,N=new Wm(e,n,w,p,_);return N.start(d),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ln(Gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vh(l,e){if(Es("AsyncQueue",`${e}: ${l}`),ss(l))return new ln(Gt.UNAVAILABLE,`${e}: ${l}`);throw l}class yh{constructor(e){this.comparator=e?(n,d)=>e(n,d)||Pn.comparator(n.key,d.key):(n,d)=>Pn.comparator(n.key,d.key),this.keyedMap=Qd(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new yh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,d)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),d=e.sortedSet.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=d.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const d=new yh;return d.comparator=this.comparator,d.keyedMap=e,d.sortedSet=n,d}}class rp{constructor(){this.Tu=new _e(Pn.comparator)}track(e){const n=e.doc.key,d=this.Tu.get(n);d?0!==e.type&&3===d.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==d.type?this.Tu=this.Tu.insert(n,{type:d.type,doc:e.doc}):2===e.type&&2===d.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===d.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===d.type?this.Tu=this.Tu.remove(n):1===e.type&&2===d.type?this.Tu=this.Tu.insert(n,{type:1,doc:d.doc}):0===e.type&&1===d.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):Jn():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,d)=>{e.push(d)}),e}}class _h{constructor(e,n,d,p,_,w,N,oe,me){this.query=e,this.docs=n,this.oldDocs=d,this.docChanges=p,this.mutatedKeys=_,this.fromCache=w,this.syncStateChanged=N,this.excludesMetadataChanges=oe,this.hasCachedResults=me}static fromInitialDocuments(e,n,d,p,_){const w=[];return n.forEach(N=>{w.push({type:0,doc:N})}),new _h(e,n,yh.emptySet(n),w,d,p,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,d=e.docChanges;if(n.length!==d.length)return!1;for(let p=0;p<n.length;p++)if(n[p].type!==d[p].type||!n[p].doc.isEqual(d[p].doc))return!1;return!0}}class Ll{constructor(){this.Au=void 0,this.listeners=[]}}class Fl{constructor(){this.queries=new Kl(e=>jp(e),ud),this.onlineState="Unknown",this.Ru=new Set}}function tl(l,e){return zm.apply(this,arguments)}function zm(){return zm=(0,Z.Z)(function*(l,e){const n=$n(l),d=e.query;let p=!1,_=n.queries.get(d);if(_||(p=!0,_=new Ll),p)try{_.Au=yield n.onListen(d)}catch(w){const N=vh(w,`Initialization of query '${_u(e.query)}' failed`);return void e.onError(N)}n.queries.set(d,_),_.listeners.push(e),e.bu(n.onlineState),_.Au&&e.Pu(_.Au)&&fy(n)}),zm.apply(this,arguments)}function qm(l,e){return Km.apply(this,arguments)}function Km(){return Km=(0,Z.Z)(function*(l,e){const n=$n(l),d=e.query;let p=!1;const _=n.queries.get(d);if(_){const w=_.listeners.indexOf(e);w>=0&&(_.listeners.splice(w,1),p=0===_.listeners.length)}if(p)return n.queries.delete(d),n.onUnlisten(d)}),Km.apply(this,arguments)}function f_(l,e){const n=$n(l);let d=!1;for(const p of e){const w=n.queries.get(p.query);if(w){for(const N of w.listeners)N.Pu(p)&&(d=!0);w.Au=p}}d&&fy(n)}function K_(l,e,n){const d=$n(l),p=d.queries.get(e);if(p)for(const _ of p.listeners)_.onError(n);d.queries.delete(e)}function fy(l){l.Ru.forEach(e=>{e.next()})}class py{constructor(e,n,d){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=d||{}}Pu(e){if(!this.options.includeMetadataChanges){const d=[];for(const p of e.docChanges)3!==p.type&&d.push(p);e=new _h(e.query,e.docs,e.oldDocs,d,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||(!this.options.Nu||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=_h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Z_{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}class Rc{constructor(e){this.It=e}Ji(e){return Lu(this.It,e)}Yi(e){return e.metadata.exists?md(this.It,e.document,!1):Gi.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return oa(e)}}class Zm{constructor(e,n,d){this.Mu=e,this.localStore=n,this.It=d,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gy(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const d=Fr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(d.get(d.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,d=new Rc(this.It);for(const p of e)if(p.metadata.queries){const _=d.Ji(p.metadata.name);for(const w of p.metadata.queries){const N=(n.get(w)||Kr()).add(_);n.set(w,N)}}return n}complete(){var e=this;return(0,Z.Z)(function*(){const n=yield function jm(l,e,n,d){return fg.apply(this,arguments)}(e.localStore,new Rc(e.It),e.documents,e.Mu.id),d=e.$u(e.documents);for(const p of e.queries)yield ty(e.localStore,p,d.get(p.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function gy(l){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes}}class Ym{constructor(e){this.key=e}}class Dg{constructor(e){this.key=e}}class Qm{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Kr(),this.mutatedKeys=Kr(),this.Gu=Of(e),this.Qu=new yh(this.Gu)}get ju(){return this.Uu}Wu(e,n){const d=n?n.zu:new rp,p=n?n.Qu:this.Qu;let _=n?n.mutatedKeys:this.mutatedKeys,w=p,N=!1;const oe="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,me="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((Ne,st)=>{const Lt=p.get(Ne),nn=_c(this.query,st)?st:null,Zt=!!Lt&&this.mutatedKeys.has(Lt.key),Xn=!!nn&&(nn.hasLocalMutations||this.mutatedKeys.has(nn.key)&&nn.hasCommittedMutations);let ir=!1;Lt&&nn?Lt.data.isEqual(nn.data)?Zt!==Xn&&(d.track({type:3,doc:nn}),ir=!0):this.Hu(Lt,nn)||(d.track({type:2,doc:nn}),ir=!0,(oe&&this.Gu(nn,oe)>0||me&&this.Gu(nn,me)<0)&&(N=!0)):!Lt&&nn?(d.track({type:0,doc:nn}),ir=!0):Lt&&!nn&&(d.track({type:1,doc:Lt}),ir=!0,(oe||me)&&(N=!0)),ir&&(nn?(w=w.add(nn),_=Xn?_.add(Ne):_.delete(Ne)):(w=w.delete(Ne),_=_.delete(Ne)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const Ne="F"===this.query.limitType?w.last():w.first();w=w.delete(Ne.key),_=_.delete(Ne.key),d.track({type:1,doc:Ne})}return{Qu:w,zu:d,$i:N,mutatedKeys:_}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,d){const p=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const _=e.zu.Eu();_.sort((me,Ne)=>function(st,Lt){const nn=Zt=>{switch(Zt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jn()}};return nn(st)-nn(Lt)}(me.type,Ne.type)||this.Gu(me.doc,Ne.doc)),this.Ju(d);const w=n?this.Yu():[],N=0===this.Ku.size&&this.current?1:0,oe=N!==this.qu;return this.qu=N,0!==_.length||oe?{snapshot:new _h(this.query,e.Qu,p,_,e.mutatedKeys,0===N,oe,!1,!!d&&d.resumeToken.approximateByteSize()>0),Xu:w}:{Xu:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new rp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Kr(),this.Qu.forEach(d=>{this.Zu(d.key)&&(this.Ku=this.Ku.add(d.key))});const n=[];return e.forEach(d=>{this.Ku.has(d)||n.push(new Dg(d))}),this.Ku.forEach(d=>{e.has(d)||n.push(new Ym(d))}),n}tc(e){this.Uu=e.Hi,this.Ku=Kr();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return _h.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class mf{constructor(e,n,d){this.query=e,this.targetId=n,this.view=d}}class Xm{constructor(e){this.key=e,this.nc=!1}}class Ad{constructor(e,n,d,p,_,w){this.localStore=e,this.remoteStore=n,this.eventManager=d,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=w,this.sc={},this.ic=new Kl(N=>jp(N),ud),this.rc=new Map,this.oc=new Set,this.uc=new _e(Pn.comparator),this.cc=new Map,this.ac=new Yf,this.hc={},this.lc=new Map,this.fc=hh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function my(l,e){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Z.Z)(function*(l,e){const n=Hg(l);let d,p;const _=n.ic.get(e);if(_)d=_.targetId,n.sharedClientState.addLocalQueryTarget(d),p=_.view.ec();else{const w=yield rf(n.localStore,Da(e));n.isPrimaryClient&&df(n.remoteStore,w);const N=n.sharedClientState.addLocalQueryTarget(w.targetId);d=w.targetId,p=yield vf(n,e,d,"current"===N,w.resumeToken)}return p}),Jm.apply(this,arguments)}function vf(l,e,n,d,p){return ip.apply(this,arguments)}function ip(){return ip=(0,Z.Z)(function*(l,e,n,d,p){l._c=(st,Lt,nn)=>{return(Zt=(0,Z.Z)(function*(Xn,ir,Yi,Gs){let us=ir.view.Wu(Yi);us.$i&&(us=yield hg(Xn.localStore,ir.query,!1).then(({documents:cs})=>ir.view.Wu(cs,us)));const Uo=Gs&&Gs.targetChanges.get(ir.targetId),ls=ir.view.applyChanges(us,Xn.isPrimaryClient,Uo);return Ng(Xn,ir.targetId,ls.Xu),ls.snapshot}),function(Xn,ir,Yi,Gs){return Zt.apply(this,arguments)})(l,st,Lt,nn);var Zt};const _=yield hg(l.localStore,e,!0),w=new Qm(e,_.Hi),N=w.Wu(_.documents),oe=Zl.createSynthesizedTargetChangeForCurrentChange(n,d&&"Offline"!==l.onlineState,p),me=w.applyChanges(N,l.isPrimaryClient,oe);Ng(l,n,me.Xu);const Ne=new mf(e,n,w);return l.ic.set(e,Ne),l.rc.has(n)?l.rc.get(n).push(e):l.rc.set(n,[e]),me.snapshot}),ip.apply(this,arguments)}function p_(l,e){return ev.apply(this,arguments)}function ev(){return ev=(0,Z.Z)(function*(l,e){const n=$n(l),d=n.ic.get(e),p=n.rc.get(d.targetId);if(p.length>1)return n.rc.set(d.targetId,p.filter(_=>!ud(_,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(d.targetId),n.sharedClientState.isActiveQueryTarget(d.targetId)||(yield sf(n.localStore,d.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(d.targetId),hf(n.remoteStore,d.targetId),bh(n,d.targetId)}).catch(Wo))):(bh(n,d.targetId),yield sf(n.localStore,d.targetId,!0))}),ev.apply(this,arguments)}function kd(){return kd=(0,Z.Z)(function*(l,e,n){const d=lv(l);try{const p=yield function(_,w){const N=$n(_),oe=ts.now(),me=w.reduce((Lt,nn)=>Lt.add(nn.key),Kr());let Ne,st;return N.persistence.runTransaction("Locally write mutations","readwrite",Lt=>{let nn=su(),Zt=Kr();return N.Gi.getEntries(Lt,me).next(Xn=>{nn=Xn,nn.forEach((ir,Yi)=>{Yi.isValidDocument()||(Zt=Zt.add(ir))})}).next(()=>N.localDocuments.getOverlayedDocuments(Lt,nn)).next(Xn=>{Ne=Xn;const ir=[];for(const Yi of w){const Gs=Uh(Yi,Ne.get(Yi.key).overlayedDocument);null!=Gs&&ir.push(new Tu(Yi.key,Gs,Gl(Gs.value.mapValue),ks.exists(!0)))}return N.mutationQueue.addMutationBatch(Lt,oe,ir,w)}).next(Xn=>{st=Xn;const ir=Xn.applyToLocalDocumentSet(Ne,Zt);return N.documentOverlayCache.saveOverlays(Lt,Xn.batchId,ir)})}).then(()=>({batchId:st.batchId,changes:bc(Ne)}))}(d.localStore,e);d.sharedClientState.addPendingMutation(p.batchId),function(_,w,N){let oe=_.hc[_.currentUser.toKey()];oe||(oe=new _e(Lr)),oe=oe.insert(w,N),_.hc[_.currentUser.toKey()]=oe}(d,p.batchId,n),yield aa(d,p.changes),yield Cd(d.remoteStore)}catch(p){const _=vh(p,"Failed to persist write");n.reject(_)}}),kd.apply(this,arguments)}function kg(l,e){return Md.apply(this,arguments)}function Md(){return Md=(0,Z.Z)(function*(l,e){const n=$n(l);try{const d=yield Rm(n.localStore,e);e.targetChanges.forEach((p,_)=>{const w=n.cc.get(_);w&&(dr(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?w.nc=!0:p.modifiedDocuments.size>0?dr(w.nc):p.removedDocuments.size>0&&(dr(w.nc),w.nc=!1))}),yield aa(n,d,e)}catch(d){yield Wo(d)}}),Md.apply(this,arguments)}function Mg(l,e,n){const d=$n(l);if(d.isPrimaryClient&&0===n||!d.isPrimaryClient&&1===n){const p=[];d.ic.forEach((_,w)=>{const N=w.view.bu(e);N.snapshot&&p.push(N.snapshot)}),function(_,w){const N=$n(_);N.onlineState=w;let oe=!1;N.queries.forEach((me,Ne)=>{for(const st of Ne.listeners)st.bu(w)&&(oe=!0)}),oe&&fy(N)}(d.eventManager,e),p.length&&d.sc.Wo(p),d.onlineState=e,d.isPrimaryClient&&d.sharedClientState.setOnlineState(e)}}function Pg(l,e,n){return jl.apply(this,arguments)}function jl(){return jl=(0,Z.Z)(function*(l,e,n){const d=$n(l);d.sharedClientState.updateQueryState(e,"rejected",n);const p=d.cc.get(e),_=p&&p.key;if(_){let w=new _e(Pn.comparator);w=w.insert(_,Gi.newNoDocument(_,Er.min()));const N=Kr().add(_),oe=new eh(Er.min(),new Map,new Rt(Lr),w,N);yield kg(d,oe),d.uc=d.uc.remove(_),d.cc.delete(e),Lg(d)}else yield sf(d.localStore,e,!1).then(()=>bh(d,e,n)).catch(Wo)}),jl.apply(this,arguments)}function vy(l,e){return sp.apply(this,arguments)}function sp(){return sp=(0,Z.Z)(function*(l,e){const n=$n(l),d=e.batch.batchId;try{const p=yield ec(n.localStore,e);Rg(n,d,null),yy(n,d),n.sharedClientState.updateMutationState(d,"acknowledged"),yield aa(n,p)}catch(p){yield Wo(p)}}),sp.apply(this,arguments)}function tv(l,e,n){return Og.apply(this,arguments)}function Og(){return Og=(0,Z.Z)(function*(l,e,n){const d=$n(l);try{const p=yield function(_,w){const N=$n(_);return N.persistence.runTransaction("Reject batch","readwrite-primary",oe=>{let me;return N.mutationQueue.lookupMutationBatch(oe,w).next(Ne=>(dr(null!==Ne),me=Ne.keys(),N.mutationQueue.removeMutationBatch(oe,Ne))).next(()=>N.mutationQueue.performConsistencyCheck(oe)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(oe,me,w)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(oe,me)).next(()=>N.localDocuments.getDocuments(oe,me))})}(d.localStore,e);Rg(d,e,n),yy(d,e),d.sharedClientState.updateMutationState(e,"rejected",n),yield aa(d,p)}catch(p){yield Wo(p)}}),Og.apply(this,arguments)}function rv(){return rv=(0,Z.Z)(function*(l,e){const n=$n(l);wd(n.remoteStore)||En("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const d=yield function(_){const w=$n(_);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>w.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===d)return void e.resolve();const p=n.lc.get(d)||[];p.push(e),n.lc.set(d,p)}catch(d){const p=vh(d,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),rv.apply(this,arguments)}function yy(l,e){(l.lc.get(e)||[]).forEach(n=>{n.resolve()}),l.lc.delete(e)}function Rg(l,e,n){const d=$n(l);let p=d.hc[d.currentUser.toKey()];if(p){const _=p.get(e);_&&(n?_.reject(n):_.resolve(),p=p.remove(e)),d.hc[d.currentUser.toKey()]=p}}function bh(l,e,n=null){l.sharedClientState.removeLocalQueryTarget(e);for(const d of l.rc.get(e))l.ic.delete(d),n&&l.sc.wc(d,n);l.rc.delete(e),l.isPrimaryClient&&l.ac.ls(e).forEach(d=>{l.ac.containsKey(d)||_y(l,d)})}function _y(l,e){l.oc.delete(e.path.canonicalString());const n=l.uc.get(e);null!==n&&(hf(l.remoteStore,n),l.uc=l.uc.remove(e),l.cc.delete(n),Lg(l))}function Ng(l,e,n){for(const d of n)d instanceof Ym?(l.ac.addReference(d.key,e),by(l,d)):d instanceof Dg?(En("SyncEngine","Document no longer in limbo: "+d.key),l.ac.removeReference(d.key,e),l.ac.containsKey(d.key)||_y(l,d.key)):Jn()}function by(l,e){const n=e.key,d=n.path.canonicalString();l.uc.get(n)||l.oc.has(d)||(En("SyncEngine","New document in limbo: "+n),l.oc.add(d),Lg(l))}function Lg(l){for(;l.oc.size>0&&l.uc.size<l.maxConcurrentLimboResolutions;){const e=l.oc.values().next().value;l.oc.delete(e);const n=new Pn(Fr.fromString(e)),d=l.fc.next();l.cc.set(d,new Xm(n)),l.uc=l.uc.insert(n,d),df(l.remoteStore,new Rl(Da(Wl(n.path)),d,2,O.at))}}function aa(l,e,n){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,Z.Z)(function*(l,e,n){const d=$n(l),p=[],_=[],w=[];var N;d.ic.isEmpty()||(d.ic.forEach((N,oe)=>{w.push(d._c(oe,e,n).then(me=>{if((me||n)&&d.isPrimaryClient&&d.sharedClientState.updateQueryState(oe.targetId,me?.fromCache?"not-current":"current"),me){p.push(me);const Ne=km.Ci(oe.targetId,me);_.push(Ne)}}))}),yield Promise.all(w),d.sc.Wo(p),yield(N=(0,Z.Z)(function*(oe,me){const Ne=$n(oe);try{yield Ne.persistence.runTransaction("notifyLocalViewChanges","readwrite",st=>At.forEach(me,Lt=>At.forEach(Lt.Si,nn=>Ne.persistence.referenceDelegate.addReference(st,Lt.targetId,nn)).next(()=>At.forEach(Lt.Di,nn=>Ne.persistence.referenceDelegate.removeReference(st,Lt.targetId,nn)))))}catch(st){if(!ss(st))throw st;En("LocalStore","Failed to update sequence numbers: "+st)}for(const st of me){const Lt=st.targetId;if(!st.fromCache){const nn=Ne.Ui.get(Lt),Xn=nn.withLastLimboFreeSnapshotVersion(nn.snapshotVersion);Ne.Ui=Ne.Ui.insert(Lt,Xn)}}}),function(oe,me){return N.apply(this,arguments)})(d.localStore,_))}),Fg.apply(this,arguments)}function g_(l,e){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,Z.Z)(function*(l,e){const n=$n(l);if(!n.currentUser.isEqual(e)){En("SyncEngine","User change. New user:",e.toKey());const d=yield ey(n.localStore,e);n.currentUser=e,(p=n).lc.forEach(w=>{w.forEach(N=>{N.reject(new ln(Gt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.lc.clear(),n.sharedClientState.handleUserChange(e,d.removedBatchIds,d.addedBatchIds),yield aa(n,d.ji)}var p}),Ty.apply(this,arguments)}function au(l,e){const n=$n(l),d=n.cc.get(e);if(d&&d.nc)return Kr().add(d.key);{let p=Kr();const _=n.rc.get(e);if(!_)return p;for(const w of _){const N=n.ic.get(w);p=p.unionWith(N.view.ju)}return p}}function jg(l,e){return op.apply(this,arguments)}function op(){return op=(0,Z.Z)(function*(l,e){const n=$n(l),d=yield hg(n.localStore,e.query,!0),p=e.view.tc(d);return n.isPrimaryClient&&Ng(n,e.targetId,p.Xu),p}),op.apply(this,arguments)}function m_(l,e){return iv.apply(this,arguments)}function iv(){return iv=(0,Z.Z)(function*(l,e){const n=$n(l);return Fm(n.localStore,e).then(d=>aa(n,d))}),iv.apply(this,arguments)}function v_(l,e,n,d){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,Z.Z)(function*(l,e,n,d){const p=$n(l),_=yield function(w,N){const oe=$n(w),me=$n(oe.mutationQueue);return oe.persistence.runTransaction("Lookup mutation documents","readonly",Ne=>me.Tn(Ne,N).next(st=>st?oe.localDocuments.getDocuments(Ne,st):At.resolve(null)))}(p.localStore,e);var N;null!==_?("pending"===n?yield Cd(p.remoteStore):"acknowledged"===n||"rejected"===n?(Rg(p,e,d||null),yy(p,e),N=e,$n($n(p.localStore).mutationQueue).An(N)):Jn(),yield aa(p,_)):En("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ug.apply(this,arguments)}function ap(){return ap=(0,Z.Z)(function*(l,e){const n=$n(l);if(Hg(n),lv(n),!0===e&&!0!==n.dc){const d=n.sharedClientState.getAllActiveQueryTargets(),p=yield Ey(n,d.toArray());n.dc=!0,yield Gm(n.remoteStore,!0);for(const _ of p)df(n.remoteStore,_)}else if(!1===e&&!1!==n.dc){const d=[];let p=Promise.resolve();n.rc.forEach((_,w)=>{n.sharedClientState.isLocalQueryTarget(w)?d.push(w):p=p.then(()=>(bh(n,w),sf(n.localStore,w,!0))),hf(n.remoteStore,w)}),yield p,yield Ey(n,d),function(_){const w=$n(_);w.cc.forEach((N,oe)=>{hf(w.remoteStore,oe)}),w.ac.fs(),w.cc=new Map,w.uc=new _e(Pn.comparator)}(n),n.dc=!1,yield Gm(n.remoteStore,!1)}}),ap.apply(this,arguments)}function Ey(l,e,n){return sv.apply(this,arguments)}function sv(){return sv=(0,Z.Z)(function*(l,e,n){const d=$n(l),p=[],_=[];for(const w of e){let N;const oe=d.rc.get(w);if(oe&&0!==oe.length){N=yield rf(d.localStore,Da(oe[0]));for(const me of oe){const Ne=d.ic.get(me),st=yield jg(d,Ne);st.snapshot&&_.push(st.snapshot)}}else{const me=yield Lm(d.localStore,w);N=yield rf(d.localStore,me),yield vf(d,ov(me),w,!1,N.resumeToken)}p.push(N)}return d.sc.Wo(_),p}),sv.apply(this,arguments)}function ov(l){return ad(l.path,l.collectionGroup,l.orderBy,l.filters,l.limit,"F",l.startAt,l.endAt)}function Bg(l){const e=$n(l);return $n($n(e.localStore).persistence).vi()}function Vg(l,e,n,d){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,Z.Z)(function*(l,e,n,d){const p=$n(l);if(p.dc)return void En("SyncEngine","Ignoring unexpected query state notification.");const _=p.rc.get(e);if(_&&_.length>0)switch(n){case"current":case"not-current":{const w=yield Fm(p.localStore,ld(_[0])),N=eh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ui.EMPTY_BYTE_STRING);yield aa(p,w,N);break}case"rejected":yield sf(p.localStore,e,!0),bh(p,e,d);break;default:Jn()}}),Ul.apply(this,arguments)}function av(l,e,n){return uv.apply(this,arguments)}function uv(){return uv=(0,Z.Z)(function*(l,e,n){const d=Hg(l);if(d.dc){for(const p of e){if(d.rc.has(p)){En("SyncEngine","Adding an already active target "+p);continue}const _=yield Lm(d.localStore,p),w=yield rf(d.localStore,_);yield vf(d,ov(_),w.targetId,!1,w.resumeToken),df(d.remoteStore,w)}for(const p of n)d.rc.has(p)&&(yield sf(d.localStore,p,!1).then(()=>{hf(d.remoteStore,p),bh(d,p)}).catch(Wo))}}),uv.apply(this,arguments)}function Hg(l){const e=$n(l);return e.remoteStore.remoteSyncer.applyRemoteEvent=kg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=au.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pg.bind(null,e),e.sc.Wo=f_.bind(null,e.eventManager),e.sc.wc=K_.bind(null,e.eventManager),e}function lv(l){const e=$n(l);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tv.bind(null,e),e}class wy{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Z.Z)(function*(){n.It=Jf(e.databaseInfo.databaseId),n.sharedClientState=n.gc(e),n.persistence=n.yc(e),yield n.persistence.start(),n.localStore=n.Ic(e),n.gcScheduler=n.Tc(e,n.localStore),n.indexBackfillerScheduler=n.Ec(e,n.localStore)})()}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return _a(this.persistence,new Mm,e.initialUser,this.It)}yc(e){return new Im(Pc.Bs,this.It)}gc(e){return new Qc}terminate(){var e=this;return(0,Z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cv extends wy{constructor(e,n,d){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=d,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,d=this;return(0,Z.Z)(function*(){yield n().call(d,e),yield d.Ac.initialize(d,e),yield lv(d.Ac.syncEngine),yield Cd(d.Ac.remoteStore),yield d.persistence.li(()=>(d.gcScheduler&&!d.gcScheduler.started&&d.gcScheduler.start(),d.indexBackfillerScheduler&&!d.indexBackfillerScheduler.started&&d.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return _a(this.persistence,new Mm,e.initialUser,this.It)}Tc(e,n){return new Tm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Ec(e,n){const d=new M(n,this.persistence);return new mc(e.asyncQueue,d)}yc(e){const n=lg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),d=void 0!==this.cacheSizeBytes?wu.withCacheSize(this.cacheSizeBytes):wu.DEFAULT;return new ug(this.synchronizeTabs,n,e.clientId,d,e.asyncQueue,u_(),Bm(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Qc}}class __ extends cv{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,d=this;return(0,Z.Z)(function*(){yield n().call(d,e);const p=d.Ac.syncEngine;d.sharedClientState instanceof Xf&&(d.sharedClientState.syncEngine={Fr:v_.bind(null,p),$r:Vg.bind(null,p),Br:av.bind(null,p),vi:Bg.bind(null,p),Mr:m_.bind(null,p)},yield d.sharedClientState.start()),yield d.persistence.li(function(){var _=(0,Z.Z)(function*(w){yield function y_(l,e){return ap.apply(this,arguments)}(d.Ac.syncEngine,w),d.gcScheduler&&(w&&!d.gcScheduler.started?d.gcScheduler.start():w||d.gcScheduler.stop()),d.indexBackfillerScheduler&&(w&&!d.indexBackfillerScheduler.started?d.indexBackfillerScheduler.start():w||d.indexBackfillerScheduler.stop())});return function(w){return _.apply(this,arguments)}}())})()}gc(e){const n=u_();if(!Xf.C(n))throw new ln(Gt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const d=lg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xf(n,e.asyncQueue,d,e.clientId,e.initialUser)}}class up{initialize(e,n){var d=this;return(0,Z.Z)(function*(){d.localStore||(d.localStore=e.localStore,d.sharedClientState=e.sharedClientState,d.datastore=d.createDatastore(n),d.remoteStore=d.createRemoteStore(n),d.eventManager=d.createEventManager(n),d.syncEngine=d.createSyncEngine(n,!e.synchronizeTabs),d.sharedClientState.onlineStateHandler=p=>Mg(d.syncEngine,p,1),d.remoteStore.remoteSyncer.handleCredentialChange=g_.bind(null,d.syncEngine),yield Gm(d.remoteStore,d.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fl}createDatastore(e){const n=Jf(e.databaseInfo.databaseId),d=new a_(e.databaseInfo);return new sy(e.authCredentials,e.appCheckCredentials,d,n)}createRemoteStore(e){return n=this.localStore,d=this.datastore,p=e.asyncQueue,_=N=>Mg(this.syncEngine,N,0),w=mg.C()?new mg:new o_,new cf(n,d,p,_,w);var n,d,p,_,w}createSyncEngine(e,n){return function(d,p,_,w,N,oe,me){const Ne=new Ad(d,p,_,w,N,oe);return me&&(Ne.dc=!0),Ne}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Z.Z)(function*(n){const d=$n(n);En("RemoteStore","RemoteStore shutting down."),d._u.add(5),yield Jc(d),d.mu.shutdown(),d.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function dv(l,e,n){if(!n)throw new ln(Gt.INVALID_ARGUMENT,`Function ${l}() cannot be called with an empty ${e}.`)}function Cy(l,e,n,d){if(!0===e&&!0===d)throw new ln(Gt.INVALID_ARGUMENT,`${l} and ${n} cannot be used together.`)}function lp(l){if(!Pn.isDocumentKey(l))throw new ln(Gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${l} has ${l.length}.`)}function $g(l){if(Pn.isDocumentKey(l))throw new ln(Gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${l} has ${l.length}.`)}function Nc(l){if(void 0===l)return"undefined";if(null===l)return"null";if("string"==typeof l)return l.length>20&&(l=`${l.substring(0,20)}...`),JSON.stringify(l);if("number"==typeof l||"boolean"==typeof l)return""+l;if("object"==typeof l){if(l instanceof Array)return"an array";{const e=(n=l).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof l?"a function":Jn()}function Zi(l,e){if("_delegate"in l&&(l=l._delegate),!(l instanceof e)){if(e.name===l.constructor.name)throw new ln(Gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nc(l);throw new ln(Gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return l}function cp(l,e){if(e<=0)throw new ln(Gt.INVALID_ARGUMENT,`Function ${l}() requires a positive number, but it was: ${e}.`)}const b_=new Map;class Gg{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new ln(Gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ln(Gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Cy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yf{constructor(e,n,d,p){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=d,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ln(Gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ln(Gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gg(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new pc;switch(n.type){case"gapi":return new Ds(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ln(Gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=b_.get(e);n&&(En("ComponentProvider","Removing Datastore"),b_.delete(e),n.terminate())}(this),Promise.resolve()}}class uo{constructor(e,n,d){this.converter=n,this._key=d,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uo(this.firestore,e,this._key)}}class Ga{constructor(e,n,d){this.converter=n,this._query=d,this.type="query",this.firestore=e}withConverter(e){return new Ga(this.firestore,e,this._query)}}class Wa extends Ga{constructor(e,n,d){super(e,n,Wl(d)),this._path=d,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uo(this.firestore,null,new Pn(e))}withConverter(e){return new Wa(this.firestore,e,this._path)}}function dp(l,e,...n){if(l=(0,Et.m9)(l),dv("collection","path",e),l instanceof yf){const d=Fr.fromString(e,...n);return $g(d),new Wa(l,null,d)}{if(!(l instanceof uo||l instanceof Wa))throw new ln(Gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(Fr.fromString(e,...n));return $g(d),new Wa(l.firestore,null,d)}}function Pd(l,e,...n){if(l=(0,Et.m9)(l),1===arguments.length&&(e=Ja.R()),dv("doc","path",e),l instanceof yf){const d=Fr.fromString(e,...n);return lp(d),new uo(l,null,new Pn(d))}{if(!(l instanceof uo||l instanceof Wa))throw new ln(Gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const d=l._path.child(Fr.fromString(e,...n));return lp(d),new uo(l.firestore,l instanceof Wa?l.converter:null,new Pn(d))}}function xy(l,e){return l=(0,Et.m9)(l),e=(0,Et.m9)(e),(l instanceof uo||l instanceof Wa)&&(e instanceof uo||e instanceof Wa)&&l.firestore===e.firestore&&l.path===e.path&&l.converter===e.converter}function fp(l,e){return l=(0,Et.m9)(l),e=(0,Et.m9)(e),l instanceof Ga&&e instanceof Ga&&l.firestore===e.firestore&&ud(l._query,e._query)&&l.converter===e.converter}function fv(l,e=10240){let n=0;return{read:()=>(0,Z.Z)(function*(){if(n<l.byteLength){const d={value:l.slice(n,n+e),done:!1};return n+=e,d}return{done:!0}})(),cancel:()=>(0,Z.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class T_{constructor(e,n){this.Pc=e,this.It=n,this.metadata=new Ls,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(d=>{d&&d.Ou()?this.metadata.resolve(d.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(d?.ku)}`))},d=>this.metadata.reject(d))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Z.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Z.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Sc();if(null===n)return null;const d=e.vc.decode(n),p=Number(d);isNaN(p)&&e.Dc(`length string (${d}) is not valid number`);const _=yield e.Cc(p);return new Z_(JSON.parse(_),n.length+p)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Z.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const n=e.xc();n<0&&e.Dc("Reached the end of bundle when a length string is expected.");const d=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),d})()}Cc(e){var n=this;return(0,Z.Z)(function*(){for(;n.buffer.length<e;)(yield n.Nc())&&n.Dc("Reached the end of bundle when more is expected.");const d=n.vc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),d})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Z.Z)(function*(){const n=yield e.Pc.read();if(!n.done){const d=new Uint8Array(e.buffer.length+n.value.length);d.set(e.buffer),d.set(n.value,e.buffer.length),e.buffer=d}return n.done})()}}class Iy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Z.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new ln(Gt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const d=yield(p=(0,Z.Z)(function*(_,w){const N=$n(_),oe=Eu(N.It)+"/documents",me={documents:w.map(nn=>ao(N.It,nn))},Ne=yield N._o("BatchGetDocuments",oe,me,w.length),st=new Map;Ne.forEach(nn=>{const Zt=function Bf(l,e){return"found"in e?function(n,d){dr(!!d.found);const p=Lu(n,d.found.name),_=oa(d.found.updateTime),w=new As({mapValue:{fields:d.found.fields}});return Gi.newFoundDocument(p,_,w)}(l,e):"missing"in e?function(n,d){dr(!!d.missing),dr(!!d.readTime);const p=Lu(n,d.missing),_=oa(d.readTime);return Gi.newNoDocument(p,_)}(l,e):Jn()}(N.It,nn);st.set(Zt.key.toString(),Zt)});const Lt=[];return w.forEach(nn=>{const Zt=st.get(nn.toString());dr(!!Zt),Lt.push(Zt)}),Lt}),function(_,w){return p.apply(this,arguments)})(n.datastore,e);var p;return d.forEach(p=>n.recordVersion(p)),d})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(d){this.lastWriteError=d}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ms(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var d;e.mutations.forEach(d=>{n.delete(d.key.toString())}),n.forEach((d,p)=>{const _=Pn.fromPath(p);e.mutations.push(new Wc(_,e.precondition(_)))}),yield(d=(0,Z.Z)(function*(p,_){const w=$n(p),N=Eu(w.It)+"/documents",oe={writes:_.map(me=>Ml(w.It,me))};yield w.ao("Commit",N,oe)}),function(p,_){return d.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Jn();n=Er.min()}const d=this.readVersions.get(e.key.toString());if(d){if(!n.isEqual(d))throw new ln(Gt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Er.min())?ks.exists(!1):ks.updateTime(n):ks.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Er.min()))throw new ln(Gt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ks.updateTime(n)}return ks.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Dy{constructor(e,n,d,p,_){this.asyncQueue=e,this.datastore=n,this.options=d,this.updateFunction=p,this.deferred=_,this.kc=d.maxAttempts,this.xo=new vg(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Z.Z)(function*(){const n=new Iy(e.datastore),d=e.Mc(n);d&&d.then(p=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Fc(_)}))}).catch(p=>{e.Fc(p)})}))}Mc(e){try{const n=this.updateFunction(e);return!ya(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!jf(n)}return!1}}class Ay{constructor(e,n,d,p){var _=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=d,this.databaseInfo=p,this.user=gr.UNAUTHENTICATED,this.clientId=Ja.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(d,function(){var w=(0,Z.Z)(function*(N){En("FirestoreClient","Received user=",N.uid),yield _.authCredentialListener(N),_.user=N});return function(N){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(d,w=>(En("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ln(Gt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(d){const p=vh(d,"Failed to shutdown persistence");n.reject(p)}})),n.promise}}function ky(l,e){return gv.apply(this,arguments)}function gv(){return gv=(0,Z.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress(),En("FirestoreClient","Initializing OfflineComponentProvider");const n=yield l.getConfiguration();yield e.initialize(n);let d=n.initialUser;l.setCredentialChangeListener(function(){var p=(0,Z.Z)(function*(_){d.isEqual(_)||(yield ey(e.localStore,_),d=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>l.terminate()),l.offlineComponents=e}),gv.apply(this,arguments)}function qg(l,e){return pp.apply(this,arguments)}function pp(){return pp=(0,Z.Z)(function*(l,e){l.asyncQueue.verifyOperationInProgress();const n=yield mv(l);En("FirestoreClient","Initializing OnlineComponentProvider");const d=yield l.getConfiguration();yield e.initialize(n,d),l.setCredentialChangeListener(p=>hy(e.remoteStore,p)),l.setAppCheckTokenChangeListener((p,_)=>hy(e.remoteStore,_)),l.onlineComponents=e}),pp.apply(this,arguments)}function mv(l){return gp.apply(this,arguments)}function gp(){return gp=(0,Z.Z)(function*(l){return l.offlineComponents||(En("FirestoreClient","Using default OfflineComponentProvider"),yield ky(l,new wy)),l.offlineComponents}),gp.apply(this,arguments)}function Kg(l){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,Z.Z)(function*(l){return l.onlineComponents||(En("FirestoreClient","Using default OnlineComponentProvider"),yield qg(l,new up)),l.onlineComponents}),Zg.apply(this,arguments)}function as(l){return mv(l).then(e=>e.persistence)}function Yg(l){return mv(l).then(e=>e.localStore)}function vv(l){return Kg(l).then(e=>e.remoteStore)}function yv(l){return Kg(l).then(e=>e.syncEngine)}function Bl(l){return My.apply(this,arguments)}function My(){return My=(0,Z.Z)(function*(l){const e=yield Kg(l),n=e.eventManager;return n.onListen=my.bind(null,e.syncEngine),n.onUnlisten=p_.bind(null,e.syncEngine),n}),My.apply(this,arguments)}function Qg(l,e,n={}){const d=new Ls;return l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(p,_,w,N,oe){const me=new Wg({next:st=>{_.enqueueAndForget(()=>qm(p,Ne));const Lt=st.docs.has(w);!Lt&&st.fromCache?oe.reject(new ln(Gt.UNAVAILABLE,"Failed to get document because the client is offline.")):Lt&&st.fromCache&&N&&"server"===N.source?oe.reject(new ln(Gt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):oe.resolve(st)},error:st=>oe.reject(st)}),Ne=new py(Wl(w.path),me,{includeMetadataChanges:!0,Nu:!0});return tl(p,Ne)}(yield Bl(l),l.asyncQueue,e,n,d)})),d.promise}function nc(l,e,n={}){const d=new Ls;return l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function(p,_,w,N,oe){const me=new Wg({next:st=>{_.enqueueAndForget(()=>qm(p,Ne)),st.fromCache&&"server"===N.source?oe.reject(new ln(Gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):oe.resolve(st)},error:st=>oe.reject(st)}),Ne=new py(w,me,{includeMetadataChanges:!0,Nu:!0});return tl(p,Ne)}(yield Bl(l),l.asyncQueue,e,n,d)})),d.promise}class Xg{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vg(this,"async_queue_retry"),this.Wc=()=>{const n=Bm();n&&En("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Bm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Bm();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new Ls;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Z.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!ss(n))throw n;En("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(d=>{throw this.Kc=d,this.Gc=!1,Es("INTERNAL UNHANDLED ERROR: ",function(_){let w=_.message||"";return _.stack&&(w=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),w}(d)),d}).then(d=>(this.Gc=!1,d))));return this.Bc=n,n}enqueueAfterDelay(e,n,d){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const p=Wm.createAndSchedule(this,e,n,d,_=>this.Yc(_));return this.qc.push(p),p}zc(){this.Kc&&Jn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Z.Z)(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,d)=>n.targetTimeMs-d.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function nl(l){return function(e,n){if("object"!=typeof e||null===e)return!1;const d=e;for(const p of["next","error","complete"])if(p in d&&"function"==typeof d[p])return!0;return!1}(l)}class Jg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ls,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,d){this._progressObserver={next:e,error:n,complete:d}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ps extends yf{constructor(e,n,d,p){super(e,n,d,p),this.type="firestore",this._queue=new Xg,this._persistenceKey=p?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Od(this),this._firestoreClient.terminate()}}function lo(l){return l._firestoreClient||Od(l),l._firestoreClient.verifyNotTerminated(),l._firestoreClient}function Od(l){var e;const n=l._freezeSettings(),d=(_=(null===(e=l._app)||void 0===e?void 0:e.options.appId)||"",new cl(l._databaseId,_,l._persistenceKey,(N=n).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var _,N;l._firestoreClient=new Ay(l._authCredentials,l._appCheckCredentials,l._queue,d)}function g(l,e,n){const d=new Ls;return l.asyncQueue.enqueue((0,Z.Z)(function*(){try{yield ky(l,n),yield qg(l,e),d.resolve()}catch(p){const _=p;if(!("FirebaseError"===(w=_).name?w.code===Gt.FAILED_PRECONDITION||w.code===Gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw _;vs("Error enabling offline persistence. Falling back to persistence disabled: "+_),d.reject(_)}var w})).then(()=>d.promise)}function S(l){if(l._initialized||l._terminated)throw new ln(Gt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class x{constructor(e){this._byteString=e}static fromBase64String(e){try{return new x(Ui.fromBase64String(e))}catch(n){throw new ln(Gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new x(Ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class L{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ln(Gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Y{constructor(e){this._methodName=e}}class Te{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ln(Gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ln(Gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lr(this._lat,e._lat)||Lr(this._long,e._long)}}const je=/^__.*__$/;class Ve{constructor(e,n,d){this.data=e,this.fieldMask=n,this.fieldTransforms=d}toMutation(e,n){return null!==this.fieldMask?new Tu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}class qe{constructor(e,n,d){this.data=e,this.fieldMask=n,this.fieldTransforms=d}toMutation(e,n){return new Tu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wt(l){switch(l){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jn()}}class yn{constructor(e,n,d,p,_,w){this.settings=e,this.databaseId=n,this.It=d,this.ignoreUndefinedProperties=p,void 0===_&&this.na(),this.fieldTransforms=_||[],this.fieldMask=w||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new yn(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const d=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.ia({path:d,oa:!1});return p.ua(e),p}ca(e){var n;const d=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.ia({path:d,oa:!1});return p.na(),p}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return xu(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Wt(this.sa)&&je.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Vn{constructor(e,n,d){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=d||Jf(e)}da(e,n,d,p=!1){return new yn({sa:e,methodName:n,fa:d,path:Ai.emptyPath(),oa:!1,la:p},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Xt(l){const e=l._freezeSettings(),n=Jf(l._databaseId);return new Vn(l._databaseId,!!e.ignoreUndefinedProperties,n)}function tn(l,e,n,d,p,_={}){const w=l.da(_.merge||_.mergeFields?2:0,e,n,p);Ys("Data must be an object, but it was:",w,d);const N=jo(d,w);let oe,me;if(_.merge)oe=new Gn(w.fieldMask),me=w.fieldTransforms;else if(_.mergeFields){const Ne=[];for(const st of _.mergeFields){const Lt=Ma(e,st,n);if(!w.contains(Lt))throw new ln(Gt.INVALID_ARGUMENT,`Field '${Lt}' is specified in your field mask but missing from your input data.`);rc(Ne,Lt)||Ne.push(Lt)}oe=new Gn(Ne),me=w.fieldTransforms.filter(st=>oe.covers(st.field))}else oe=null,me=w.fieldTransforms;return new Ve(new As(N),oe,me)}class Cn extends Y{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cn}}function un(l,e,n){return new yn({sa:3,fa:e.settings.fa,methodName:l._methodName,oa:n},e.databaseId,e.It,e.ignoreUndefinedProperties)}class on extends Y{_toFieldTransform(e){return new gl(e.path,new Ru)}isEqual(e){return e instanceof on}}class In extends Y{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=un(this,e,!0),d=this._a.map(_=>Cs(_,n)),p=new kl(d);return new gl(e.path,p)}isEqual(e){return this===e}}class mn extends Y{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=un(this,e,!0),d=this._a.map(_=>Cs(_,n)),p=new bu(d);return new gl(e.path,p)}isEqual(e){return this===e}}class kr extends Y{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new zl(e.It,Lh(e.It,this.wa));return new gl(e.path,n)}isEqual(e){return this===e}}function Yn(l,e,n,d){const p=l.da(1,e,n);Ys("Data must be an object, but it was:",p,d);const _=[],w=As.empty();U(d,(oe,me)=>{const Ne=Rd(e,oe,n);me=(0,Et.m9)(me);const st=p.ca(Ne);if(me instanceof Cn)_.push(Ne);else{const Lt=Cs(me,st);null!=Lt&&(_.push(Ne),w.set(Ne,Lt))}});const N=new Gn(_);return new qe(w,N,p.fieldTransforms)}function Hr(l,e,n,d,p,_){const w=l.da(1,e,n),N=[Ma(e,d,n)],oe=[p];if(_.length%2!=0)throw new ln(Gt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Lt=0;Lt<_.length;Lt+=2)N.push(Ma(e,_[Lt])),oe.push(_[Lt+1]);const me=[],Ne=As.empty();for(let Lt=N.length-1;Lt>=0;--Lt)if(!rc(me,N[Lt])){const nn=N[Lt];let Zt=oe[Lt];Zt=(0,Et.m9)(Zt);const Xn=w.ca(nn);if(Zt instanceof Cn)me.push(nn);else{const ir=Cs(Zt,Xn);null!=ir&&(me.push(nn),Ne.set(nn,ir))}}const st=new Gn(me);return new qe(Ne,st,w.fieldTransforms)}function $s(l,e,n,d=!1){return Cs(n,l.da(d?4:3,e))}function Cs(l,e){if(Ko(l=(0,Et.m9)(l)))return Ys("Unsupported field value:",e,l),jo(l,e);if(l instanceof Y)return function(n,d){if(!Wt(d.sa))throw d.ha(`${n._methodName}() can only be used with update() and set()`);if(!d.path)throw d.ha(`${n._methodName}() is not currently supported inside arrays`);const p=n._toFieldTransform(d);p&&d.fieldTransforms.push(p)}(l,e),null;if(void 0===l&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),l instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(n,d){const p=[];let _=0;for(const w of n){let N=Cs(w,d.aa(_));null==N&&(N={nullValue:"NULL_VALUE"}),p.push(N),_++}return{arrayValue:{values:p}}}(l,e)}return function(n,d){if(null===(n=(0,Et.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return Lh(d.It,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const p=ts.fromDate(n);return{timestampValue:sa(d.It,p)}}if(n instanceof ts){const p=new ts(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sa(d.It,p)}}if(n instanceof Te)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof x)return{bytesValue:Hh(d.It,n._byteString)};if(n instanceof uo){const p=d.databaseId,_=n.firestore._databaseId;if(!_.isEqual(p))throw d.ha(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:nh(n.firestore._databaseId||d.databaseId,n._key.path)}}throw d.ha(`Unsupported field value: ${Nc(n)}`)}(l,e)}function jo(l,e){const n={};return X(l)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):U(l,(d,p)=>{const _=Cs(p,e.ra(d));null!=_&&(n[d]=_)}),{mapValue:{fields:n}}}function Ko(l){return!("object"!=typeof l||null===l||l instanceof Array||l instanceof Date||l instanceof ts||l instanceof Te||l instanceof x||l instanceof uo||l instanceof Y)}function Ys(l,e,n){if(!Ko(n)||"object"!=typeof(d=n)||null===d||Object.getPrototypeOf(d)!==Object.prototype&&null!==Object.getPrototypeOf(d)){const d=Nc(n);throw e.ha("an object"===d?l+" a custom object":l+" "+d)}var d}function Ma(l,e,n){if((e=(0,Et.m9)(e))instanceof L)return e._internalPath;if("string"==typeof e)return Rd(l,e);throw xu("Field path arguments must be of type string or ",l,!1,void 0,n)}const Fs=new RegExp("[~\\*/\\[\\]]");function Rd(l,e,n){if(e.search(Fs)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,l,!1,void 0,n);try{return new L(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,l,!1,void 0,n)}}function xu(l,e,n,d,p){const _=d&&!d.isEmpty(),w=void 0!==p;let N=`Function ${e}() called with invalid data`;n&&(N+=" (via `toFirestore()`)"),N+=". ";let oe="";return(_||w)&&(oe+=" (found",_&&(oe+=` in field ${d}`),w&&(oe+=` in document ${p}`),oe+=")"),new ln(Gt.INVALID_ARGUMENT,N+l+oe)}function rc(l,e){return l.some(n=>n.isEqual(e))}class rl{constructor(e,n,d,p,_){this._firestore=e,this._userDataWriter=n,this._key=d,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new uo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Nd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(il("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Nd extends rl{data(){return super.data()}}function il(l,e){return"string"==typeof e?Rd(l,e):e instanceof L?e._internalPath:e._delegate._internalPath}function Ld(l){if("L"===l.limitType&&0===l.explicitOrderBy.length)throw new ln(Gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ic{}function sl(l,...e){for(const n of e)l=n._apply(l);return l}class Py extends ic{constructor(e,n,d){super(),this.ma=e,this.ga=n,this.ya=d,this.type="where"}_apply(e){const n=Xt(e.firestore),d=function(p,_,w,N,oe,me,Ne){let st;if(oe.isKeyField()){if("array-contains"===me||"array-contains-any"===me)throw new ln(Gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${me}' queries on documentId().`);if("in"===me||"not-in"===me){Ep(Ne,me);const nn=[];for(const Zt of Ne)nn.push(Tp(N,p,Zt));st={arrayValue:{values:nn}}}else st=Tp(N,p,Ne)}else"in"!==me&&"not-in"!==me&&"array-contains-any"!==me||Ep(Ne,me),st=$s(w,"where",Ne,"in"===me||"not-in"===me);const Lt=os.create(oe,me,st);return function(nn,Zt){if(Zt.dt()){const ir=Nh(nn);if(null!==ir&&!ir.isEqual(Zt.field))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ir.toString()}' and '${Zt.field.toString()}'`);const Yi=Rh(nn);null!==Yi&&Lc(0,Zt.field,Yi)}const Xn=function(ir,Yi){for(const Gs of ir.filters)if(Yi.indexOf(Gs.op)>=0)return Gs.op;return null}(nn,function(ir){switch(ir){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Zt.op));if(null!==Xn)throw new ln(Gt.INVALID_ARGUMENT,Xn===Zt.op?`Invalid query. You cannot use more than one '${Zt.op.toString()}' filter.`:`Invalid query. You cannot use '${Zt.op.toString()}' filters with '${Xn.toString()}' filters.`)}(p,Lt),Lt}(e._query,0,n,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ga(e.firestore,e.converter,function(p,_){const w=p.filters.concat([_]);return new yc(p.path,p.collectionGroup,p.explicitOrderBy.slice(),w,p.limit,p.limitType,p.startAt,p.endAt)}(e._query,d))}}class Oy extends ic{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(d,p,_){if(null!==d.startAt)throw new ln(Gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==d.endAt)throw new ln(Gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new vc(p,_);return function(N,oe){if(null===Rh(N)){const me=Nh(N);null!==me&&Lc(0,me,oe.field)}}(d,w),w}(e._query,this.ma,this.pa);return new Ga(e.firestore,e.converter,function(d,p){const _=d.explicitOrderBy.concat([p]);return new yc(d.path,d.collectionGroup,_,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e._query,n))}}class Ry extends ic{constructor(e,n,d){super(),this.type=e,this.Ia=n,this.Ta=d}_apply(e){return new Ga(e.firestore,e.converter,Vc(e._query,this.Ia,this.Ta))}}class ed extends ic{constructor(e,n,d){super(),this.type=e,this.Ea=n,this.Aa=d}_apply(e){const n=em(e,this.type,this.Ea,this.Aa);return new Ga(e.firestore,e.converter,(p=n,new yc((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,p,d.endAt)));var d,p}}class Ny extends ic{constructor(e,n,d){super(),this.type=e,this.Ea=n,this.Aa=d}_apply(e){const n=em(e,this.type,this.Ea,this.Aa);return new Ga(e.firestore,e.converter,(p=n,new yc((d=e._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,p)));var d,p}}function em(l,e,n,d){if(n[0]=(0,Et.m9)(n[0]),n[0]instanceof rl)return function(p,_,w,N,oe){if(!N)throw new ln(Gt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const me=[];for(const Ne of Ku(p))if(Ne.field.isKeyField())me.push(Ct(_,N.key));else{const st=N.data.field(Ne.field);if(Lo(st))throw new ln(Gt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ne.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===st){const Lt=Ne.field.canonicalString();throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Lt}' (used as the orderBy) does not exist.`)}me.push(st)}return new Ou(me,oe)}(l._query,l.firestore._databaseId,e,n[0]._document,d);{const p=Xt(l.firestore);return function(_,w,N,oe,me,Ne){const st=_.explicitOrderBy;if(me.length>st.length)throw new ln(Gt.INVALID_ARGUMENT,`Too many arguments provided to ${oe}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Lt=[];for(let nn=0;nn<me.length;nn++){const Zt=me[nn];if(st[nn].field.isKeyField()){if("string"!=typeof Zt)throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${oe}(), but got a ${typeof Zt}`);if(!hl(_)&&-1!==Zt.indexOf("/"))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${oe}() must be a plain document ID, but '${Zt}' contains a slash.`);const Xn=_.path.child(Fr.fromString(Zt));if(!Pn.isDocumentKey(Xn))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${oe}() must result in a valid document path, but '${Xn}' is not because it contains an odd number of segments.`);const ir=new Pn(Xn);Lt.push(Ct(w,ir))}else{const Xn=$s(N,oe,Zt);Lt.push(Xn)}}return new Ou(Lt,Ne)}(l._query,l.firestore._databaseId,p,e,n,d)}}function Tp(l,e,n){if("string"==typeof(n=(0,Et.m9)(n))){if(""===n)throw new ln(Gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hl(e)&&-1!==n.indexOf("/"))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const d=e.path.child(Fr.fromString(n));if(!Pn.isDocumentKey(d))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${d}' is not because it has an odd number of segments (${d.length}).`);return Ct(l,new Pn(d))}if(n instanceof uo)return Ct(l,n._key);throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nc(n)}.`)}function Ep(l,e){if(!Array.isArray(l)||0===l.length)throw new ln(Gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(l.length>10)throw new ln(Gt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Lc(l,e,n){if(!n.isEqual(e))throw new ln(Gt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Sp{convertValue(e,n="none"){switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Jn()}}convertObject(e,n){const d={};return U(e.fields,(p,_)=>{d[p]=this.convertValue(_,n)}),d}convertGeoPoint(e){return new Te(Ei(e.latitude),Ei(e.longitude))}convertArray(e,n){return(e.values||[]).map(d=>this.convertValue(d,n))}convertServerTimestamp(e,n){switch(n){case"previous":const d=Va(e);return null==d?null:this.convertValue(d,n);case"estimate":return this.convertTimestamp(vo(e));default:return null}}convertTimestamp(e){const n=xa(e);return new ts(n.seconds,n.nanos)}convertDocumentKey(e,n){const d=Fr.fromString(e);dr(Ar(d));const p=new Io(d.get(1),d.get(3)),_=new Pn(d.popFirst(5));return p.isEqual(n)||Es(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),_}}function wp(l,e,n){let d;return d=l?n&&(n.merge||n.mergeFields)?l.toFirestore(e,n):l.toFirestore(e):e,d}class Tv extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new x(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,n)}}class Fd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends rl{constructor(e,n,d,p,_,w){super(e,n,d,p,w),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const d=this._document.data.field(il("DocumentSnapshot.get",e));if(null!==d)return this._userDataWriter.convertValue(d,n.serverTimestamps)}}}class tm extends Ri{data(e={}){return super.data(e)}}class td{constructor(e,n,d,p){this._firestore=e,this._userDataWriter=n,this._snapshot=p,this.metadata=new Fd(p.hasPendingWrites,p.fromCache),this.query=d}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(d=>{e.call(n,new tm(this._firestore,this._userDataWriter,d.key,d,new Fd(this._snapshot.mutatedKeys.has(d.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ln(Gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(d,p){if(d._snapshot.oldDocs.isEmpty()){let _=0;return d._snapshot.docChanges.map(w=>({type:"added",doc:new tm(d._firestore,d._userDataWriter,w.doc.key,w.doc,new Fd(d._snapshot.mutatedKeys.has(w.doc.key),d._snapshot.fromCache),d.query.converter),oldIndex:-1,newIndex:_++}))}{let _=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(w=>p||3!==w.type).map(w=>{const N=new tm(d._firestore,d._userDataWriter,w.doc.key,w.doc,new Fd(d._snapshot.mutatedKeys.has(w.doc.key),d._snapshot.fromCache),d.query.converter);let oe=-1,me=-1;return 0!==w.type&&(oe=_.indexOf(w.doc.key),_=_.delete(w.doc.key)),1!==w.type&&(_=_.add(w.doc),me=_.indexOf(w.doc.key)),{type:Ev(w.type),doc:N,oldIndex:oe,newIndex:me}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ev(l){switch(l){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jn()}}function sc(l,e){return l instanceof Ri&&e instanceof Ri?l._firestore===e._firestore&&l._key.isEqual(e._key)&&(null===l._document?null===e._document:l._document.isEqual(e._document))&&l._converter===e._converter:l instanceof td&&e instanceof td&&l._firestore===e._firestore&&fp(l.query,e.query)&&l.metadata.isEqual(e.metadata)&&l._snapshot.isEqual(e._snapshot)}class oc extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new x(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new uo(this.firestore,null,n)}}function Sv(l,e,n){l=Zi(l,uo);const d=Zi(l.firestore,Ps),p=wp(l.converter,e,n);return jc(d,[tn(Xt(d),"setDoc",l._key,p,null!==l.converter,n).toMutation(l._key,ks.none())])}function jy(l,e,n,...d){l=Zi(l,uo);const p=Zi(l.firestore,Ps),_=Xt(p);let w;return w="string"==typeof(e=(0,Et.m9)(e))||e instanceof L?Hr(_,"updateDoc",l._key,e,n,d):Yn(_,"updateDoc",l._key,e),jc(p,[w.toMutation(l._key,ks.exists(!0))])}function nm(l,...e){var n,d,p;l=(0,Et.m9)(l);let _={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||nl(e[w])||(_=e[w],w++);const N={includeMetadataChanges:_.includeMetadataChanges};if(nl(e[w])){const st=e[w];e[w]=null===(n=st.next)||void 0===n?void 0:n.bind(st),e[w+1]=null===(d=st.error)||void 0===d?void 0:d.bind(st),e[w+2]=null===(p=st.complete)||void 0===p?void 0:p.bind(st)}let oe,me,Ne;if(l instanceof uo)me=Zi(l.firestore,Ps),Ne=Wl(l._key.path),oe={next:st=>{e[w]&&e[w](Iu(me,l,st))},error:e[w+1],complete:e[w+2]};else{const st=Zi(l,Ga);me=Zi(st.firestore,Ps),Ne=st._query;const Lt=new oc(me);oe={next:nn=>{e[w]&&e[w](new td(me,Lt,st,nn))},error:e[w+1],complete:e[w+2]},Ld(l._query)}return function(st,Lt,nn,Zt){const Xn=new Wg(Zt),ir=new py(Lt,Xn,nn);return st.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return tl(yield Bl(st),ir)})),()=>{Xn.bc(),st.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return qm(yield Bl(st),ir)}))}}(lo(me),Ne,N,oe)}function jc(l,e){return function(n,d){const p=new Ls;return n.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function Ag(l,e,n){return kd.apply(this,arguments)}(yield yv(n),d,p)})),p.promise}(lo(l),e)}function Iu(l,e,n){const d=n.docs.get(e._key),p=new oc(l);return new Ri(l,p,e._key,d,new Fd(n.hasPendingWrites,n.fromCache),e.converter)}const xp={maxAttempts:5};class _l{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xt(e)}set(e,n,d){this._verifyNotCommitted();const p=lc(e,this._firestore),_=wp(p.converter,n,d),w=tn(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,d);return this._mutations.push(w.toMutation(p._key,ks.none())),this}update(e,n,d,...p){this._verifyNotCommitted();const _=lc(e,this._firestore);let w;return w="string"==typeof(n=(0,Et.m9)(n))||n instanceof L?Hr(this._dataReader,"WriteBatch.update",_._key,n,d,p):Yn(this._dataReader,"WriteBatch.update",_._key,n),this._mutations.push(w.toMutation(_._key,ks.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=lc(e,this._firestore);return this._mutations=this._mutations.concat(new Ms(n._key,ks.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ln(Gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lc(l,e){if((l=(0,Et.m9)(l)).firestore!==e)throw new ln(Gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return l}class Qs extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Xt(e)}get(e){const n=lc(e,this._firestore),d=new Tv(this._firestore);return this._transaction.lookup([n._key]).then(p=>{if(!p||1!==p.length)return Jn();const _=p[0];if(_.isFoundDocument())return new rl(this._firestore,d,_.key,_,n.converter);if(_.isNoDocument())return new rl(this._firestore,d,n._key,null,n.converter);throw Jn()})}set(e,n,d){const p=lc(e,this._firestore),_=wp(p.converter,n,d),w=tn(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,d);return this._transaction.set(p._key,w),this}update(e,n,d,...p){const _=lc(e,this._firestore);let w;return w="string"==typeof(n=(0,Et.m9)(n))||n instanceof L?Hr(this._dataReader,"Transaction.update",_._key,n,d,p):Yn(this._dataReader,"Transaction.update",_._key,n),this._transaction.update(_._key,w),this}delete(e){const n=lc(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=lc(e,this._firestore),d=new oc(this._firestore);return super.get(e).then(p=>new Ri(this._firestore,d,n._key,p._document,new Fd(!1,!1),n.converter))}}function Ip(l,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ln("invalid-argument",`Invalid options passed to function ${l}(): You cannot specify both "merge" and "mergeFields".`);return e}function Iv(){if(typeof Uint8Array>"u")throw new ln("unimplemented","Uint8Arrays are not available in this environment.")}function Dv(){if(!function ji(){return typeof atob<"u"}())throw new ln("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(l,e=!0){No=xe.SDK_VERSION,(0,xe._registerComponent)(new We.wA("firestore",(n,{instanceIdentifier:d,options:p})=>{const _=n.getProvider("app").getImmediate(),w=new Ps(new El(n.getProvider("auth-internal")),new Xa(n.getProvider("app-check-internal")),function(N,oe){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new ln(Gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(N.options.projectId,oe)}(_,d),_);return p=Object.assign({useFetchStreams:e},p),w._setSettings(p),w},"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(so,"3.7.3",l),(0,xe.registerVersion)(so,"3.7.3","esm2017")}();class Ef{constructor(e){this._delegate=e}static fromBase64String(e){return Dv(),new Ef(x.fromBase64String(e))}static fromUint8Array(e){return Iv(),new Ef(x.fromUint8Array(e))}toBase64(){return Dv(),this._delegate.toBase64()}toUint8Array(){return Iv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Sf(l){return function M_(l,e){if("object"!=typeof l||null===l)return!1;const n=l;for(const d of e)if(d in n&&"function"==typeof n[d])return!0;return!1}(l,["next","error","complete"])}class im{enableIndexedDbPersistence(e,n){return function bp(l,e){S(l=Zi(l,Ps));const n=lo(l),d=l._freezeSettings(),p=new up;return g(n,p,new cv(p,d.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Sh(l){S(l=Zi(l,Ps));const e=lo(l),n=l._freezeSettings(),d=new up;return g(e,d,new __(d,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function a(l){if(l._initialized&&!l._terminated)throw new ln(Gt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ls;return l._queue.enqueueAndForgetEvenWhileRestricted((0,Z.Z)(function*(){try{yield(n=(0,Z.Z)(function*(d){if(!Fi.C())return Promise.resolve();const p=d+"main";yield Fi.delete(p)}),function(d){return n.apply(this,arguments)})(lg(l._databaseId,l._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class Av{constructor(e,n,d){this._delegate=n,this._persistenceProvider=d,this.INTERNAL={delete:()=>this.terminate()},e instanceof Io||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&vs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,d={}){!function hv(l,e,n,d={}){var p;const _=(l=Zi(l,yf))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&vs("Host has been set in both settings() and useEmulator(), emulator host will be used"),l._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${n}`,ssl:!1})),d.mockUserToken){let w,N;if("string"==typeof d.mockUserToken)w=d.mockUserToken,N=gr.MOCK_USER;else{w=(0,Et.Sg)(d.mockUserToken,null===(p=l._app)||void 0===p?void 0:p.options.projectId);const oe=d.mockUserToken.sub||d.mockUserToken.user_id;if(!oe)throw new ln(Gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new gr(oe)}l._authCredentials=new fu(new Qa(w,N))}}(this._delegate,e,n,d)}enableNetwork(){return function u(l){return function vp(l){return l.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield as(l),n=yield vv(l);return e.setNetworkEnabled(!0),function(d){const p=$n(d);return p._u.delete(0),Ed(p)}(n)}))}(lo(l=Zi(l,Ps)))}(this._delegate)}disableNetwork(){return function t(l){return function S_(l){return l.asyncQueue.enqueue((0,Z.Z)(function*(){const e=yield as(l),n=yield vv(l);return e.setNetworkEnabled(!1),(d=(0,Z.Z)(function*(p){const _=$n(p);_._u.add(0),yield Jc(_),_.gu.set("Offline")}),function(p){return d.apply(this,arguments)})(n);var d}))}(lo(l=Zi(l,Ps)))}(this._delegate)}enablePersistence(e){let n=!1,d=!1;return e&&(n=!!e.synchronizeTabs,d=!!e.experimentalForceOwningTab,Cy("synchronizeTabs",n,"experimentalForceOwningTab",d)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,d)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function o(l){return function(e){const n=new Ls;return e.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return function nv(l,e){return rv.apply(this,arguments)}(yield yv(e),n)})),n.promise}(lo(l=Zi(l,Ps)))}(this._delegate)}onSnapshotsInSync(e){return function Cp(l,e){return function yp(l,e){const n=new Wg(e);return l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return d=yield Bl(l),p=n,$n(d).Ru.add(p),void p.next();var d,p})),()=>{n.bc(),l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return d=yield Bl(l),p=n,void $n(d).Ru.delete(p);var d,p}))}}(lo(l=Zi(l,Ps)),nl(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ln("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ud(this,dp(this._delegate,e))}catch(n){throw ba(n,"collection()","Firestore.collection()")}}doc(e){try{return new ju(this,Pd(this._delegate,e))}catch(n){throw ba(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Du(this,function hp(l,e){if(l=Zi(l,yf),dv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ln(Gt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ga(l,null,(n=e,new yc(Fr.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw ba(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Uy(l,e,n){l=Zi(l,Ps);const d=Object.assign(Object.assign({},xp),n);return function(p){if(p.maxAttempts<1)throw new ln(Gt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(d),function(p,_,w){const N=new Ls;return p.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){const oe=yield function mp(l){return Kg(l).then(e=>e.datastore)}(p);new Dy(p.asyncQueue,oe,w,_,N).run()})),N.promise}(lo(l),p=>e(new Qs(l,p)),d)}(this._delegate,n=>e(new Vy(this,n)))}batch(){return lo(this._delegate),new Dp(new _l(this._delegate,e=>jc(this._delegate,e)))}loadBundle(e){return function h(l,e){const n=lo(l=Zi(l,Ps)),d=new Jg;return function Cu(l,e,n,d){const p=function(_,w){let N;return N="string"==typeof _?(new TextEncoder).encode(_):_,oe=function(oe,me){if(oe instanceof Uint8Array)return fv(oe,void 0);if(oe instanceof ArrayBuffer)return fv(new Uint8Array(oe),void 0);if(oe instanceof ReadableStream)return oe.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new T_(oe,w);var oe}(n,Jf(e));l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){!function Sy(l,e,n){const d=$n(l);var p;(p=(0,Z.Z)(function*(_,w,N){try{const oe=yield w.getMetadata();if(yield function(Lt,nn){const Zt=$n(Lt),Xn=oa(nn.createTime);return Zt.persistence.runTransaction("hasNewerBundle","readonly",ir=>Zt.Ns.getBundleMetadata(ir,nn.id)).then(ir=>!!ir&&ir.createTime.compareTo(Xn)>=0)}(_.localStore,oe))return yield w.close(),N._completeWith({taskState:"Success",documentsLoaded:(Lt=oe).totalDocuments,bytesLoaded:Lt.totalBytes,totalDocuments:Lt.totalDocuments,totalBytes:Lt.totalBytes}),Promise.resolve(new Set);N._updateProgress(gy(oe));const me=new Zm(oe,_.localStore,w.It);let Ne=yield w.mc();for(;Ne;){const Lt=yield me.Fu(Ne);Lt&&N._updateProgress(Lt),Ne=yield w.mc()}const st=yield me.complete();return yield aa(_,st.Lu,void 0),yield function(Lt,nn){const Zt=$n(Lt);return Zt.persistence.runTransaction("Save bundle","readwrite",Xn=>Zt.Ns.saveBundleMetadata(Xn,nn))}(_.localStore,oe),N._completeWith(st.progress),Promise.resolve(st.Bu)}catch(oe){return vs("SyncEngine",`Loading bundle failed with ${oe}`),N._failWith(oe),Promise.resolve(new Set)}var Lt}),function(_,w,N){return p.apply(this,arguments)})(d,e,n).then(p=>{d.sharedClientState.notifyBundleLoaded(p)})}(yield yv(l),p,d)}))}(n,l._databaseId,e,d),d}(this._delegate,e)}namedQuery(e){return function v(l,e){return function Th(l,e){return l.asyncQueue.enqueue((0,Z.Z)(function*(){return function(n,d){const p=$n(n);return p.persistence.runTransaction("Get named query","readonly",_=>p.Ns.getNamedQuery(_,d))}(yield Yg(l),e)}))}(lo(l=Zi(l,Ps)),e).then(n=>n?new Ga(l,null,n.query):null)}(this._delegate,e).then(n=>n?new Du(this,n):null)}}class Ch extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ef(new x(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ju.forKey(n,this.firestore,null)}}class Vy{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ch(e)}get(e){const n=nd(e);return this._delegate.get(n).then(d=>new xh(this._firestore,new Ri(this._firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,n.converter)))}set(e,n,d){const p=nd(e);return d?(Ip("Transaction.set",d),this._delegate.set(p,n,d)):this._delegate.set(p,n),this}update(e,n,d,...p){const _=nd(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,d,...p),this}delete(e){const n=nd(e);return this._delegate.delete(n),this}}class Dp{constructor(e){this._delegate=e}set(e,n,d){const p=nd(e);return d?(Ip("WriteBatch.set",d),this._delegate.set(p,n,d)):this._delegate.set(p,n),this}update(e,n,d,...p){const _=nd(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,d,...p),this}delete(e){const n=nd(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class cc{constructor(e,n,d){this._firestore=e,this._userDataWriter=n,this._delegate=d}fromFirestore(e,n){const d=new tm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ol(this._firestore,d),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const d=cc.INSTANCES;let p=d.get(e);p||(p=new WeakMap,d.set(e,p));let _=p.get(n);return _||(_=new cc(e,new Ch(e),n),p.set(n,_)),_}}cc.INSTANCES=new WeakMap;class ju{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ch(e)}static forPath(e,n,d){if(e.length%2!=0)throw new ln("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ju(n,new uo(n._delegate,d,new Pn(e)))}static forKey(e,n,d){return new ju(n,new uo(n._delegate,d,e))}get id(){return this._delegate.id}get parent(){return new Ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ud(this.firestore,dp(this._delegate,e))}catch(n){throw ba(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof uo&&xy(this._delegate,e)}set(e,n){n=Ip("DocumentReference.set",n);try{return n?Sv(this._delegate,e,n):Sv(this._delegate,e)}catch(d){throw ba(d,"setDoc()","DocumentReference.set()")}}update(e,n,...d){try{return 1===arguments.length?jy(this._delegate,e):jy(this._delegate,e,n,...d)}catch(p){throw ba(p,"updateDoc()","DocumentReference.update()")}}delete(){return function D_(l){return jc(Zi(l.firestore,Ps),[new Ms(l._key,ks.none())])}(this._delegate)}onSnapshot(...e){const n=sm(e),d=kv(e,p=>new xh(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return nm(this._delegate,n,d)}get(e){let n;return n="cache"===e?.source?function Fc(l){l=Zi(l,uo);const e=Zi(l.firestore,Ps),n=lo(e),d=new oc(e);return function w_(l,e){const n=new Ls;return l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(d=(0,Z.Z)(function*(p,_,w){try{const N=yield function(oe,me){const Ne=$n(oe);return Ne.persistence.runTransaction("read document","readonly",st=>Ne.localDocuments.getDocument(st,me))}(p,_);N.isFoundDocument()?w.resolve(N):N.isNoDocument()?w.resolve(null):w.reject(new ln(Gt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const oe=vh(N,`Failed to get document '${_} from cache`);w.reject(oe)}}),function(p,_,w){return d.apply(this,arguments)})(yield Yg(l),e,n);var d})),n.promise}(n,l._key).then(p=>new Ri(e,d,l._key,p,new Fd(null!==p&&p.hasLocalMutations,!0),l.converter))}(this._delegate):"server"===e?.source?function ac(l){l=Zi(l,uo);const e=Zi(l.firestore,Ps);return Qg(lo(e),l._key,{source:"server"}).then(n=>Iu(e,l,n))}(this._delegate):function I_(l){l=Zi(l,uo);const e=Zi(l.firestore,Ps);return Qg(lo(e),l._key).then(n=>Iu(e,l,n))}(this._delegate),n.then(d=>new xh(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)))}withConverter(e){return new ju(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}function ba(l,e,n){return l.message=l.message.replace(e,n),l}function sm(l){for(const e of l)if("object"==typeof e&&!Sf(e))return e;return{}}function kv(l,e){var n,d;let p;return p=Sf(l[0])?l[0]:Sf(l[1])?l[1]:"function"==typeof l[0]?{next:l[0],error:l[1],complete:l[2]}:{next:l[1],error:l[2],complete:l[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(n=p.error)||void 0===n?void 0:n.bind(p),complete:null===(d=p.complete)||void 0===d?void 0:d.bind(p)}}class xh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ju(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sc(this._delegate,e._delegate)}}class ol extends xh{data(e){const n=this._delegate.data(e);return function hu(l,e){l||Jn()}(void 0!==n),n}}class Du{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ch(e)}where(e,n,d){try{return new Du(this.firestore,sl(this._delegate,function _v(l,e,n){const d=e,p=il("where",l);return new Py(p,d,n)}(e,n,d)))}catch(p){throw ba(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Du(this.firestore,sl(this._delegate,function Y_(l,e="asc"){const n=e,d=il("orderBy",l);return new Oy(d,n)}(e,n)))}catch(d){throw ba(d,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Du(this.firestore,sl(this._delegate,function x_(l){return cp("limit",l),new Ry("limit",l,"F")}(e)))}catch(n){throw ba(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Du(this.firestore,sl(this._delegate,function bf(l){return cp("limitToLast",l),new Ry("limitToLast",l,"L")}(e)))}catch(n){throw ba(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Du(this.firestore,sl(this._delegate,function ua(...l){return new ed("startAt",l,!0)}(...e)))}catch(n){throw ba(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Du(this.firestore,sl(this._delegate,function Os(...l){return new ed("startAfter",l,!1)}(...e)))}catch(n){throw ba(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Du(this.firestore,sl(this._delegate,function bv(...l){return new Ny("endBefore",l,!1)}(...e)))}catch(n){throw ba(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Du(this.firestore,sl(this._delegate,function Ly(...l){return new Ny("endAt",l,!0)}(...e)))}catch(n){throw ba(n,"endAt()","Query.endAt()")}}isEqual(e){return fp(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Fy(l){l=Zi(l,Ga);const e=Zi(l.firestore,Ps),n=lo(e),d=new oc(e);return function C_(l,e){const n=new Ls;return l.asyncQueue.enqueueAndForget((0,Z.Z)(function*(){return(d=(0,Z.Z)(function*(p,_,w){try{const N=yield hg(p,_,!0),oe=new Qm(_,N.Hi),me=oe.Wu(N.documents),Ne=oe.applyChanges(me,!1);w.resolve(Ne.snapshot)}catch(N){const oe=vh(N,`Failed to execute query '${_} against cache`);w.reject(oe)}}),function(p,_,w){return d.apply(this,arguments)})(yield Yg(l),e,n);var d})),n.promise}(n,l._query).then(p=>new td(e,d,l,p))}(this._delegate):"server"===e?.source?function Vl(l){l=Zi(l,Ga);const e=Zi(l.firestore,Ps),n=lo(e),d=new oc(e);return nc(n,l._query,{source:"server"}).then(p=>new td(e,d,l,p))}(this._delegate):function uc(l){l=Zi(l,Ga);const e=Zi(l.firestore,Ps),n=lo(e),d=new oc(e);return Ld(l._query),nc(n,l._query).then(p=>new td(e,d,l,p))}(this._delegate),n.then(d=>new kp(this.firestore,new td(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)))}onSnapshot(...e){const n=sm(e),d=kv(e,p=>new kp(this.firestore,new td(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return nm(this._delegate,n,d)}withConverter(e){return new Du(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}class Ap{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ol(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kp{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Du(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ol(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Ap(this._firestore,n))}forEach(e,n){this._delegate.forEach(d=>{e.call(n,new ol(this._firestore,d))})}isEqual(e){return sc(this._delegate,e._delegate)}}class Ud extends Du{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ju(this.firestore,e):null}doc(e){try{return new ju(this.firestore,void 0===e?Pd(this._delegate):Pd(this._delegate,e))}catch(n){throw ba(n,"doc()","CollectionReference.doc()")}}add(e){return function A_(l,e){const n=Zi(l.firestore,Ps),d=Pd(l),p=wp(l.converter,e);return jc(n,[tn(Xt(l.firestore),"addDoc",d._key,p,null!==l.converter,{}).toMutation(d._key,ks.exists(!1))]).then(()=>d)}(this._delegate,e).then(n=>new ju(this.firestore,n))}isEqual(e){return xy(this._delegate,e._delegate)}withConverter(e){return new Ud(this.firestore,this._delegate.withConverter(e?cc.getInstance(this.firestore,e):null))}}function nd(l){return Zi(l,uo)}class om{constructor(...e){this._delegate=new L(...e)}static documentId(){return new om(Ai.keyField().canonicalString())}isEqual(e){return(e=(0,Et.m9)(e))instanceof L&&this._delegate._internalPath.isEqual(e._internalPath)}}class dc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wh(){return new on("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new dc(e)}static delete(){const e=function Tf(){return new Cn("deleteField")}();return e._methodName="FieldValue.delete",new dc(e)}static arrayUnion(...e){const n=function wv(...l){return new In("arrayUnion",l)}(...e);return n._methodName="FieldValue.arrayUnion",new dc(n)}static arrayRemove(...e){const n=function jd(...l){return new mn("arrayRemove",l)}(...e);return n._methodName="FieldValue.arrayRemove",new dc(n)}static increment(e){const n=function Do(l){return new kr("increment",l)}(e);return n._methodName="FieldValue.increment",new dc(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const wf={Firestore:Av,GeoPoint:Te,Timestamp:ts,Blob:Ef,Transaction:Vy,WriteBatch:Dp,DocumentReference:ju,DocumentSnapshot:xh,Query:Du,QueryDocumentSnapshot:ol,QuerySnapshot:kp,CollectionReference:Ud,FieldPath:om,FieldValue:dc,setLogLevel:function P_(l){!function $u(l){oo.setLogLevel(l)}(l)},CACHE_SIZE_UNLIMITED:-1};!function Hy(l){(function Mv(l,e){l.INTERNAL.registerComponent(new We.wA("firestore-compat",n=>{const d=n.getProvider("app-compat").getImmediate(),p=n.getProvider("firestore").getImmediate();return e(d,p)},"PUBLIC").setServiceProps(Object.assign({},wf)))})(l,(e,n)=>new Av(e,n,new im)),l.registerVersion("@firebase/firestore-compat","0.2.3")}(le.Z);var al=W(1205),$y=W(440),O_=W(127);function Gy(l,e){return function Cf(l,e=k.z){return new ee.y(n=>{let d;return null!=e?e.schedule(()=>{d=l.onSnapshot({includeMetadataChanges:!0},n)}):d=l.onSnapshot({includeMetadataChanges:!0},n),()=>{d?.()}})}(l,e)}function Wy(l,e){return Gy(l,e).pipe((0,Re.U)(n=>({payload:n,type:"query"})))}function Mp(l,e){return Wy(l,e).pipe((0,se.O)(void 0),Ie(),(0,Re.U)(([n,d])=>{const p=d.payload.docChanges(),_=p.map(w=>({type:w.type,payload:w}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(d.payload.metadata)&&d.payload.docs.forEach((w,N)=>{const oe=p.find(Ne=>Ne.doc.ref.isEqual(w.ref)),me=n?.payload.docs.find(Ne=>Ne.ref.isEqual(w.ref));oe&&JSON.stringify(oe.doc.metadata)===JSON.stringify(w.metadata)||!oe&&me&&JSON.stringify(me.metadata)===JSON.stringify(w.metadata)||_.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:w}})}),_}))}function Ov(l,e,n){return Mp(l,n).pipe((0,Se.R)((d,p)=>function X_(l,e,n){return e.forEach(d=>{n.indexOf(d.type)>-1&&(l=function am(l,e){switch(e.type){case"added":if(!l[e.newIndex]||!l[e.newIndex].doc.ref.isEqual(e.doc.ref))return jr(l,e.newIndex,0,e);break;case"modified":if(null==l[e.oldIndex]||l[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=l.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return jr(l,e.newIndex,1,e)}break;case"removed":if(l[e.oldIndex]&&l[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jr(l,e.oldIndex,1)}return l}(l,d))}),l}(d,p.map(_=>_.payload),e),[]),function mt(l,e=ut.y){return l=l??$e,(0,Ke.e)((n,d)=>{let p,_=!0;n.subscribe((0,Ae.x)(d,w=>{const N=e(w);(_||!l(p,N))&&(_=!1,p=N,d.next(w))}))})}(),(0,Re.U)(d=>d.map(p=>({type:p.type,payload:p}))))}function jr(l,e,n,...d){const p=l.slice();return p.splice(e,n,...d),p}function Pp(l){return(!l||0===l.length)&&(l=["added","removed","modified"]),l}class zy{constructor(e,n,d){this.ref=e,this.query=n,this.afs=d}stateChanges(e){let n=Mp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Re.U)(d=>d.filter(p=>e.indexOf(p.type)>-1)))),n.pipe((0,se.O)(void 0),Ie(),(0,jt.h)(([d,p])=>p.length>0||!d),(0,Re.U)(([d,p])=>p),Le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Se.R)((n,d)=>[...n,...d],[]))}snapshotChanges(e){const n=Pp(e);return Ov(this.query,n,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(e={}){return Wy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(n=>n.payload.docs.map(d=>e.idField?Object.assign(Object.assign({},d.data()),{[e.idField]:d.id}):d.data())),Le.iC)}get(e){return(0,Ue.D)(this.query.get(e)).pipe(Le.iC)}add(e){return this.ref.add(e)}doc(e){return new Ih(this.ref.doc(e),this.afs)}}class Ih{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const d=this.ref.collection(e),{ref:p,query:_}=Nv(d,n);return new zy(p,_,this.afs)}snapshotChanges(){return function Pv(l,e){return Gy(l,e).pipe((0,se.O)(void 0),Ie(),(0,Re.U)(([n,d])=>d.exists?n?.exists?{payload:d,type:"modified"}:{payload:d,type:"added"}:{payload:d,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Re.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Ue.D)(this.ref.get(e)).pipe(Le.iC)}}class Rv{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Mp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(n=>n.filter(d=>e.indexOf(d.type)>-1)),(0,jt.h)(n=>n.length>0),Le.iC):Mp(this.query,this.afs.schedulers.outsideAngular).pipe(Le.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Se.R)((n,d)=>[...n,...d],[]))}snapshotChanges(e){const n=Pp(e);return Ov(this.query,n,this.afs.schedulers.outsideAngular).pipe(Le.iC)}valueChanges(e={}){return Wy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Re.U)(d=>d.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),Le.iC)}get(e){return(0,Ue.D)(this.query.get(e)).pipe(Le.iC)}}const Op=new E.OlP("angularfire2.enableFirestorePersistence"),Dh=new E.OlP("angularfire2.firestore.persistenceSettings"),Zo=new E.OlP("angularfire2.firestore.settings"),J_=new E.OlP("angularfire2.firestore.use-emulator");function Nv(l,e=(n=>n)){return{query:e(l),ref:l}}let Ah=(()=>{class l{constructor(n,d,p,_,w,N,oe,me,Ne,st,Lt,nn,Zt,Xn,ir,Yi,Gs){this.schedulers=oe;const us=(0,Be.on)(n,N,d),Uo=Ne;st&&(0,al.nw)(us,N,Lt,Zt,Xn,ir,nn,Yi),[this.firestore,this.persistenceEnabled$]=(0,Be.cc)(`${us.name}.firestore`,"AngularFirestore",us.name,()=>{const ls=N.runOutsideAngular(()=>us.firestore());if(_&&ls.settings(_),Uo&&ls.useEmulator(...Uo),p&&!(0,ze.PM)(w)){const cs=()=>{try{return(0,Ue.D)(ls.enablePersistence(me||void 0).then(()=>!0,()=>!1))}catch(Ta){return typeof console<"u"&&console.warn(Ta),(0,Pe.of)(!1)}};return[ls,N.runOutsideAngular(cs)]}return[ls,(0,Pe.of)(!1)]},[_,Uo,p])}collection(n,d){let p;p="string"==typeof n?this.firestore.collection(n):n;const{ref:_,query:w}=Nv(p,d),N=this.schedulers.ngZone.run(()=>_);return new zy(N,w,this)}collectionGroup(n,d){const p=d||(w=>w),_=this.firestore.collectionGroup(n);return new Rv(p(_),this)}doc(n){let d;d="string"==typeof n?this.firestore.doc(n):n;const p=this.schedulers.ngZone.run(()=>d);return new Ih(p,this)}createId(){return this.firestore.collection("_").doc().id}}return l.\u0275fac=function(n){return new(n||l)(E.LFG(Be.Dh),E.LFG(Be.xv,8),E.LFG(Op,8),E.LFG(Zo,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Le.HU),E.LFG(Dh,8),E.LFG(J_,8),E.LFG(al.zQ,8),E.LFG(al.Qv,8),E.LFG(al.L6,8),E.LFG(al._Q,8),E.LFG(al.rT,8),E.LFG(al.lh,8),E.LFG(al.f7,8),E.LFG($y.nm,8))},l.\u0275prov=E.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),xf=(()=>{class l{constructor(){O_.Z.registerVersion("angularfire",Le.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:l,providers:[{provide:Op,useValue:!0},{provide:Dh,useValue:n}]}}}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=E.oAB({type:l}),l.\u0275inj=E.cJS({providers:[Ah]}),l})()},2084:(Yt,at,W)=>{"use strict";W.d(at,{Q1:()=>Q,TE:()=>Ut});var E=W(9751),k=W(9646),ee=W(8996),Ue=W(4986),Pe=W(4482),Le=W(5403),Ke=W(4004),Ae=W(3900),Ie=W(5813),Re=W(4650),Se=W(2011),ut=W(3942),mt=W(5861),$e=W(9681),jt=W(2090),Be=W(4859);const ze="firebasestorage.googleapis.com",yt="storageBucket";class We extends jt.ZR{constructor(J,Oe,Je=0){super(_t(J),`Firebase Storage: ${Oe} (${_t(J)})`),this.status_=Je,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(J){this.status_=J}_codeEquals(J){return _t(J)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(J){this.customData.serverResponse=J,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function _t(re){return"storage/"+re}function Et(){return new We("unknown","An unknown error occurred, please check the error payload for server response.")}function Ge(){return new We("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function ct(){return new We("canceled","User canceled the upload/download.")}function kt(){return new We("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rn(re){return new We("invalid-argument",re)}function Bt(){return new We("app-deleted","The Firebase app was deleted.")}function _n(re){return new We("invalid-root-operation","The operation '"+re+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jt(re,J){return new We("invalid-format","String does not match format '"+re+"': "+J)}function qn(re){throw new We("internal-error","Internal error: "+re)}class Qn{constructor(J,Oe){this.bucket=J,this.path_=Oe}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const J=encodeURIComponent;return"/b/"+J(this.bucket)+"/o/"+J(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(J,Oe){let Je;try{Je=Qn.makeFromUrl(J,Oe)}catch{return new Qn(J,"")}if(""===Je.path)return Je;throw function Tt(re){return new We("invalid-default-bucket","Invalid default bucket '"+re+"'.")}(J)}static makeFromUrl(J,Oe){let Je=null;const ot="([A-Za-z0-9.\\-_]+)",Hn=new RegExp("^gs://"+ot+"(/(.*))?$","i");function mr(Ts){Ts.path_=decodeURIComponent(Ts.path)}const Is=Oe.replace(/[.]/g,"\\."),hs=[{regex:Hn,indices:{bucket:1,path:3},postModify:function Nt(Ts){"/"===Ts.path.charAt(Ts.path.length-1)&&(Ts.path_=Ts.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Is}/v[A-Za-z0-9_]+/b/${ot}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:mr},{regex:new RegExp(`^https?://${Oe===ze?"(?:storage.googleapis.com|storage.cloud.google.com)":Oe}/${ot}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:mr}];for(let Ts=0;Ts<hs.length;Ts++){const Dr=hs[Ts],Oo=Dr.regex.exec(J);if(Oo){let ge=Oo[Dr.indices.path];ge||(ge=""),Je=new Qn(Oo[Dr.indices.bucket],ge),Dr.postModify(Je);break}}if(null==Je)throw function St(re){return new We("invalid-url","Invalid URL '"+re+"'.")}(J);return Je}}class wr{constructor(J){this.promise_=Promise.reject(J)}getPromise(){return this.promise_}cancel(J=!1){}}function ti(re){return"string"==typeof re||re instanceof String}function yr(re){return en()&&re instanceof Blob}function en(){return typeof Blob<"u"&&!(0,jt.UG)()}function pr(re,J,Oe,Je){if(Je<J)throw rn(`Invalid value for '${re}'. Expected ${J} or greater.`);if(Je>Oe)throw rn(`Invalid value for '${re}'. Expected ${Oe} or less.`)}function Or(re,J,Oe){let Je=J;return null==Oe&&(Je=`https://${J}`),`${Oe}://${Je}/v0${re}`}function ni(re){const J=encodeURIComponent;let Oe="?";for(const Je in re)re.hasOwnProperty(Je)&&(Oe=Oe+(J(Je)+"=")+J(re[Je])+"&");return Oe=Oe.slice(0,-1),Oe}var _r=(()=>{return(re=_r||(_r={}))[re.NO_ERROR=0]="NO_ERROR",re[re.NETWORK_ERROR=1]="NETWORK_ERROR",re[re.ABORT=2]="ABORT",_r;var re})();function ci(re,J){const Oe=re>=500&&re<600,ot=-1!==[408,429].indexOf(re),Nt=-1!==J.indexOf(re);return Oe||ot||Nt}class Zr{constructor(J,Oe,Je,ot,Nt,fn,Hn,Tn,mr,Gr,Is,Vi=!0){this.url_=J,this.method_=Oe,this.headers_=Je,this.body_=ot,this.successCodes_=Nt,this.additionalRetryCodes_=fn,this.callback_=Hn,this.errorCallback_=Tn,this.timeout_=mr,this.progressCallback_=Gr,this.connectionFactory_=Is,this.retry=Vi,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Oi,Hi)=>{this.resolve_=Oi,this.reject_=Hi,this.start_()})}start_(){const Oe=(Je,ot)=>{const Nt=this.resolve_,fn=this.reject_,Hn=ot.connection;if(ot.wasSuccessCode)try{const Tn=this.callback_(Hn,Hn.getResponse());!function cr(re){return void 0!==re}(Tn)?Nt():Nt(Tn)}catch(Tn){fn(Tn)}else if(null!==Hn){const Tn=Et();Tn.serverResponse=Hn.getErrorText(),fn(this.errorCallback_?this.errorCallback_(Hn,Tn):Tn)}else fn(ot.canceled?this.appDelete_?Bt():ct():Ge())};this.canceled_?Oe(0,new Wr(!1,null,!0)):this.backoffId_=function vr(re,J,Oe){let Je=1,ot=null,Nt=null,fn=!1,Hn=0;function Tn(){return 2===Hn}let mr=!1;function Gr(...wi){mr||(mr=!0,J.apply(null,wi))}function Is(wi){ot=setTimeout(()=>{ot=null,re(Oi,Tn())},wi)}function Vi(){Nt&&clearTimeout(Nt)}function Oi(wi,...ro){if(mr)return void Vi();if(wi)return Vi(),void Gr.call(null,wi,...ro);if(Tn()||fn)return Vi(),void Gr.call(null,wi,...ro);let hs;Je<64&&(Je*=2),1===Hn?(Hn=2,hs=0):hs=1e3*(Je+Math.random()),Is(hs)}let Hi=!1;function Ns(wi){Hi||(Hi=!0,Vi(),!mr&&(null!==ot?(wi||(Hn=2),clearTimeout(ot),Is(0)):wi||(Hn=1)))}return Is(0),Nt=setTimeout(()=>{fn=!0,Ns(!0)},Oe),Ns}((Je,ot)=>{if(ot)return void Je(!1,new Wr(!1,null,!0));const Nt=this.connectionFactory_();this.pendingConnection_=Nt;const fn=Hn=>{null!==this.progressCallback_&&this.progressCallback_(Hn.loaded,Hn.lengthComputable?Hn.total:-1)};null!==this.progressCallback_&&Nt.addUploadProgressListener(fn),Nt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Nt.removeUploadProgressListener(fn),this.pendingConnection_=null;const Hn=Nt.getErrorCode()===_r.NO_ERROR,Tn=Nt.getStatus();if((!Hn||ci(Tn,this.additionalRetryCodes_))&&this.retry){const Gr=Nt.getErrorCode()===_r.ABORT;return void Je(!1,new Wr(!1,null,Gr))}const mr=-1!==this.successCodes_.indexOf(Tn);Je(!0,new Wr(mr,Nt))})},Oe,this.timeout_)}getPromise(){return this.promise_}cancel(J){this.canceled_=!0,this.appDelete_=J||!1,null!==this.backoffId_&&function Ci(re){re(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Wr{constructor(J,Oe,Je){this.wasSuccessCode=J,this.connection=Oe,this.canceled=!!Je}}function sn(...re){const J=function Qr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==J){const Oe=new J;for(let Je=0;Je<re.length;Je++)Oe.append(re[Je]);return Oe.getBlob()}if(en())return new Blob(re);throw new We("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ki{constructor(J,Oe){this.data=J,this.contentType=Oe||null}}function Mr(re,J){switch(re){case Un.RAW:return new ki(ri(J));case Un.BASE64:case Un.BASE64URL:return new ki(Mn(re,J));case Un.DATA_URL:return new ki(function Rn(re){const J=new Qt(re);return J.base64?Mn(Un.BASE64,J.rest):function Qi(re){let J;try{J=decodeURIComponent(re)}catch{throw Jt(Un.DATA_URL,"Malformed data URL.")}return ri(J)}(J.rest)}(J),function rr(re){return new Qt(re).contentType}(J))}throw Et()}function ri(re){const J=[];for(let Oe=0;Oe<re.length;Oe++){let Je=re.charCodeAt(Oe);Je<=127?J.push(Je):Je<=2047?J.push(192|Je>>6,128|63&Je):55296==(64512&Je)?Oe<re.length-1&&56320==(64512&re.charCodeAt(Oe+1))?(Je=65536|(1023&Je)<<10|1023&re.charCodeAt(++Oe),J.push(240|Je>>18,128|Je>>12&63,128|Je>>6&63,128|63&Je)):J.push(239,191,189):56320==(64512&Je)?J.push(239,191,189):J.push(224|Je>>12,128|Je>>6&63,128|63&Je)}return new Uint8Array(J)}function Mn(re,J){switch(re){case Un.BASE64:{const ot=-1!==J.indexOf("-"),Nt=-1!==J.indexOf("_");if(ot||Nt)throw Jt(re,"Invalid character '"+(ot?"-":"_")+"' found: is it base64url encoded?");break}case Un.BASE64URL:{const ot=-1!==J.indexOf("+"),Nt=-1!==J.indexOf("/");if(ot||Nt)throw Jt(re,"Invalid character '"+(ot?"+":"/")+"' found: is it base64 encoded?");J=J.replace(/-/g,"+").replace(/_/g,"/");break}}let Oe;try{Oe=function rs(re){if(typeof atob>"u")throw function $t(re){return new We("unsupported-environment",`${re} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(re)}(J)}catch(ot){throw ot.message.includes("polyfill")?ot:Jt(re,"Invalid character found")}const Je=new Uint8Array(Oe.length);for(let ot=0;ot<Oe.length;ot++)Je[ot]=Oe.charCodeAt(ot);return Je}class Qt{constructor(J){this.base64=!1,this.contentType=null;const Oe=J.match(/^data:([^,]+)?,/);if(null===Oe)throw Jt(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Je=Oe[1]||null;null!=Je&&(this.base64=function sr(re,J){return re.length>=J.length&&re.substring(re.length-J.length)===J}(Je,";base64"),this.contentType=this.base64?Je.substring(0,Je.length-7):Je),this.rest=J.substring(J.indexOf(",")+1)}}class Dn{constructor(J,Oe){let Je=0,ot="";yr(J)?(this.data_=J,Je=J.size,ot=J.type):J instanceof ArrayBuffer?(Oe?this.data_=new Uint8Array(J):(this.data_=new Uint8Array(J.byteLength),this.data_.set(new Uint8Array(J))),Je=this.data_.length):J instanceof Uint8Array&&(Oe?this.data_=J:(this.data_=new Uint8Array(J.length),this.data_.set(J)),Je=J.length),this.size_=Je,this.type_=ot}size(){return this.size_}type(){return this.type_}slice(J,Oe){if(yr(this.data_)){const ot=function or(re,J,Oe){return re.webkitSlice?re.webkitSlice(J,Oe):re.mozSlice?re.mozSlice(J,Oe):re.slice?re.slice(J,Oe):null}(this.data_,J,Oe);return null===ot?null:new Dn(ot)}{const Je=new Uint8Array(this.data_.buffer,J,Oe-J);return new Dn(Je,!0)}}static getBlob(...J){if(en()){const Oe=J.map(Je=>Je instanceof Dn?Je.data_:Je);return new Dn(sn.apply(null,Oe))}{const Oe=J.map(fn=>ti(fn)?Mr(Un.RAW,fn).data:fn.data_);let Je=0;Oe.forEach(fn=>{Je+=fn.byteLength});const ot=new Uint8Array(Je);let Nt=0;return Oe.forEach(fn=>{for(let Hn=0;Hn<fn.length;Hn++)ot[Nt++]=fn[Hn]}),new Dn(ot,!0)}}uploadData(){return this.data_}}function it(re){let J;try{J=JSON.parse(re)}catch{return null}return function Nr(re){return"object"==typeof re&&!Array.isArray(re)}(J)?J:null}function qt(re){const J=re.lastIndexOf("/",re.length-2);return-1===J?re:re.slice(J+1)}function bt(re,J){return J}class Sn{constructor(J,Oe,Je,ot){this.server=J,this.local=Oe||J,this.writable=!!Je,this.xform=ot||bt}}let An=null;function ai(){if(An)return An;const re=[];re.push(new Sn("bucket")),re.push(new Sn("generation")),re.push(new Sn("metageneration")),re.push(new Sn("name","fullPath",!0));const Oe=new Sn("name");Oe.xform=function J(Nt,fn){return function $r(re){return!ti(re)||re.length<2?re:qt(re)}(fn)},re.push(Oe);const ot=new Sn("size");return ot.xform=function Je(Nt,fn){return void 0!==fn?Number(fn):fn},re.push(ot),re.push(new Sn("timeCreated")),re.push(new Sn("updated")),re.push(new Sn("md5Hash",null,!0)),re.push(new Sn("cacheControl",null,!0)),re.push(new Sn("contentDisposition",null,!0)),re.push(new Sn("contentEncoding",null,!0)),re.push(new Sn("contentLanguage",null,!0)),re.push(new Sn("contentType",null,!0)),re.push(new Sn("metadata","customMetadata",!0)),An=re,An}function ae(re,J,Oe){const Je=it(J);return null===Je?null:function K(re,J,Oe){const Je={type:"file"},ot=Oe.length;for(let Nt=0;Nt<ot;Nt++){const fn=Oe[Nt];Je[fn.local]=fn.xform(Je,J[fn.server])}return function ye(re,J){Object.defineProperty(re,"ref",{get:function Oe(){const Nt=new Qn(re.bucket,re.fullPath);return J._makeStorageReference(Nt)}})}(Je,re),Je}(re,Je,Oe)}function Ze(re,J){const Oe={},Je=J.length;for(let ot=0;ot<Je;ot++){const Nt=J[ot];Nt.writable&&(Oe[Nt.server]=re[Nt.local])}return JSON.stringify(Oe)}const xt="prefixes";class br{constructor(J,Oe,Je,ot){this.url=J,this.method=Oe,this.handler=Je,this.timeout=ot,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function yi(re){if(!re)throw Et()}function ar(re,J){return function Oe(Je,ot){const Nt=ae(re,ot,J);return yi(null!==Nt),Nt}}function Mi(re){return function J(Oe,Je){let ot;return ot=401===Oe.getStatus()?Oe.getErrorText().includes("Firebase App Check token is invalid")?function Fe(){return new We("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function fe(){return new We("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Oe.getStatus()?function he(re){return new We("quota-exceeded","Quota for bucket '"+re+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(re.bucket):403===Oe.getStatus()?function Me(re){return new We("unauthorized","User does not have permission to access '"+re+"'.")}(re.path):Je,ot.status=Oe.getStatus(),ot.serverResponse=Je.serverResponse,ot}}function Ni(re){const J=Mi(re);return function Oe(Je,ot){let Nt=J(Je,ot);return 404===Je.getStatus()&&(Nt=function H(re){return new We("object-not-found","Object '"+re+"' does not exist.")}(re.path)),Nt.serverResponse=ot.serverResponse,Nt}}function _i(re,J,Oe){const ot=Or(J.fullServerUrl(),re.host,re._protocol),fn=re.maxOperationRetryTime,Hn=new br(ot,"GET",ar(re,Oe),fn);return Hn.errorHandler=Ni(J),Hn}function bi(re,J,Oe,Je,ot){const Nt={};Nt.prefix=J.isRoot?"":J.path+"/",Oe&&Oe.length>0&&(Nt.delimiter=Oe),Je&&(Nt.pageToken=Je),ot&&(Nt.maxResults=ot);const Hn=Or(J.bucketOnlyServerUrl(),re.host,re._protocol),mr=re.maxOperationRetryTime,Gr=new br(Hn,"GET",function zr(re,J){return function Oe(Je,ot){const Nt=function Kn(re,J,Oe){const Je=it(Oe);return null===Je?null:function Ln(re,J,Oe){const Je={prefixes:[],items:[],nextPageToken:Oe.nextPageToken};if(Oe[xt])for(const ot of Oe[xt]){const Nt=ot.replace(/\/$/,""),fn=re._makeStorageReference(new Qn(J,Nt));Je.prefixes.push(fn)}if(Oe.items)for(const ot of Oe.items){const Nt=re._makeStorageReference(new Qn(J,ot.name));Je.items.push(Nt)}return Je}(re,J,Je)}(re,J,ot);return yi(null!==Nt),Nt}}(re,J.bucket),mr);return Gr.urlParams=Nt,Gr.errorHandler=Mi(J),Gr}function _o(re,J,Oe){const Je=Object.assign({},Oe);return Je.fullPath=re.path,Je.size=J.size(),Je.contentType||(Je.contentType=function di(re,J){return re&&re.contentType||J&&J.type()||"application/octet-stream"}(null,J)),Je}class js{constructor(J,Oe,Je,ot){this.current=J,this.total=Oe,this.finalized=!!Je,this.metadata=ot||null}}function co(re,J){let Oe=null;try{Oe=re.getResponseHeader("X-Goog-Upload-Status")}catch{yi(!1)}return yi(!!Oe&&-1!==(J||["active"]).indexOf(Oe)),Oe}const Bo={STATE_CHANGED:"state_changed"},qr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bs(re){switch(re){case"running":case"pausing":case"canceling":return qr.RUNNING;case"paused":return qr.PAUSED;case"success":return qr.SUCCESS;case"canceled":return qr.CANCELED;default:return qr.ERROR}}class Ao{constructor(J,Oe,Je){if(function tr(re){return"function"==typeof re}(J)||null!=Oe||null!=Je)this.next=J,this.error=Oe??void 0,this.complete=Je??void 0;else{const Nt=J;this.next=Nt.next,this.error=Nt.error,this.complete=Nt.complete}}}function ko(re){return(...J)=>{Promise.resolve().then(()=>re(...J))}}class lu extends class ns{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_r.NO_ERROR,this.sendPromise_=new Promise(J=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_r.ABORT,J()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_r.NETWORK_ERROR,J()}),this.xhr_.addEventListener("load",()=>{J()})})}send(J,Oe,Je,ot){if(this.sent_)throw qn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Oe,J,!0),void 0!==ot)for(const Nt in ot)ot.hasOwnProperty(Nt)&&this.xhr_.setRequestHeader(Nt,ot[Nt].toString());return void 0!==Je?this.xhr_.send(Je):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(J){return this.xhr_.getResponseHeader(J)}addUploadProgressListener(J){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",J)}removeUploadProgressListener(J){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",J)}}{initXhr(){this.xhr_.responseType="text"}}function xs(){return new lu}class wt{constructor(J,Oe,Je=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=J,this._blob=Oe,this._metadata=Je,this._mappings=ai(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ot=>{if(this._request=void 0,this._chunkMultiplier=1,ot._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Nt=this.isExponentialBackoffExpired();if(ci(ot.status,[])){if(!Nt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();ot=Ge()}this._error=ot,this._transition("error")}},this._metadataErrorHandler=ot=>{this._request=void 0,ot._codeEquals("canceled")?this.completeTransitions_():(this._error=ot,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ot,Nt)=>{this._resolve=ot,this._reject=Nt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const J=this._transferred;return Oe=>this._updateProgress(J+Oe)}_shouldDoResumable(J){return J.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(J){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Oe,Je])=>{switch(this._state){case"running":J(Oe,Je);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((J,Oe)=>{const Je=function Us(re,J,Oe,Je,ot){const Nt=J.bucketOnlyServerUrl(),fn=_o(J,Je,ot),Hn={name:fn.fullPath},Tn=Or(Nt,re.host,re._protocol),Gr={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Je.size()}`,"X-Goog-Upload-Header-Content-Type":fn.contentType,"Content-Type":"application/json; charset=utf-8"},Is=Ze(fn,Oe),Hi=new br(Tn,"POST",function Oi(Ns){let wi;co(Ns);try{wi=Ns.getResponseHeader("X-Goog-Upload-URL")}catch{yi(!1)}return yi(ti(wi)),wi},re.maxUploadRetryTime);return Hi.urlParams=Hn,Hi.headers=Gr,Hi.body=Is,Hi.errorHandler=Mi(J),Hi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ot=this._ref.storage._makeRequest(Je,xs,J,Oe);this._request=ot,ot.getPromise().then(Nt=>{this._request=void 0,this._uploadUrl=Nt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const J=this._uploadUrl;this._resolveToken((Oe,Je)=>{const ot=function Ws(re,J,Oe,Je){const Tn=new br(Oe,"POST",function Nt(mr){const Gr=co(mr,["active","final"]);let Is=null;try{Is=mr.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yi(!1)}Is||yi(!1);const Vi=Number(Is);return yi(!isNaN(Vi)),new js(Vi,Je.size(),"final"===Gr)},re.maxUploadRetryTime);return Tn.headers={"X-Goog-Upload-Command":"query"},Tn.errorHandler=Mi(J),Tn}(this._ref.storage,this._ref._location,J,this._blob),Nt=this._ref.storage._makeRequest(ot,xs,Oe,Je);this._request=Nt,Nt.getPromise().then(fn=>{this._request=void 0,this._updateProgress(fn.current),this._needToFetchStatus=!1,fn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const J=262144*this._chunkMultiplier,Oe=new js(this._transferred,this._blob.size()),Je=this._uploadUrl;this._resolveToken((ot,Nt)=>{let fn;try{fn=function Si(re,J,Oe,Je,ot,Nt,fn,Hn){const Tn=new js(0,0);if(fn?(Tn.current=fn.current,Tn.total=fn.total):(Tn.current=0,Tn.total=Je.size()),Je.size()!==Tn.total)throw function dt(){return new We("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const mr=Tn.total-Tn.current;let Gr=mr;ot>0&&(Gr=Math.min(Gr,ot));const Is=Tn.current;let Oi="";Oi=0===Gr?"finalize":mr===Gr?"upload, finalize":"upload";const Hi={"X-Goog-Upload-Command":Oi,"X-Goog-Upload-Offset":`${Tn.current}`},Ns=Je.slice(Is,Is+Gr);if(null===Ns)throw kt();const hs=new br(Oe,"POST",function wi(Ts,Dr){const Oo=co(Ts,["active","final"]),B=Tn.current+Gr,ge=Je.size();let z;return z="final"===Oo?ar(J,Nt)(Ts,Dr):null,new js(B,ge,"final"===Oo,z)},J.maxUploadRetryTime);return hs.headers=Hi,hs.body=Ns.uploadData(),hs.progressCallback=Hn||null,hs.errorHandler=Mi(re),hs}(this._ref._location,this._ref.storage,Je,this._blob,J,this._mappings,Oe,this._makeProgressCallback())}catch(Tn){return this._error=Tn,void this._transition("error")}const Hn=this._ref.storage._makeRequest(fn,xs,ot,Nt,!1);this._request=Hn,Hn.getPromise().then(Tn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Tn.current),Tn.finalized?(this._metadata=Tn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((J,Oe)=>{const Je=_i(this._ref.storage,this._ref._location,this._mappings),ot=this._ref.storage._makeRequest(Je,xs,J,Oe);this._request=ot,ot.getPromise().then(Nt=>{this._request=void 0,this._metadata=Nt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((J,Oe)=>{const Je=function _s(re,J,Oe,Je,ot){const Nt=J.bucketOnlyServerUrl(),fn={"X-Goog-Upload-Protocol":"multipart"},Tn=function Hn(){let hs="";for(let Ts=0;Ts<2;Ts++)hs+=Math.random().toString().slice(2);return hs}();fn["Content-Type"]="multipart/related; boundary="+Tn;const mr=_o(J,Je,ot),Gr=Ze(mr,Oe),Oi=Dn.getBlob("--"+Tn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Gr+"\r\n--"+Tn+"\r\nContent-Type: "+mr.contentType+"\r\n\r\n",Je,"\r\n--"+Tn+"--");if(null===Oi)throw kt();const Hi={name:mr.fullPath},Ns=Or(Nt,re.host,re._protocol),ro=re.maxUploadRetryTime,mi=new br(Ns,"POST",ar(re,Oe),ro);return mi.urlParams=Hi,mi.headers=fn,mi.body=Oi.uploadData(),mi.errorHandler=Mi(J),mi}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ot=this._ref.storage._makeRequest(Je,xs,J,Oe);this._request=ot,ot.getPromise().then(Nt=>{this._request=void 0,this._metadata=Nt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(J){const Oe=this._transferred;this._transferred=J,this._transferred!==Oe&&this._notifyObservers()}_transition(J){if(this._state!==J)switch(J){case"canceling":case"pausing":this._state=J,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Oe="paused"===this._state;this._state=J,Oe&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=J,this._notifyObservers();break;case"canceled":this._error=ct(),this._state=J,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const J=bs(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:J,metadata:this._metadata,task:this,ref:this._ref}}on(J,Oe,Je,ot){const Nt=new Ao(Oe||void 0,Je||void 0,ot||void 0);return this._addObserver(Nt),()=>{this._removeObserver(Nt)}}then(J,Oe){return this._promise.then(J,Oe)}catch(J){return this.then(null,J)}_addObserver(J){this._observers.push(J),this._notifyObserver(J)}_removeObserver(J){const Oe=this._observers.indexOf(J);-1!==Oe&&this._observers.splice(Oe,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Oe=>{this._notifyObserver(Oe)})}_finishPromise(){if(void 0!==this._resolve){let J=!0;switch(bs(this._state)){case qr.SUCCESS:ko(this._resolve.bind(null,this.snapshot))();break;case qr.CANCELED:case qr.ERROR:ko(this._reject.bind(null,this._error))();break;default:J=!1}J&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(J){switch(bs(this._state)){case qr.RUNNING:case qr.PAUSED:J.next&&ko(J.next.bind(J,this.snapshot))();break;case qr.SUCCESS:J.complete&&ko(J.complete.bind(J))();break;default:J.error&&ko(J.error.bind(J,this._error))()}}resume(){const J="paused"===this._state||"pausing"===this._state;return J&&this._transition("running"),J}pause(){const J="running"===this._state;return J&&this._transition("pausing"),J}cancel(){const J="running"===this._state||"pausing"===this._state;return J&&this._transition("canceling"),J}}class ft{constructor(J,Oe){this._service=J,this._location=Oe instanceof Qn?Oe:Qn.makeFromUrl(Oe,J.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(J,Oe){return new ft(J,Oe)}get root(){const J=new Qn(this._location.bucket,"");return this._newRef(this._service,J)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qt(this._location.path)}get storage(){return this._service}get parent(){const J=function rt(re){if(0===re.length)return null;const J=re.lastIndexOf("/");return-1===J?"":re.slice(0,J)}(this._location.path);if(null===J)return null;const Oe=new Qn(this._location.bucket,J);return new ft(this._service,Oe)}_throwIfRoot(J){if(""===this._location.path)throw _n(J)}}function Xr(re,J,Oe){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,mt.Z)(function*(re,J,Oe){const ot=yield Wi(re,{pageToken:Oe});J.prefixes.push(...ot.prefixes),J.items.push(...ot.items),null!=ot.nextPageToken&&(yield Xr(re,J,ot.nextPageToken))})).apply(this,arguments)}function Wi(re,J){null!=J&&"number"==typeof J.maxResults&&pr("options.maxResults",1,1e3,J.maxResults);const Oe=J||{},Je=bi(re.storage,re._location,"/",Oe.pageToken,Oe.maxResults);return re.storage.makeRequestWithTokens(Je,xs)}function zs(re){re._throwIfRoot("getDownloadURL");const J=function Pi(re,J,Oe){const ot=Or(J.fullServerUrl(),re.host,re._protocol),fn=re.maxOperationRetryTime,Hn=new br(ot,"GET",function Xi(re,J){return function Oe(Je,ot){const Nt=ae(re,ot,J);return yi(null!==Nt),function ve(re,J,Oe,Je){const ot=it(J);if(null===ot||!ti(ot.downloadTokens))return null;const Nt=ot.downloadTokens;if(0===Nt.length)return null;const fn=encodeURIComponent;return Nt.split(",").map(mr=>{const Is=re.fullPath;return Or("/b/"+fn(re.bucket)+"/o/"+fn(Is),Oe,Je)+ni({alt:"media",token:mr})})[0]}(Nt,ot,re.host,re._protocol)}}(re,Oe),fn);return Hn.errorHandler=Ni(J),Hn}(re.storage,re._location,ai());return re.storage.makeRequestWithTokens(J,xs).then(Oe=>{if(null===Oe)throw function Ht(){return new We("no-download-url","The given file does not have any download URLs.")}();return Oe})}function bo(re,J){const Oe=function ht(re,J){const Oe=J.split("/").filter(Je=>Je.length>0).join("/");return 0===re.length?Oe:re+"/"+Oe}(re._location.path,J),Je=new Qn(re._location.bucket,Oe);return new ft(re.storage,Je)}function ho(re,J){if(re instanceof Bs){const Oe=re;if(null==Oe._bucket)throw function Pt(){return new We("no-default-bucket","No default bucket found. Did you set the '"+yt+"' property when initializing the app?")}();const Je=new ft(Oe,Oe._bucket);return null!=J?ho(Je,J):Je}return void 0!==J?bo(re,J):re}function fo(re,J){if(J&&function Ra(re){return/^[A-Za-z]+:\/\//.test(re)}(J)){if(re instanceof Bs)return function to(re,J){return new ft(re,J)}(re,J);throw rn("To use ref(service, url), the first argument must be a Storage instance.")}return ho(re,J)}function To(re,J){const Oe=J?.[yt];return null==Oe?null:Qn.makeFromBucketSpec(Oe,re)}class Bs{constructor(J,Oe,Je,ot,Nt){this.app=J,this._authProvider=Oe,this._appCheckProvider=Je,this._url=ot,this._firebaseVersion=Nt,this._bucket=null,this._host=ze,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ot?Qn.makeFromBucketSpec(ot,this._host):To(this._host,this.app.options)}get host(){return this._host}set host(J){this._host=J,this._bucket=null!=this._url?Qn.makeFromBucketSpec(this._url,J):To(J,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(J){pr("time",0,Number.POSITIVE_INFINITY,J),this._maxUploadRetryTime=J}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(J){pr("time",0,Number.POSITIVE_INFINITY,J),this._maxOperationRetryTime=J}_getAuthToken(){var J=this;return(0,mt.Z)(function*(){if(J._overrideAuthToken)return J._overrideAuthToken;const Oe=J._authProvider.getImmediate({optional:!0});if(Oe){const Je=yield Oe.getToken();if(null!==Je)return Je.accessToken}return null})()}_getAppCheckToken(){var J=this;return(0,mt.Z)(function*(){const Oe=J._appCheckProvider.getImmediate({optional:!0});return Oe?(yield Oe.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(J=>J.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(J){return new ft(this,J)}_makeRequest(J,Oe,Je,ot,Nt=!0){if(this._deleted)return new wr(Bt());{const fn=function vi(re,J,Oe,Je,ot,Nt,fn=!0){const Hn=ni(re.urlParams),Tn=re.url+Hn,mr=Object.assign({},re.headers);return function Zn(re,J){J&&(re["X-Firebase-GMPID"]=J)}(mr,J),function si(re,J){null!==J&&J.length>0&&(re.Authorization="Firebase "+J)}(mr,Oe),function nr(re,J){re["X-Firebase-Storage-Version"]="webjs/"+(J??"AppManager")}(mr,Nt),function Yr(re,J){null!==J&&(re["X-Firebase-AppCheck"]=J)}(mr,Je),new Zr(Tn,re.method,mr,re.body,re.successCodes,re.additionalRetryCodes,re.handler,re.errorHandler,re.timeout,re.progressCallback,ot,fn)}(J,this._appId,Je,ot,Oe,this._firebaseVersion,Nt);return this._requests.add(fn),fn.getPromise().then(()=>this._requests.delete(fn),()=>this._requests.delete(fn)),fn}}makeRequestWithTokens(J,Oe){var Je=this;return(0,mt.Z)(function*(){const[ot,Nt]=yield Promise.all([Je._getAuthToken(),Je._getAppCheckToken()]);return Je._makeRequest(J,Oe,ot,Nt).getPromise()})()}}const Ka="@firebase/storage";function Sa(re,J){return fo(re=(0,jt.m9)(re),J)}function Br(re,{instanceIdentifier:J}){const Oe=re.getProvider("app").getImmediate(),Je=re.getProvider("auth-internal"),ot=re.getProvider("app-check-internal");return new Bs(Oe,Je,ot,J,$e.SDK_VERSION)}!function Jo(){(0,$e._registerComponent)(new Be.wA("storage",Br,"PUBLIC").setMultipleInstances(!0)),(0,$e.registerVersion)(Ka,"0.9.14",""),(0,$e.registerVersion)(Ka,"0.9.14","esm2017")}();class Po{constructor(J,Oe,Je){this._delegate=J,this.task=Oe,this.ref=Je}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ya{constructor(J,Oe){this._delegate=J,this._ref=Oe,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Po(this._delegate.snapshot,this,this._ref)}then(J,Oe){return this._delegate.then(Je=>{if(J)return J(new Po(Je,this,this._ref))},Oe)}on(J,Oe,Je,ot){let Nt;return Oe&&(Nt="function"==typeof Oe?fn=>Oe(new Po(fn,this,this._ref)):{next:Oe.next?fn=>Oe.next(new Po(fn,this,this._ref)):void 0,complete:Oe.complete||void 0,error:Oe.error||void 0}),this._delegate.on(J,Nt,Je||void 0,ot||void 0)}}class no{constructor(J,Oe){this._delegate=J,this._service=Oe}get prefixes(){return this._delegate.prefixes.map(J=>new is(J,this._service))}get items(){return this._delegate.items.map(J=>new is(J,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class is{constructor(J,Oe){this._delegate=J,this.storage=Oe}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(J){const Oe=function Vs(re,J){return bo(re,J)}(this._delegate,J);return new is(Oe,this.storage)}get root(){return new is(this._delegate.root,this.storage)}get parent(){const J=this._delegate.parent;return null==J?null:new is(J,this.storage)}put(J,Oe){return this._throwIfRoot("put"),new Ya(function ca(re,J,Oe){return function kn(re,J,Oe){return re._throwIfRoot("uploadBytesResumable"),new wt(re,new Dn(J),Oe)}(re=(0,jt.m9)(re),J,Oe)}(this._delegate,J,Oe),this)}putString(J,Oe=Un.RAW,Je){this._throwIfRoot("putString");const ot=Mr(Oe,J),Nt=Object.assign({},Je);return null==Nt.contentType&&null!=ot.contentType&&(Nt.contentType=ot.contentType),new Ya(new wt(this._delegate,new Dn(ot.data,!0),Nt),this)}listAll(){return function ha(re){return function oi(re){const J={prefixes:[],items:[]};return Xr(re,J).then(()=>J)}(re=(0,jt.m9)(re))}(this._delegate).then(J=>new no(J,this.storage))}list(J){return function Xo(re,J){return Wi(re=(0,jt.m9)(re),J)}(this._delegate,J||void 0).then(Oe=>new no(Oe,this.storage))}getMetadata(){return function da(re){return function Vo(re){re._throwIfRoot("getMetadata");const J=_i(re.storage,re._location,ai());return re.storage.makeRequestWithTokens(J,xs)}(re=(0,jt.m9)(re))}(this._delegate)}updateMetadata(J){return function ms(re,J){return function zi(re,J){re._throwIfRoot("updateMetadata");const Oe=function Bi(re,J,Oe,Je){const Nt=Or(J.fullServerUrl(),re.host,re._protocol),Hn=Ze(Oe,Je),mr=re.maxOperationRetryTime,Gr=new br(Nt,"PATCH",ar(re,Je),mr);return Gr.headers={"Content-Type":"application/json; charset=utf-8"},Gr.body=Hn,Gr.errorHandler=Ni(J),Gr}(re.storage,re._location,J,ai());return re.storage.makeRequestWithTokens(Oe,xs)}(re=(0,jt.m9)(re),J)}(this._delegate,J)}getDownloadURL(){return function xi(re){return zs(re=(0,jt.m9)(re))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function La(re){return function Bu(re){re._throwIfRoot("deleteObject");const J=function Yo(re,J){const Je=Or(J.fullServerUrl(),re.host,re._protocol),Hn=new br(Je,"DELETE",function fn(Tn,mr){},re.maxOperationRetryTime);return Hn.successCodes=[200,204],Hn.errorHandler=Ni(J),Hn}(re.storage,re._location);return re.storage.makeRequestWithTokens(J,xs)}(re=(0,jt.m9)(re))}(this._delegate)}_throwIfRoot(J){if(""===this._delegate._location.path)throw _n(J)}}class fr{constructor(J,Oe){this.app=J,this._delegate=Oe}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(J){if(ur(J))throw rn("ref() expected a child path but got a URL, use refFromURL instead.");return new is(Sa(this._delegate,J),this)}refFromURL(J){if(!ur(J))throw rn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qn.makeFromUrl(J,this._delegate.host)}catch{throw rn("refFromUrl() expected a valid full URL but got an invalid one.")}return new is(Sa(this._delegate,J),this)}setMaxUploadRetryTime(J){this._delegate.maxUploadRetryTime=J}setMaxOperationRetryTime(J){this._delegate.maxOperationRetryTime=J}useEmulator(J,Oe,Je={}){!function Eo(re,J,Oe,Je={}){!function Na(re,J,Oe,Je={}){re.host=`${J}:${Oe}`,re._protocol="http";const{mockUserToken:ot}=Je;ot&&(re._overrideAuthToken="string"==typeof ot?ot:(0,jt.Sg)(ot,re.app.options.projectId))}(re,J,Oe,Je)}(this._delegate,J,Oe,Je)}}function ur(re){return/^[A-Za-z]+:\/\//.test(re)}function So(re,{instanceIdentifier:J}){const Oe=re.getProvider("app-compat").getImmediate(),Je=re.getProvider("storage").getImmediate({identifier:J});return new fr(Oe,Je)}!function Au(re){const J={TaskState:qr,TaskEvent:Bo,StringFormat:Un,Storage:fr,Reference:is};re.INTERNAL.registerComponent(new Be.wA("storage-compat",So,"PUBLIC").setServiceProps(J).setMultipleInstances(!0)),re.registerVersion("@firebase/storage-compat","0.1.22")}(ut.Z);var Ti=W(440),pa=W(127);function hn(re){const J=function ga(re){return new E.y(J=>{const Oe=fn=>J.next(fn);Oe(re.snapshot);const Nt=re.on("state_changed",Oe);return re.then(fn=>{Oe(fn),J.complete()},fn=>{Oe(re.snapshot),(fn=>{J.error(fn)})(fn)}),function(){Nt()}}).pipe(function se(re,J=Ue.z){return(0,Pe.e)((Oe,Je)=>{let ot=null,Nt=null,fn=null;const Hn=()=>{if(ot){ot.unsubscribe(),ot=null;const mr=Nt;Nt=null,Je.next(mr)}};function Tn(){const mr=fn+re,Gr=J.now();if(Gr<mr)return ot=this.schedule(void 0,mr-Gr),void Je.add(ot);Hn()}Oe.subscribe((0,Le.x)(Je,mr=>{Nt=mr,fn=J.now(),ot||(ot=J.schedule(Tn,re),Je.add(ot))},()=>{Hn(),Je.complete()},void 0,()=>{Nt=ot=null}))})}(0))}(re);return{task:re,then:re.then.bind(re),catch:re.catch.bind(re),pause:re.pause.bind(re),cancel:re.cancel.bind(re),resume:re.resume.bind(re),snapshotChanges:()=>J,percentageChanges:()=>J.pipe((0,Ke.U)(Oe=>Oe.bytesTransferred/Oe.totalBytes*100))}}function Jr(re){return{getDownloadURL:()=>(0,k.of)(void 0).pipe(Ie.fc,(0,Ae.w)(()=>re.getDownloadURL()),Ie.iC),getMetadata:()=>(0,k.of)(void 0).pipe(Ie.fc,(0,Ae.w)(()=>re.getMetadata()),Ie.iC),delete:()=>(0,ee.D)(re.delete()),child:J=>Jr(re.child(J)),updateMetadata:J=>(0,ee.D)(re.updateMetadata(J)),put:(J,Oe)=>hn(re.put(J,Oe)),putString:(J,Oe,Je)=>hn(re.putString(J,Oe,Je)),list:J=>(0,ee.D)(re.list(J)),listAll:()=>(0,ee.D)(re.listAll())}}const ea=new Re.OlP("angularfire2.storageBucket"),ta=new Re.OlP("angularfire2.storage.maxUploadRetryTime"),ds=new Re.OlP("angularfire2.storage.maxOperationRetryTime"),ie=new Re.OlP("angularfire2.storage.use-emulator");let Q=(()=>{class re{constructor(Oe,Je,ot,Nt,fn,Hn,Tn,mr,Gr,Is){const Vi=(0,Se.on)(Oe,fn,Je);this.storage=(0,Se.cc)(`${Vi.name}.storage.${ot}`,"AngularFireStorage",Vi.name,()=>{const Oi=fn.runOutsideAngular(()=>Vi.storage(ot||void 0)),Hi=Gr;return Hi&&Oi.useEmulator(...Hi),Tn&&Oi.setMaxUploadRetryTime(Tn),mr&&Oi.setMaxOperationRetryTime(mr),Oi},[Tn,mr])}ref(Oe){return Jr(this.storage.ref(Oe))}refFromURL(Oe){return Jr(this.storage.refFromURL(Oe))}upload(Oe,Je,ot){return Jr(this.storage.ref(Oe)).put(Je,ot)}}return re.\u0275fac=function(Oe){return new(Oe||re)(Re.LFG(Se.Dh),Re.LFG(Se.xv,8),Re.LFG(ea,8),Re.LFG(Re.Lbi),Re.LFG(Re.R0b),Re.LFG(Ie.HU),Re.LFG(ta,8),Re.LFG(ds,8),Re.LFG(ie,8),Re.LFG(Ti.nm,8))},re.\u0275prov=Re.Yz7({token:re,factory:re.\u0275fac,providedIn:"any"}),re})(),ke=(()=>{class re{}return re.\u0275fac=function(Oe){return new(Oe||re)},re.\u0275mod=Re.oAB({type:re}),re.\u0275inj=Re.cJS({}),re})(),Ut=(()=>{class re{constructor(){pa.Z.registerVersion("angularfire",Ie.q4.full,"gcs-compat")}}return re.\u0275fac=function(Oe){return new(Oe||re)},re.\u0275mod=Re.oAB({type:re}),re.\u0275inj=Re.cJS({providers:[Q],imports:[ke]}),re})()},2011:(Yt,at,W)=>{"use strict";W.d(at,{Dh:()=>Ke,GT:()=>Le,cc:()=>mt,hO:()=>ut,on:()=>Ie,pX:()=>Pe,xv:()=>Ae});var E=W(4650),k=W(127),ee=W(5813);Yt=W.hmd(Yt);const Ue=["ngOnDestroy"],Pe=(ze,yt,le,Z={})=>new Proxy(ze,{get:(xe,We)=>le.runOutsideAngular(()=>{var _t;if(ze[We])return!(null===(_t=Z?.spy)||void 0===_t)&&_t.get&&Z.spy.get(We,ze[We]),ze[We];if(Ue.indexOf(We)>-1)return()=>{};const Et=yt.toPromise().then(H=>{const he=H&&H[We];return"function"==typeof he?he.bind(H):he&&he.then?he.then(fe=>le.run(()=>fe)):le.run(()=>he)});return new Proxy(()=>{},{get:(H,he)=>Et[he],apply:(H,he,fe)=>Et.then(Fe=>{var Me;const Ge=Fe&&Fe(...fe);return!(null===(Me=Z?.spy)||void 0===Me)&&Me.apply&&Z.spy.apply(We,fe,Ge),Ge})})})}),Le=(ze,yt)=>{yt.forEach(le=>{Object.getOwnPropertyNames(le.prototype||le).forEach(Z=>{Object.defineProperty(ze.prototype,Z,Object.getOwnPropertyDescriptor(le.prototype||le,Z))})})};class se{constructor(yt){return yt}}const Ke=new E.OlP("angularfire2.app.options"),Ae=new E.OlP("angularfire2.app.name");function Ie(ze,yt,le){const xe="object"==typeof le&&le||{};xe.name=xe.name||"string"==typeof le&&le||"[DEFAULT]";const _t=k.Z.apps.filter(Et=>Et&&Et.name===xe.name)[0]||yt.runOutsideAngular(()=>k.Z.initializeApp(ze,xe));try{JSON.stringify(ze)!==JSON.stringify(_t.options)&&Re("error",`${_t.name} Firebase App already initialized with different options${Yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new se(_t)}const Re=(ze,...yt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ze](...yt)},Se={provide:se,useFactory:Ie,deps:[Ke,E.R0b,[new E.FiY,Ae]]};let ut=(()=>{class ze{constructor(le){k.Z.registerVersion("angularfire",ee.q4.full,"core"),k.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),k.Z.registerVersion("angular",E.q4F.full,le.toString())}static initializeApp(le,Z){return{ngModule:ze,providers:[{provide:Ke,useValue:le},{provide:Ae,useValue:Z}]}}}return ze.\u0275fac=function(le){return new(le||ze)(E.LFG(E.Lbi))},ze.\u0275mod=E.oAB({type:ze}),ze.\u0275inj=E.cJS({providers:[Se]}),ze})();function mt(ze,yt,le,Z,xe){const[,We,_t]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===ze)||[];if(We)return function $e(ze,yt){try{return ze.toString()===yt.toString()}catch{return ze===yt}}(xe,_t)||(Be("error",`${yt} was already initialized on the ${le} Firebase App with different settings.${jt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:xe,was:_t})),We;{const Et=Z();return globalThis.\u0275AngularfireInstanceCache.push([ze,Et,xe]),Et}}const jt=!!Yt.hot,Be=(ze,...yt)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ze](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Yt,at,W)=>{"use strict";W.d(at,{q4:()=>_e,iC:()=>yu,fc:()=>Hd,HU:()=>cl,vb:()=>ia,JM:()=>Ei});var E=W(4650),k=W(5867),ee=W(5861),Ue=W(9681),Pe=W(2090),Le=W(4859),se=W(1877),Ke=W(8766);const Ae="@firebase/installations",Ie="0.5.16",Se=`w:${Ie}`,ut="FIS_v2",yt=new Pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function le(G){return G instanceof Pe.ZR&&G.code.includes("request-failed")}function Z({projectId:G}){return`https://firebaseinstallations.googleapis.com/v1/projects/${G}/installations`}function xe(G){return{token:G.token,requestStatus:2,expiresIn:Fe(G.expiresIn),creationTime:Date.now()}}function We(G,te){return _t.apply(this,arguments)}function _t(){return(_t=(0,ee.Z)(function*(G,te){const tt=(yield te.json()).error;return yt.create("request-failed",{requestName:G,serverCode:tt.code,serverMessage:tt.message,serverStatus:tt.status})})).apply(this,arguments)}function Et({apiKey:G}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":G})}function H(G,{refreshToken:te}){const be=Et(G);return be.append("Authorization",function Me(G){return`${ut} ${G}`}(te)),be}function he(G){return fe.apply(this,arguments)}function fe(){return(fe=(0,ee.Z)(function*(G){const te=yield G();return te.status>=500&&te.status<600?G():te})).apply(this,arguments)}function Fe(G){return Number(G.replace("s","000"))}function Ge(G,te){return ct.apply(this,arguments)}function ct(){return(ct=(0,ee.Z)(function*({appConfig:G,heartbeatServiceProvider:te},{fid:be}){const tt=Z(G),Ct=Et(G),Vt=te.getImmediate({optional:!0});if(Vt){const Pr=yield Vt.getHeartbeatsHeader();Pr&&Ct.append("x-firebase-client",Pr)}const Wn={method:"POST",headers:Ct,body:JSON.stringify({fid:be,authVersion:ut,appId:G.appId,sdkVersion:Se})},xr=yield he(()=>fetch(tt,Wn));if(xr.ok){const Pr=yield xr.json();return{fid:Pr.fid||be,registrationStatus:2,refreshToken:Pr.refreshToken,authToken:xe(Pr.authToken)}}throw yield We("Create Installation",xr)})).apply(this,arguments)}function St(G){return new Promise(te=>{setTimeout(te,G)})}const Pt=/^[cdef][\w-]{21}$/;function dt(){try{const G=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(G),G[0]=112+G[0]%16;const be=function Ht(G){return function Tt(G){return btoa(String.fromCharCode(...G)).replace(/\+/g,"-").replace(/\//g,"_")}(G).substr(0,22)}(G);return Pt.test(be)?be:""}catch{return""}}function $t(G){return`${G.appName}!${G.appId}`}const rn=new Map;function Bt(G,te){const be=$t(G);qn(be,te),function Qn(G,te){const be=function vr(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=G=>{qn(G.data.key,G.data.fid)}),wr}();be&&be.postMessage({key:G,fid:te}),function Ci(){0===rn.size&&wr&&(wr.close(),wr=null)}()}(be,te)}function qn(G,te){const be=rn.get(G);if(be)for(const tt of be)tt(te)}let wr=null;const Nr="firebase-installations-store";let ti=null;function yr(){return ti||(ti=(0,Ke.X3)("firebase-installations-database",1,{upgrade:(G,te)=>{0===te&&G.createObjectStore(Nr)}})),ti}function en(G,te){return pr.apply(this,arguments)}function pr(){return(pr=(0,ee.Z)(function*(G,te){const be=$t(G),Ct=(yield yr()).transaction(Nr,"readwrite"),Vt=Ct.objectStore(Nr),vn=yield Vt.get(be);return yield Vt.put(te,be),yield Ct.done,(!vn||vn.fid!==te.fid)&&Bt(G,te.fid),te})).apply(this,arguments)}function Or(G){return ni.apply(this,arguments)}function ni(){return(ni=(0,ee.Z)(function*(G){const te=$t(G),tt=(yield yr()).transaction(Nr,"readwrite");yield tt.objectStore(Nr).delete(te),yield tt.done})).apply(this,arguments)}function _r(G,te){return ci.apply(this,arguments)}function ci(){return(ci=(0,ee.Z)(function*(G,te){const be=$t(G),Ct=(yield yr()).transaction(Nr,"readwrite"),Vt=Ct.objectStore(Nr),vn=yield Vt.get(be),Wn=te(vn);return void 0===Wn?yield Vt.delete(be):yield Vt.put(Wn,be),yield Ct.done,Wn&&(!vn||vn.fid!==Wn.fid)&&Bt(G,Wn.fid),Wn})).apply(this,arguments)}function Zr(G){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,ee.Z)(function*(G){let te;const be=yield _r(G.appConfig,tt=>{const Ct=si(tt),Vt=nr(G,Ct);return te=Vt.registrationPromise,Vt.installationEntry});return""===be.fid?{installationEntry:yield te}:{installationEntry:be,registrationPromise:te}})).apply(this,arguments)}function si(G){return or(G||{fid:dt(),registrationStatus:0})}function nr(G,te){if(0===te.registrationStatus){if(!navigator.onLine)return{installationEntry:te,registrationPromise:Promise.reject(yt.create("app-offline"))};const be={fid:te.fid,registrationStatus:1,registrationTime:Date.now()},tt=function Zn(G,te){return Yr.apply(this,arguments)}(G,be);return{installationEntry:be,registrationPromise:tt}}return 1===te.registrationStatus?{installationEntry:te,registrationPromise:vi(G)}:{installationEntry:te}}function Yr(){return(Yr=(0,ee.Z)(function*(G,te){try{const be=yield Ge(G,te);return en(G.appConfig,be)}catch(be){throw le(be)&&409===be.customData.serverCode?yield Or(G.appConfig):yield en(G.appConfig,{fid:te.fid,registrationStatus:0}),be}})).apply(this,arguments)}function vi(G){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,ee.Z)(function*(G){let te=yield sn(G.appConfig);for(;1===te.registrationStatus;)yield St(100),te=yield sn(G.appConfig);if(0===te.registrationStatus){const{installationEntry:be,registrationPromise:tt}=yield Zr(G);return tt||be}return te})).apply(this,arguments)}function sn(G){return _r(G,te=>{if(!te)throw yt.create("installation-not-found");return or(te)})}function or(G){return function rs(G){return 1===G.registrationStatus&&G.registrationTime+1e4<Date.now()}(G)?{fid:G.fid,registrationStatus:0}:G}function Un(G,te){return ki.apply(this,arguments)}function ki(){return(ki=(0,ee.Z)(function*({appConfig:G,heartbeatServiceProvider:te},be){const tt=Mr(G,be),Ct=H(G,be),Vt=te.getImmediate({optional:!0});if(Vt){const Pr=yield Vt.getHeartbeatsHeader();Pr&&Ct.append("x-firebase-client",Pr)}const Wn={method:"POST",headers:Ct,body:JSON.stringify({installation:{sdkVersion:Se,appId:G.appId}})},xr=yield he(()=>fetch(tt,Wn));if(xr.ok)return xe(yield xr.json());throw yield We("Generate Auth Token",xr)})).apply(this,arguments)}function Mr(G,{fid:te}){return`${Z(G)}/${te}/authTokens:generate`}function ri(G){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,ee.Z)(function*(G,te=!1){let be;const tt=yield _r(G.appConfig,Vt=>{if(!Dn(Vt))throw yt.create("not-registered");const vn=Vt.authToken;if(!te&&it(vn))return Vt;if(1===vn.requestStatus)return be=Mn(G,te),Vt;{if(!navigator.onLine)throw yt.create("app-offline");const Wn=ht(Vt);return be=rr(G,Wn),Wn}});return be?yield be:tt.authToken})).apply(this,arguments)}function Mn(G,te){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,ee.Z)(function*(G,te){let be=yield Rn(G.appConfig);for(;1===be.authToken.requestStatus;)yield St(100),be=yield Rn(G.appConfig);const tt=be.authToken;return 0===tt.requestStatus?ri(G,te):tt})).apply(this,arguments)}function Rn(G){return _r(G,te=>{if(!Dn(te))throw yt.create("not-registered");return function qt(G){return 1===G.requestStatus&&G.requestTime+1e4<Date.now()}(te.authToken)?Object.assign(Object.assign({},te),{authToken:{requestStatus:0}}):te})}function rr(G,te){return sr.apply(this,arguments)}function sr(){return(sr=(0,ee.Z)(function*(G,te){try{const be=yield Un(G,te),tt=Object.assign(Object.assign({},te),{authToken:be});return yield en(G.appConfig,tt),be}catch(be){if(!le(be)||401!==be.customData.serverCode&&404!==be.customData.serverCode){const tt=Object.assign(Object.assign({},te),{authToken:{requestStatus:0}});yield en(G.appConfig,tt)}else yield Or(G.appConfig);throw be}})).apply(this,arguments)}function Dn(G){return void 0!==G&&2===G.registrationStatus}function it(G){return 2===G.requestStatus&&!function rt(G){const te=Date.now();return te<G.creationTime||G.creationTime+G.expiresIn<te+36e5}(G)}function ht(G){const te={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},G),{authToken:te})}function Sn(){return(Sn=(0,ee.Z)(function*(G){const te=G,{installationEntry:be,registrationPromise:tt}=yield Zr(te);return tt?tt.catch(console.error):ri(te).catch(console.error),be.fid})).apply(this,arguments)}function $r(){return($r=(0,ee.Z)(function*(G,te=!1){const be=G;return yield ai(be),(yield ri(be,te)).token})).apply(this,arguments)}function ai(G){return ye.apply(this,arguments)}function ye(){return(ye=(0,ee.Z)(function*(G){const{registrationPromise:te}=yield Zr(G);te&&(yield te)})).apply(this,arguments)}function br(G){return yt.create("missing-app-config-values",{valueName:G})}const yi="installations",zr=G=>{const te=G.getProvider("app").getImmediate(),be=function Kn(G){if(!G||!G.options)throw br("App Configuration");if(!G.name)throw br("App Name");const te=["projectId","apiKey","appId"];for(const be of te)if(!G.options[be])throw br(be);return{appName:G.name,projectId:G.options.projectId,apiKey:G.options.apiKey,appId:G.options.appId}}(te);return{app:te,appConfig:be,heartbeatServiceProvider:(0,Ue._getProvider)(te,"heartbeat"),_delete:()=>Promise.resolve()}},Xi=G=>{const te=G.getProvider("app").getImmediate(),be=(0,Ue._getProvider)(te,yi).getImmediate();return{getId:()=>function bt(G){return Sn.apply(this,arguments)}(be),getToken:Ct=>function An(G){return $r.apply(this,arguments)}(be,Ct)}};(function Mi(){(0,Ue._registerComponent)(new Le.wA(yi,zr,"PUBLIC")),(0,Ue._registerComponent)(new Le.wA("installations-internal",Xi,"PRIVATE"))})(),(0,Ue.registerVersion)(Ae,Ie),(0,Ue.registerVersion)(Ae,Ie,"esm2017");const Ni="@firebase/remote-config",Bi=new Pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class qa{constructor(te,be,tt,Ct){this.client=te,this.storage=be,this.storageCache=tt,this.logger=Ct}isCachedDataFresh(te,be){if(!be)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const tt=Date.now()-be,Ct=tt<=te;return this.logger.debug(`Config fetch cache check. Cache age millis: ${tt}. Cache max age millis (minimumFetchIntervalMillis setting): ${te}. Is cache hit: ${Ct}.`),Ct}fetch(te){var be=this;return(0,ee.Z)(function*(){const[tt,Ct]=yield Promise.all([be.storage.getLastSuccessfulFetchTimestampMillis(),be.storage.getLastSuccessfulFetchResponse()]);if(Ct&&be.isCachedDataFresh(te.cacheMaxAgeMillis,tt))return Ct;te.eTag=Ct&&Ct.eTag;const Vt=yield be.client.fetch(te),vn=[be.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Vt.status&&vn.push(be.storage.setLastSuccessfulFetchResponse(Vt)),yield Promise.all(vn),Vt})()}}function Qo(G=navigator){return G.languages&&G.languages[0]||G.language}class Oa{constructor(te,be,tt,Ct,Vt,vn){this.firebaseInstallations=te,this.sdkVersion=be,this.namespace=tt,this.projectId=Ct,this.apiKey=Vt,this.appId=vn}fetch(te){var be=this;return(0,ee.Z)(function*(){var tt,Ct,Vt;const[vn,Wn]=yield Promise.all([be.firebaseInstallations.getId(),be.firebaseInstallations.getToken()]),Pr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${be.projectId}/namespaces/${be.namespace}:fetch?key=${be.apiKey}`,ii={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":te.eTag||"*"},Ir={sdk_version:be.sdkVersion,app_instance_id:vn,app_instance_id_token:Wn,app_id:be.appId,language_code:Qo()},Hs={method:"POST",headers:ii,body:JSON.stringify(Ir)},zo=fetch(Pr,Hs),Il=new Promise((Pu,Ha)=>{te.signal.addEventListener(()=>{const $d=new Error("The operation was aborted.");$d.name="AbortError",Ha($d)})});let dl;try{yield Promise.race([zo,Il]),dl=yield zo}catch(Pu){let Ha="fetch-client-network";throw"AbortError"===(null===(tt=Pu)||void 0===tt?void 0:tt.name)&&(Ha="fetch-timeout"),Bi.create(Ha,{originalErrorMessage:null===(Ct=Pu)||void 0===Ct?void 0:Ct.message})}let As=dl.status;const Gl=dl.headers.get("ETag")||void 0;let Gi,Dl;if(200===dl.status){let Pu;try{Pu=yield dl.json()}catch(Ha){throw Bi.create("fetch-client-parse",{originalErrorMessage:null===(Vt=Ha)||void 0===Vt?void 0:Vt.message})}Gi=Pu.entries,Dl=Pu.state}if("INSTANCE_STATE_UNSPECIFIED"===Dl?As=500:"NO_CHANGE"===Dl?As=304:("NO_TEMPLATE"===Dl||"EMPTY_CONFIG"===Dl)&&(Gi={}),304!==As&&200!==As)throw Bi.create("fetch-status",{httpStatus:As});return{status:As,eTag:Gl,config:Gi}})()}}class ft{constructor(te,be){this.client=te,this.storage=be}fetch(te){var be=this;return(0,ee.Z)(function*(){const tt=(yield be.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return be.attemptFetch(te,tt)})()}attemptFetch(te,{throttleEndTimeMillis:be,backoffCount:tt}){var Ct=this;return(0,ee.Z)(function*(){yield function hi(G,te){return new Promise((be,tt)=>{const Ct=Math.max(te-Date.now(),0),Vt=setTimeout(be,Ct);G.addEventListener(()=>{clearTimeout(Vt),tt(Bi.create("fetch-throttle",{throttleEndTimeMillis:te}))})})}(te.signal,be);try{const Vt=yield Ct.client.fetch(te);return yield Ct.storage.deleteThrottleMetadata(),Vt}catch(Vt){if(!function wt(G){if(!(G instanceof Pe.ZR&&G.customData))return!1;const te=Number(G.customData.httpStatus);return 429===te||500===te||503===te||504===te}(Vt))throw Vt;const vn={throttleEndTimeMillis:Date.now()+(0,Pe.$s)(tt),backoffCount:tt+1};return yield Ct.storage.setThrottleMetadata(vn),Ct.attemptFetch(te,vn)}})()}}class wn{constructor(te,be,tt,Ct,Vt){this.app=te,this._client=be,this._storageCache=tt,this._storage=Ct,this._logger=Vt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kn(G,te){var be;const tt=G.target.error||void 0;return Bi.create(te,{originalErrorMessage:tt&&(null===(be=tt)||void 0===be?void 0:be.message)})}const Tr="app_namespace_store";class Wi{constructor(te,be,tt,Ct=function Rs(){return new Promise((G,te)=>{var be;try{const tt=indexedDB.open("firebase_remote_config",1);tt.onerror=Ct=>{te(kn(Ct,"storage-open"))},tt.onsuccess=Ct=>{G(Ct.target.result)},tt.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Tr,{keyPath:"compositeKey"})}}catch(tt){te(Bi.create("storage-open",{originalErrorMessage:null===(be=tt)||void 0===be?void 0:be.message}))}})}()){this.appId=te,this.appName=be,this.namespace=tt,this.openDbPromise=Ct}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(te){return this.set("last_fetch_status",te)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(te){return this.set("last_successful_fetch_timestamp_millis",te)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(te){return this.set("last_successful_fetch_response",te)}getActiveConfig(){return this.get("active_config")}setActiveConfig(te){return this.set("active_config",te)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(te){return this.set("active_config_etag",te)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(te){return this.set("throttle_metadata",te)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(te){var be=this;return(0,ee.Z)(function*(){const tt=yield be.openDbPromise;return new Promise((Ct,Vt)=>{var vn;const xr=tt.transaction([Tr],"readonly").objectStore(Tr),Pr=be.createCompositeKey(te);try{const ii=xr.get(Pr);ii.onerror=Ir=>{Vt(kn(Ir,"storage-get"))},ii.onsuccess=Ir=>{const Hs=Ir.target.result;Ct(Hs?Hs.value:void 0)}}catch(ii){Vt(Bi.create("storage-get",{originalErrorMessage:null===(vn=ii)||void 0===vn?void 0:vn.message}))}})})()}set(te,be){var tt=this;return(0,ee.Z)(function*(){const Ct=yield tt.openDbPromise;return new Promise((Vt,vn)=>{var Wn;const Pr=Ct.transaction([Tr],"readwrite").objectStore(Tr),ii=tt.createCompositeKey(te);try{const Ir=Pr.put({compositeKey:ii,value:be});Ir.onerror=Hs=>{vn(kn(Hs,"storage-set"))},Ir.onsuccess=()=>{Vt()}}catch(Ir){vn(Bi.create("storage-set",{originalErrorMessage:null===(Wn=Ir)||void 0===Wn?void 0:Wn.message}))}})})()}delete(te){var be=this;return(0,ee.Z)(function*(){const tt=yield be.openDbPromise;return new Promise((Ct,Vt)=>{var vn;const xr=tt.transaction([Tr],"readwrite").objectStore(Tr),Pr=be.createCompositeKey(te);try{const ii=xr.delete(Pr);ii.onerror=Ir=>{Vt(kn(Ir,"storage-delete"))},ii.onsuccess=()=>{Ct()}}catch(ii){Vt(Bi.create("storage-delete",{originalErrorMessage:null===(vn=ii)||void 0===vn?void 0:vn.message}))}})})()}createCompositeKey(te){return[this.appId,this.appName,this.namespace,te].join()}}class Vo{constructor(te){this.storage=te}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var te=this;return(0,ee.Z)(function*(){const be=te.storage.getLastFetchStatus(),tt=te.storage.getLastSuccessfulFetchTimestampMillis(),Ct=te.storage.getActiveConfig(),Vt=yield be;Vt&&(te.lastFetchStatus=Vt);const vn=yield tt;vn&&(te.lastSuccessfulFetchTimestampMillis=vn);const Wn=yield Ct;Wn&&(te.activeConfig=Wn)})()}setLastFetchStatus(te){return this.lastFetchStatus=te,this.storage.setLastFetchStatus(te)}setLastSuccessfulFetchTimestampMillis(te){return this.lastSuccessfulFetchTimestampMillis=te,this.storage.setLastSuccessfulFetchTimestampMillis(te)}setActiveConfig(te){return this.activeConfig=te,this.storage.setActiveConfig(te)}}function bo(){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,ee.Z)(function*(){if(!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}!function zi(){(0,Ue._registerComponent)(new Le.wA("remote-config",function G(te,{instanceIdentifier:be}){const tt=te.getProvider("app").getImmediate(),Ct=te.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Bi.create("registration-window");if(!(0,Pe.hl)())throw Bi.create("indexed-db-unavailable");const{projectId:Vt,apiKey:vn,appId:Wn}=tt.options;if(!Vt)throw Bi.create("registration-project-id");if(!vn)throw Bi.create("registration-api-key");if(!Wn)throw Bi.create("registration-app-id");const xr=new Wi(Wn,tt.name,be=be||"firebase"),Pr=new Vo(xr),ii=new se.Yd(Ni);ii.logLevel=se.in.ERROR;const Ir=new Oa(Ct,Ue.SDK_VERSION,be,Vt,vn,Wn),Hs=new ft(Ir,xr),zo=new qa(Hs,xr,Pr,ii),Il=new wn(tt,zo,Pr,xr,ii);return function Si(G){const te=(0,Pe.m9)(G);te._initializePromise||(te._initializePromise=te._storageCache.loadFromStorage().then(()=>{te._isInitializationComplete=!0}))}(Il),Il},"PUBLIC").setMultipleInstances(!0)),(0,Ue.registerVersion)(Ni,"0.3.15"),(0,Ue.registerVersion)(Ni,"0.3.15","esm2017")}();const to="/firebase-messaging-sw.js",ho="/firebase-cloud-messaging-push-scope",fo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Na="google.c.a.c_id",Bs="google.c.a.c_l",Ka="google.c.a.ts",Za="google.c.a.e";var qs=(()=>{return(G=qs||(qs={})).PUSH_RECEIVED="push-received",G.NOTIFICATION_CLICKED="notification-clicked",qs;var G})();function go(G){const te=new Uint8Array(G);return btoa(String.fromCharCode(...te)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ks(G){const be=(G+"=".repeat((4-G.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),tt=atob(be),Ct=new Uint8Array(tt.length);for(let Vt=0;Vt<tt.length;++Vt)Ct[Vt]=tt.charCodeAt(Vt);return Ct}const ca="fcm_token_details_db",ms="fcm_token_object_Store";function Xo(G){return ha.apply(this,arguments)}function ha(){return ha=(0,ee.Z)(function*(G){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Vt=>Vt.name).includes(ca))return null;let te=null;return(yield(0,Ke.X3)(ca,5,{upgrade:(tt=(0,ee.Z)(function*(Ct,Vt,vn,Wn){var xr;if(Vt<2||!Ct.objectStoreNames.contains(ms))return;const Pr=Wn.objectStore(ms),ii=yield Pr.index("fcmSenderId").get(G);if(yield Pr.clear(),ii)if(2===Vt){const Ir=ii;if(!Ir.auth||!Ir.p256dh||!Ir.endpoint)return;te={token:Ir.fcmToken,createTime:null!==(xr=Ir.createTime)&&void 0!==xr?xr:Date.now(),subscriptionOptions:{auth:Ir.auth,p256dh:Ir.p256dh,endpoint:Ir.endpoint,swScope:Ir.swScope,vapidKey:"string"==typeof Ir.vapidKey?Ir.vapidKey:go(Ir.vapidKey)}}}else if(3===Vt){const Ir=ii;te={token:Ir.fcmToken,createTime:Ir.createTime,subscriptionOptions:{auth:go(Ir.auth),p256dh:go(Ir.p256dh),endpoint:Ir.endpoint,swScope:Ir.swScope,vapidKey:go(Ir.vapidKey)}}}else if(4===Vt){const Ir=ii;te={token:Ir.fcmToken,createTime:Ir.createTime,subscriptionOptions:{auth:go(Ir.auth),p256dh:go(Ir.p256dh),endpoint:Ir.endpoint,swScope:Ir.swScope,vapidKey:go(Ir.vapidKey)}}}}),function(Vt,vn,Wn,xr){return tt.apply(this,arguments)})})).close(),yield(0,Ke.Lj)(ca),yield(0,Ke.Lj)("fcm_vapid_details_db"),yield(0,Ke.Lj)("undefined"),xi(te)?te:null;var tt}),ha.apply(this,arguments)}function xi(G){if(!G||!G.subscriptionOptions)return!1;const{subscriptionOptions:te}=G;return"number"==typeof G.createTime&&G.createTime>0&&"string"==typeof G.token&&G.token.length>0&&"string"==typeof te.auth&&te.auth.length>0&&"string"==typeof te.p256dh&&te.p256dh.length>0&&"string"==typeof te.endpoint&&te.endpoint.length>0&&"string"==typeof te.swScope&&te.swScope.length>0&&"string"==typeof te.vapidKey&&te.vapidKey.length>0}const Vs="firebase-messaging-store";let ui=null;function Eo(){return ui||(ui=(0,Ke.X3)("firebase-messaging-database",1,{upgrade:(G,te)=>{0===te&&G.createObjectStore(Vs)}})),ui}function Mo(G){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ee.Z)(function*(G){const te=no(G),tt=yield(yield Eo()).transaction(Vs).objectStore(Vs).get(te);if(tt)return tt;{const Ct=yield Xo(G.appConfig.senderId);if(Ct)return yield Br(G,Ct),Ct}})).apply(this,arguments)}function Br(G,te){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,ee.Z)(function*(G,te){const be=no(G),Ct=(yield Eo()).transaction(Vs,"readwrite");return yield Ct.objectStore(Vs).put(te,be),yield Ct.done,te})).apply(this,arguments)}function Po(G){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,ee.Z)(function*(G){const te=no(G),tt=(yield Eo()).transaction(Vs,"readwrite");yield tt.objectStore(Vs).delete(te),yield tt.done})).apply(this,arguments)}function no({appConfig:G}){return G.appId}const fr=new Pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ur(G,te){return cu.apply(this,arguments)}function cu(){return(cu=(0,ee.Z)(function*(G,te){var be;const tt=yield pa(G),Ct=hn(te),Vt={method:"POST",headers:tt,body:JSON.stringify(Ct)};let vn;try{vn=yield(yield fetch(Ti(G.appConfig),Vt)).json()}catch(Wn){throw fr.create("token-subscribe-failed",{errorInfo:null===(be=Wn)||void 0===be?void 0:be.toString()})}if(vn.error)throw fr.create("token-subscribe-failed",{errorInfo:vn.error.message});if(!vn.token)throw fr.create("token-subscribe-no-token");return vn.token})).apply(this,arguments)}function wa(G,te){return fa.apply(this,arguments)}function fa(){return(fa=(0,ee.Z)(function*(G,te){var be;const tt=yield pa(G),Ct=hn(te.subscriptionOptions),Vt={method:"PATCH",headers:tt,body:JSON.stringify(Ct)};let vn;try{vn=yield(yield fetch(`${Ti(G.appConfig)}/${te.token}`,Vt)).json()}catch(Wn){throw fr.create("token-update-failed",{errorInfo:null===(be=Wn)||void 0===be?void 0:be.toString()})}if(vn.error)throw fr.create("token-update-failed",{errorInfo:vn.error.message});if(!vn.token)throw fr.create("token-update-no-token");return vn.token})).apply(this,arguments)}function So(G,te){return Au.apply(this,arguments)}function Au(){return(Au=(0,ee.Z)(function*(G,te){var be;const Ct={method:"DELETE",headers:yield pa(G)};try{const vn=yield(yield fetch(`${Ti(G.appConfig)}/${te}`,Ct)).json();if(vn.error)throw fr.create("token-unsubscribe-failed",{errorInfo:vn.error.message})}catch(Vt){throw fr.create("token-unsubscribe-failed",{errorInfo:null===(be=Vt)||void 0===be?void 0:be.toString()})}})).apply(this,arguments)}function Ti({projectId:G}){return`https://fcmregistrations.googleapis.com/v1/projects/${G}/registrations`}function pa(G){return ga.apply(this,arguments)}function ga(){return(ga=(0,ee.Z)(function*({appConfig:G,installations:te}){const be=yield te.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":G.apiKey,"x-goog-firebase-installations-auth":`FIS ${be}`})})).apply(this,arguments)}function hn({p256dh:G,auth:te,endpoint:be,vapidKey:tt}){const Ct={web:{endpoint:be,auth:te,p256dh:G}};return tt!==fo&&(Ct.web.applicationPubKey=tt),Ct}const Jr=6048e5;function ea(G){return ta.apply(this,arguments)}function ta(){return(ta=(0,ee.Z)(function*(G){const te=yield re(G.swRegistration,G.vapidKey),be={vapidKey:G.vapidKey,swScope:G.swRegistration.scope,endpoint:te.endpoint,auth:go(te.getKey("auth")),p256dh:go(te.getKey("p256dh"))},tt=yield Mo(G.firebaseDependencies);if(tt){if(Oe(tt.subscriptionOptions,be))return Date.now()>=tt.createTime+Jr?Q(G,{token:tt.token,createTime:Date.now(),subscriptionOptions:be}):tt.token;try{yield So(G.firebaseDependencies,tt.token)}catch(Ct){console.warn(Ct)}return ke(G.firebaseDependencies,be)}return ke(G.firebaseDependencies,be)})).apply(this,arguments)}function ds(G){return ie.apply(this,arguments)}function ie(){return(ie=(0,ee.Z)(function*(G){const te=yield Mo(G.firebaseDependencies);te&&(yield So(G.firebaseDependencies,te.token),yield Po(G.firebaseDependencies));const be=yield G.swRegistration.pushManager.getSubscription();return!be||be.unsubscribe()})).apply(this,arguments)}function Q(G,te){return q.apply(this,arguments)}function q(){return(q=(0,ee.Z)(function*(G,te){try{const be=yield wa(G.firebaseDependencies,te),tt=Object.assign(Object.assign({},te),{token:be,createTime:Date.now()});return yield Br(G.firebaseDependencies,tt),be}catch(be){throw yield ds(G),be}})).apply(this,arguments)}function ke(G,te){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,ee.Z)(function*(G,te){const tt={token:yield ur(G,te),createTime:Date.now(),subscriptionOptions:te};return yield Br(G,tt),tt.token})).apply(this,arguments)}function re(G,te){return J.apply(this,arguments)}function J(){return(J=(0,ee.Z)(function*(G,te){return(yield G.pushManager.getSubscription())||G.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ks(te)})})).apply(this,arguments)}function Oe(G,te){return te.vapidKey===G.vapidKey&&te.endpoint===G.endpoint&&te.auth===G.auth&&te.p256dh===G.p256dh}function Je(G){const te={from:G.from,collapseKey:G.collapse_key,messageId:G.fcmMessageId};return function ot(G,te){if(!te.notification)return;G.notification={};const be=te.notification.title;be&&(G.notification.title=be);const tt=te.notification.body;tt&&(G.notification.body=tt);const Ct=te.notification.image;Ct&&(G.notification.image=Ct);const Vt=te.notification.icon;Vt&&(G.notification.icon=Vt)}(te,G),function Nt(G,te){!te.data||(G.data=te.data)}(te,G),function fn(G,te){var be,tt,Ct,Vt,vn;if(!(te.fcmOptions||null!==(be=te.notification)&&void 0!==be&&be.click_action))return;G.fcmOptions={};const Wn=null!==(Ct=null===(tt=te.fcmOptions)||void 0===tt?void 0:tt.link)&&void 0!==Ct?Ct:null===(Vt=te.notification)||void 0===Vt?void 0:Vt.click_action;Wn&&(G.fcmOptions.link=Wn);const xr=null===(vn=te.fcmOptions)||void 0===vn?void 0:vn.analytics_label;xr&&(G.fcmOptions.analyticsLabel=xr)}(te,G),te}function Hn(G){return"object"==typeof G&&!!G&&Na in G}function Tn(G,te){const be=[];for(let tt=0;tt<G.length;tt++)be.push(G.charAt(tt)),tt<te.length&&be.push(te.charAt(tt));return be.join("")}function Gr(G){return fr.create("missing-app-config-values",{valueName:G})}Tn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Is{constructor(te,be,tt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ct=function mr(G){if(!G||!G.options)throw Gr("App Configuration Object");if(!G.name)throw Gr("App Name");const te=["projectId","apiKey","appId","messagingSenderId"],{options:be}=G;for(const tt of te)if(!be[tt])throw Gr(tt);return{appName:G.name,projectId:be.projectId,apiKey:be.apiKey,appId:be.appId,senderId:be.messagingSenderId}}(te);this.firebaseDependencies={app:te,appConfig:Ct,installations:be,analyticsProvider:tt}}_delete(){return Promise.resolve()}}function Vi(G){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,ee.Z)(function*(G){var te;try{G.swRegistration=yield navigator.serviceWorker.register(to,{scope:ho}),G.swRegistration.update().catch(()=>{})}catch(be){throw fr.create("failed-service-worker-registration",{browserErrorMessage:null===(te=be)||void 0===te?void 0:te.message})}})).apply(this,arguments)}function Hi(G,te){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,ee.Z)(function*(G,te){if(!te&&!G.swRegistration&&(yield Vi(G)),te||!G.swRegistration){if(!(te instanceof ServiceWorkerRegistration))throw fr.create("invalid-sw-registration");G.swRegistration=te}})).apply(this,arguments)}function wi(G,te){return ro.apply(this,arguments)}function ro(){return(ro=(0,ee.Z)(function*(G,te){te?G.vapidKey=te:G.vapidKey||(G.vapidKey=fo)})).apply(this,arguments)}function hs(){return(hs=(0,ee.Z)(function*(G,te){if(!navigator)throw fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fr.create("permission-blocked");return yield wi(G,te?.vapidKey),yield Hi(G,te?.serviceWorkerRegistration),ea(G)})).apply(this,arguments)}function Ts(G,te,be){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,ee.Z)(function*(G,te,be){const tt=Oo(te);(yield G.firebaseDependencies.analyticsProvider.get()).logEvent(tt,{message_id:be[Na],message_name:be[Bs],message_time:be[Ka],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Oo(G){switch(G){case qs.NOTIFICATION_CLICKED:return"notification_open";case qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ge(){return(ge=(0,ee.Z)(function*(G,te){const be=te.data;if(!be.isFirebaseMessaging)return;G.onMessageHandler&&be.messageType===qs.PUSH_RECEIVED&&("function"==typeof G.onMessageHandler?G.onMessageHandler(Je(be)):G.onMessageHandler.next(Je(be)));const tt=be.data;Hn(tt)&&"1"===tt[Za]&&(yield Ts(G,be.messageType,tt))})).apply(this,arguments)}const z="@firebase/messaging",et=G=>{const te=new Is(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),G.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",be=>function B(G,te){return ge.apply(this,arguments)}(te,be)),te},Ot=G=>{const te=G.getProvider("messaging").getImmediate();return{getToken:tt=>function mi(G,te){return hs.apply(this,arguments)}(te,tt)}};function Bn(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,ee.Z)(function*(){try{yield(0,Pe.eu)()}catch{return!1}return typeof window<"u"&&(0,Pe.hl)()&&(0,Pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kt(){(0,Ue._registerComponent)(new Le.wA("messaging",et,"PUBLIC")),(0,Ue._registerComponent)(new Le.wA("messaging-internal",Ot,"PRIVATE")),(0,Ue.registerVersion)(z,"0.11.0"),(0,Ue.registerVersion)(z,"0.11.0","esm2017")}();const Ro="analytics",wo="firebase_id",na="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Co="https://www.googletagmanager.com/gtag/js",fs=new se.Yd("@firebase/analytics");function Vu(G){return Promise.all(G.map(te=>te.catch(be=>be)))}function ku(G,te){const be=document.createElement("script");be.src=`${Co}?l=${G}&id=${te}`,be.async=!0,document.head.appendChild(be)}function Tl(G,te,be,tt,Ct,Vt){return ul.apply(this,arguments)}function ul(){return(ul=(0,ee.Z)(function*(G,te,be,tt,Ct,Vt){const vn=tt[Ct];try{if(vn)yield te[vn];else{const xr=(yield Vu(be)).find(Pr=>Pr.measurementId===Ct);xr&&(yield te[xr.appId])}}catch(Wn){fs.error(Wn)}G("config",Ct,Vt)})).apply(this,arguments)}function Hl(G,te,be,tt,Ct){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,ee.Z)(function*(G,te,be,tt,Ct){try{let Vt=[];if(Ct&&Ct.send_to){let vn=Ct.send_to;Array.isArray(vn)||(vn=[vn]);const Wn=yield Vu(be);for(const xr of vn){const Pr=Wn.find(Ir=>Ir.measurementId===xr),ii=Pr&&te[Pr.appId];if(!ii){Vt=[];break}Vt.push(ii)}}0===Vt.length&&(Vt=Object.values(te)),yield Promise.all(Vt),G("event",tt,Ct||{})}catch(Vt){fs.error(Vt)}})).apply(this,arguments)}function du(G){const te=window.document.getElementsByTagName("script");for(const be of Object.values(te))if(be.src&&be.src.includes(Co)&&be.src.includes(G))return be;return null}const so=new Pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ja=new class oo{constructor(te={},be=1e3){this.throttleMetadata=te,this.intervalMillis=be}getThrottleMetadata(te){return this.throttleMetadata[te]}setThrottleMetadata(te,be){this.throttleMetadata[te]=be}deleteThrottleMetadata(te){delete this.throttleMetadata[te]}};function $u(G){return new Headers({Accept:"application/json","x-goog-api-key":G})}function En(G){return Es.apply(this,arguments)}function Es(){return(Es=(0,ee.Z)(function*(G){var te;const{appId:be,apiKey:tt}=G,Ct={method:"GET",headers:$u(tt)},Vt=na.replace("{app-id}",be),vn=yield fetch(Vt,Ct);if(200!==vn.status&&304!==vn.status){let Wn="";try{const xr=yield vn.json();null!==(te=xr.error)&&void 0!==te&&te.message&&(Wn=xr.error.message)}catch{}throw so.create("config-fetch-failed",{httpStatus:vn.status,responseMessage:Wn})}return vn.json()})).apply(this,arguments)}function vs(G){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,ee.Z)(function*(G,te=ja,be){const{appId:tt,apiKey:Ct,measurementId:Vt}=G.options;if(!tt)throw so.create("no-app-id");if(!Ct){if(Vt)return{measurementId:Vt,appId:tt};throw so.create("no-api-key")}const vn=te.getThrottleMetadata(tt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Wn=new Gt;return setTimeout((0,ee.Z)(function*(){Wn.abort()}),void 0!==be?be:6e4),Jn({appId:tt,apiKey:Ct,measurementId:Vt},vn,Wn,te)})).apply(this,arguments)}function Jn(G,te,be){return dr.apply(this,arguments)}function dr(){return(dr=(0,ee.Z)(function*(G,{throttleEndTimeMillis:te,backoffCount:be},tt,Ct=ja){var Vt,vn;const{appId:Wn,measurementId:xr}=G;try{yield hu(tt,te)}catch(Pr){if(xr)return fs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xr} provided in the "measurementId" field in the local Firebase config. [${null===(Vt=Pr)||void 0===Vt?void 0:Vt.message}]`),{appId:Wn,measurementId:xr};throw Pr}try{const Pr=yield En(G);return Ct.deleteThrottleMetadata(Wn),Pr}catch(Pr){const ii=Pr;if(!$n(ii)){if(Ct.deleteThrottleMetadata(Wn),xr)return fs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xr} provided in the "measurementId" field in the local Firebase config. [${ii?.message}]`),{appId:Wn,measurementId:xr};throw Pr}const Ir=503===Number(null===(vn=ii?.customData)||void 0===vn?void 0:vn.httpStatus)?(0,Pe.$s)(be,Ct.intervalMillis,30):(0,Pe.$s)(be,Ct.intervalMillis),Hs={throttleEndTimeMillis:Date.now()+Ir,backoffCount:be+1};return Ct.setThrottleMetadata(Wn,Hs),fs.debug(`Calling attemptFetch again in ${Ir} millis`),Jn(G,Hs,tt,Ct)}})).apply(this,arguments)}function hu(G,te){return new Promise((be,tt)=>{const Ct=Math.max(te-Date.now(),0),Vt=setTimeout(be,Ct);G.addEventListener(()=>{clearTimeout(Vt),tt(so.create("fetch-throttle",{throttleEndTimeMillis:te}))})})}function $n(G){if(!(G instanceof Pe.ZR&&G.customData))return!1;const te=Number(G.customData.httpStatus);return 429===te||500===te||503===te||504===te}class Gt{constructor(){this.listeners=[]}addEventListener(te){this.listeners.push(te)}abort(){this.listeners.forEach(te=>te())}}let ln,pu;function Qa(){return(Qa=(0,ee.Z)(function*(G,te,be,tt,Ct){if(Ct&&Ct.global)G("event",be,tt);else{const Vt=yield te;G("event",be,Object.assign(Object.assign({},tt),{send_to:Vt}))}})).apply(this,arguments)}function Ja(G){pu=G}function Lr(G){ln=G}function Gu(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,ee.Z)(function*(){var G;if(!(0,Pe.hl)())return fs.warn(so.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Pe.eu)()}catch(te){return fs.warn(so.create("indexeddb-unavailable",{errorInfo:null===(G=te)||void 0===G?void 0:G.toString()}).message),!1}return!0})).apply(this,arguments)}function Er(){return(Er=(0,ee.Z)(function*(G,te,be,tt,Ct,Vt,vn){var Wn;const xr=vs(G);xr.then(zo=>{be[zo.measurementId]=zo.appId,G.options.measurementId&&zo.measurementId!==G.options.measurementId&&fs.warn(`The measurement ID in the local Firebase config (${G.options.measurementId}) does not match the measurement ID fetched from the server (${zo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zo=>fs.error(zo)),te.push(xr);const Pr=Gu().then(zo=>{if(zo)return tt.getId()}),[ii,Ir]=yield Promise.all([xr,Pr]);du(Vt)||ku(Vt,ii.measurementId),pu&&(Ct("consent","default",pu),Ja(void 0)),Ct("js",new Date);const Hs=null!==(Wn=vn?.config)&&void 0!==Wn?Wn:{};return Hs.origin="firebase",Hs.update=!0,null!=Ir&&(Hs[wo]=Ir),Ct("config",ii.measurementId,Hs),ln&&(Ct("set",ln),Lr(void 0)),ii.measurementId})).apply(this,arguments)}class gu{constructor(te){this.app=te}_delete(){return delete Fr[this.app.options.appId],Promise.resolve()}}let Fr={},Ua=[];const Ai={};let Ba,ra,Pn="dataLayer",mu=!1;function gc(G,te,be){!function rd(){const G=[];if((0,Pe.ru)()&&G.push("This is a browser extension environment."),(0,Pe.zI)()||G.push("Cookies are not available."),G.length>0){const te=G.map((tt,Ct)=>`(${Ct+1}) ${tt}`).join(" "),be=so.create("invalid-analytics-context",{errorInfo:te});fs.warn(be.message)}}();const tt=G.options.appId;if(!tt)throw so.create("no-app-id");if(!G.options.apiKey){if(!G.options.measurementId)throw so.create("no-api-key");fs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${G.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fr[tt])throw so.create("already-exists",{id:tt});if(!mu){!function $o(G){let te=[];Array.isArray(window[G])?te=window[G]:window[G]=te}(Pn);const{wrappedGtag:Vt,gtagCore:vn}=function Mu(G,te,be,tt,Ct){let Vt=function(...vn){window[tt].push(arguments)};return window[Ct]&&"function"==typeof window[Ct]&&(Vt=window[Ct]),window[Ct]=function fc(G,te,be,tt){function Vt(){return(Vt=(0,ee.Z)(function*(vn,Wn,xr){try{"event"===vn?yield Hl(G,te,be,Wn,xr):"config"===vn?yield Tl(G,te,be,tt,Wn,xr):"consent"===vn?G("consent","update",xr):G("set",Wn)}catch(Pr){fs.error(Pr)}})).apply(this,arguments)}return function Ct(vn,Wn,xr){return Vt.apply(this,arguments)}}(Vt,G,te,be),{gtagCore:Vt,wrappedGtag:window[Ct]}}(Fr,Ua,Ai,Pn,"gtag");ra=Vt,Ba=vn,mu=!0}return Fr[tt]=function ts(G,te,be,tt,Ct,Vt,vn){return Er.apply(this,arguments)}(G,Ua,Ai,te,Ba,Pn,be),new gu(G)}function xo(){return ll.apply(this,arguments)}function ll(){return(ll=(0,ee.Z)(function*(){if((0,Pe.ru)()||!(0,Pe.zI)()||!(0,Pe.hl)())return!1;try{return yield(0,Pe.eu)()}catch{return!1}})).apply(this,arguments)}const $l="@firebase/analytics";!function ss(){(0,Ue._registerComponent)(new Le.wA(Ro,(te,{options:be})=>gc(te.getProvider("app").getImmediate(),te.getProvider("installations-internal").getImmediate(),be),"PUBLIC")),(0,Ue._registerComponent)(new Le.wA("analytics-internal",function G(te){try{const be=te.getProvider(Ro).getImmediate();return{logEvent:(tt,Ct,Vt)=>function xl(G,te,be,tt){G=(0,Pe.m9)(G),function Ls(G,te,be,tt,Ct){return Qa.apply(this,arguments)}(ra,Fr[G.app.options.appId],te,be,tt).catch(Ct=>fs.error(Ct))}(be,tt,Ct,Vt)}}catch(be){throw so.create("interop-component-reg-failed",{reason:be})}},"PRIVATE")),(0,Ue.registerVersion)($l,"0.8.4"),(0,Ue.registerVersion)($l,"0.8.4","esm2017")}();var tu=W(4408),nu=W(7565);const mc=new class ru extends nu.v{}(class vu extends tu.o{constructor(te,be){super(te,be),this.scheduler=te,this.work=be}schedule(te,be=0){return be>0?super.schedule(te,be):(this.delay=be,this.state=te,this.scheduler.flush(this),this)}execute(te,be){return be>0||this.closed?super.execute(te,be):this._execute(te,be)}requestAsyncId(te,be,tt=0){return null!=tt&&tt>0||null==tt&&this.delay>0?super.requestAsyncId(te,be,tt):(te.flush(this),0)}});var O=W(4986),D=W(8505),U=W(5363),X=W(9468);const _e=new E.GfV("7.5.0"),Xe="__angularfire_symbol__analyticsIsSupportedValue",Qe="__angularfire_symbol__analyticsIsSupported",Rt="__angularfire_symbol__remoteConfigIsSupportedValue",bn="__angularfire_symbol__remoteConfigIsSupported",Vr="__angularfire_symbol__messagingIsSupportedValue",Gn="__angularfire_symbol__messagingIsSupported";function Ei(G,te,be){if(te){if(1===te.length)return te[0];const Vt=te.filter(vn=>vn.app===be);if(1===Vt.length)return Vt[0]}return be.container.getProvider(G).getImmediate({optional:!0})}globalThis[Qe]||(globalThis[Qe]=xo().then(G=>globalThis[Xe]=G).catch(()=>globalThis[Xe]=!1)),globalThis[Gn]||(globalThis[Gn]=Bn().then(G=>globalThis[Vr]=G).catch(()=>globalThis[Vr]=!1)),globalThis[bn]||(globalThis[bn]=bo().then(G=>globalThis[Rt]=G).catch(()=>globalThis[Rt]=!1));const ia=(G,te)=>{const be=te?[te]:(0,k.C6)(),tt=[];return be.forEach(Ct=>{Ct.container.getProvider(G).instances.forEach(vn=>{tt.includes(vn)||tt.push(vn)})}),tt};function Lo(){}class Va{constructor(te,be=mc){this.zone=te,this.delegate=be}now(){return this.delegate.now()}schedule(te,be,tt){const Ct=this.zone;return this.delegate.schedule(function(vn){Ct.runGuarded(()=>{te.apply(this,[vn])})},be,tt)}}class vo{constructor(te){this.zone=te,this.task=null}call(te,be){const tt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo)),be.pipe((0,D.b)({next:tt,complete:tt,error:tt})).subscribe(te).add(tt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cl=(()=>{class G{constructor(be){this.ngZone=be,this.outsideAngular=be.runOutsideAngular(()=>new Va(Zone.current)),this.insideAngular=be.run(()=>new Va(Zone.current,O.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return G.\u0275fac=function(be){return new(be||G)(E.LFG(E.R0b))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})();function Io(){const G=globalThis.\u0275AngularFireScheduler;if(!G)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return G}function Hd(G){return G.pipe((0,U.Q)(Io().outsideAngular))}function yu(G){return Io(),function zu(G){return function(be){return(be=be.lift(new vo(G.ngZone))).pipe((0,X.R)(G.outsideAngular),(0,U.Q)(G.insideAngular))}}(Io())(G)}},2090:(Yt,at,W)=>{"use strict";W.d(at,{$s:()=>Rn,BH:()=>kt,G6:()=>We,L:()=>Ke,LL:()=>rn,Pz:()=>Pt,Sg:()=>dt,UG:()=>$e,US:()=>Le,ZB:()=>Re,ZR:()=>$t,aH:()=>Tt,b$:()=>ze,eu:()=>Et,hl:()=>_t,jU:()=>jt,m9:()=>Dn,ne:()=>Wr,pd:()=>ci,r3:()=>tr,ru:()=>Be,tV:()=>Ae,uI:()=>mt,vZ:()=>en,w1:()=>le,xO:()=>ni,xb:()=>ti,z$:()=>ut,zI:()=>H,zd:()=>_r});const Ue=function(it){const rt=[];let ht=0;for(let qt=0;qt<it.length;qt++){let bt=it.charCodeAt(qt);bt<128?rt[ht++]=bt:bt<2048?(rt[ht++]=bt>>6|192,rt[ht++]=63&bt|128):55296==(64512&bt)&&qt+1<it.length&&56320==(64512&it.charCodeAt(qt+1))?(bt=65536+((1023&bt)<<10)+(1023&it.charCodeAt(++qt)),rt[ht++]=bt>>18|240,rt[ht++]=bt>>12&63|128,rt[ht++]=bt>>6&63|128,rt[ht++]=63&bt|128):(rt[ht++]=bt>>12|224,rt[ht++]=bt>>6&63|128,rt[ht++]=63&bt|128)}return rt},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(it,rt){if(!Array.isArray(it))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ht=rt?this.byteToCharMapWebSafe_:this.byteToCharMap_,qt=[];for(let bt=0;bt<it.length;bt+=3){const Sn=it[bt],An=bt+1<it.length,$r=An?it[bt+1]:0,ai=bt+2<it.length,ye=ai?it[bt+2]:0;let ve=(15&$r)<<2|ye>>6,Ze=63&ye;ai||(Ze=64,An||(ve=64)),qt.push(ht[Sn>>2],ht[(3&Sn)<<4|$r>>4],ht[ve],ht[Ze])}return qt.join("")},encodeString(it,rt){return this.HAS_NATIVE_SUPPORT&&!rt?btoa(it):this.encodeByteArray(Ue(it),rt)},decodeString(it,rt){return this.HAS_NATIVE_SUPPORT&&!rt?atob(it):function(it){const rt=[];let ht=0,qt=0;for(;ht<it.length;){const bt=it[ht++];if(bt<128)rt[qt++]=String.fromCharCode(bt);else if(bt>191&&bt<224){const Sn=it[ht++];rt[qt++]=String.fromCharCode((31&bt)<<6|63&Sn)}else if(bt>239&&bt<365){const ai=((7&bt)<<18|(63&it[ht++])<<12|(63&it[ht++])<<6|63&it[ht++])-65536;rt[qt++]=String.fromCharCode(55296+(ai>>10)),rt[qt++]=String.fromCharCode(56320+(1023&ai))}else{const Sn=it[ht++],An=it[ht++];rt[qt++]=String.fromCharCode((15&bt)<<12|(63&Sn)<<6|63&An)}}return rt.join("")}(this.decodeStringToByteArray(it,rt))},decodeStringToByteArray(it,rt){this.init_();const ht=rt?this.charToByteMapWebSafe_:this.charToByteMap_,qt=[];for(let bt=0;bt<it.length;){const Sn=ht[it.charAt(bt++)],$r=bt<it.length?ht[it.charAt(bt)]:0;++bt;const ye=bt<it.length?ht[it.charAt(bt)]:64;++bt;const ae=bt<it.length?ht[it.charAt(bt)]:64;if(++bt,null==Sn||null==$r||null==ye||null==ae)throw Error();qt.push(Sn<<2|$r>>4),64!==ye&&(qt.push($r<<4&240|ye>>2),64!==ae&&qt.push(ye<<6&192|ae))}return qt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let it=0;it<this.ENCODED_VALS.length;it++)this.byteToCharMap_[it]=this.ENCODED_VALS.charAt(it),this.charToByteMap_[this.byteToCharMap_[it]]=it,this.byteToCharMapWebSafe_[it]=this.ENCODED_VALS_WEBSAFE.charAt(it),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[it]]=it,it>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(it)]=it,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(it)]=it)}}},Ke=function(it){return function(it){const rt=Ue(it);return Le.encodeByteArray(rt,!0)}(it).replace(/\./g,"")},Ae=function(it){try{return Le.decodeString(it,!0)}catch(rt){console.error("base64Decode failed: ",rt)}return null};function Re(it,rt){if(!(rt instanceof Object))return rt;switch(rt.constructor){case Date:return new Date(rt.getTime());case Object:void 0===it&&(it={});break;case Array:it=[];break;default:return rt}for(const ht in rt)!rt.hasOwnProperty(ht)||!Se(ht)||(it[ht]=Re(it[ht],rt[ht]));return it}function Se(it){return"__proto__"!==it}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function jt(){return"object"==typeof self&&self.self===self}function Be(){const it="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof it&&void 0!==it.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){const it=ut();return it.indexOf("MSIE ")>=0||it.indexOf("Trident/")>=0}function We(){return!$e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _t(){return"object"==typeof indexedDB}function Et(){return new Promise((it,rt)=>{try{let ht=!0;const qt="validate-browser-context-for-indexeddb-analytics-module",bt=self.indexedDB.open(qt);bt.onsuccess=()=>{bt.result.close(),ht||self.indexedDB.deleteDatabase(qt),it(!0)},bt.onupgradeneeded=()=>{ht=!1},bt.onerror=()=>{var Sn;rt((null===(Sn=bt.error)||void 0===Sn?void 0:Sn.message)||"")}}catch(ht){rt(ht)}})}function H(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ge=()=>{try{return function he(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const it=process.env.__FIREBASE_DEFAULTS__;return it?JSON.parse(it):void 0})()||(()=>{if(typeof document>"u")return;let it;try{it=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const rt=it&&Ae(it[1]);return rt&&JSON.parse(rt)})()}catch(it){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${it}`)}},Tt=()=>{var it;return null===(it=Ge())||void 0===it?void 0:it.config},Pt=it=>{var rt;return null===(rt=Ge())||void 0===rt?void 0:rt[`_${it}`]};class kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((rt,ht)=>{this.resolve=rt,this.reject=ht})}wrapCallback(rt){return(ht,qt)=>{ht?this.reject(ht):this.resolve(qt),"function"==typeof rt&&(this.promise.catch(()=>{}),1===rt.length?rt(ht):rt(ht,qt))}}}function dt(it,rt){if(it.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qt=rt||"demo-project",bt=it.iat||0,Sn=it.sub||it.user_id;if(!Sn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const An=Object.assign({iss:`https://securetoken.google.com/${qt}`,aud:qt,iat:bt,exp:bt+3600,auth_time:bt,sub:Sn,user_id:Sn,firebase:{sign_in_provider:"custom",identities:{}}},it);return[Ke(JSON.stringify({alg:"none",type:"JWT"})),Ke(JSON.stringify(An)),""].join(".")}class $t extends Error{constructor(rt,ht,qt){super(ht),this.code=rt,this.customData=qt,this.name="FirebaseError",Object.setPrototypeOf(this,$t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(rt,ht,qt){this.service=rt,this.serviceName=ht,this.errors=qt}create(rt,...ht){const qt=ht[0]||{},bt=`${this.service}/${rt}`,Sn=this.errors[rt],An=Sn?function Bt(it,rt){return it.replace(_n,(ht,qt)=>{const bt=rt[qt];return null!=bt?String(bt):`<${qt}?>`})}(Sn,qt):"Error";return new $t(bt,`${this.serviceName}: ${An} (${bt}).`,qt)}}const _n=/\{\$([^}]+)}/g;function tr(it,rt){return Object.prototype.hasOwnProperty.call(it,rt)}function ti(it){for(const rt in it)if(Object.prototype.hasOwnProperty.call(it,rt))return!1;return!0}function en(it,rt){if(it===rt)return!0;const ht=Object.keys(it),qt=Object.keys(rt);for(const bt of ht){if(!qt.includes(bt))return!1;const Sn=it[bt],An=rt[bt];if(pr(Sn)&&pr(An)){if(!en(Sn,An))return!1}else if(Sn!==An)return!1}for(const bt of qt)if(!ht.includes(bt))return!1;return!0}function pr(it){return null!==it&&"object"==typeof it}function ni(it){const rt=[];for(const[ht,qt]of Object.entries(it))Array.isArray(qt)?qt.forEach(bt=>{rt.push(encodeURIComponent(ht)+"="+encodeURIComponent(bt))}):rt.push(encodeURIComponent(ht)+"="+encodeURIComponent(qt));return rt.length?"&"+rt.join("&"):""}function _r(it){const rt={};return it.replace(/^\?/,"").split("&").forEach(qt=>{if(qt){const[bt,Sn]=qt.split("=");rt[decodeURIComponent(bt)]=decodeURIComponent(Sn)}}),rt}function ci(it){const rt=it.indexOf("?");if(!rt)return"";const ht=it.indexOf("#",rt);return it.substring(rt,ht>0?ht:void 0)}function Wr(it,rt){const ht=new si(it,rt);return ht.subscribe.bind(ht)}class si{constructor(rt,ht){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ht,this.task.then(()=>{rt(this)}).catch(qt=>{this.error(qt)})}next(rt){this.forEachObserver(ht=>{ht.next(rt)})}error(rt){this.forEachObserver(ht=>{ht.error(rt)}),this.close(rt)}complete(){this.forEachObserver(rt=>{rt.complete()}),this.close()}subscribe(rt,ht,qt){let bt;if(void 0===rt&&void 0===ht&&void 0===qt)throw new Error("Missing Observer.");bt=function Zn(it,rt){if("object"!=typeof it||null===it)return!1;for(const ht of rt)if(ht in it&&"function"==typeof it[ht])return!0;return!1}(rt,["next","error","complete"])?rt:{next:rt,error:ht,complete:qt},void 0===bt.next&&(bt.next=Yr),void 0===bt.error&&(bt.error=Yr),void 0===bt.complete&&(bt.complete=Yr);const Sn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?bt.error(this.finalError):bt.complete()}catch{}}),this.observers.push(bt),Sn}unsubscribeOne(rt){void 0===this.observers||void 0===this.observers[rt]||(delete this.observers[rt],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(rt){if(!this.finalized)for(let ht=0;ht<this.observers.length;ht++)this.sendOne(ht,rt)}sendOne(rt,ht){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[rt])try{ht(this.observers[rt])}catch(qt){typeof console<"u"&&console.error&&console.error(qt)}})}close(rt){this.finalized||(this.finalized=!0,void 0!==rt&&(this.finalError=rt),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Yr(){}function Rn(it,rt=1e3,ht=2){const qt=rt*Math.pow(ht,it),bt=Math.round(.5*qt*(Math.random()-.5)*2);return Math.min(144e5,qt+bt)}function Dn(it){return it&&it._delegate?it._delegate:it}},9905:(Yt,at,W)=>{"use strict";W.d(at,{Y:()=>mt});var E=W(5861),k=W(9841),ee=W(3900),Ue=W(9646),Pe=W(4004),Le=W(6805),se=W(930),Ae=W(4650),Ie=W(7566),Re=W(1205),Se=W(2084),ut=W(9062);let mt=(()=>{class $e{constructor(Be,ze,yt,le){this.db=Be,this.auth=ze,this.storage=yt,this.router=le,this.pageClips=[],this.pendingRequest=!1,this.clipsCollection=Be.collection("clips")}createClip(Be){return this.clipsCollection.add(Be)}getUserClips(Be){return(0,k.a)([this.auth.user,Be]).pipe((0,ee.w)(ze=>{const[yt,le]=ze;return yt?this.clipsCollection.ref.where("uid","==",yt.uid).orderBy("timestamp","1"===le?"desc":"asc").get():(0,Ue.of)([])}),(0,Pe.U)(ze=>ze.docs))}updateClicp(Be,ze){return this.clipsCollection.doc(Be).update({title:ze})}deleteClip(Be){var ze=this;return(0,E.Z)(function*(){const yt=ze.storage.ref(`clips/${Be.fileName}`),le=ze.storage.ref(`screenshots/${Be.screenshotFileName}`);yield yt.delete(),yield le.delete(),yield ze.clipsCollection.doc(Be.docID).delete()})()}getClips(){var Be=this;return(0,E.Z)(function*(){if(Be.pendingRequest)return;Be.pendingRequest=!0;const ze=Be.clipsCollection.ref.orderBy("timestamp","desc").limit(3),{length:yt}=Be.pageClips;if(yt){const Z=Be.pageClips[yt-1].docID,xe=yield function Ke($e,jt){const Be="object"==typeof jt;return new Promise((ze,yt)=>{const le=new se.Hp({next:Z=>{ze(Z),le.unsubscribe()},error:yt,complete:()=>{Be?ze(jt.defaultValue):yt(new Le.K)}});$e.subscribe(le)})}(Be.clipsCollection.doc(Z).get());ze.startAfter(xe)}(yield ze.get()).forEach(Z=>{Be.pageClips.push({docID:Z.id,...Z.data()})}),Be.pendingRequest=!1})()}resolve(Be,ze){return this.clipsCollection.doc(Be.params.id).get().pipe((0,Pe.U)(yt=>yt.data()||(this.router.navigate(["/"]),null)))}}return $e.\u0275fac=function(Be){return new(Be||$e)(Ae.LFG(Ie.ST),Ae.LFG(Re.zQ),Ae.LFG(Se.Q1),Ae.LFG(ut.F0))},$e.\u0275prov=Ae.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e})()},1609:(Yt,at,W)=>{"use strict";W.d(at,{Z:()=>k});var E=W(4650);let k=(()=>{class ee{constructor(){this.modals=[]}isModalOpen(Pe){return Boolean(this.modals.find(Le=>Le.id===Pe)?.visible)}toggleModal(Pe){const Le=this.modals.find(se=>se.id===Pe);Le&&(Le.visible=!Le.visible)}register(Pe){this.modals.push({id:Pe,visible:!1})}unregister(Pe){this.modals=this.modals.filter(Le=>Le.id!==Pe)}}return ee.\u0275fac=function(Pe){return new(Pe||ee)},ee.\u0275prov=E.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})()},8549:(Yt,at,W)=>{"use strict";W.d(at,{w:()=>Ue});var E=W(4650),k=W(6895);const ee=["*"];let Ue=(()=>{class Pe{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return Pe.\u0275fac=function(se){return new(se||Pe)},Pe.\u0275cmp=E.Xpm({type:Pe,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:ee,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(se,Ke){1&se&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA()),2&se&&E.Q6J("ngClass",Ke.bgColor)},dependencies:[k.mk]}),Pe})()},235:(Yt,at,W)=>{"use strict";W.d(at,{a:()=>mt});var E=W(4006),k=W(4650),ee=W(6895),Ue=W(1094);function Pe($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1," Field is required "),k.qZA())}function Le($e,jt){if(1&$e&&(k.TgZ(0,"p",3),k._uU(1),k.qZA()),2&$e){const Be=k.oxw(2);k.xp6(1),k.AsE(" The value you inputted is ",null==Be.control.errors?null:Be.control.errors.minlength.actualLength," characters long. It must be at least ",null==Be.control.errors?null:Be.control.errors.minlength.requiredLength," characters long. ")}}function se($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1," You must enter a valid email "),k.qZA())}function Ke($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1,"Value too low."),k.qZA())}function Ae($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1,"Value too hight."),k.qZA())}function Ie($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1," Password must be at least 8 characters long, have 1 uppercase letter, 1 lowercase letter, and 1 number. "),k.qZA())}function Re($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1," Password does not match. "),k.qZA())}function Se($e,jt){1&$e&&(k.TgZ(0,"p",3),k._uU(1," Email taken, please try another email. "),k.qZA())}function ut($e,jt){if(1&$e&&(k.ynx(0),k.YNc(1,Pe,2,0,"p",2),k.YNc(2,Le,2,2,"p",2),k.YNc(3,se,2,0,"p",2),k.YNc(4,Ke,2,0,"p",2),k.YNc(5,Ae,2,0,"p",2),k.YNc(6,Ie,2,0,"p",2),k.YNc(7,Re,2,0,"p",2),k.YNc(8,Se,2,0,"p",2),k.BQk()),2&$e){const Be=k.oxw();k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.required),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.minlength),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.email),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.min),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.max),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.pattern),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.noMatch),k.xp6(1),k.Q6J("ngIf",null==Be.control.errors?null:Be.control.errors.emailTaken)}}let mt=(()=>{class $e{constructor(){this.control=new E.NI,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return $e.\u0275fac=function(Be){return new(Be||$e)},$e.\u0275cmp=k.Xpm({type:$e,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:5,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(Be,ze){1&Be&&(k._UZ(0,"input",0),k.YNc(1,ut,9,8,"ng-container",1)),2&Be&&(k.Q6J("formControl",ze.control)("type",ze.type)("placeholder",ze.placeholder)("mask",ze.format),k.xp6(1),k.Q6J("ngIf",ze.control.touched&&ze.control.dirty))},dependencies:[ee.O5,E.Fj,E.JJ,E.oH,Ue.hx]}),$e})()},3446:(Yt,at,W)=>{"use strict";W.d(at,{z:()=>Ke});var E=W(4650),k=W(1609),ee=W(6895);const Ue=[[["","heading",""]],"*"],Pe=function(Ae){return{hidden:Ae}},Le=function(){return{hidden:!0}},se=["[heading]","*"];let Ke=(()=>{class Ae{constructor(Re,Se){this.modal=Re,this.el=Se,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return Ae.\u0275fac=function(Re){return new(Re||Ae)(E.Y36(k.Z),E.Y36(E.SBq))},Ae.\u0275cmp=E.Xpm({type:Ae,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:se,decls:13,vars:5,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0",3,"ngClass"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(Re,Se){1&Re&&(E.F$t(Ue),E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E.NdJ("click",function(){return Se.closeModal()}),E._UZ(3,"div",3),E.qZA(),E.TgZ(4,"span",4),E._uU(5,"\u200b"),E.qZA(),E.TgZ(6,"div",5)(7,"div",6)(8,"div",7),E.Hsn(9),E.TgZ(10,"div",8),E.NdJ("click",function(){return Se.closeModal()}),E._uU(11," \u2715 "),E.qZA()(),E.Hsn(12,1),E.qZA()()()()),2&Re&&(E.Q6J("ngClass",E.VKq(2,Pe,!Se.modal.isModalOpen(Se.modalID))),E.xp6(1),E.Q6J("ngClass",E.DdM(4,Le)))},dependencies:[ee.mk]}),Ae})()},4466:(Yt,at,W)=>{"use strict";W.d(at,{m:()=>Pe});var E=W(6895),k=W(4006),ee=W(1094),Ue=W(4650);let Pe=(()=>{class Le{}return Le.\u0275fac=function(Ke){return new(Ke||Le)},Le.\u0275mod=Ue.oAB({type:Le}),Le.\u0275inj=Ue.cJS({imports:[E.ez,k.UX,ee.yI.forRoot()]}),Le})()},3260:(Yt,at,W)=>{"use strict";var E=W(1481),k=W(4650),ee=W(9062);let Ue=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(o,u){1&o&&(k.TgZ(0,"p",0),k._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),k.qZA())}}),g})();var Pe=W(6895),Le=W(9226),se=W.n(Le),Ke=W(1421),Ae=W.n(Ke);function Ie(){return Ie=Object.assign?Object.assign.bind():function(g){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(g[u]=o[u])}return g},Ie.apply(this,arguments)}var Re=W(1234),Se=W.n(Re);function ut(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function mt(g,a){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,t){return u.__proto__=t,u})(g,a)}function $e(g,a){g.prototype=Object.create(a.prototype),g.prototype.constructor=g,mt(g,a)}var jt=W(8099),Be=W.n(jt),ze=W(745),yt=W.n(ze),le=W(3629),Z=W.n(le);function xe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function We(g,a,o){return(We=xe()?Reflect.construct.bind():function(t,s,h){var v=[null];v.push.apply(v,s);var x=new(Function.bind.apply(t,v));return h&&mt(x,h.prototype),x}).apply(null,arguments)}var Et=W(3871),H=W.n(Et),he="http://example.com";const Fe=function(a,o){if(/^[a-z]+:/i.test(o))return o;/^data:/.test(a)&&(a=se().location&&se().location.href||"");var u="function"==typeof se().URL,t=/^\/\//.test(a),s=!se().location&&!/\/\//i.test(a);if(u?a=new(se().URL)(a,se().location||he):/\/\//i.test(a)||(a=H().buildAbsoluteURL(se().location&&se().location.href||"",a)),u){var h=new URL(o,a);return s?h.href.slice(he.length):t?h.href.slice(h.protocol.length):h.href}return H().buildAbsoluteURL(a,o)};var Me=function(){function g(){this.listeners={}}var a=g.prototype;return a.on=function(u,t){this.listeners[u]||(this.listeners[u]=[]),this.listeners[u].push(t)},a.off=function(u,t){if(!this.listeners[u])return!1;var s=this.listeners[u].indexOf(t);return this.listeners[u]=this.listeners[u].slice(0),this.listeners[u].splice(s,1),s>-1},a.trigger=function(u){var t=this.listeners[u];if(t)if(2===arguments.length)for(var s=t.length,h=0;h<s;++h)t[h].call(this,arguments[1]);else for(var v=Array.prototype.slice.call(arguments,1),S=t.length,x=0;x<S;++x)t[x].apply(this,v)},a.dispose=function(){this.listeners={}},a.pipe=function(u){this.on("data",function(t){u.push(t)})},g}();function ct(g){for(var a=function(a){return se().atob?se().atob(a):Buffer.from(a,"base64").toString("binary")}(g),o=new Uint8Array(a.length),u=0;u<a.length;u++)o[u]=a.charCodeAt(u);return o}var g,Eo,St=function(g){function a(){var u;return(u=g.call(this)||this).buffer="",u}return $e(a,g),a.prototype.push=function(t){var s;for(this.buffer+=t,s=this.buffer.indexOf("\n");s>-1;s=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},a}(Me),Tt=String.fromCharCode(9),Pt=function(a){var o=/([0-9.]*)?@?([0-9.]*)?/.exec(a||""),u={};return o[1]&&(u.length=parseInt(o[1],10)),o[2]&&(u.offset=parseInt(o[2],10)),u},dt=function(a){for(var s,o=a.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),u={},t=o.length;t--;)""!==o[t]&&((s=/([^=]*)=(.*)/.exec(o[t]).slice(1))[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),u[s[0]]=s[1]);return u},Ht=function(g){function a(){var u;return(u=g.call(this)||this).customParsers=[],u.tagMappers=[],u}$e(a,g);var o=a.prototype;return o.push=function(t){var h,v,s=this;if(0!==(t=t.trim()).length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(function(x,L){var ne=L(t);return ne===t?x:x.concat([ne])},[t]).forEach(function(x){for(var L=0;L<s.customParsers.length;L++)if(s.customParsers[L].call(s,x))return;if(0===x.indexOf("#EXT"))if(x=x.replace("\r",""),h=/^#EXTM3U/.exec(x))s.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(x))return v={type:"tag",tagType:"inf"},h[1]&&(v.duration=parseFloat(h[1])),h[2]&&(v.title=h[2]),void s.trigger("data",v);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(x))return v={type:"tag",tagType:"targetduration"},h[1]&&(v.duration=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(x))return v={type:"tag",tagType:"version"},h[1]&&(v.version=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return v={type:"tag",tagType:"media-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(x))return v={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void s.trigger("data",v);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(x))return v={type:"tag",tagType:"playlist-type"},h[1]&&(v.playlistType=h[1]),void s.trigger("data",v);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(x))return v=Ie(Pt(h[1]),{type:"tag",tagType:"byterange"}),void s.trigger("data",v);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(x))return v={type:"tag",tagType:"allow-cache"},h[1]&&(v.allowed=!/NO/.test(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-MAP:?(.*)$/.exec(x)){if(v={type:"tag",tagType:"map"},h[1]){var ne=dt(h[1]);ne.URI&&(v.uri=ne.URI),ne.BYTERANGE&&(v.byterange=Pt(ne.BYTERANGE))}s.trigger("data",v)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(x)){if(v={type:"tag",tagType:"stream-inf"},h[1]){if(v.attributes=dt(h[1]),v.attributes.RESOLUTION){var Y=v.attributes.RESOLUTION.split("x"),Te={};Y[0]&&(Te.width=parseInt(Y[0],10)),Y[1]&&(Te.height=parseInt(Y[1],10)),v.attributes.RESOLUTION=Te}v.attributes.BANDWIDTH&&(v.attributes.BANDWIDTH=parseInt(v.attributes.BANDWIDTH,10)),v.attributes["PROGRAM-ID"]&&(v.attributes["PROGRAM-ID"]=parseInt(v.attributes["PROGRAM-ID"],10))}s.trigger("data",v)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(x))return v={type:"tag",tagType:"media"},h[1]&&(v.attributes=dt(h[1])),void s.trigger("data",v);if(h=/^#EXT-X-ENDLIST/.exec(x))s.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(x)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(x))?(v={type:"tag",tagType:"program-date-time"},h[1]&&(v.dateTimeString=h[1],v.dateTimeObject=new Date(h[1])),void s.trigger("data",v)):(h=/^#EXT-X-KEY:?(.*)$/.exec(x))?(v={type:"tag",tagType:"key"},h[1]&&(v.attributes=dt(h[1]),v.attributes.IV&&("0x"===v.attributes.IV.substring(0,2).toLowerCase()&&(v.attributes.IV=v.attributes.IV.substring(2)),v.attributes.IV=v.attributes.IV.match(/.{8}/g),v.attributes.IV[0]=parseInt(v.attributes.IV[0],16),v.attributes.IV[1]=parseInt(v.attributes.IV[1],16),v.attributes.IV[2]=parseInt(v.attributes.IV[2],16),v.attributes.IV[3]=parseInt(v.attributes.IV[3],16),v.attributes.IV=new Uint32Array(v.attributes.IV))),void s.trigger("data",v)):(h=/^#EXT-X-START:?(.*)$/.exec(x))?(v={type:"tag",tagType:"start"},h[1]&&(v.attributes=dt(h[1]),v.attributes["TIME-OFFSET"]=parseFloat(v.attributes["TIME-OFFSET"]),v.attributes.PRECISE=/YES/.test(v.attributes.PRECISE)),void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(x))?((v={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void s.trigger("data",v)):(h=/^#EXT-X-SKIP:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"skip"}).attributes=dt(h[1]),v.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(v.attributes["SKIPPED-SEGMENTS"]=parseInt(v.attributes["SKIPPED-SEGMENTS"],10)),v.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(v.attributes["RECENTLY-REMOVED-DATERANGES"]=v.attributes["RECENTLY-REMOVED-DATERANGES"].split(Tt)),void s.trigger("data",v)):(h=/^#EXT-X-PART:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"part"}).attributes=dt(h[1]),["DURATION"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),["INDEPENDENT","GAP"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=/YES/.test(v.attributes[je]))}),v.attributes.hasOwnProperty("BYTERANGE")&&(v.attributes.byterange=Pt(v.attributes.BYTERANGE)),void s.trigger("data",v)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"server-control"}).attributes=dt(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=/YES/.test(v.attributes[je]))}),void s.trigger("data",v)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"part-inf"}).attributes=dt(h[1]),["PART-TARGET"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),void s.trigger("data",v)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"preload-hint"}).attributes=dt(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(je){if(v.attributes.hasOwnProperty(je)){v.attributes[je]=parseInt(v.attributes[je],10);var Ve="BYTERANGE-LENGTH"===je?"length":"offset";v.attributes.byterange=v.attributes.byterange||{},v.attributes.byterange[Ve]=v.attributes[je],delete v.attributes[je]}}),void s.trigger("data",v)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(x))&&h[1]?((v={type:"tag",tagType:"rendition-report"}).attributes=dt(h[1]),["LAST-MSN","LAST-PART"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseInt(v.attributes[je],10))}),void s.trigger("data",v)):void s.trigger("data",{type:"tag",data:x.slice(4)});s.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else s.trigger("data",{type:"comment",text:x.slice(1)})})}},o.addParser=function(t){var s=this,h=t.expression,v=t.customType,S=t.dataParser,x=t.segment;"function"!=typeof S&&(S=function(ne){return ne}),this.customParsers.push(function(L){if(h.exec(L))return s.trigger("data",{type:"custom",data:S(L),customType:v,segment:x}),!0})},o.addTagMapper=function(t){var s=t.expression,h=t.map;this.tagMappers.push(function(x){return s.test(x)?h(x):x})},a}(Me),rn=function(a){var o={};return Object.keys(a).forEach(function(u){o[function(a){return a.toLowerCase().replace(/-(\w)/g,function(o){return o[1].toUpperCase()})}(u)]=a[u]}),o},Bt=function(a){var o=a.serverControl,u=a.targetDuration,t=a.partTargetDuration;if(o){var s="#EXT-X-SERVER-CONTROL",h="holdBack",v="partHoldBack",S=u&&3*u,x=t&&2*t;u&&!o.hasOwnProperty(h)&&(o[h]=S,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+S+")."})),S&&o[h]<S&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+o[h]+") to targetDuration * 3 ("+S+")"}),o[h]=S),t&&!o.hasOwnProperty(v)&&(o[v]=3*t,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+o[v]+")."})),t&&o[v]<x&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+o[v]+") to partTargetDuration * 2 ("+x+")."}),o[v]=x)}},_n=function(g){function a(){var u;(u=g.call(this)||this).lineStream=new St,u.parseStream=new Ht,u.lineStream.pipe(u.parseStream);var v,S,t=ut(u),s=[],h={},x=!1,L=function(){},ne={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},Te=0;u.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var je=0,Ve=0;return u.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&v&&(h.map=v),!h.key&&S&&(h.key=S),!h.timeline&&"number"==typeof Te&&(h.timeline=Te),u.manifest.preloadSegment=h)}),u.parseStream.on("data",function(qe){var Wt,yn;({tag:function(){({version:function(){qe.version&&(this.manifest.version=qe.version)},"allow-cache":function(){this.manifest.allowCache=qe.allowed,"allowed"in qe||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var tn={};"length"in qe&&(h.byterange=tn,tn.length=qe.length,"offset"in qe||(qe.offset=je)),"offset"in qe&&(h.byterange=tn,tn.offset=qe.offset),je=tn.offset+tn.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),qe.duration>0&&(h.duration=qe.duration),0===qe.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(qe.attributes)if("NONE"!==qe.attributes.METHOD)if(qe.attributes.URI){if("com.apple.streamingkeydelivery"===qe.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:qe.attributes});if("com.microsoft.playready"===qe.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:qe.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===qe.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(qe.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===qe.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==qe.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):qe.attributes.KEYID&&"0x"===qe.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:qe.attributes.KEYFORMAT,keyId:qe.attributes.KEYID.substring(2)},pssh:ct(qe.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));qe.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),S={method:qe.attributes.METHOD||"AES-128",uri:qe.attributes.URI},typeof qe.attributes.IV<"u"&&(S.iv=qe.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else S=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(qe.number)?this.manifest.mediaSequence=qe.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+qe.number})},"discontinuity-sequence":function(){isFinite(qe.number)?(this.manifest.discontinuitySequence=qe.number,Te=qe.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+qe.number})},"playlist-type":function(){/VOD|EVENT/.test(qe.playlistType)?this.manifest.playlistType=qe.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+qe.playlist})},map:function(){v={},qe.uri&&(v.uri=qe.uri),qe.byterange&&(v.byterange=qe.byterange),S&&(v.key=S)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||ne,qe.attributes?(h.attributes||(h.attributes={}),Ie(h.attributes,qe.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||ne,qe.attributes&&qe.attributes.TYPE&&qe.attributes["GROUP-ID"]&&qe.attributes.NAME){var tn=this.manifest.mediaGroups[qe.attributes.TYPE];tn[qe.attributes["GROUP-ID"]]=tn[qe.attributes["GROUP-ID"]]||{},Wt=tn[qe.attributes["GROUP-ID"]],(yn={default:/yes/i.test(qe.attributes.DEFAULT)}).autoselect=!!yn.default||/yes/i.test(qe.attributes.AUTOSELECT),qe.attributes.LANGUAGE&&(yn.language=qe.attributes.LANGUAGE),qe.attributes.URI&&(yn.uri=qe.attributes.URI),qe.attributes["INSTREAM-ID"]&&(yn.instreamId=qe.attributes["INSTREAM-ID"]),qe.attributes.CHARACTERISTICS&&(yn.characteristics=qe.attributes.CHARACTERISTICS),qe.attributes.FORCED&&(yn.forced=/yes/i.test(qe.attributes.FORCED)),Wt[qe.attributes.NAME]=yn}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){Te+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=qe.dateTimeString,this.manifest.dateTimeObject=qe.dateTimeObject),h.dateTimeString=qe.dateTimeString,h.dateTimeObject=qe.dateTimeObject},targetduration:function(){!isFinite(qe.duration)||qe.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+qe.duration}):(this.manifest.targetDuration=qe.duration,Bt.call(this,this.manifest))},start:function(){qe.attributes&&!isNaN(qe.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:qe.attributes["TIME-OFFSET"],precise:qe.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=qe.data},"cue-out-cont":function(){h.cueOutCont=qe.data},"cue-in":function(){h.cueIn=qe.data},skip:function(){this.manifest.skip=rn(qe.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",qe.attributes,["SKIPPED-SEGMENTS"])},part:function(){var tn=this;x=!0;var Cn=this.manifest.segments.length,un=rn(qe.attributes);h.parts=h.parts||[],h.parts.push(un),un.byterange&&(un.byterange.hasOwnProperty("offset")||(un.byterange.offset=Ve),Ve=un.byterange.offset+un.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+Cn,qe.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(In,mn){In.hasOwnProperty("lastPart")||tn.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+mn+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var tn=this.manifest.serverControl=rn(qe.attributes);tn.hasOwnProperty("canBlockReload")||(tn.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Bt.call(this,this.manifest),tn.canSkipDateranges&&!tn.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var tn=this.manifest.segments.length,Cn=rn(qe.attributes),un=Cn.type&&"PART"===Cn.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(Cn),Cn.byterange&&(Cn.byterange.hasOwnProperty("offset")||(Cn.byterange.offset=un?Ve:0,un&&(Ve=Cn.byterange.offset+Cn.byterange.length)));var on=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+on+" for segment #"+tn,qe.attributes,["TYPE","URI"]),Cn.type)for(var In=0;In<h.preloadHints.length-1;In++){var mn=h.preloadHints[In];!mn.type||mn.type===Cn.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+on+" for segment #"+tn+" has the same TYPE "+Cn.type+" as preload hint #"+In})}},"rendition-report":function(){var tn=rn(qe.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(tn);var Cn=this.manifest.renditionReports.length-1,un=["LAST-MSN","URI"];x&&un.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+Cn,qe.attributes,un)},"part-inf":function(){this.manifest.partInf=rn(qe.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",qe.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Bt.call(this,this.manifest)}}[qe.tagType]||L).call(t)},uri:function(){h.uri=qe.uri,s.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),S&&(h.key=S),h.timeline=Te,v&&(h.map=v),Ve=0,h={}},comment:function(){},custom:function(){qe.segment?(h.custom=h.custom||{},h.custom[qe.customType]=qe.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[qe.customType]=qe.data)}})[qe.type].call(t)}),u}$e(a,g);var o=a.prototype;return o.warnOnMissingAttributes_=function(t,s,h){var v=[];h.forEach(function(S){s.hasOwnProperty(S)||v.push(S)}),v.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+v.join(", ")})},o.push=function(t){this.lineStream.push(t)},o.end=function(){this.lineStream.push("\n"),this.trigger("end")},o.addParser=function(t){this.parseStream.addParser(t)},o.addTagMapper=function(t){this.parseStream.addTagMapper(t)},a}(Me),Jt={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},qn=["video","audio","text"],Qn=["Video","Audio","Text"],wr=function(a){return a&&a.replace(/avc1\.(\d+)\.(\d+)/i,function(o,u,t){return"avc1."+("00"+Number(u).toString(16)).slice(-2)+"00"+("00"+Number(t).toString(16)).slice(-2)})},cr=function(a){void 0===a&&(a="");var o=a.split(","),u=[];return o.forEach(function(t){var s;t=t.trim(),qn.forEach(function(h){var v=Jt[h].exec(t.toLowerCase());if(v&&!(v.length<=1)){s=h;var S=t.substring(0,v[1].length),x=t.replace(S,"");u.push({type:S,details:x,mediaType:h})}}),s||u.push({type:t,details:"",mediaType:"unknown"})}),u},ti=function(a){return void 0===a&&(a=""),Jt.audio.test(a.trim().toLowerCase())},en=function(a){if(a&&"string"==typeof a){var o=a.toLowerCase().split(",").map(function(s){return wr(s.trim())}),u="video";1===o.length&&ti(o[0])?u="audio":1===o.length&&function(a){return void 0===a&&(a=""),Jt.text.test(a.trim().toLowerCase())}(o[0])&&(u="application");var t="mp4";return o.every(function(s){return Jt.mp4.test(s)})?t="mp4":o.every(function(s){return Jt.webm.test(s)})?t="webm":o.every(function(s){return Jt.ogg.test(s)})&&(t="ogg"),u+"/"+t+';codecs="'+a+'"'}},pr=function(a){return void 0===a&&(a=""),se().MediaSource&&se().MediaSource.isTypeSupported&&se().MediaSource.isTypeSupported(en(a))||!1},Or=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(o){o=o.trim();for(var u=0;u<Qn.length;u++)if(Jt["muxer"+Qn[u]].test(o))return!0;return!1})},ni="mp4a.40.2",ci=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Zr=/^application\/dash\+xml/i,Wr=function(a){return ci.test(a)?"hls":Zr.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null},vi=function(a){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer},sn=function(a){return a instanceof Uint8Array?a:(!Array.isArray(a)&&!function(a){return vi(a)}(a)&&!(a instanceof ArrayBuffer)&&(a="number"!=typeof a||"number"==typeof a&&a!=a?0:[a]),new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0))},Un=se().BigInt||Number,ki=[Un("0x1"),Un("0x100"),Un("0x10000"),Un("0x1000000"),Un("0x100000000"),Un("0x10000000000"),Un("0x1000000000000"),Un("0x100000000000000"),Un("0x10000000000000000")],Mn=(g=new Uint16Array([65484]),new Uint8Array(g.buffer,g.byteOffset,g.byteLength),function(a,o){var u=void 0===o?{}:o,t=u.signed,s=void 0!==t&&t,h=u.le,v=void 0!==h&&h;a=sn(a);var S=v?"reduce":"reduceRight",L=(a[S]?a[S]:Array.prototype[S]).call(a,function(Y,Te,je){var Ve=v?je:Math.abs(je+1-a.length);return Y+Un(Te)*ki[Ve]},Un(0));if(s){var ne=ki[a.length]/Un(2)-Un(1);(L=Un(L))>ne&&(L-=ne,L-=ne,L-=Un(2))}return Number(L)}),rr=function(a,o){if("string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a)return new Uint8Array;o||(a=unescape(encodeURIComponent(a)));for(var u=new Uint8Array(a.length),t=0;t<a.length;t++)u[t]=a.charCodeAt(t);return u},Dn=function(a,o,u){var t=void 0===u?{}:u,s=t.offset,h=void 0===s?0:s,v=t.mask,S=void 0===v?[]:v;return a=sn(a),(o=sn(o)).length&&a.length-h>=o.length&&(o.every?o.every:Array.prototype.every).call(o,function(L,ne){return L===(S[ne]?S[ne]&a[h+ne]:a[h+ne])})},qt=W(978),Sn=function(a){return!!a&&"object"==typeof a},An=function g(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return o.reduce(function(t,s){return"object"!=typeof s||Object.keys(s).forEach(function(h){t[h]=Array.isArray(t[h])&&Array.isArray(s[h])?t[h].concat(s[h]):Sn(t[h])&&Sn(s[h])?g(t[h],s[h]):s[h]}),t},{})},$r=function(a){return Object.keys(a).map(function(o){return a[o]})},ye=function(a){return a.reduce(function(o,u){return o.concat(u)},[])},K=function(a){if(!a.length)return[];for(var o=[],u=0;u<a.length;u++)o.push(a[u]);return o},ve=function(a,o){for(var u=0;u<a.length;u++)if(o(a[u]))return u;return-1},dn=function(a){var o=a.baseUrl,t=a.source,s=void 0===t?"":t,h=a.range,v=void 0===h?"":h,S=a.indexRange,x=void 0===S?"":S,L={uri:s,resolvedUri:Fe((void 0===o?"":o)||"",s)};if(v||x){var Ve,Y=(v||x).split("-"),Te=se().BigInt?se().BigInt(Y[0]):parseInt(Y[0],10),je=se().BigInt?se().BigInt(Y[1]):parseInt(Y[1],10);Te<Number.MAX_SAFE_INTEGER&&"bigint"==typeof Te&&(Te=Number(Te)),je<Number.MAX_SAFE_INTEGER&&"bigint"==typeof je&&(je=Number(je)),"bigint"==typeof(Ve="bigint"==typeof je||"bigint"==typeof Te?se().BigInt(je)-se().BigInt(Te)+se().BigInt(1):je-Te+1)&&Ve<Number.MAX_SAFE_INTEGER&&(Ve=Number(Ve)),L.byterange={length:Ve,offset:Te}}return L},Kn=function(a){return a&&"number"!=typeof a&&(a=parseInt(a,10)),isNaN(a)?null:a},br={static:function(a){var o=a.duration,u=a.timescale,t=void 0===u?1:u,s=a.sourceDuration,h=a.periodDuration,v=Kn(a.endNumber),S=o/t;return"number"==typeof v?{start:0,end:v}:"number"==typeof h?{start:0,end:h/S}:{start:0,end:s/S}},dynamic:function(a){var o=a.NOW,u=a.clientOffset,t=a.availabilityStartTime,s=a.timescale,h=void 0===s?1:s,v=a.duration,S=a.periodStart,x=void 0===S?0:S,L=a.minimumUpdatePeriod,ne=void 0===L?0:L,Y=a.timeShiftBufferDepth,Te=void 0===Y?1/0:Y,je=Kn(a.endNumber),Ve=(o+u)/1e3,qe=t+x,Vn=Math.ceil((Ve+ne-qe)*h/v),Xt=Math.floor((Ve-qe-Te)*h/v),tn=Math.floor((Ve-qe)*h/v);return{start:Math.max(0,Xt),end:"number"==typeof je?je:Math.min(Vn,tn)}}},ar=function(a){var o=a.type,u=a.duration,t=a.timescale,s=void 0===t?1:t,h=a.periodDuration,v=a.sourceDuration,S=br[o](a),ne=function(a,o){for(var u=[],t=a;t<o;t++)u.push(t);return u}(S.start,S.end).map(function(a){return function(o){var u=a.duration,t=a.timescale,v=a.startNumber;return{number:(void 0===v?1:v)+o,duration:u/(void 0===t?1:t),timeline:a.periodStart,time:o*u}}}(a));if("static"===o){var Y=ne.length-1;ne[Y].duration=("number"==typeof h?h:v)-u/s*Y}return ne},zr=function(a){var o=a.baseUrl,u=a.initialization,t=void 0===u?{}:u,s=a.sourceDuration,h=a.indexRange,v=void 0===h?"":h,S=a.periodStart,x=a.presentationTime,L=a.number,ne=void 0===L?0:L,Y=a.duration;if(!o)throw new Error("NO_BASE_URL");var Te=dn({baseUrl:o,source:t.sourceURL,range:t.range}),je=dn({baseUrl:o,source:o,indexRange:v});if(je.map=Te,Y){var Ve=ar(a);Ve.length&&(je.duration=Ve[0].duration,je.timeline=Ve[0].timeline)}else s&&(je.duration=s,je.timeline=S);return je.presentationTime=x||S,je.number=ne,[je]},Xi=function(a,o,u){var qe,t=a.sidx.map?a.sidx.map:null,s=a.sidx.duration,h=a.timeline||0,v=a.sidx.byterange,S=v.offset+v.length,x=o.timescale,L=o.references.filter(function(In){return 1!==In.referenceType}),ne=[],Y=a.endList?"static":"dynamic",Te=a.sidx.timeline,je=Te,Ve=a.mediaSequence||0;qe="bigint"==typeof o.firstOffset?se().BigInt(S)+o.firstOffset:S+o.firstOffset;for(var Wt=0;Wt<L.length;Wt++){var tn,yn=o.references[Wt],Vn=yn.referencedSize,Xt=yn.subsegmentDuration;tn="bigint"==typeof qe?qe+se().BigInt(Vn)-se().BigInt(1):qe+Vn-1;var on=zr({baseUrl:u,timescale:x,timeline:h,periodStart:Te,presentationTime:je,number:Ve,duration:Xt,sourceDuration:s,indexRange:qe+"-"+tn,type:Y})[0];t&&(on.map=t),ne.push(on),qe+="bigint"==typeof qe?se().BigInt(Vn):Vn,je+=Xt/x,Ve++}return a.segments=ne,a},Mi=["AUDIO","SUBTITLES"],_i=function(a){return function(a,o){return $r(a.reduce(function(u,t){return t.forEach(function(s){u[function(o){return o.timeline}(s)]=s}),u},{}))}(a).sort(function(o,u){return o.timeline>u.timeline?1:-1})},gs=function(a){var o=[];return function(a,o,u){o.forEach(function(t){for(var s in a.mediaGroups[t])for(var h in a.mediaGroups[t][s])u(a.mediaGroups[t][s][h])})}(a,Mi,function(u,t,s,h){o=o.concat(u.playlists||[])}),o},Pi=function(a){var o=a.playlist;o.mediaSequence=a.mediaSequence,o.segments.forEach(function(t,s){t.number=o.mediaSequence+s})},di=function(a){return a&&a.uri+"-"+function(a){var o;return o="bigint"==typeof a.offset||"bigint"==typeof a.length?se().BigInt(a.offset)+se().BigInt(a.length)-se().BigInt(1):a.offset+a.length-1,a.offset+"-"+o}(a.byterange)},_o=function(a){return $r(a.reduce(function(u,t){var h,s=t.attributes.id+(t.attributes.lang||"");u[s]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(h=u[s].segments).push.apply(h,t.segments)),t.attributes.contentProtection&&(u[s].attributes.contentProtection=t.attributes.contentProtection)):(u[s]=t,u[s].attributes.timelineStarts=[]);return u[s].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),u},{})).map(function(u){return u.discontinuityStarts=function(a,o){return a.reduce(function(u,t,s){return t.discontinuity&&u.push(s),u},[])}(u.segments||[]),u})},_s=function(a,o){var u=di(a.sidx),t=u&&o[u]&&o[u].sidx;return t&&Xi(a,t,a.sidx.resolvedUri),a},js=function(a,o){if(void 0===o&&(o={}),!Object.keys(o).length)return a;for(var u in a)a[u]=_s(a[u],o);return a},Bo=function(a){var o,u=a.attributes,t=a.segments,s=a.sidx,h=a.discontinuityStarts,v={attributes:(o={NAME:u.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:u.width,height:u.height},CODECS:u.codecs,BANDWIDTH:u.bandwidth},o["PROGRAM-ID"]=1,o),uri:"",endList:"static"===u.type,timeline:u.periodStart,resolvedUri:"",targetDuration:u.duration,discontinuityStarts:h,timelineStarts:u.timelineStarts,segments:t};return u.contentProtection&&(v.contentProtection=u.contentProtection),s&&(v.sidx=s),v},qr=function(a){var o=a.attributes;return"video/mp4"===o.mimeType||"video/webm"===o.mimeType||"video"===o.contentType},bs=function(a){var o=a.attributes;return"audio/mp4"===o.mimeType||"audio/webm"===o.mimeType||"audio"===o.contentType},Ao=function(a){var o=a.attributes;return"text/vtt"===o.mimeType||"text"===o.contentType},Pa=function(a){return a?Object.keys(a).reduce(function(o,u){return o.concat(a[u].playlists)},[]):[]},ns=function(a){var o,u=a.dashPlaylists,t=a.locations,s=a.sidxMapping,h=void 0===s?{}:s,v=a.previousManifest;if(!u.length)return{};var S=u[0].attributes,x=S.sourceDuration,L=S.type,ne=S.suggestedPresentationDelay,Y=S.minimumUpdatePeriod,Te=_o(u.filter(qr)).map(Bo),je=_o(u.filter(bs)),Ve=_o(u.filter(Ao)),qe=u.map(function(un){return un.attributes.captionServices}).filter(Boolean),Wt={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(o={AUDIO:{},VIDEO:{}},o["CLOSED-CAPTIONS"]={},o.SUBTITLES={},o),uri:"",duration:x,playlists:js(Te,h)};Y>=0&&(Wt.minimumUpdatePeriod=1e3*Y),t&&(Wt.locations=t),"dynamic"===L&&(Wt.suggestedPresentationDelay=ne);var Vn=je.length?function(a,o,u){void 0===o&&(o={}),void 0===u&&(u=!1);var t,s=a.reduce(function(v,S){var x=S.attributes.role&&S.attributes.role.value||"",L=S.attributes.lang||"",ne=S.attributes.label||"main";L&&!S.attributes.label&&(ne=S.attributes.lang+(x?" ("+x+")":"")),v[ne]||(v[ne]={language:L,autoselect:!0,default:"main"===x,playlists:[],uri:""});var Te=_s(function(a,o){var u,t=a.attributes,s=a.segments,h=a.sidx,v=a.mediaSequence,S=a.discontinuitySequence,x=a.discontinuityStarts,L={attributes:(u={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},u["PROGRAM-ID"]=1,u),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:S,discontinuityStarts:x,timelineStarts:t.timelineStarts,mediaSequence:v,segments:s};return t.contentProtection&&(L.contentProtection=t.contentProtection),h&&(L.sidx=h),o&&(L.attributes.AUDIO="audio",L.attributes.SUBTITLES="subs"),L}(S,u),o);return v[ne].playlists.push(Te),typeof t>"u"&&"main"===x&&((t=S).default=!0),v},{});return t||(s[Object.keys(s)[0]].default=!0),s}(je,h,0===Wt.playlists.length):null,Xt=Ve.length?function(a,o){return void 0===o&&(o={}),a.reduce(function(u,t){var s=t.attributes.lang||"text";return u[s]||(u[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),u[s].playlists.push(_s(function(a){var o,u=a.attributes,t=a.segments,s=a.mediaSequence,h=a.discontinuityStarts,v=a.discontinuitySequence;typeof t>"u"&&(t=[{uri:u.baseUrl,timeline:u.periodStart,resolvedUri:u.baseUrl||"",duration:u.sourceDuration,number:0}],u.duration=u.sourceDuration);var S=((o={NAME:u.id,BANDWIDTH:u.bandwidth})["PROGRAM-ID"]=1,o);return u.codecs&&(S.CODECS=u.codecs),{attributes:S,uri:"",endList:"static"===u.type,timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,timelineStarts:u.timelineStarts,discontinuityStarts:h,discontinuitySequence:v,mediaSequence:s,segments:t}}(t),o)),u},{})}(Ve,h):null,tn=Te.concat(Pa(Vn),Pa(Xt)),Cn=tn.map(function(un){return un.timelineStarts});return Wt.timelineStarts=_i(Cn),function(a,o){a.forEach(function(u){u.mediaSequence=0,u.discontinuitySequence=ve(o,function(t){return t.timeline===u.timeline}),u.segments&&u.segments.forEach(function(t,s){t.number=s})})}(tn,Wt.timelineStarts),Vn&&(Wt.mediaGroups.AUDIO.audio=Vn),Xt&&(Wt.mediaGroups.SUBTITLES.subs=Xt),qe.length&&(Wt.mediaGroups["CLOSED-CAPTIONS"].cc=function(a){return a.reduce(function(o,u){return u&&u.forEach(function(t){var h=t.language;o[h]={autoselect:!1,default:!1,instreamId:t.channel,language:h},t.hasOwnProperty("aspectRatio")&&(o[h].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(o[h].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(o[h]["3D"]=t["3D"])}),o},{})}(qe)),v?function(a){var o=a.oldManifest,u=a.newManifest,t=o.playlists.concat(gs(o)),s=u.playlists.concat(gs(u));return u.timelineStarts=_i([o.timelineStarts,u.timelineStarts]),function(a){var o=a.oldPlaylists,t=a.timelineStarts;a.newPlaylists.forEach(function(s){s.discontinuitySequence=ve(t,function(L){return L.timeline===s.timeline});var h=function(a,o){for(var u=0;u<a.length;u++)if(a[u].attributes.NAME===o)return a[u];return null}(o,s.attributes.NAME);if(h&&!s.sidx){var v=s.segments[0],S=ve(h.segments,function(L){return Math.abs(L.presentationTime-v.presentationTime)<.016666666666666666});if(-1===S)return Pi({playlist:s,mediaSequence:h.mediaSequence+h.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),void((!h.segments.length&&s.timeline>h.timeline||h.segments.length&&s.timeline>h.segments[h.segments.length-1].timeline)&&s.discontinuitySequence--);h.segments[S].discontinuity&&!v.discontinuity&&(v.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),Pi({playlist:s,mediaSequence:h.segments[S].number})}})}({oldPlaylists:t,newPlaylists:s,timelineStarts:u.timelineStarts}),u}({oldManifest:v,newManifest:Wt}):Wt},lu=function(a,o,u){var v=a.timescale,x=a.periodStart,ne=a.minimumUpdatePeriod;return Math.ceil((((a.NOW+a.clientOffset)/1e3+(void 0===ne?0:ne)-(a.availabilityStartTime+(void 0===x?0:x)))*(void 0===v?1:v)-o)/u)},xs=function(a,o){for(var u=a.type,t=a.minimumUpdatePeriod,s=void 0===t?0:t,h=a.media,v=void 0===h?"":h,S=a.sourceDuration,x=a.timescale,L=void 0===x?1:x,ne=a.startNumber,Y=void 0===ne?1:ne,Te=a.periodStart,je=[],Ve=-1,qe=0;qe<o.length;qe++){var Wt=o[qe],yn=Wt.d,Vn=Wt.r||0,Xt=Wt.t||0;Ve<0&&(Ve=Xt),Xt&&Xt>Ve&&(Ve=Xt);var tn=void 0;if(Vn<0){var Cn=qe+1;tn=Cn===o.length?"dynamic"===u&&s>0&&v.indexOf("$Number$")>0?lu(a,Ve,yn):(S*L-Ve)/yn:(o[Cn].t-Ve)/yn}else tn=Vn+1;for(var un=Y+je.length+tn,on=Y+je.length;on<un;)je.push({number:on,duration:yn/L,time:Ve,timeline:Te}),Ve+=yn,on++}return je},qa=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Oa=function(a,o){return a.replace(qa,function(a){return function(o,u,t,s){if("$$"===o)return"$";if(typeof a[u]>"u")return o;var h=""+a[u];return"RepresentationID"===u||(s=t?parseInt(s,10):1,h.length>=s)?h:""+new Array(s-h.length+1).join("0")+h}}(o))},wt=function(a,o){var u={RepresentationID:a.id,Bandwidth:a.bandwidth||0},t=a.initialization,s=void 0===t?{sourceURL:"",range:""}:t,h=dn({baseUrl:a.baseUrl,source:Oa(s.sourceURL,u),range:s.range}),v=function(a,o){return a.duration||o?a.duration?ar(a):xs(a,o):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodStart}]}(a,o);return v.map(function(S){u.Number=S.number,u.Time=S.time;var x=Oa(a.media||"",u),Y=a.periodStart+(S.time-(a.presentationTimeOffset||0))/(a.timescale||1);return{uri:x,timeline:S.timeline,duration:S.duration,resolvedUri:Fe(a.baseUrl||"",x),map:h,number:S.number,presentationTime:Y}})},Mt=function(a,o){var u=a.duration,t=a.segmentUrls,s=void 0===t?[]:t,h=a.periodStart;if(!u&&!o||u&&o)throw new Error("SEGMENT_TIME_UNSPECIFIED");var S,v=s.map(function(L){return function(a,o){var u=a.baseUrl,t=a.initialization,s=void 0===t?{}:t,h=dn({baseUrl:u,source:s.sourceURL,range:s.range}),v=dn({baseUrl:u,source:o.media,range:o.mediaRange});return v.map=h,v}(a,L)});return u&&(S=ar(a)),o&&(S=xs(a,o)),S.map(function(L,ne){if(v[ne]){var Y=v[ne],Te=a.timescale||1,je=a.presentationTimeOffset||0;return Y.timeline=L.timeline,Y.duration=L.duration,Y.number=L.number,Y.presentationTime=h+(L.time-je)/Te,Y}}).filter(function(L){return L})},an=function(a){var t,s,o=a.attributes,u=a.segmentInfo;u.template?(s=wt,t=An(o,u.template)):u.base?(s=zr,t=An(o,u.base)):u.list&&(s=Mt,t=An(o,u.list));var h={attributes:o};if(!s)return h;var v=s(t,u.segmentTimeline);if(t.duration){var L=t.timescale;t.duration=t.duration/(void 0===L?1:L)}else t.duration=v.length?v.reduce(function(Y,Te){return Math.max(Y,Math.ceil(Te.duration))},0):0;return h.attributes=t,h.segments=v,u.base&&t.indexRange&&(h.sidx=v[0],h.segments=[]),h},kn=function(a,o){return K(a.childNodes).filter(function(u){return u.tagName===o})},Tr=function(a){return a.textContent.trim()},oi=function(a){var S=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(a);if(!S)return 0;var x=S.slice(1),ne=x[1],Y=x[2],Te=x[3],je=x[4],Ve=x[5];return 31536e3*parseFloat(x[0]||0)+2592e3*parseFloat(ne||0)+86400*parseFloat(Y||0)+3600*parseFloat(Te||0)+60*parseFloat(je||0)+parseFloat(Ve||0)},Rs={mediaPresentationDuration:function(a){return oi(a)},availabilityStartTime:function(a){return function(a){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z"),Date.parse(a)}(a)/1e3},minimumUpdatePeriod:function(a){return oi(a)},suggestedPresentationDelay:function(a){return oi(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return oi(a)},start:function(a){return oi(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},presentationTimeOffset:function(a){return parseInt(a,10)},duration:function(a){var o=parseInt(a,10);return isNaN(o)?oi(a):o},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Wi=function(a){return a&&a.attributes?K(a.attributes).reduce(function(o,u){return o[u.name]=(Rs[u.name]||Rs.DEFAULT)(u.value),o},{}):{}},Vo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},zi=function(a,o){return o.length?ye(a.map(function(u){return o.map(function(t){return Fe(u,Tr(t))})})):a},zs=function(a){var o=kn(a,"SegmentTemplate")[0],u=kn(a,"SegmentList")[0],t=u&&kn(u,"SegmentURL").map(function(Y){return An({tag:"SegmentURL"},Wi(Y))}),s=kn(a,"SegmentBase")[0],h=u||o,v=h&&kn(h,"SegmentTimeline")[0],S=u||s||o,x=S&&kn(S,"Initialization")[0],L=o&&Wi(o);L&&x?L.initialization=x&&Wi(x):L&&L.initialization&&(L.initialization={sourceURL:L.initialization});var ne={template:L,segmentTimeline:v&&kn(v,"S").map(function(Y){return Wi(Y)}),list:u&&An(Wi(u),{segmentUrls:t,initialization:Wi(x)}),base:s&&An(Wi(s),{initialization:Wi(x)})};return Object.keys(ne).forEach(function(Y){ne[Y]||delete ne[Y]}),ne},ho=function(a,o){return function(u,t){var s=zi(o,kn(u.node,"BaseURL")),h=An(a,{periodStart:u.attributes.start});"number"==typeof u.attributes.duration&&(h.periodDuration=u.attributes.duration);var v=kn(u.node,"AdaptationSet"),S=zs(u.node);return ye(v.map(function(a,o,u){return function(t){var s=Wi(t),h=zi(o,kn(t,"BaseURL")),v=kn(t,"Role")[0],S={role:Wi(v)},x=An(a,s,S),L=kn(t,"Accessibility")[0],ne=function(a){return"urn:scte:dash:cc:cea-608:2015"===a.schemeIdUri?("string"!=typeof a.value?[]:a.value.split(";")).map(function(t){var s,h;if(h=t,/^CC\d=/.test(t)){var v=t.split("=");s=v[0],h=v[1]}else/^CC\d$/.test(t)&&(s=t);return{channel:s,language:h}}):"urn:scte:dash:cc:cea-708:2015"===a.schemeIdUri?("string"!=typeof a.value?[]:a.value.split(";")).map(function(t){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var h=t.split("="),S=h[1],x=void 0===S?"":S;s.channel=h[0],s.language=t,x.split(",").forEach(function(L){var ne=L.split(":"),Y=ne[0],Te=ne[1];"lang"===Y?s.language=Te:"er"===Y?s.easyReader=Number(Te):"war"===Y?s.aspectRatio=Number(Te):"3D"===Y&&(s["3D"]=Number(Te))})}else s.language=t;return s.channel&&(s.channel="SERVICE"+s.channel),s}):void 0}(Wi(L));ne&&(x=An(x,{captionServices:ne}));var Y=kn(t,"Label")[0];if(Y&&Y.childNodes.length){var Te=Y.childNodes[0].nodeValue.trim();x=An(x,{label:Te})}var je=function(a){return a.reduce(function(o,u){var t=Wi(u);t.schemeIdUri&&(t.schemeIdUri=t.schemeIdUri.toLowerCase());var s=Vo[t.schemeIdUri];if(s){o[s]={attributes:t};var h=kn(u,"cenc:pssh")[0];if(h){var v=Tr(h);o[s].pssh=v&&ct(v)}}return o},{})}(kn(t,"ContentProtection"));Object.keys(je).length&&(x=An(x,{contentProtection:je}));var Ve=zs(t),qe=kn(t,"Representation"),Wt=An(u,Ve);return ye(qe.map(function(a,o,u){return function(t){var s=kn(t,"BaseURL"),h=zi(o,s),v=An(a,Wi(t)),S=zs(t);return h.map(function(x){return{segmentInfo:An(u,S),attributes:An(v,{baseUrl:x})}})}}(x,h,Wt)))}}(h,s,S)))}},Na=function(a){if(""===a)throw new Error("DASH_EMPTY_MANIFEST");var u,t,o=new qt.DOMParser;try{t=(u=o.parseFromString(a,"application/xml"))&&"MPD"===u.documentElement.tagName?u.documentElement:null}catch{}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return t},qs=W(7459),go=W.n(qs),Ks=sn([73,68,51]),da=function g(a,o){return void 0===o&&(o=0),(a=sn(a)).length-o<10||!Dn(a,Ks,{offset:o})?o:(o+=function(a,o){void 0===o&&(o=0);var t=(a=sn(a))[o+6]<<21|a[o+7]<<14|a[o+8]<<7|a[o+9];return(16&a[o+5])>>4?t+20:t+10}(a,o),g(a,o))},Vs=(new Uint8Array([79,112,117,115,72,101,97,100]),function(a){return"string"==typeof a?rr(a):a}),Mo=function(a){a=sn(a);for(var o=[],u=0;a.length>u;){var t=a[u],s=0,h=0,v=a[++h];for(h++;128&v;)s=(127&v)<<7,v=a[h],h++;s+=127&v;for(var S=0;S<Eo.length;S++){var x=Eo[S];if(t===x.id){o.push((0,x.parser)(a.subarray(h,h+s)));break}}u+=s+h}return o};Eo=[{id:3,parser:function(a){var o={tag:3,id:a[0]<<8|a[1],flags:a[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&o.flags&&(o.dependsOnEsId=a[o.size]<<8|a[o.size+1],o.size+=2),64&o.flags){var u=a[o.size];o.url=function(a){if(!a)return"";a=Array.prototype.slice.call(a);var o=String.fromCharCode.apply(null,sn(a));try{return decodeURIComponent(escape(o))}catch{}return o}(a.subarray(o.size+1,o.size+1+u)),o.size+=u}return 32&o.flags&&(o.ocrEsId=a[o.size]<<8|a[o.size+1],o.size+=2),o.descriptors=Mo(a.subarray(o.size))||[],o}},{id:4,parser:function(a){return{tag:4,oti:a[0],streamType:a[1],bufferSize:a[2]<<16|a[3]<<8|a[4],maxBitrate:a[5]<<24|a[6]<<16|a[7]<<8|a[8],avgBitrate:a[9]<<24|a[10]<<16|a[11]<<8|a[12],descriptors:Mo(a.subarray(13))}}},{id:5,parser:function(a){return{tag:5,bytes:a}}},{id:6,parser:function(a){return{tag:6,bytes:a}}}];var Ji=function g(a,o,u){void 0===u&&(u=!1),o=function(a){return Array.isArray(a)?a.map(function(o){return Vs(o)}):[Vs(a)]}(o),a=sn(a);var t=[];if(!o.length)return t;for(var s=0;s<a.length;){var h=(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0,v=a.subarray(s+4,s+8);if(0===h)break;var S=s+h;if(S>a.length){if(u)break;S=a.length}var x=a.subarray(s+8,S);Dn(v,o[0])&&(1===o.length?t.push(x):t.push.apply(t,g(x,o.slice(1),u))),s=S}return t},fr={EBML:sn([26,69,223,163]),DocType:sn([66,130]),Segment:sn([24,83,128,103]),SegmentInfo:sn([21,73,169,102]),Tracks:sn([22,84,174,107]),Track:sn([174]),TrackNumber:sn([215]),DefaultDuration:sn([35,227,131]),TrackEntry:sn([174]),TrackType:sn([131]),FlagDefault:sn([136]),CodecID:sn([134]),CodecPrivate:sn([99,162]),VideoTrack:sn([224]),AudioTrack:sn([225]),Cluster:sn([31,67,182,117]),Timestamp:sn([231]),TimestampScale:sn([42,215,177]),BlockGroup:sn([160]),BlockDuration:sn([155]),Block:sn([161]),SimpleBlock:sn([163])},ur=[128,64,32,16,8,4,2,1],wa=function(a,o,u,t){void 0===u&&(u=!0),void 0===t&&(t=!1);var s=function(a){for(var o=1,u=0;u<ur.length&&!(a&ur[u]);u++)o++;return o}(a[o]),h=a.subarray(o,o+s);return u&&((h=Array.prototype.slice.call(a,o,o+s))[0]^=ur[s-1]),{length:s,value:Mn(h,{signed:t}),bytes:h}},fa=function g(a){return"string"==typeof a?a.match(/.{1,2}/g).map(function(o){return g(o)}):"number"==typeof a?function(a,o){var t=(void 0===o?{}:o).le,s=void 0!==t&&t;("bigint"!=typeof a&&"number"!=typeof a||"number"==typeof a&&a!=a)&&(a=0);for(var h=function(a){return Math.ceil(function(a){return a.toString(2).length}(a)/8)}(a=Un(a)),v=new Uint8Array(new ArrayBuffer(h)),S=0;S<h;S++){var x=s?S:Math.abs(S+1-v.length);v[x]=Number(a/ki[S]&Un(255)),a<0&&(v[x]=Math.abs(~v[x]),v[x]-=0===S?1:2)}return v}(a):a},Au=function g(a,o,u){if(u>=o.length)return o.length;var t=wa(o,u,!1);if(Dn(a.bytes,t.bytes))return u;var s=wa(o,u+t.length);return g(a,o,u+s.length+s.value+t.length)},Ti=function g(a,o){o=function(a){return Array.isArray(a)?a.map(function(o){return fa(o)}):[fa(a)]}(o),a=sn(a);var u=[];if(!o.length)return u;for(var t=0;t<a.length;){var s=wa(a,t,!1),h=wa(a,t+s.length),v=t+s.length+h.length;127===h.value&&(h.value=Au(s,a,v),h.value!==a.length&&(h.value-=v));var x=a.subarray(v,v+h.value>a.length?a.length:v+h.value);Dn(o[0],s.bytes)&&(1===o.length?u.push(x):u=u.concat(g(x,o.slice(1)))),t+=s.length+h.length+x.length}return u},ea=sn([0,0,0,1]),ta=sn([0,0,1]),ds=sn([0,0,3]),ie=function(a){for(var o=[],u=1;u<a.length-2;)Dn(a.subarray(u,u+3),ds)&&(o.push(u+2),u++),u++;if(0===o.length)return a;var t=a.length-o.length,s=new Uint8Array(t),h=0;for(u=0;u<t;h++,u++)h===o[0]&&(h++,o.shift()),s[u]=a[h];return s},Q=function(a,o,u,t){void 0===t&&(t=1/0),a=sn(a),u=[].concat(u);for(var h,s=0,v=0;s<a.length&&(v<t||h);){var S=void 0;if(Dn(a.subarray(s),ea)?S=4:Dn(a.subarray(s),ta)&&(S=3),S){if(v++,h)return ie(a.subarray(h,s));var x=void 0;"h264"===o?x=31&a[s+S]:"h265"===o&&(x=a[s+S]>>1&63),-1!==u.indexOf(x)&&(h=s+S),s+=S+("h264"===o?1:2)}else s++}return a.subarray(0,0)},Ut={webm:sn([119,101,98,109]),matroska:sn([109,97,116,114,111,115,107,97]),flac:sn([102,76,97,67]),ogg:sn([79,103,103,83]),ac3:sn([11,119]),riff:sn([82,73,70,70]),avi:sn([65,86,73]),wav:sn([87,65,86,69]),"3gp":sn([102,116,121,112,51,103]),mp4:sn([102,116,121,112]),fmp4:sn([115,116,121,112]),mov:sn([102,116,121,112,113,116]),moov:sn([109,111,111,118]),moof:sn([109,111,111,102])},re={aac:function(a){var o=da(a);return Dn(a,[255,16],{offset:o,mask:[255,22]})},mp3:function(a){var o=da(a);return Dn(a,[255,2],{offset:o,mask:[255,6]})},webm:function(a){var o=Ti(a,[fr.EBML,fr.DocType])[0];return Dn(o,Ut.webm)},mkv:function(a){var o=Ti(a,[fr.EBML,fr.DocType])[0];return Dn(o,Ut.matroska)},mp4:function(a){return!re["3gp"](a)&&!re.mov(a)&&(!!(Dn(a,Ut.mp4,{offset:4})||Dn(a,Ut.fmp4,{offset:4})||Dn(a,Ut.moof,{offset:4})||Dn(a,Ut.moov,{offset:4}))||void 0)},mov:function(a){return Dn(a,Ut.mov,{offset:4})},"3gp":function(a){return Dn(a,Ut["3gp"],{offset:4})},ac3:function(a){var o=da(a);return Dn(a,Ut.ac3,{offset:o})},ts:function(a){if(a.length<189&&a.length>=1)return 71===a[0];for(var o=0;o+188<a.length&&o<188;){if(71===a[o]&&71===a[o+188])return!0;o+=1}return!1},flac:function(a){var o=da(a);return Dn(a,Ut.flac,{offset:o})},ogg:function(a){return Dn(a,Ut.ogg)},avi:function(a){return Dn(a,Ut.riff)&&Dn(a,Ut.avi,{offset:8})},wav:function(a){return Dn(a,Ut.riff)&&Dn(a,Ut.wav,{offset:8})},h264:function(a){return function(a,o,u){return Q(a,"h264",7,3)}(a).length},h265:function(a){return function(a,o,u){return Q(a,"h265",[32,33],3)}(a).length}},J=Object.keys(re).filter(function(g){return"ts"!==g&&"h264"!==g&&"h265"!==g}).concat(["ts","h264","h265"]);J.forEach(function(g){var a=re[g];re[g]=function(o){return a(sn(o))}});for(var Ns,Oe=re,Je=function(a){a=sn(a);for(var o=0;o<J.length;o++){var u=J[o];if(Oe[u](a))return u}return""},Nt=W(6277),Hn={},Tn=function(a,o){return Hn[a]=Hn[a]||[],o&&(Hn[a]=Hn[a].concat(o)),Hn[a]},Gr=function(a,o){var u=Tn(a).indexOf(o);return!(u<=-1||(Hn[a]=Hn[a].slice(),Hn[a].splice(u,1),0))},Vi={prefixed:!0},Oi=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Hi=Oi[0],wi=0;wi<Oi.length;wi++)if(Oi[wi][1]in Ae()){Ns=Oi[wi];break}if(Ns){for(var ro=0;ro<Ns.length;ro++)Vi[Hi[ro]]=Ns[ro];Vi.prefixed=Ns[0]!==Hi[0]}var mi=[],Dr=function Ts(g){var o,a="info",u=function(){for(var s=arguments.length,h=new Array(s),v=0;v<s;v++)h[v]=arguments[v];o("log",a,h)};return o=function(a,o){return function(u,t,s){var h=o.levels[t],v=new RegExp("^("+h+")$");if("log"!==u&&s.unshift(u.toUpperCase()+":"),s.unshift(a+":"),mi){mi.push([].concat(s));var S=mi.length-1e3;mi.splice(0,S>0?S:0)}if(se().console){var x=se().console[u];!x&&"debug"===u&&(x=se().console.info||se().console.log),x&&h&&v.test(u)&&x[Array.isArray(s)?"apply":"call"](se().console,s)}}}(g,u),u.createLogger=function(t){return Ts(g+": "+t)},u.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},u.level=function(t){if("string"==typeof t){if(!u.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');a=t}return a},(u.history=function(){return mi?[].concat(mi):[]}).filter=function(t){return(mi||[]).filter(function(s){return new RegExp(".*"+t+".*").test(s[0])})},u.history.clear=function(){mi&&(mi.length=0)},u.history.disable=function(){null!==mi&&(mi.length=0,mi=null)},u.history.enable=function(){null===mi&&(mi=[])},u.error=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return o("error",a,s)},u.warn=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return o("warn",a,s)},u.debug=function(){for(var t=arguments.length,s=new Array(t),h=0;h<t;h++)s[h]=arguments[h];return o("debug",a,s)},u}("VIDEOJS"),Oo=Dr.createLogger,B=Object.prototype.toString,ge=function(a){return Ot(a)?Object.keys(a):[]};function z(g,a){ge(g).forEach(function(o){return a(g[o],o)})}function et(g){for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];return Object.assign?Ie.apply(void 0,[g].concat(o)):(o.forEach(function(t){!t||z(t,function(s,h){g[h]=s})}),g)}function Ot(g){return!!g&&"object"==typeof g}function Kt(g){return Ot(g)&&"[object Object]"===B.call(g)&&g.constructor===Object}function Bn(g,a){if(!g||!a)return"";if("function"==typeof se().getComputedStyle){var o;try{o=se().getComputedStyle(g)}catch{return""}return o?o.getPropertyValue(a)||o[a]:""}return""}var Cr=se().navigator&&se().navigator.userAgent||"",Ii=/AppleWebKit\/([\d.]+)/i.exec(Cr),Di=Ii?parseFloat(Ii.pop()):null,fi=/iPod/i.test(Cr),io=function(){var g=Cr.match(/OS (\d+)_/i);return g&&g[1]?g[1]:null}(),li=/Android/i.test(Cr),es=function(){var g=Cr.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!g)return null;var a=g[1]&&parseFloat(g[1]),o=g[2]&&parseFloat(g[2]);return a&&o?parseFloat(g[1]+"."+g[2]):a||null}(),Fa=li&&es<5&&Di<537,mo=/Firefox/i.test(Cr),Ro=/Edg/i.test(Cr),wo=!Ro&&(/Chrome/i.test(Cr)||/CriOS/i.test(Cr)),ma=function(){var g=Cr.match(/(Chrome|CriOS)\/(\d+)/);return g&&g[2]?parseFloat(g[2]):null}(),Ho=function(){var g=/MSIE\s(\d+)\.\d/.exec(Cr),a=g&&parseFloat(g[1]);return!a&&/Trident\/7.0/i.test(Cr)&&/rv:11.0/.test(Cr)&&(a=11),a}(),na=/Safari/i.test(Cr)&&!wo&&!li&&!Ro,Co=/Windows/i.test(Cr),fs=Boolean(Mu()&&("ontouchstart"in se()||se().navigator.maxTouchPoints||se().DocumentTouch&&se().document instanceof se().DocumentTouch)),Vu=/iPad/i.test(Cr)||na&&fs&&!/iPhone/i.test(Cr),ku=/iPhone/i.test(Cr)&&!Vu,$o=ku||Vu||fi,Tl=(na||$o)&&!wo,ul=Object.freeze({__proto__:null,IS_IPOD:fi,IOS_VERSION:io,IS_ANDROID:li,ANDROID_VERSION:es,IS_NATIVE_ANDROID:Fa,IS_FIREFOX:mo,IS_EDGE:Ro,IS_CHROME:wo,CHROME_VERSION:ma,IE_VERSION:Ho,IS_SAFARI:na,IS_WINDOWS:Co,TOUCH_ENABLED:fs,IS_IPAD:Vu,IS_IPHONE:ku,IS_IOS:$o,IS_ANY_SAFARI:Tl});function Hl(g){return"string"==typeof g&&Boolean(g.trim())}function Hu(g){if(g.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Mu(){return Ae()===se().document}function du(g){return Ot(g)&&1===g.nodeType}function Uc(){try{return se().parent!==se().self}catch{return!0}}function so(g){return function(a,o){if(!Hl(a))return Ae()[g](null);Hl(o)&&(o=Ae().querySelector(o));var u=du(o)?o:Ae();return u[g]&&u[g](a)}}function gr(g,a,o,u){void 0===g&&(g="div"),void 0===a&&(a={}),void 0===o&&(o={});var t=Ae().createElement(g);return Object.getOwnPropertyNames(a).forEach(function(s){var h=a[s];-1!==s.indexOf("aria-")||"role"===s||"type"===s?(Dr.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+s+" to "+h+"."),t.setAttribute(s,h)):"textContent"===s?No(t,h):(t[s]!==h||"tabIndex"===s)&&(t[s]=h)}),Object.getOwnPropertyNames(o).forEach(function(s){t.setAttribute(s,o[s])}),u&&Sl(t,u),t}function No(g,a){return typeof g.textContent>"u"?g.innerText=a:g.textContent=a,g}function oo(g,a){a.firstChild?a.insertBefore(g,a.firstChild):a.appendChild(g)}function ja(g,a){return Hu(a),g.classList?g.classList.contains(a):function fc(g){return new RegExp("(^|\\s)"+g+"($|\\s)")}(a).test(g.className)}function $u(g,a){return g.classList?g.classList.add(a):ja(g,a)||(g.className=(g.className+" "+a).trim()),g}function En(g,a){return g?(g.classList?g.classList.remove(a):(Hu(a),g.className=g.className.split(/\s+/).filter(function(o){return o!==a}).join(" ")),g):(Dr.warn("removeClass was called with an element that doesn't exist"),null)}function Es(g,a,o){var u=ja(g,a);if("function"==typeof o&&(o=o(g,a)),"boolean"!=typeof o&&(o=!u),o!==u)return o?$u(g,a):En(g,a),g}function vs(g,a){Object.getOwnPropertyNames(a).forEach(function(o){var u=a[o];null===u||typeof u>"u"||!1===u?g.removeAttribute(o):g.setAttribute(o,!0===u?"":u)})}function Ss(g){var a={};if(g&&g.attributes&&g.attributes.length>0)for(var u=g.attributes,t=u.length-1;t>=0;t--){var s=u[t].name,h=u[t].value;("boolean"==typeof g[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(h=null!==h),a[s]=h}return a}function Jn(g,a){return g.getAttribute(a)}function dr(g,a,o){g.setAttribute(a,o)}function hu(g,a){g.removeAttribute(a)}function $n(){Ae().body.focus(),Ae().onselectstart=function(){return!1}}function Gt(){Ae().onselectstart=function(){return!0}}function ln(g){if(g&&g.getBoundingClientRect&&g.parentNode){var a=g.getBoundingClientRect(),o={};return["bottom","height","left","right","top","width"].forEach(function(u){void 0!==a[u]&&(o[u]=a[u])}),o.height||(o.height=parseFloat(Bn(g,"height"))),o.width||(o.width=parseFloat(Bn(g,"width"))),o}}function Ls(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};for(var a=g.offsetWidth,o=g.offsetHeight,u=0,t=0;g.offsetParent&&g!==Ae()[Vi.fullscreenElement];)u+=g.offsetLeft,t+=g.offsetTop,g=g.offsetParent;return{left:u,top:t,width:a,height:o}}function Qa(g,a){var o={x:0,y:0};if($o)for(var u=g;u&&"html"!==u.nodeName.toLowerCase();){var t=Bn(u,"transform");if(/^matrix/.test(t)){var s=t.slice(7,-1).split(/,\s/).map(Number);o.x+=s[4],o.y+=s[5]}else if(/^matrix3d/.test(t)){var h=t.slice(9,-1).split(/,\s/).map(Number);o.x+=h[12],o.y+=h[13]}u=u.parentNode}var v={},S=Ls(a.target),x=Ls(g),L=x.width,Y=a.offsetY-(x.top-S.top),Te=a.offsetX-(x.left-S.left);return a.changedTouches&&(Te=a.changedTouches[0].pageX-x.left,Y=a.changedTouches[0].pageY+x.top,$o&&(Te-=o.x,Y-=o.y)),v.y=1-Math.max(0,Math.min(1,Y/x.height)),v.x=Math.max(0,Math.min(1,Te/L)),v}function pc(g){return Ot(g)&&3===g.nodeType}function fu(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function El(g){return"function"==typeof g&&(g=g()),(Array.isArray(g)?g:[g]).map(function(a){return"function"==typeof a&&(a=a()),du(a)||pc(a)?a:"string"==typeof a&&/\S/.test(a)?Ae().createTextNode(a):void 0}).filter(function(a){return a})}function Sl(g,a){return El(a).forEach(function(o){return g.appendChild(o)}),g}function Ds(g,a){return Sl(fu(g),a)}function Ca(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||!(0!==g.button||1!==g.buttons)}var Lr,Xa=so("querySelector"),wl=so("querySelectorAll"),pu=Object.freeze({__proto__:null,isReal:Mu,isEl:du,isInFrame:Uc,createEl:gr,textContent:No,prependTo:oo,hasClass:ja,addClass:$u,removeClass:En,toggleClass:Es,setAttributes:vs,getAttributes:Ss,getAttribute:Jn,setAttribute:dr,removeAttribute:hu,blockTextSelection:$n,unblockTextSelection:Gt,getBoundingClientRect:ln,findPosition:Ls,getPointerPosition:Qa,isTextNode:pc,emptyEl:fu,normalizeContent:El,appendContent:Sl,insertContent:Ds,isSingleLeftClick:Ca,$:Xa,$$:wl}),Ja=!1,Gu=function(){if(!1!==Lr.options.autoSetup){var a=Array.prototype.slice.call(Ae().getElementsByTagName("video")),o=Array.prototype.slice.call(Ae().getElementsByTagName("audio")),u=Array.prototype.slice.call(Ae().getElementsByTagName("video-js")),t=a.concat(o,u);if(t&&t.length>0)for(var s=0,h=t.length;s<h;s++){var v=t[s];if(!v||!v.getAttribute){Cl(1);break}void 0===v.player&&null!==v.getAttribute("data-setup")&&Lr(v)}else Ja||Cl(1)}};function Cl(g,a){!Mu()||(a&&(Lr=a),se().setTimeout(Gu,g))}function ts(){Ja=!0,se().removeEventListener("load",ts)}Mu()&&("complete"===Ae().readyState?ts():se().addEventListener("load",ts));var Pn,Er=function(a){var o=Ae().createElement("style");return o.className=a,o},gu=function(a,o){a.styleSheet?a.styleSheet.cssText=o:a.textContent=o},Ua=3;function Ai(){return Ua++}se().WeakMap||(Pn=function(){function g(){this.vdata="vdata"+Math.floor(se().performance&&se().performance.now()||Date.now()),this.data={}}var a=g.prototype;return a.set=function(u,t){var s=u[this.vdata]||Ai();return u[this.vdata]||(u[this.vdata]=s),this.data[s]=t,this},a.get=function(u){var t=u[this.vdata];if(t)return this.data[t];Dr("We have no data for this element",u)},a.has=function(u){return u[this.vdata]in this.data},a.delete=function(u){var t=u[this.vdata];t&&(delete this.data[t],delete u[this.vdata])},g}());var ps=se().WeakMap?new WeakMap:new Pn;function Ba(g,a){if(ps.has(g)){var o=ps.get(g);0===o.handlers[a].length&&(delete o.handlers[a],g.removeEventListener?g.removeEventListener(a,o.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+a,o.dispatcher)),Object.getOwnPropertyNames(o.handlers).length<=0&&(delete o.handlers,delete o.dispatcher,delete o.disabled),0===Object.getOwnPropertyNames(o).length&&ps.delete(g)}}function ra(g,a,o,u){o.forEach(function(t){g(a,t,u)})}function mu(g){if(g.fixed_)return g;function a(){return!0}function o(){return!1}if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){var u=g||se().event;for(var t in g={},u)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&u.preventDefault||(g[t]=u[t]));if(g.target||(g.target=g.srcElement||Ae()),g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement),g.preventDefault=function(){u.preventDefault&&u.preventDefault(),g.returnValue=!1,u.returnValue=!1,g.defaultPrevented=!0},g.defaultPrevented=!1,g.stopPropagation=function(){u.stopPropagation&&u.stopPropagation(),g.cancelBubble=!0,u.cancelBubble=!0,g.isPropagationStopped=a},g.isPropagationStopped=o,g.stopImmediatePropagation=function(){u.stopImmediatePropagation&&u.stopImmediatePropagation(),g.isImmediatePropagationStopped=a,g.stopPropagation()},g.isImmediatePropagationStopped=o,null!=g.clientX){var s=Ae().documentElement,h=Ae().body;g.pageX=g.clientX+(s&&s.scrollLeft||h&&h.scrollLeft||0)-(s&&s.clientLeft||h&&h.clientLeft||0),g.pageY=g.clientY+(s&&s.scrollTop||h&&h.scrollTop||0)-(s&&s.clientTop||h&&h.clientTop||0)}g.which=g.charCode||g.keyCode,null!=g.button&&(g.button=1&g.button?0:4&g.button?1:2&g.button?2:0)}return g.fixed_=!0,g}var Li,gc=["touchstart","touchmove"];function va(g,a,o){if(Array.isArray(a))return ra(va,g,a,o);ps.has(g)||ps.set(g,{});var u=ps.get(g);if(u.handlers||(u.handlers={}),u.handlers[a]||(u.handlers[a]=[]),o.guid||(o.guid=Ai()),u.handlers[a].push(o),u.dispatcher||(u.disabled=!1,u.dispatcher=function(s,h){if(!u.disabled){s=mu(s);var v=u.handlers[s.type];if(v)for(var S=v.slice(0),x=0,L=S.length;x<L&&!s.isImmediatePropagationStopped();x++)try{S[x].call(g,s,h)}catch(ne){Dr.error(ne)}}}),1===u.handlers[a].length)if(g.addEventListener){var t=!1;(function(){if("boolean"!=typeof Li){Li=!1;try{var a=Object.defineProperty({},"passive",{get:function(){Li=!0}});se().addEventListener("test",null,a),se().removeEventListener("test",null,a)}catch{}}return Li})()&&gc.indexOf(a)>-1&&(t={passive:!0}),g.addEventListener(a,u.dispatcher,t)}else g.attachEvent&&g.attachEvent("on"+a,u.dispatcher)}function Go(g,a,o){if(ps.has(g)){var u=ps.get(g);if(u.handlers){if(Array.isArray(a))return ra(Go,g,a,o);var t=function(x,L){u.handlers[L]=[],Ba(x,L)};if(void 0===a){for(var s in u.handlers)Object.prototype.hasOwnProperty.call(u.handlers||{},s)&&t(g,s);return}var h=u.handlers[a];if(h){if(!o)return void t(g,a);if(o.guid)for(var v=0;v<h.length;v++)h[v].guid===o.guid&&h.splice(v--,1);Ba(g,a)}}}}function xo(g,a,o){var u=ps.has(g)?ps.get(g):{},t=g.parentNode||g.ownerDocument;if("string"==typeof a?a={type:a,target:g}:a.target||(a.target=g),a=mu(a),u.dispatcher&&u.dispatcher.call(g,a,o),t&&!a.isPropagationStopped()&&!0===a.bubbles)xo.call(null,t,a,o);else if(!t&&!a.defaultPrevented&&a.target&&a.target[a.type]){ps.has(a.target)||ps.set(a.target,{});var s=ps.get(a.target);a.target[a.type]&&(s.disabled=!0,"function"==typeof a.target[a.type]&&a.target[a.type](),s.disabled=!1)}return!a.defaultPrevented}function ll(g,a,o){if(Array.isArray(a))return ra(ll,g,a,o);var u=function t(){Go(g,a,t),o.apply(this,arguments)};u.guid=o.guid=o.guid||Ai(),va(g,a,u)}function Mh(g,a,o){var u=function t(){Go(g,a,t),o.apply(this,arguments)};u.guid=o.guid=o.guid||Ai(),va(g,a,u)}var $l,Wu=Object.freeze({__proto__:null,fixEvent:mu,on:va,off:Go,trigger:xo,one:ll,any:Mh}),ys=function(a,o,u){o.guid||(o.guid=Ai());var t=o.bind(a);return t.guid=u?u+"_"+o.guid:o.guid,t},At=function(a,o){var u=se().performance.now();return function(){var h=se().performance.now();h-u>=o&&(a.apply(void 0,arguments),u=h)}},Fi=function(){};Fi.prototype.allowedEvents_={},Fi.prototype.addEventListener=Fi.prototype.on=function(g,a){var o=this.addEventListener;this.addEventListener=function(){},va(this,g,a),this.addEventListener=o},Fi.prototype.removeEventListener=Fi.prototype.off=function(g,a){Go(this,g,a)},Fi.prototype.one=function(g,a){var o=this.addEventListener;this.addEventListener=function(){},ll(this,g,a),this.addEventListener=o},Fi.prototype.any=function(g,a){var o=this.addEventListener;this.addEventListener=function(){},Mh(this,g,a),this.addEventListener=o},Fi.prototype.dispatchEvent=Fi.prototype.trigger=function(g){var a=g.type||g;"string"==typeof g&&(g={type:a}),g=mu(g),this.allowedEvents_[a]&&this["on"+a]&&this["on"+a](g),xo(this,g)},Fi.prototype.queueTrigger=function(g){var a=this;$l||($l=new Map);var o=g.type||g,u=$l.get(this);u||$l.set(this,u=new Map);var t=u.get(o);u.delete(o),se().clearTimeout(t);var s=se().setTimeout(function(){0===u.size&&(u=null,$l.delete(a)),a.trigger(g)},0);u.set(o,s)};var eu=function(a){return"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a},ss=function(a){return a instanceof Fi||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(o){return"function"==typeof a[o]})},vu=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},nu=function(a,o,u){if(!a||!a.nodeName&&!ss(a))throw new Error("Invalid target for "+eu(o)+"#"+u+"; must be a DOM node or evented object.")},ru=function(a,o,u){if(!vu(a))throw new Error("Invalid event type for "+eu(o)+"#"+u+"; must be a non-empty string or array.")},mc=function(a,o,u){if("function"!=typeof a)throw new Error("Invalid listener for "+eu(o)+"#"+u+"; must be a function.")},M=function(a,o,u){var s,h,v,t=o.length<3||o[0]===a||o[0]===a.eventBusEl_;return t?(s=a.eventBusEl_,o.length>=3&&o.shift(),h=o[0],v=o[1]):(s=o[0],h=o[1],v=o[2]),nu(s,a,u),ru(h,a,u),mc(v,a,u),{isTargetingSelf:t,target:s,type:h,listener:v=ys(a,v)}},O=function(a,o,u,t){nu(a,a,o),a.nodeName?Wu[o](a,u,t):a[o](u,t)},D={on:function(){for(var a=this,o=arguments.length,u=new Array(o),t=0;t<o;t++)u[t]=arguments[t];var s=M(this,u,"on"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(O(v,"on",S,x),!h){var L=function(){return a.off(v,S,x)};L.guid=x.guid;var ne=function(){return a.off("dispose",L)};ne.guid=x.guid,O(this,"on","dispose",L),O(v,"on","dispose",ne)}},one:function(){for(var a=this,o=arguments.length,u=new Array(o),t=0;t<o;t++)u[t]=arguments[t];var s=M(this,u,"one"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(h)O(v,"one",S,x);else{var L=function ne(){a.off(v,S,ne);for(var Y=arguments.length,Te=new Array(Y),je=0;je<Y;je++)Te[je]=arguments[je];x.apply(null,Te)};L.guid=x.guid,O(v,"one",S,L)}},any:function(){for(var a=this,o=arguments.length,u=new Array(o),t=0;t<o;t++)u[t]=arguments[t];var s=M(this,u,"any"),h=s.isTargetingSelf,v=s.target,S=s.type,x=s.listener;if(h)O(v,"any",S,x);else{var L=function ne(){a.off(v,S,ne);for(var Y=arguments.length,Te=new Array(Y),je=0;je<Y;je++)Te[je]=arguments[je];x.apply(null,Te)};L.guid=x.guid,O(v,"any",S,L)}},off:function(a,o,u){if(!a||vu(a))Go(this.eventBusEl_,a,o);else{var t=a,s=o;nu(t,this,"off"),ru(s,this,"off"),mc(u,this,"off"),u=ys(this,u),this.off("dispose",u),t.nodeName?(Go(t,s,u),Go(t,"dispose",u)):ss(t)&&(t.off(s,u),t.off("dispose",u))}},trigger:function(a,o){if(nu(this.eventBusEl_,this,"trigger"),!vu(a&&"string"!=typeof a?a.type:a)){var t="Invalid event type for "+eu(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!a)throw new Error(t);(this.log||Dr).error(t)}return xo(this.eventBusEl_,a,o)}};function U(g,a){void 0===a&&(a={});var u=a.eventBusKey;if(u){if(!g[u].nodeName)throw new Error('The eventBusKey "'+u+'" does not refer to an element.');g.eventBusEl_=g[u]}else g.eventBusEl_=gr("span",{className:"vjs-event-bus"});return et(g,D),g.eventedCallbacks&&g.eventedCallbacks.forEach(function(t){t()}),g.on("dispose",function(){g.off(),[g,g.el_,g.eventBusEl_].forEach(function(t){t&&ps.has(t)&&ps.delete(t)}),se().setTimeout(function(){g.eventBusEl_=null},0)}),g}var X={state:{},setState:function(a){var u,o=this;return"function"==typeof a&&(a=a()),z(a,function(t,s){o.state[s]!==t&&((u=u||{})[s]={from:o.state[s],to:t}),o.state[s]=t}),u&&ss(this)&&this.trigger({changes:u,type:"statechanged"}),u}};function _e(g,a){return et(g,X),g.state=et({},g.state,a),"function"==typeof g.handleStateChanged&&ss(g)&&g.on("statechanged",g.handleStateChanged),g}var Xe=function(a){return"string"!=typeof a?a:a.replace(/./,function(o){return o.toLowerCase()})},Qe=function(a){return"string"!=typeof a?a:a.replace(/./,function(o){return o.toUpperCase()})};function bn(){for(var g={},a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return o.forEach(function(t){!t||z(t,function(s,h){Kt(s)?(Kt(g[h])||(g[h]={}),g[h]=bn(g[h],s)):g[h]=s})}),g}var Vr=function(){function g(){this.map_={}}var a=g.prototype;return a.has=function(u){return u in this.map_},a.delete=function(u){var t=this.has(u);return delete this.map_[u],t},a.set=function(u,t){return this.map_[u]=t,this},a.forEach=function(u,t){for(var s in this.map_)u.call(t,this.map_[s],s,this)},g}(),Gn=se().Map?se().Map:Vr,ji=function(){function g(){this.set_={}}var a=g.prototype;return a.has=function(u){return u in this.set_},a.delete=function(u){var t=this.has(u);return delete this.set_[u],t},a.add=function(u){return this.set_[u]=1,this},a.forEach=function(u,t){for(var s in this.set_)u.call(t,s,s,this)},g}(),Ui=se().Set?se().Set:ji,gn=function(){function g(o,u,t){var s=this;if(this.player_=!o&&this.play?o=this:o,this.isDisposed_=!1,this.parentComponent_=null,this.options_=bn({},this.options_),u=this.options_=bn(this.options_,u),this.id_=u.id||u.el&&u.el.id,!this.id_){var h=o&&o.id&&o.id()||"no_player";this.id_=h+"_component_"+Ai()}this.name_=u.name||null,u.el?this.el_=u.el:!1!==u.createEl&&(this.el_=this.createEl()),u.className&&this.el_&&u.className.split(" ").forEach(function(v){return s.addClass(v)}),!1!==u.evented&&(U(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),_e(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Ui,this.setIntervalIds_=new Ui,this.rafIds_=new Ui,this.namedRafs_=new Gn,this.clearingTimersOnDispose_=!1,!1!==u.initChildren&&this.initChildren(),this.ready(t),!1!==u.reportTouchActivity&&this.enableTouchActivity()}var a=g.prototype;return a.dispose=function(u){if(void 0===u&&(u={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(u.restoreEl?this.el_.parentNode.replaceChild(u.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},a.isDisposed=function(){return Boolean(this.isDisposed_)},a.player=function(){return this.player_},a.options=function(u){return u?(this.options_=bn(this.options_,u),this.options_):this.options_},a.el=function(){return this.el_},a.createEl=function(u,t,s){return gr(u,t,s)},a.localize=function(u,t,s){void 0===s&&(s=u);var h=this.player_.language&&this.player_.language(),v=this.player_.languages&&this.player_.languages(),S=v&&v[h],x=h&&h.split("-")[0],L=v&&v[x],ne=s;return S&&S[u]?ne=S[u]:L&&L[u]&&(ne=L[u]),t&&(ne=ne.replace(/\{(\d+)\}/g,function(Y,Te){var je=t[Te-1],Ve=je;return typeof je>"u"&&(Ve=Y),Ve})),ne},a.handleLanguagechange=function(){},a.contentEl=function(){return this.contentEl_||this.el_},a.id=function(){return this.id_},a.name=function(){return this.name_},a.children=function(){return this.children_},a.getChildById=function(u){return this.childIndex_[u]},a.getChild=function(u){if(u)return this.childNameIndex_[u]},a.getDescendant=function(){for(var u=arguments.length,t=new Array(u),s=0;s<u;s++)t[s]=arguments[s];t=t.reduce(function(S,x){return S.concat(x)},[]);for(var h=this,v=0;v<t.length;v++)if(!(h=h.getChild(t[v]))||!h.getChild)return;return h},a.addChild=function(u,t,s){var h,v;if(void 0===t&&(t={}),void 0===s&&(s=this.children_.length),"string"==typeof u){v=Qe(u);var S=t.componentClass||v;t.name=v;var x=g.getComponent(S);if(!x)throw new Error("Component "+S+" does not exist");if("function"!=typeof x)return null;h=new x(this.player_||this,t)}else h=u;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(s,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(v=v||h.name&&Qe(h.name()))&&(this.childNameIndex_[v]=h,this.childNameIndex_[Xe(v)]=h),"function"==typeof h.el&&h.el()){var L=null;this.children_[s+1]&&(this.children_[s+1].el_?L=this.children_[s+1].el_:du(this.children_[s+1])&&(L=this.children_[s+1])),this.contentEl().insertBefore(h.el(),L)}return h},a.removeChild=function(u){if("string"==typeof u&&(u=this.getChild(u)),u&&this.children_){for(var t=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===u){t=!0,this.children_.splice(s,1);break}if(t){u.parentComponent_=null,this.childIndex_[u.id()]=null,this.childNameIndex_[Qe(u.name())]=null,this.childNameIndex_[Xe(u.name())]=null;var h=u.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(u.el())}}},a.initChildren=function(){var u=this,t=this.options_.children;if(t){var v,s=this.options_,S=g.getComponent("Tech");(v=Array.isArray(t)?t:Object.keys(t)).concat(Object.keys(this.options_).filter(function(x){return!v.some(function(L){return"string"==typeof L?x===L:x===L.name})})).map(function(x){var L,ne;return"string"==typeof x?ne=t[L=x]||u.options_[L]||{}:(L=x.name,ne=x),{name:L,opts:ne}}).filter(function(x){var L=g.getComponent(x.opts.componentClass||Qe(x.name));return L&&!S.isTech(L)}).forEach(function(L){var ne=L.name,Y=L.opts;if(void 0!==s[ne]&&(Y=s[ne]),!1!==Y){!0===Y&&(Y={}),Y.playerOptions=u.options_.playerOptions;var Te=u.addChild(ne,Y);Te&&(u[ne]=Te)}})}},a.buildCSSClass=function(){return""},a.ready=function(u,t){if(void 0===t&&(t=!1),u){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(u);t?u.call(this):this.setTimeout(u,1)}},a.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var u=this.readyQueue_;this.readyQueue_=[],u&&u.length>0&&u.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},a.$=function(u,t){return Xa(u,t||this.contentEl())},a.$$=function(u,t){return wl(u,t||this.contentEl())},a.hasClass=function(u){return ja(this.el_,u)},a.addClass=function(u){$u(this.el_,u)},a.removeClass=function(u){En(this.el_,u)},a.toggleClass=function(u,t){Es(this.el_,u,t)},a.show=function(){this.removeClass("vjs-hidden")},a.hide=function(){this.addClass("vjs-hidden")},a.lockShowing=function(){this.addClass("vjs-lock-showing")},a.unlockShowing=function(){this.removeClass("vjs-lock-showing")},a.getAttribute=function(u){return Jn(this.el_,u)},a.setAttribute=function(u,t){dr(this.el_,u,t)},a.removeAttribute=function(u){hu(this.el_,u)},a.width=function(u,t){return this.dimension("width",u,t)},a.height=function(u,t){return this.dimension("height",u,t)},a.dimensions=function(u,t){this.width(u,!0),this.height(t)},a.dimension=function(u,t,s){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[u]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[u],v=h.indexOf("px");return parseInt(-1!==v?h.slice(0,v):this.el_["offset"+Qe(u)],10)},a.currentDimension=function(u){var t=0;if("width"!==u&&"height"!==u)throw new Error("currentDimension only accepts width or height value");if(t=Bn(this.el_,u),0===(t=parseFloat(t))||isNaN(t)){var s="offset"+Qe(u);t=this.el_[s]}return t},a.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},a.currentWidth=function(){return this.currentDimension("width")},a.currentHeight=function(){return this.currentDimension("height")},a.focus=function(){this.el_.focus()},a.blur=function(){this.el_.blur()},a.handleKeyDown=function(u){this.player_&&(Se().isEventKey(u,"Tab")||u.stopPropagation(),this.player_.handleKeyDown(u))},a.handleKeyPress=function(u){this.handleKeyDown(u)},a.emitTapEvents=function(){var v,u=0,t=null;this.on("touchstart",function(x){1===x.touches.length&&(t={pageX:x.touches[0].pageX,pageY:x.touches[0].pageY},u=se().performance.now(),v=!0)}),this.on("touchmove",function(x){if(x.touches.length>1)v=!1;else if(t){var L=x.touches[0].pageX-t.pageX,ne=x.touches[0].pageY-t.pageY;Math.sqrt(L*L+ne*ne)>10&&(v=!1)}});var S=function(){v=!1};this.on("touchleave",S),this.on("touchcancel",S),this.on("touchend",function(x){t=null,!0===v&&se().performance.now()-u<200&&(x.preventDefault(),this.trigger("tap"))})},a.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,u=ys(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){u(),this.clearInterval(t),t=this.setInterval(u,250)});var s=function(v){u(),this.clearInterval(t)};this.on("touchmove",u),this.on("touchend",s),this.on("touchcancel",s)}},a.setTimeout=function(u,t){var h,s=this;return u=ys(this,u),this.clearTimersOnDispose_(),h=se().setTimeout(function(){s.setTimeoutIds_.has(h)&&s.setTimeoutIds_.delete(h),u()},t),this.setTimeoutIds_.add(h),h},a.clearTimeout=function(u){return this.setTimeoutIds_.has(u)&&(this.setTimeoutIds_.delete(u),se().clearTimeout(u)),u},a.setInterval=function(u,t){u=ys(this,u),this.clearTimersOnDispose_();var s=se().setInterval(u,t);return this.setIntervalIds_.add(s),s},a.clearInterval=function(u){return this.setIntervalIds_.has(u)&&(this.setIntervalIds_.delete(u),se().clearInterval(u)),u},a.requestAnimationFrame=function(u){var s,t=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),u=ys(this,u),s=se().requestAnimationFrame(function(){t.rafIds_.has(s)&&t.rafIds_.delete(s),u()}),this.rafIds_.add(s),s):this.setTimeout(u,1e3/60)},a.requestNamedAnimationFrame=function(u,t){var s=this;if(!this.namedRafs_.has(u)){this.clearTimersOnDispose_(),t=ys(this,t);var h=this.requestAnimationFrame(function(){t(),s.namedRafs_.has(u)&&s.namedRafs_.delete(u)});return this.namedRafs_.set(u,h),u}},a.cancelNamedAnimationFrame=function(u){!this.namedRafs_.has(u)||(this.cancelAnimationFrame(this.namedRafs_.get(u)),this.namedRafs_.delete(u))},a.cancelAnimationFrame=function(u){return this.supportsRaf_?(this.rafIds_.has(u)&&(this.rafIds_.delete(u),se().cancelAnimationFrame(u)),u):this.clearTimeout(u)},a.clearTimersOnDispose_=function(){var u=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var h=t[1];u[t[0]].forEach(function(v,S){return u[h](S)})}),u.clearingTimersOnDispose_=!1}))},g.registerComponent=function(u,t){if("string"!=typeof u||!u)throw new Error('Illegal component name, "'+u+'"; must be a non-empty string.');var s=g.getComponent("Tech"),h=s&&s.isTech(t),v=g===t||g.prototype.isPrototypeOf(t.prototype);if(h||!v)throw new Error('Illegal component, "'+u+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");u=Qe(u),g.components_||(g.components_={});var x=g.getComponent("Player");if("Player"===u&&x&&x.players){var L=x.players,ne=Object.keys(L);if(L&&ne.length>0&&ne.map(function(Y){return L[Y]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return g.components_[u]=t,g.components_[Xe(u)]=t,t},g.getComponent=function(u){if(u&&g.components_)return g.components_[u]},g}();function Ei(g,a,o,u){return function xa(g,a,o){if("number"!=typeof a||a<0||a>o)throw new Error("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+a+") is non-numeric or out of bounds (0-"+o+").")}(g,u,o.length-1),o[u][a]}function ia(g){var a;return a=void 0===g||0===g.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:g.length,start:Ei.bind(null,"start",0,g),end:Ei.bind(null,"end",1,g)},se().Symbol&&se().Symbol.iterator&&(a[se().Symbol.iterator]=function(){return(g||[]).values()}),a}function Lo(g,a){return Array.isArray(g)?ia(g):void 0===g||void 0===a?ia():ia([[g,a]])}function Va(g,a){var u,t,o=0;if(!a)return 0;(!g||!g.length)&&(g=Lo(0,0));for(var s=0;s<g.length;s++)u=g.start(s),(t=g.end(s))>a&&(t=a),o+=t-u;return o/a}function vo(g){if(g instanceof vo)return g;"number"==typeof g?this.code=g:"string"==typeof g?this.message=g:Ot(g)&&("number"==typeof g.code&&(this.code=g.code),et(this,g)),this.message||(this.message=vo.defaultMessages[this.code]||"")}gn.prototype.supportsRaf_="function"==typeof se().requestAnimationFrame&&"function"==typeof se().cancelAnimationFrame,gn.registerComponent("Component",gn),vo.prototype.code=0,vo.prototype.message="",vo.prototype.status=null,vo.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vo.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var cl=0;cl<vo.errorTypes.length;cl++)vo[vo.errorTypes[cl]]=cl,vo.prototype[vo.errorTypes[cl]]=cl;function Io(g){return null!=g&&"function"==typeof g.then}function ya(g){Io(g)&&g.then(null,function(a){})}var Ia=function(a){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(u,t,s){return a[t]&&(u[t]=a[t]),u},{cues:a.cues&&Array.prototype.map.call(a.cues,function(u){return{startTime:u.startTime,endTime:u.endTime,text:u.text,id:u.id}})})},zu="vjs-modal-dialog",$i=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).handleKeyDown_=function(h){return s.handleKeyDown(h)},s.close_=function(h){return s.close(h)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=gr("div",{className:zu+"-content"},{role:"document"}),s.descEl_=gr("p",{className:zu+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),No(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},o.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,g.prototype.dispose.call(this)},o.buildCSSClass=function(){return zu+" vjs-hidden "+g.prototype.buildCSSClass.call(this)},o.label=function(){return this.localize(this.options_.label||"Modal Window")},o.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},o.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},o.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},o.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},o.closeable=function(t){if("boolean"==typeof t){var s=this.closeable_=!!t,h=this.getChild("closeButton");if(s&&!h){var v=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=v,this.on(h,"close",this.close_)}!s&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},o.fill=function(){this.fillWith(this.content())},o.fillWith=function(t){var s=this.contentEl(),h=s.parentNode,v=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(s),this.empty(),Ds(s,t),this.trigger("modalfill"),v?h.insertBefore(s,v):h.appendChild(s);var S=this.getChild("closeButton");S&&h.appendChild(S.el_)},o.empty=function(){this.trigger("beforemodalempty"),fu(this.contentEl()),this.trigger("modalempty")},o.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},o.conditionalFocus_=function(){var t=Ae().activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(t)||s===t)&&(this.previouslyActiveEl_=t,this.focus())},o.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},o.handleKeyDown=function(t){if(t.stopPropagation(),Se().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(Se().isEventKey(t,"Tab")){for(var v,s=this.focusableEls_(),h=this.el_.querySelector(":focus"),S=0;S<s.length;S++)if(h===s[S]){v=S;break}Ae().activeElement===this.el_&&(v=0),t.shiftKey&&0===v?(s[s.length-1].focus(),t.preventDefault()):!t.shiftKey&&v===s.length-1&&(s[0].focus(),t.preventDefault())}},o.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(s){return(s instanceof se().HTMLAnchorElement||s instanceof se().HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof se().HTMLInputElement||s instanceof se().HTMLSelectElement||s instanceof se().HTMLTextAreaElement||s instanceof se().HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof se().HTMLIFrameElement||s instanceof se().HTMLObjectElement||s instanceof se().HTMLEmbedElement||s.hasAttribute("tabindex")&&-1!==s.getAttribute("tabindex")||s.hasAttribute("contenteditable")})},a}(gn);$i.prototype.options_={pauseOnOpen:!0,temporary:!0},gn.registerComponent("ModalDialog",$i);var qu=function(g){function a(u){var t;void 0===u&&(u=[]),(t=g.call(this)||this).tracks_=[],Object.defineProperty(ut(t),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<u.length;s++)t.addTrack(u[s]);return t}$e(a,g);var o=a.prototype;return o.addTrack=function(t){var s=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){s.trigger({track:t,type:"labelchange",target:s})},ss(t)&&t.addEventListener("labelchange",t.labelchange_)},o.removeTrack=function(t){for(var s,h=0,v=this.length;h<v;h++)if(this[h]===t){(s=this[h]).off&&s.off(),this.tracks_.splice(h,1);break}!s||this.trigger({track:s,type:"removetrack",target:this})},o.getTrackById=function(t){for(var s=null,h=0,v=this.length;h<v;h++){var S=this[h];if(S.id===t){s=S;break}}return s},a}(Fi);for(var G in qu.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},qu.prototype.allowedEvents_)qu.prototype["on"+G]=null;var te=function(a,o){for(var u=0;u<a.length;u++)!Object.keys(a[u]).length||o.id===a[u].id||(a[u].enabled=!1)},be=function(g){function a(u){var t;void 0===u&&(u=[]);for(var s=u.length-1;s>=0;s--)if(u[s].enabled){te(u,u[s]);break}return(t=g.call(this,u)||this).changing_=!1,t}$e(a,g);var o=a.prototype;return o.addTrack=function(t){var s=this;t.enabled&&te(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){s.changing_||(s.changing_=!0,te(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},o.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},a}(qu),tt=function(a,o){for(var u=0;u<a.length;u++)!Object.keys(a[u]).length||o.id===a[u].id||(a[u].selected=!1)},Ct=function(g){function a(u){var t;void 0===u&&(u=[]);for(var s=u.length-1;s>=0;s--)if(u[s].selected){tt(u,u[s]);break}return(t=g.call(this,u)||this).changing_=!1,Object.defineProperty(ut(t),"selectedIndex",{get:function(){for(var v=0;v<this.length;v++)if(this[v].selected)return v;return-1},set:function(){}}),t}$e(a,g);var o=a.prototype;return o.addTrack=function(t){var s=this;t.selected&&tt(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){s.changing_||(s.changing_=!0,tt(s,t),s.changing_=!1,s.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},o.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},a}(qu),Vt=function(g){function a(){return g.apply(this,arguments)||this}$e(a,g);var o=a.prototype;return o.addTrack=function(t){var s=this;g.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},o.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},a}(qu),vn=function(){function g(o){void 0===o&&(o=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var u=0,t=o.length;u<t;u++)this.addTrackElement_(o[u])}var a=g.prototype;return a.addTrackElement_=function(u){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(u)&&this.trackElements_.push(u)},a.getTrackElementByTrack_=function(u){for(var t,s=0,h=this.trackElements_.length;s<h;s++)if(u===this.trackElements_[s].track){t=this.trackElements_[s];break}return t},a.removeTrackElement_=function(u){for(var t=0,s=this.trackElements_.length;t<s;t++)if(u===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},g}(),Wn=function(){function g(o){g.prototype.setCues_.call(this,o),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var a=g.prototype;return a.setCues_=function(u){var t=this.length||0,s=0,h=u.length;this.cues_=u,this.length_=u.length;var v=function(x){""+x in this||Object.defineProperty(this,""+x,{get:function(){return this.cues_[x]}})};if(t<h)for(s=t;s<h;s++)v.call(this,s)},a.getCueById=function(u){for(var t=null,s=0,h=this.length;s<h;s++){var v=this[s];if(v.id===u){t=v;break}}return t},g}(),xr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Pr={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ii={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ir={disabled:"disabled",hidden:"hidden",showing:"showing"},Hs=function(g){function a(o){var u;void 0===o&&(o={}),u=g.call(this)||this;var t={id:o.id||"vjs_track_"+Ai(),kind:o.kind||"",language:o.language||""},s=o.label||"",h=function(x){Object.defineProperty(ut(u),x,{get:function(){return t[x]},set:function(){}})};for(var v in t)h(v);return Object.defineProperty(ut(u),"label",{get:function(){return s},set:function(x){x!==s&&(s=x,this.trigger("labelchange"))}}),u}return $e(a,g),a}(Fi),zo=function(a){var o=["protocol","hostname","port","pathname","search","hash","host"],u=Ae().createElement("a");u.href=a;for(var t={},s=0;s<o.length;s++)t[o[s]]=u[o[s]];return"http:"===t.protocol&&(t.host=t.host.replace(/:80$/,"")),"https:"===t.protocol&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=se().location.protocol),t.host||(t.host=se().location.host),t},Il=function(a){if(!a.match(/^https?:\/\//)){var o=Ae().createElement("a");o.href=a,a=o.href}return a},dl=function(a){if("string"==typeof a){var u=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a);if(u)return u.pop().toLowerCase()}return""},As=function(a,o){void 0===o&&(o=se().location);var u=zo(a);return(":"===u.protocol?o.protocol:u.protocol)+u.host!==o.protocol+o.host},Gl=Object.freeze({__proto__:null,parseUrl:zo,getAbsoluteURL:Il,getFileExtension:dl,isCrossOrigin:As}),Gi=function(a,o){var u=new(se().WebVTT.Parser)(se(),se().vttjs,se().WebVTT.StringDecoder()),t=[];u.oncue=function(s){o.addCue(s)},u.onparsingerror=function(s){t.push(s)},u.onflush=function(){o.trigger({type:"loadeddata",target:o})},u.parse(a),t.length>0&&(se().console&&se().console.groupCollapsed&&se().console.groupCollapsed("Text Track parsing errors for "+o.src),t.forEach(function(s){return Dr.error(s)}),se().console&&se().console.groupEnd&&se().console.groupEnd()),u.flush()},Dl=function(a,o){var u={uri:a},t=As(a);t&&(u.cors=t);var s="use-credentials"===o.tech_.crossOrigin();s&&(u.withCredentials=s),yt()(u,ys(this,function(h,v,S){if(h)return Dr.error(h,v);o.loaded_=!0,"function"!=typeof se().WebVTT?o.tech_&&o.tech_.any(["vttjsloaded","vttjserror"],function(x){if("vttjserror"!==x.type)return Gi(S,o);Dr.error("vttjs failed to load, stopping trying to process "+o.src)}):Gi(S,o)}))},Pu=function(g){function a(u){var t;if(void 0===u&&(u={}),!u.tech)throw new Error("A tech was not provided.");var s=bn(u,{kind:ii[u.kind]||"subtitles",language:u.language||u.srclang||""}),h=Ir[s.mode]||"disabled",v=s.default;("metadata"===s.kind||"chapters"===s.kind)&&(h="hidden"),(t=g.call(this,s)||this).tech_=s.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var S=new Wn(t.cues_),x=new Wn(t.activeCues_),L=!1;return t.timeupdateHandler=ys(ut(t),function(Y){if(void 0===Y&&(Y={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==Y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,L&&(this.trigger("cuechange"),L=!1),"timeupdate"!==Y.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),t.tech_.one("dispose",function(){t.stopTracking()}),"disabled"!==h&&t.startTracking(),Object.defineProperties(ut(t),{default:{get:function(){return v},set:function(){}},mode:{get:function(){return h},set:function(Te){!Ir[Te]||h!==Te&&(h=Te,!this.preload_&&"disabled"!==h&&0===this.cues.length&&Dl(this.src,this),this.stopTracking(),"disabled"!==h&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?S:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return x;for(var Te=this.tech_.currentTime(),je=[],Ve=0,qe=this.cues.length;Ve<qe;Ve++){var Wt=this.cues[Ve];(Wt.startTime<=Te&&Wt.endTime>=Te||Wt.startTime===Wt.endTime&&Wt.startTime<=Te&&Wt.startTime+.5>=Te)&&je.push(Wt)}if(L=!1,je.length!==this.activeCues_.length)L=!0;else for(var yn=0;yn<je.length;yn++)-1===this.activeCues_.indexOf(je[yn])&&(L=!0);return this.activeCues_=je,x.setCues_(this.activeCues_),x},set:function(){}}}),s.src?(t.src=s.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==s.kind&&"captions"!==s.kind)&&Dl(t.src,ut(t))):t.loaded_=!0,t}$e(a,g);var o=a.prototype;return o.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},o.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},o.addCue=function(t){var s=t;if(se().vttjs&&!(t instanceof se().vttjs.VTTCue)){for(var h in s=new(se().vttjs.VTTCue)(t.startTime,t.endTime,t.text),t)h in s||(s[h]=t[h]);s.id=t.id,s.originalCue_=t}for(var v=this.tech_.textTracks(),S=0;S<v.length;S++)v[S]!==this&&v[S].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},o.removeCue=function(t){for(var s=this.cues_.length;s--;){var h=this.cues_[s];if(h===t||h.originalCue_&&h.originalCue_===t){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},a}(Hs);Pu.prototype.allowedEvents_={cuechange:"cuechange"};var Ha=function(g){function a(o){var u;void 0===o&&(o={});var t=bn(o,{kind:Pr[o.kind]||""});u=g.call(this,t)||this;var s=!1;return Object.defineProperty(ut(u),"enabled",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("enabledchange"))}}),t.enabled&&(u.enabled=t.enabled),u.loaded_=!0,u}return $e(a,g),a}(Hs),$d=function(g){function a(o){var u;void 0===o&&(o={});var t=bn(o,{kind:xr[o.kind]||""});u=g.call(this,t)||this;var s=!1;return Object.defineProperty(ut(u),"selected",{get:function(){return s},set:function(v){"boolean"!=typeof v||v===s||(s=v,this.trigger("selectedchange"))}}),t.selected&&(u.selected=t.selected),u}return $e(a,g),a}(Hs),Al=function(g){function a(o){var u;void 0===o&&(o={}),u=g.call(this)||this;var t,s=new Pu(o);return u.kind=s.kind,u.src=s.src,u.srclang=s.language,u.label=s.label,u.default=s.default,Object.defineProperties(ut(u),{readyState:{get:function(){return t}},track:{get:function(){return s}}}),t=0,s.addEventListener("loadeddata",function(){t=2,u.trigger({type:"load",target:ut(u)})}),u}return $e(a,g),a}(Fi);Al.prototype.allowedEvents_={load:"load"},Al.NONE=0,Al.LOADING=1,Al.LOADED=2,Al.ERROR=3;var os={audio:{ListClass:be,TrackClass:Ha,capitalName:"Audio"},video:{ListClass:Ct,TrackClass:$d,capitalName:"Video"},text:{ListClass:Vt,TrackClass:Pu,capitalName:"Text"}};Object.keys(os).forEach(function(g){os[g].getterName=g+"Tracks",os[g].privateName=g+"Tracks_"});var id={remoteText:{ListClass:Vt,TrackClass:Pu,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vn,TrackClass:Al,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},$a=Ie({},os,id);id.names=Object.keys(id),os.names=Object.keys(os),$a.names=[].concat(id.names).concat(os.names);var ws=function(g){function a(u,t){var s;return void 0===u&&(u={}),void 0===t&&(t=function(){}),u.reportTouchActivity=!1,(s=g.call(this,null,u,t)||this).onDurationChange_=function(h){return s.onDurationChange(h)},s.trackProgress_=function(h){return s.trackProgress(h)},s.trackCurrentTime_=function(h){return s.trackCurrentTime(h)},s.stopTrackingCurrentTime_=function(h){return s.stopTrackingCurrentTime(h)},s.disposeSourceHandler_=function(h){return s.disposeSourceHandler(h)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),$a.names.forEach(function(h){var v=$a[h];u&&u[v.getterName]&&(s[v.privateName]=u[v.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===u["native"+h+"Tracks"]&&(s["featuresNative"+h+"Tracks"]=!1)}),!1===u.nativeCaptions||!1===u.nativeTextTracks?s.featuresNativeTextTracks=!1:(!0===u.nativeCaptions||!0===u.nativeTextTracks)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=!1!==u.preloadTextTracks,s.autoRemoteTextTracks_=new $a.text.ListClass,s.initTrackListeners(),u.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}$e(a,g);var o=a.prototype;return o.triggerSourceset=function(t){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},o.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},o.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},o.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ys(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,1===s&&this.stopTrackingProgress()}),500)},o.onDurationChange=function(t){this.duration_=this.duration()},o.buffered=function(){return Lo(0,0)},o.bufferedPercent=function(){return Va(this.buffered(),this.duration_)},o.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},o.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},o.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},o.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},o.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.dispose=function(){this.clearTracks(os.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),g.prototype.dispose.call(this)},o.clearTracks=function(t){var s=this;(t=[].concat(t)).forEach(function(h){for(var v=s[h+"Tracks"]()||[],S=v.length;S--;){var x=v[S];"text"===h&&s.removeRemoteTextTrack(x),v.removeTrack(x)}})},o.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],s=t.length;s--;)this.removeRemoteTextTrack(t[s])},o.reset=function(){},o.crossOrigin=function(){},o.setCrossOrigin=function(){},o.error=function(t){return void 0!==t&&(this.error_=new vo(t),this.trigger("error")),this.error_},o.played=function(){return this.hasStarted_?Lo(0,0):Lo()},o.play=function(){},o.setScrubbing=function(){},o.scrubbing=function(){},o.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},o.initTrackListeners=function(){var t=this;os.names.forEach(function(s){var v=function(){t.trigger(s+"trackchange")},S=t[os[s].getterName]();S.addEventListener("removetrack",v),S.addEventListener("addtrack",v),t.on("dispose",function(){S.removeEventListener("removetrack",v),S.removeEventListener("addtrack",v)})})},o.addWebVttScript_=function(){var t=this;if(!se().WebVTT)if(Ae().body.contains(this.el())){if(!this.options_["vtt.js"]&&Kt(Z())&&Object.keys(Z()).length>0)return void this.trigger("vttjsloaded");var s=Ae().createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){t.trigger("vttjsloaded")},s.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),se().WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},o.emulateTextTracks=function(){var t=this,s=this.textTracks(),h=this.remoteTextTracks(),v=function(Y){return s.addTrack(Y.track)},S=function(Y){return s.removeTrack(Y.track)};h.on("addtrack",v),h.on("removetrack",S),this.addWebVttScript_();var x=function(){return t.trigger("texttrackchange")},L=function(){x();for(var Y=0;Y<s.length;Y++){var Te=s[Y];Te.removeEventListener("cuechange",x),"showing"===Te.mode&&Te.addEventListener("cuechange",x)}};L(),s.addEventListener("change",L),s.addEventListener("addtrack",L),s.addEventListener("removetrack",L),this.on("dispose",function(){h.off("addtrack",v),h.off("removetrack",S),s.removeEventListener("change",L),s.removeEventListener("addtrack",L),s.removeEventListener("removetrack",L);for(var ne=0;ne<s.length;ne++)s[ne].removeEventListener("cuechange",x)})},o.addTextTrack=function(t,s,h){if(!t)throw new Error("TextTrack kind is required but was not provided");return function Hv(g,a,o,u,t){void 0===t&&(t={});var s=g.textTracks();t.kind=a,o&&(t.label=o),u&&(t.language=u),t.tech=g;var h=new $a.text.TrackClass(t);return s.addTrack(h),h}(this,t,s,h)},o.createRemoteTextTrack=function(t){var s=bn(t,{tech:this});return new id.remoteTextEl.TrackClass(s)},o.addRemoteTextTrack=function(t,s){var h=this;void 0===t&&(t={});var v=this.createRemoteTextTrack(t);return!0!==s&&!1!==s&&(Dr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(v),this.remoteTextTracks().addTrack(v.track),!0!==s&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(v.track)}),v},o.removeRemoteTextTrack=function(t){var s=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},o.getVideoPlaybackQuality=function(){return{}},o.requestPictureInPicture=function(){var t=this.options_.Promise||se().Promise;if(t)return t.reject()},o.disablePictureInPicture=function(){return!0},o.setDisablePictureInPicture=function(){},o.requestVideoFrameCallback=function(t){var s=this,h=Ai();return!this.isReady_||this.paused()?(this.queuedHanders_.add(h),this.one("playing",function(){s.queuedHanders_.has(h)&&(s.queuedHanders_.delete(h),t())})):this.requestNamedAnimationFrame(h,t),h},o.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},o.setPoster=function(){},o.playsinline=function(){},o.setPlaysinline=function(){},o.overrideNativeAudioTracks=function(){},o.overrideNativeVideoTracks=function(){},o.canPlayType=function(){return""},a.canPlayType=function(){return""},a.canPlaySource=function(t,s){return a.canPlayType(t.type)},a.isTech=function(t){return t.prototype instanceof a||t instanceof a||t===a},a.registerTech=function(t,s){if(a.techs_||(a.techs_={}),!a.isTech(s))throw new Error("Tech "+t+" must be a Tech");if(!a.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!a.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Qe(t),a.techs_[t]=s,a.techs_[Xe(t)]=s,"Tech"!==t&&a.defaultTechOrder_.push(t),s},a.getTech=function(t){if(t){if(a.techs_&&a.techs_[t])return a.techs_[t];if(t=Qe(t),se()&&se().videojs&&se().videojs[t])return Dr.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),se().videojs[t]}},a}(gn);$a.names.forEach(function(g){var a=$a[g];ws.prototype[a.getterName]=function(){return this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName]}}),ws.prototype.featuresVolumeControl=!0,ws.prototype.featuresMuteControl=!0,ws.prototype.featuresFullscreenResize=!1,ws.prototype.featuresPlaybackRate=!1,ws.prototype.featuresProgressEvents=!1,ws.prototype.featuresSourceset=!1,ws.prototype.featuresTimeupdateEvents=!1,ws.prototype.featuresNativeTextTracks=!1,ws.prototype.featuresVideoFrameCallback=!1,ws.withSourceHandlers=function(g){g.registerSourceHandler=function(o,u){var t=g.sourceHandlers;t||(t=g.sourceHandlers=[]),void 0===u&&(u=t.length),t.splice(u,0,o)},g.canPlayType=function(o){for(var t,u=g.sourceHandlers||[],s=0;s<u.length;s++)if(t=u[s].canPlayType(o))return t;return""},g.selectSourceHandler=function(o,u){for(var t=g.sourceHandlers||[],h=0;h<t.length;h++)if(t[h].canHandleSource(o,u))return t[h];return null},g.canPlaySource=function(o,u){var t=g.selectSourceHandler(o,u);return t?t.canHandleSource(o,u):""},["seekable","seeking","duration"].forEach(function(o){var u=this[o];"function"==typeof u&&(this[o]=function(){return this.sourceHandler_&&this.sourceHandler_[o]?this.sourceHandler_[o].apply(this.sourceHandler_,arguments):u.apply(this,arguments)})},g.prototype),g.prototype.setSource=function(o){var u=g.selectSourceHandler(o,this.options_);u||(g.nativeSourceHandler?u=g.nativeSourceHandler:Dr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),u!==g.nativeSourceHandler&&(this.currentSource_=o),this.sourceHandler_=u.handleSource(o,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},g.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},gn.registerComponent("Tech",ws),ws.registerTech("Tech",ws),ws.defaultTechOrder_=[];var sd={},Wd={},Oh={};function Ou(g,a,o){g.setTimeout(function(){return Ku(a,sd[a.type],o,g)},1)}function Pf(g,a,o,u){void 0===u&&(u=null);var t="call"+Qe(o),s=g.reduce(zd(t),u),h=s===Oh,v=h?null:a[o](s);return function Rh(g,a,o,u){for(var t=g.length-1;t>=0;t--){var s=g[t];s[a]&&s[a](u,o)}}(g,o,v,h),v}var yc={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ad={setCurrentTime:1,setMuted:1,setVolume:1},Wl={play:1,pause:1};function zd(g){return function(a,o){return a===Oh?Oh:o[g]?o[g](a):a}}function Ku(g,a,o,u,t,s){void 0===g&&(g={}),void 0===a&&(a=[]),void 0===t&&(t=[]),void 0===s&&(s=!1);var v=a[0],S=a.slice(1);if("string"==typeof v)Ku(g,sd[v],o,u,t,s);else if(v){var x=function hl(g,a){var o=Wd[g.id()],u=null;if(null==o)return u=a(g),Wd[g.id()]=[[a,u]],u;for(var t=0;t<o.length;t++){var s=o[t];s[0]===a&&(u=s[1])}return null===u&&(u=a(g),o.push([a,u])),u}(u,v);if(!x.setSource)return t.push(x),Ku(g,S,o,u,t,s);x.setSource(et({},g),function(L,ne){if(L)return Ku(g,S,o,u,t,s);t.push(x),Ku(ne,g.type===ne.type?S:sd[ne.type],o,u,t,s)})}else S.length?Ku(g,S,o,u,t,s):s?o(g,t):Ku(g,sd["*"],o,u,t,!0)}var Da={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Vc=function(a){void 0===a&&(a="");var o=dl(a);return Da[o.toLowerCase()]||""},jp=function g(a){if(Array.isArray(a)){var o=[];a.forEach(function(u){u=g(u),Array.isArray(u)?o=o.concat(u):Ot(u)&&o.push(u)}),a=o}else a="string"==typeof a&&a.trim()?[_u({src:a})]:Ot(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[_u(a)]:[];return a};function _u(g){if(!g.type){var a=Vc(g.src);a&&(g.type=a)}return g}var _c=function(g){function a(o,u,t){var s,h=bn({createEl:!1},u);if(s=g.call(this,o,h,t)||this,u.playerOptions.sources&&0!==u.playerOptions.sources.length)o.src(u.playerOptions.sources);else for(var v=0,S=u.playerOptions.techOrder;v<S.length;v++){var x=Qe(S[v]),L=ws.getTech(x);if(x||(L=gn.getComponent(x)),L&&L.isSupported()){o.loadTech_(x);break}}return s}return $e(a,g),a}(gn);gn.registerComponent("MediaLoader",_c);var ld=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(h){return s.handleMouseOver(h)},s.handleMouseOut_=function(h){return s.handleMouseOut(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.emitTapEvents(),s.enable(),s}$e(a,g);var o=a.prototype;return o.createEl=function(t,s,h){void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s=et({className:this.buildCSSClass(),tabIndex:0},s),"button"===t&&Dr.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),h=et({role:"button"},h),this.tabIndex_=s.tabIndex;var v=gr(t,s,h);return v.appendChild(gr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},o.dispose=function(){this.controlTextEl_=null,g.prototype.dispose.call(this)},o.createControlTextEl=function(t){return this.controlTextEl_=gr("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},o.controlText=function(t,s){if(void 0===s&&(s=this.el()),void 0===t)return this.controlText_||"Need Text";var h=this.localize(t);this.controlText_=t,No(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",h)},o.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)},o.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},o.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},o.handleLanguagechange=function(){this.controlText(this.controlText_)},o.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},o.handleKeyDown=function(t){Se().isEventKey(t,"Space")||Se().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},a}(gn);gn.registerComponent("ClickableComponent",ld);var Of=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update(),s.update_=function(h){return s.update(h)},u.on("posterchange",s.update_),s}$e(a,g);var o=a.prototype;return o.dispose=function(){this.player().off("posterchange",this.update_),g.prototype.dispose.call(this)},o.createEl=function(){return gr("div",{className:"vjs-poster",tabIndex:-1})},o.update=function(t){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},o.setSrc=function(t){var s="";t&&(s='url("'+t+'")'),this.el_.style.backgroundImage=s},o.handleClick=function(t){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Ho||Ro)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?ya(this.player_.play()):this.player_.pause()}},a}(ld);gn.registerComponent("PosterImage",Of);var Zu="#222",Up={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Lh(g,a){var o;if(4===g.length)o=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else{if(7!==g.length)throw new Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");o=g.slice(1)}return"rgba("+parseInt(o.slice(0,2),16)+","+parseInt(o.slice(2,4),16)+","+parseInt(o.slice(4,6),16)+","+a+")"}function Hc(g,a,o){try{g.style[a]=o}catch{return}}var Bp=function(g){function a(u,t,s){var h;h=g.call(this,u,t,s)||this;var v=function(x){return h.updateDisplay(x)};return u.on("loadstart",function(S){return h.toggleDisplay(S)}),u.on("texttrackchange",v),u.on("loadedmetadata",function(S){return h.preselectTrack(S)}),u.ready(ys(ut(h),function(){if(u.tech_&&u.tech_.featuresNativeTextTracks)this.hide();else{u.on("fullscreenchange",v),u.on("playerresize",v),se().addEventListener("orientationchange",v),u.on("dispose",function(){return se().removeEventListener("orientationchange",v)});for(var S=this.options_.playerOptions.tracks||[],x=0;x<S.length;x++)this.player_.addRemoteTextTrack(S[x],!0);this.preselectTrack()}})),h}$e(a,g);var o=a.prototype;return o.preselectTrack=function(){for(var v,S,x,t={captions:1,subtitles:1},s=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,L=0;L<s.length;L++){var ne=s[L];h&&h.enabled&&h.language&&h.language===ne.language&&ne.kind in t?ne.kind===h.kind?x=ne:x||(x=ne):h&&!h.enabled?(x=null,v=null,S=null):ne.default&&("descriptions"!==ne.kind||v?ne.kind in t&&!S&&(S=ne):v=ne)}x?x.mode="showing":S?S.mode="showing":v&&(v.mode="showing")},o.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},o.clearDisplay=function(){"function"==typeof se().WebVTT&&se().WebVTT.processCues(se(),[],this.el_)},o.updateDisplay=function(){var t=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var h=[],v=0;v<t.length;++v){var S=t[v];"showing"===S.mode&&h.push(S)}this.updateForTrack(h)}else{for(var x=null,L=null,ne=t.length;ne--;){var Y=t[ne];"showing"===Y.mode&&("descriptions"===Y.kind?x=Y:L=Y)}L?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(L)):x&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(x))}},o.updateDisplayState=function(t){for(var s=this.player_.textTrackSettings.getValues(),h=t.activeCues,v=h.length;v--;){var S=h[v];if(S){var x=S.displayState;if(s.color&&(x.firstChild.style.color=s.color),s.textOpacity&&Hc(x.firstChild,"color",Lh(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(x.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&Hc(x.firstChild,"backgroundColor",Lh(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?Hc(x,"backgroundColor",Lh(s.windowColor,s.windowOpacity)):x.style.backgroundColor=s.windowColor),s.edgeStyle&&("dropshadow"===s.edgeStyle?x.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+Zu:"raised"===s.edgeStyle?x.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+Zu:"depressed"===s.edgeStyle?x.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Zu:"uniform"===s.edgeStyle&&(x.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Zu)),s.fontPercent&&1!==s.fontPercent){var L=se().parseFloat(x.style.fontSize);x.style.fontSize=L*s.fontPercent+"px",x.style.height="auto",x.style.top="auto"}s.fontFamily&&"default"!==s.fontFamily&&("small-caps"===s.fontFamily?x.firstChild.style.fontVariant="small-caps":x.firstChild.style.fontFamily=Up[s.fontFamily])}}},o.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof se().WebVTT&&!t.every(function(Te){return!Te.activeCues})){for(var s=[],h=0;h<t.length;++h)for(var v=t[h],S=0;S<v.activeCues.length;++S)s.push(v.activeCues[S]);se().WebVTT.processCues(se(),s,this.el_);for(var x=0;x<t.length;++x){for(var L=t[x],ne=0;ne<L.activeCues.length;++ne){var Y=L.activeCues[ne].displayState;$u(Y,"vjs-text-track-cue"),$u(Y,"vjs-text-track-cue-"+(L.language?L.language:x)),L.language&&dr(Y,"lang",L.language)}this.player_.textTrackSettings&&this.updateDisplayState(L)}}},a}(gn);gn.registerComponent("TextTrackDisplay",Bp);var hm=function(g){function a(){return g.apply(this,arguments)||this}return $e(a,g),a.prototype.createEl=function(){var t=this.player_.isAudio(),s=this.localize(t?"Audio Player":"Video Player"),h=gr("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),v=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return v.appendChild(h),v},a}(gn);gn.registerComponent("LoadingSpinner",hm);var fl=function(g){function a(){return g.apply(this,arguments)||this}$e(a,g);var o=a.prototype;return o.createEl=function(t,s,h){void 0===s&&(s={}),void 0===h&&(h={});var v=gr("button",s=et({className:this.buildCSSClass()},s),h=et({type:"button"},h));return v.appendChild(gr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},o.addChild=function(t,s){return void 0===s&&(s={}),Dr.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),gn.prototype.addChild.call(this,t,s)},o.enable=function(){g.prototype.enable.call(this),this.el_.removeAttribute("disabled")},o.disable=function(){g.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},o.handleKeyDown=function(t){Se().isEventKey(t,"Space")||Se().isEventKey(t,"Enter")?t.stopPropagation():g.prototype.handleKeyDown.call(this,t)},a}(ld);gn.registerComponent("Button",fl);var Ru=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).mouseused_=!1,s.on("mousedown",function(h){return s.handleMouseDown(h)}),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-big-play-button"},o.handleClick=function(t){var s=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return ya(s),void(this.player_.tech(!0)&&(!Ho&&!Ro||!h)&&this.player_.tech(!0).focus())}var v=this.player_.getChild("controlBar"),S=v&&v.getChild("playToggle");if(S){var x=function(){return S.focus()};Io(s)?s.then(x,function(){}):this.setTimeout(x,1)}else this.player_.tech(!0).focus()},o.handleKeyDown=function(t){this.mouseused_=!1,g.prototype.handleKeyDown.call(this,t)},o.handleMouseDown=function(t){this.mouseused_=!0},a}(fl);Ru.prototype.controlText_="Play Video",gn.registerComponent("BigPlayButton",Ru);var kl=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).controlText(t&&t.controlText||s.localize("Close")),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)},o.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},o.handleKeyDown=function(t){Se().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},a}(fl);gn.registerComponent("CloseButton",kl);var pl=function(g){function a(u,t){var s;return void 0===t&&(t={}),s=g.call(this,u,t)||this,t.replay=void 0===t.replay||t.replay,s.on(u,"play",function(h){return s.handlePlay(h)}),s.on(u,"pause",function(h){return s.handlePause(h)}),t.replay&&s.on(u,"ended",function(h){return s.handleEnded(h)}),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-play-control "+g.prototype.buildCSSClass.call(this)},o.handleClick=function(t){this.player_.paused()?ya(this.player_.play()):this.player_.pause()},o.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},o.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},o.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},o.handleEnded=function(t){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return s.handleSeeked(h)})},a}(fl);pl.prototype.controlText_="Play",gn.registerComponent("PlayToggle",pl);var bu=function(a,o){a=a<0?0:a;var u=Math.floor(a%60),t=Math.floor(a/60%60),s=Math.floor(a/3600),h=Math.floor(o/60%60),v=Math.floor(o/3600);return(isNaN(a)||a===1/0)&&(s=t=u="-"),(s=s>0||v>0?s+":":"")+(t=((s||h>=10)&&t<10?"0"+t:t)+":")+(u<10?"0"+u:u)},qd=bu;function cd(g,a){return void 0===a&&(a=g),qd(g,a)}var gl=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on(u,["timeupdate","ended"],function(h){return s.updateContent(h)}),s.updateTextNode_(),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t=this.buildCSSClass(),s=g.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),h=gr("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return s.appendChild(h),this.contentEl_=gr("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},o.dispose=function(){this.contentEl_=null,this.textNode_=null,g.prototype.dispose.call(this)},o.updateTextNode_=function(t){var s=this;void 0===t&&(t=0),t=cd(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var h=s.textNode_;h&&s.contentEl_.firstChild!==h&&(h=null,Dr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Ae().createTextNode(s.formattedTime_),s.textNode_&&(h?s.contentEl_.replaceChild(s.textNode_,h):s.contentEl_.appendChild(s.textNode_))}}))},o.updateContent=function(t){},a}(gn);gl.prototype.labelText_="Time",gl.prototype.controlText_="Time",gn.registerComponent("TimeDisplay",gl);var Vp=function(g){function a(){return g.apply(this,arguments)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-current-time"},o.updateContent=function(t){var s;s=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},a}(gl);Vp.prototype.labelText_="Current Time",Vp.prototype.controlText_="Current Time",gn.registerComponent("CurrentTimeDisplay",Vp);var Kd=function(g){function a(u,t){var s,h=function(S){return s.updateContent(S)};return(s=g.call(this,u,t)||this).on(u,"durationchange",h),s.on(u,"loadstart",h),s.on(u,"loadedmetadata",h),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-duration"},o.updateContent=function(t){var s=this.player_.duration();this.updateTextNode_(s)},a}(gl);Kd.prototype.labelText_="Duration",Kd.prototype.controlText_="Duration",gn.registerComponent("DurationDisplay",Kd);var ks=function(g){function a(){return g.apply(this,arguments)||this}return $e(a,g),a.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=g.prototype.createEl.call(this,"div"),h=g.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(h),t.appendChild(s),t},a}(gn);gn.registerComponent("TimeDivider",ks);var Zd=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on(u,"durationchange",function(h){return s.updateContent(h)}),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-remaining-time"},o.createEl=function(){var t=g.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(gr("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},o.updateContent=function(t){var s;"number"==typeof this.player_.duration()&&(s=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(s))},a}(gl);Zd.prototype.labelText_="Remaining Time",Zd.prototype.controlText_="Remaining Time",gn.registerComponent("RemainingTimeDisplay",Zd);var Lf=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).updateShowing(),s.on(s.player(),"durationchange",function(h){return s.updateShowing(h)}),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=gr("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(gr("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Ae().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},o.dispose=function(){this.contentEl_=null,g.prototype.dispose.call(this)},o.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},a}(gn);gn.registerComponent("LiveDisplay",Lf);var Fh=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(h){return s.updateLiveEdgeStatus(h)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t=g.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=gr("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},o.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},o.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},o.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,g.prototype.dispose.call(this)},a}(fl);Fh.prototype.controlText_="Seek to live, currently playing live",gn.registerComponent("SeekToLive",Fh);var jh=function(a,o,u){return a=Number(a),Math.min(u,Math.max(o,isNaN(a)?o:a))},$c=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).handleMouseDown_=function(h){return s.handleMouseDown(h)},s.handleMouseUp_=function(h){return s.handleMouseUp(h)},s.handleKeyDown_=function(h){return s.handleKeyDown(h)},s.handleClick_=function(h){return s.handleClick(h)},s.handleMouseMove_=function(h){return s.handleMouseMove(h)},s.update_=function(h){return s.update(h)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}$e(a,g);var o=a.prototype;return o.enabled=function(){return this.enabled_},o.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},o.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},o.createEl=function(t,s,h){return void 0===s&&(s={}),void 0===h&&(h={}),s.className=s.className+" vjs-slider",s=et({tabIndex:0},s),h=et({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),g.prototype.createEl.call(this,t,s,h)},o.handleMouseDown=function(t){var s=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"===t.type&&!wo&&t.preventDefault(),$n(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},o.handleMouseMove=function(t){},o.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;Gt(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},o.update=function(){var t=this;if(this.el_&&this.bar){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var h=t.vertical()?"height":"width";t.bar.el().style[h]=(100*s).toFixed(2)+"%"})),s}},o.getProgress=function(){return Number(jh(this.getPercent(),0,1).toFixed(4))},o.calculateDistance=function(t){var s=Qa(this.el_,t);return this.vertical()?s.y:s.x},o.handleKeyDown=function(t){Se().isEventKey(t,"Left")||Se().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Se().isEventKey(t,"Right")||Se().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):g.prototype.handleKeyDown.call(this,t)},o.handleClick=function(t){t.stopPropagation(),t.preventDefault()},o.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},a}(gn);gn.registerComponent("Slider",$c);var Uh=function(a,o){return jh(a/o*100,0,100).toFixed(2)+"%"},Bh=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).partEls_=[],s.on(u,"progress",function(h){return s.update(h)}),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=gr("span",{className:"vjs-control-text"}),h=gr("span",{textContent:this.localize("Loaded")}),v=Ae().createTextNode(": ");return this.percentageEl_=gr("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(s),s.appendChild(h),s.appendChild(v),s.appendChild(this.percentageEl_),t},o.dispose=function(){this.partEls_=null,this.percentageEl_=null,g.prototype.dispose.call(this)},o.update=function(t){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=s.player_.liveTracker,v=s.player_.buffered(),S=h&&h.isLive()?h.seekableEnd():s.player_.duration(),x=s.player_.bufferedEnd(),L=s.partEls_,ne=Uh(x,S);s.percent_!==ne&&(s.el_.style.width=ne,No(s.percentageEl_,ne),s.percent_=ne);for(var Y=0;Y<v.length;Y++){var Te=v.start(Y),je=v.end(Y),Ve=L[Y];Ve||(Ve=s.el_.appendChild(gr()),L[Y]=Ve),(Ve.dataset.start!==Te||Ve.dataset.end!==je)&&(Ve.dataset.start=Te,Ve.dataset.end=je,Ve.style.left=Uh(Te,x),Ve.style.width=Uh(je-Te,x))}for(var qe=L.length;qe>v.length;qe--)s.el_.removeChild(L[qe-1]);L.length=v.length})},a}(gn);gn.registerComponent("LoadProgressBar",Bh);var Gc=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update=At(ys(ut(s),s.update),30),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},o.update=function(t,s,h){var v=Ls(this.el_),S=ln(this.player_.el()),x=t.width*s;if(S&&v){var L=t.left-S.left+x,ne=t.width-x+(S.right-t.right),Y=v.width/2;L<Y?Y+=Y-L:ne<Y&&(Y=ne),Y<0?Y=0:Y>v.width&&(Y=v.width),Y=Math.round(Y),this.el_.style.right="-"+Y+"px",this.write(h)}},o.write=function(t){No(this.el_,t)},o.updateTime=function(t,s,h,v){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var x,L=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var ne=S.player_.liveTracker.liveWindow(),Y=ne-s*ne;x=(Y<1?"":"-")+cd(Y,ne)}else x=cd(h,L);S.update(t,s,x),v&&v()})},a}(gn);gn.registerComponent("TimeTooltip",Gc);var Tu=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update=At(ys(ut(s),s.update),30),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},o.update=function(t,s){var h=this.getChild("timeTooltip");if(h){var v=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(t,s,v)}},a}(gn);Tu.prototype.options_={children:[]},!$o&&!li&&Tu.prototype.options_.children.push("timeTooltip"),gn.registerComponent("PlayProgressBar",Tu);var dd=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update=At(ys(ut(s),s.update),30),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},o.update=function(t,s){var h=this,v=s*this.player_.duration();this.getChild("timeTooltip").updateTime(t,s,v,function(){h.el_.style.left=t.width*s+"px"})},a}(gn);dd.prototype.options_={children:["timeTooltip"]},gn.registerComponent("MouseTimeDisplay",dd);var Ms=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).setEventHandlers_(),s}$e(a,g);var o=a.prototype;return o.setEventHandlers_=function(){var t=this;this.update_=ys(this,this.update),this.update=At(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return t.enableInterval_(s)},this.disableIntervalHandler_=function(s){return t.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae()&&"visibilityState"in Ae()&&this.on(Ae(),"visibilitychange",this.toggleVisibility_)},o.toggleVisibility_=function(t){"hidden"===Ae().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},o.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},o.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},o.update=function(t){var s=this;if("hidden"!==Ae().visibilityState){var h=g.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var v=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),S=s.player_.liveTracker,x=s.player_.duration();S&&S.isLive()&&(x=s.player_.liveTracker.liveCurrentTime()),s.percent_!==h&&(s.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),s.percent_=h),(s.currentTime_!==v||s.duration_!==x)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[cd(v,x),cd(x,x)],"{1} of {2}")),s.currentTime_=v,s.duration_=x),s.bar&&s.bar.update(ln(s.el()),s.getProgress())}),h}},o.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},o.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},o.getPercent=function(){var s,t=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(s=(t-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(s=1)):s=t/this.player_.duration(),s},o.handleMouseDown=function(t){!Ca(t)||(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),g.prototype.handleMouseDown.call(this,t))},o.handleMouseMove=function(t,s){if(void 0===s&&(s=!1),Ca(t)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var h,v=this.calculateDistance(t),S=this.player_.liveTracker;if(S&&S.isLive()){if(v>=.99)return void S.seekToLiveEdge();var x=S.seekableStart(),L=S.liveCurrentTime();if((h=x+v*S.liveWindow())>=L&&(h=L),h<=x&&(h=x+.1),h===1/0)return}else(h=v*this.player_.duration())===this.player_.duration()&&(h-=.1);this.userSeek_(h)}},o.enable=function(){g.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.show()},o.disable=function(){g.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.hide()},o.handleMouseUp=function(t){g.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ya(this.player_.play()):this.update_()},o.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},o.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},o.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},o.handleKeyDown=function(t){var s=this.player_.liveTracker;if(Se().isEventKey(t,"Space")||Se().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Se().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Se().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Se()(t))){t.preventDefault(),t.stopPropagation();var h=10*(Se().codes[Se()(t)]-Se().codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else Se().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Se().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):g.prototype.handleKeyDown.call(this,t)},o.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae()&&"visibilityState"in Ae()&&this.off(Ae(),"visibilitychange",this.toggleVisibility_),g.prototype.dispose.call(this)},a}($c);Ms.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!$o&&!li&&Ms.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),gn.registerComponent("SeekBar",Ms);var Wc=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).handleMouseMove=At(ys(ut(s),s.handleMouseMove),30),s.throttledHandleMouseSeek=At(ys(ut(s),s.handleMouseSeek),30),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.handleMouseDownHandler_=function(h){return s.handleMouseDown(h)},s.enable(),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},o.handleMouseMove=function(t){var s=this.getChild("seekBar");if(s){var h=s.getChild("playProgressBar"),v=s.getChild("mouseTimeDisplay");if(h||v){var S=s.el(),x=Ls(S),L=Qa(S,t).x;L=jh(L,0,1),v&&v.update(x,L),h&&h.update(x,s.getProgress())}}},o.handleMouseSeek=function(t){var s=this.getChild("seekBar");s&&s.handleMouseMove(t)},o.enabled=function(){return this.enabled_},o.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&ya(this.player_.play())}},o.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},o.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},o.handleMouseDown=function(t){var s=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(t),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},o.handleMouseUp=function(t){var s=this.getChild("seekBar");s&&s.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},a}(gn);Wc.prototype.options_={children:["seekBar"]},gn.registerComponent("ProgressControl",Wc);var Hp=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on(u,["enterpictureinpicture","leavepictureinpicture"],function(h){return s.handlePictureInPictureChange(h)}),s.on(u,["disablepictureinpicturechanged","loadedmetadata"],function(h){return s.handlePictureInPictureEnabledChange(h)}),s.on(u,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===u.currentType().substring(0,5)||u.audioPosterMode()||u.audioOnlyMode()?(u.isInPictureInPicture()&&u.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-picture-in-picture-control "+g.prototype.buildCSSClass.call(this)},o.handlePictureInPictureEnabledChange=function(){Ae().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},o.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},o.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},a}(fl);Hp.prototype.controlText_="Picture-in-Picture",gn.registerComponent("PictureInPictureToggle",Hp);var yo=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on(u,"fullscreenchange",function(h){return s.handleFullscreenChange(h)}),!1===Ae()[u.fsApi_.fullscreenEnabled]&&s.disable(),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)},o.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},o.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},a}(fl);yo.prototype.controlText_="Fullscreen",gn.registerComponent("FullscreenToggle",yo);var jf=function(g){function a(){return g.apply(this,arguments)||this}return $e(a,g),a.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},a}(gn);gn.registerComponent("VolumeLevel",jf);var $p=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update=At(ys(ut(s),s.update),30),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},o.update=function(t,s,h,v){if(!h){var S=ln(this.el_),x=ln(this.player_.el()),L=t.width*s;if(!x||!S)return;var ne=t.left-x.left+L,Y=t.width-L+(x.right-t.right),Te=S.width/2;ne<Te?Te+=Te-ne:Y<Te&&(Te=Y),Te<0?Te=0:Te>S.width&&(Te=S.width),this.el_.style.right="-"+Te+"px"}this.write(v+"%")},o.write=function(t){No(this.el_,t)},o.updateVolume=function(t,s,h,v,S){var x=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){x.update(t,s,h,v.toFixed(0)),S&&S()})},a}(gn);gn.registerComponent("VolumeLevelTooltip",$p);var Kl=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).update=At(ys(ut(s),s.update),30),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},o.update=function(t,s,h){var v=this,S=100*s;this.getChild("volumeLevelTooltip").updateVolume(t,s,h,S,function(){h?v.el_.style.bottom=t.height*s+"px":v.el_.style.left=t.width*s+"px"})},a}(gn);Kl.prototype.options_={children:["volumeLevelTooltip"]},gn.registerComponent("MouseVolumeLevelDisplay",Kl);var Vh=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on("slideractive",function(h){return s.updateLastVolume_(h)}),s.on(u,"volumechange",function(h){return s.updateARIAAttributes(h)}),u.ready(function(){return s.updateARIAAttributes()}),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},o.handleMouseDown=function(t){!Ca(t)||g.prototype.handleMouseDown.call(this,t)},o.handleMouseMove=function(t){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var h=this.el(),v=ln(h),S=this.vertical(),x=Qa(h,t);x=jh(x=S?x.y:x.x,0,1),s.update(v,x,S)}!Ca(t)||(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},o.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},o.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},o.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},o.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},o.updateARIAAttributes=function(t){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},o.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},o.updateLastVolume_=function(){var t=this,s=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(s)})},a}($c);Vh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!$o&&!li&&Vh.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Vh.prototype.playerEvent="volumechange",gn.registerComponent("VolumeBar",Vh);var su=function(g){function a(u,t){var s;return void 0===t&&(t={}),t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Kt(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),function(a,o){o.tech_&&!o.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(o,"loadstart",function(){o.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(ut(s=g.call(this,u,t)||this),u),s.throttledHandleMouseMove=At(ys(ut(s),s.handleMouseMove),30),s.handleMouseUpHandler_=function(h){return s.handleMouseUp(h)},s.on("mousedown",function(h){return s.handleMouseDown(h)}),s.on("touchstart",function(h){return s.handleMouseDown(h)}),s.on("mousemove",function(h){return s.handleMouseMove(h)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},o.handleMouseDown=function(t){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},o.handleMouseUp=function(t){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},o.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},a}(gn);su.prototype.options_={children:["volumeBar"]},gn.registerComponent("VolumeControl",su);var Qd=function(g){function a(u,t){var s;return function(a,o){o.tech_&&!o.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(o,"loadstart",function(){o.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})}(ut(s=g.call(this,u,t)||this),u),s.on(u,["loadstart","volumechange"],function(h){return s.update(h)}),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)},o.handleClick=function(t){var s=this.player_.volume(),h=this.player_.lastVolume_();0===s?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},o.update=function(t){this.updateIcon_(),this.updateControlText_()},o.updateIcon_=function(){var t=this.player_.volume(),s=3;$o&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?s=0:t<.33?s=1:t<.67&&(s=2);for(var h=0;h<4;h++)En(this.el_,"vjs-vol-"+h);$u(this.el_,"vjs-vol-"+s)},o.updateControlText_=function(){var s=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},a}(fl);Qd.prototype.controlText_="Mute",gn.registerComponent("MuteToggle",Qd);var bc=function(g){function a(u,t){var s;return void 0===t&&(t={}),t.inline=!(typeof t.inline<"u")||t.inline,(typeof t.volumeControl>"u"||Kt(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(s=g.call(this,u,t)||this).handleKeyPressHandler_=function(h){return s.handleKeyPress(h)},s.on(u,["loadstart"],function(h){return s.volumePanelState_(h)}),s.on(s.muteToggle,"keyup",function(h){return s.handleKeyPress(h)}),s.on(s.volumeControl,"keyup",function(h){return s.handleVolumeControlKeyUp(h)}),s.on("keydown",function(h){return s.handleKeyPress(h)}),s.on("mouseover",function(h){return s.handleMouseOver(h)}),s.on("mouseout",function(h){return s.handleMouseOut(h)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}$e(a,g);var o=a.prototype;return o.sliderActive_=function(){this.addClass("vjs-slider-active")},o.sliderInactive_=function(){this.removeClass("vjs-slider-active")},o.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},o.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},o.dispose=function(){this.handleMouseOut(),g.prototype.dispose.call(this)},o.handleVolumeControlKeyUp=function(t){Se().isEventKey(t,"Esc")&&this.muteToggle.focus()},o.handleMouseOver=function(t){this.addClass("vjs-hover"),va(Ae(),"keyup",this.handleKeyPressHandler_)},o.handleMouseOut=function(t){this.removeClass("vjs-hover"),Go(Ae(),"keyup",this.handleKeyPressHandler_)},o.handleKeyPress=function(t){Se().isEventKey(t,"Esc")&&this.handleMouseOut()},a}(gn);bc.prototype.options_={children:["muteToggle","volumeControl"]},gn.registerComponent("VolumePanel",bc);var Nu=function(g){function a(u,t){var s;return s=g.call(this,u,t)||this,t&&(s.menuButton_=t.menuButton),s.focusedChild_=-1,s.on("keydown",function(h){return s.handleKeyDown(h)}),s.boundHandleBlur_=function(h){return s.handleBlur(h)},s.boundHandleTapClick_=function(h){return s.handleTapClick(h)},s}$e(a,g);var o=a.prototype;return o.addEventListenerForItem=function(t){t instanceof gn&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},o.removeEventListenerForItem=function(t){t instanceof gn&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},o.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),g.prototype.removeChild.call(this,t)},o.addItem=function(t){var s=this.addChild(t);s&&this.addEventListenerForItem(s)},o.createEl=function(){this.contentEl_=gr(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),va(s,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),s},o.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,g.prototype.dispose.call(this)},o.handleBlur=function(t){var s=t.relatedTarget||Ae().activeElement;if(!this.children().some(function(v){return v.el()===s})){var h=this.menuButton_;h&&h.buttonPressed_&&s!==h.el().firstChild&&h.unpressButton()}},o.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var h=s.filter(function(v){return v.el()===t.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},o.handleKeyDown=function(t){Se().isEventKey(t,"Left")||Se().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(Se().isEventKey(t,"Right")||Se().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},o.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},o.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},o.focus=function(t){void 0===t&&(t=0);var s=this.children().slice();s.length&&s[0].hasClass("vjs-menu-title")&&s.shift(),s.length>0&&(t<0?t=0:t>=s.length&&(t=s.length-1),this.focusedChild_=t,s[t].el_.focus())},a}(gn);gn.registerComponent("Menu",Nu);var Xd=function(g){function a(u,t){var s;void 0===t&&(t={}),(s=g.call(this,u,t)||this).menuButton_=new fl(u,t),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var h=fl.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+h,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var v=function(x){return s.handleClick(x)};return s.handleMenuKeyUp_=function(S){return s.handleMenuKeyUp(S)},s.on(s.menuButton_,"tap",v),s.on(s.menuButton_,"click",v),s.on(s.menuButton_,"keydown",function(S){return s.handleKeyDown(S)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),va(Ae(),"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(S){return s.handleMouseLeave(S)}),s.on("keydown",function(S){return s.handleSubmenuKeyDown(S)}),s}$e(a,g);var o=a.prototype;return o.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},o.createMenu=function(){var t=new Nu(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=gr("li",{className:"vjs-menu-title",textContent:Qe(this.options_.title),tabIndex:-1}),h=new gn(this.player_,{el:s});t.addItem(h)}if(this.items=this.createItems(),this.items)for(var v=0;v<this.items.length;v++)t.addItem(this.items[v]);return t},o.createItems=function(){},o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},o.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+fl.prototype.buildCSSClass()+" "+g.prototype.buildCSSClass.call(this)},o.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+g.prototype.buildCSSClass.call(this)},o.controlText=function(t,s){return void 0===s&&(s=this.menuButton_.el()),this.menuButton_.controlText(t,s)},o.dispose=function(){this.handleMouseLeave(),g.prototype.dispose.call(this)},o.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},o.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Go(Ae(),"keyup",this.handleMenuKeyUp_)},o.focus=function(){this.menuButton_.focus()},o.blur=function(){this.menuButton_.blur()},o.handleKeyDown=function(t){Se().isEventKey(t,"Esc")||Se().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),Se().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(Se().isEventKey(t,"Up")||Se().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},o.handleMenuKeyUp=function(t){(Se().isEventKey(t,"Esc")||Se().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},o.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},o.handleSubmenuKeyDown=function(t){(Se().isEventKey(t,"Esc")||Se().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Se().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},o.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$o&&Uc())return;this.menu.focus()}},o.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},o.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},o.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},a}(gn);gn.registerComponent("MenuButton",Xd);var Tc=function(g){function a(o,u){var t,s=u.tracks;if((t=g.call(this,o,u)||this).items.length<=1&&t.hide(),!s)return ut(t);var h=ys(ut(t),t.update);return s.addEventListener("removetrack",h),s.addEventListener("addtrack",h),s.addEventListener("labelchange",h),t.player_.on("ready",h),t.player_.on("dispose",function(){s.removeEventListener("removetrack",h),s.removeEventListener("addtrack",h),s.removeEventListener("labelchange",h)}),t}return $e(a,g),a}(Xd);gn.registerComponent("TrackButton",Tc);var Gp=["Tab","Esc","Up","Down","Right","Left"],hd=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).selectable=t.selectable,s.isSelected_=t.selected||!1,s.multiSelectable=t.multiSelectable,s.selected(s.isSelected_),s.el_.setAttribute("role",s.selectable?s.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),s}$e(a,g);var o=a.prototype;return o.createEl=function(t,s,h){this.nonIconControl=!0;var v=g.prototype.createEl.call(this,"li",et({className:"vjs-menu-item",tabIndex:-1},s),h);return v.replaceChild(gr("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),v.querySelector(".vjs-icon-placeholder")),v},o.handleKeyDown=function(t){Gp.some(function(s){return Se().isEventKey(t,s)})||g.prototype.handleKeyDown.call(this,t)},o.handleClick=function(t){this.selected(!0)},o.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},a}(ld);gn.registerComponent("MenuItem",hd);var Kr=function(g){function a(u,t){var s,h=t.track,v=u.textTracks();t.label=h.label||h.language||"Unknown",t.selected="showing"===h.mode,(s=g.call(this,u,t)||this).track=h,s.kinds=(t.kinds||[t.kind||s.track.kind]).filter(Boolean);var L,S=function(){for(var Y=arguments.length,Te=new Array(Y),je=0;je<Y;je++)Te[je]=arguments[je];s.handleTracksChange.apply(ut(s),Te)},x=function(){for(var Y=arguments.length,Te=new Array(Y),je=0;je<Y;je++)Te[je]=arguments[je];s.handleSelectedLanguageChange.apply(ut(s),Te)};return u.on(["loadstart","texttrackchange"],S),v.addEventListener("change",S),v.addEventListener("selectedlanguagechange",x),s.on("dispose",function(){u.off(["loadstart","texttrackchange"],S),v.removeEventListener("change",S),v.removeEventListener("selectedlanguagechange",x)}),void 0===v.onchange&&s.on(["tap","click"],function(){if("object"!=typeof se().Event)try{L=new(se().Event)("change")}catch{}L||(L=Ae().createEvent("Event")).initEvent("change",!0,!0),v.dispatchEvent(L)}),s.handleTracksChange(),s}$e(a,g);var o=a.prototype;return o.handleClick=function(t){var s=this.track,h=this.player_.textTracks();if(g.prototype.handleClick.call(this,t),h)for(var v=0;v<h.length;v++){var S=h[v];-1!==this.kinds.indexOf(S.kind)&&(S===s?"showing"!==S.mode&&(S.mode="showing"):"disabled"!==S.mode&&(S.mode="disabled"))}},o.handleTracksChange=function(t){var s="showing"===this.track.mode;s!==this.isSelected_&&this.selected(s)},o.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},o.dispose=function(){this.track=null,g.prototype.dispose.call(this)},a}(hd);gn.registerComponent("TextTrackMenuItem",Kr);var Jd=function(g){function a(u,t){return t.track={player:u,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,g.call(this,u,t)||this}$e(a,g);var o=a.prototype;return o.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var x=s[v];if(this.options_.kinds.indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},o.handleSelectedLanguageChange=function(t){for(var s=this.player().textTracks(),h=!0,v=0,S=s.length;v<S;v++){var x=s[v];if(["captions","descriptions","subtitles"].indexOf(x.kind)>-1&&"showing"===x.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},a}(Kr);gn.registerComponent("OffTextTrackMenuItem",Jd);var Yu=function(g){function a(u,t){return void 0===t&&(t={}),t.tracks=u.textTracks(),g.call(this,u,t)||this}return $e(a,g),a.prototype.createItems=function(t,s){var h;void 0===t&&(t=[]),void 0===s&&(s=Kr),this.label_&&(h=this.label_+" off"),t.push(new Jd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var v=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<v.length;S++){var x=v[S];if(this.kinds_.indexOf(x.kind)>-1){var L=new s(this.player_,{track:x,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});L.addClass("vjs-"+x.kind+"-menu-item"),t.push(L)}}return t},a}(Tc);gn.registerComponent("TextTrackButton",Yu);var eh=function(g){function a(u,t){var s,h=t.track,v=t.cue,S=u.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=v.text,t.selected=v.startTime<=S&&S<v.endTime,(s=g.call(this,u,t)||this).track=h,s.cue=v,s}return $e(a,g),a.prototype.handleClick=function(t){g.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},a}(hd);gn.registerComponent("ChaptersTrackMenuItem",eh);var Zl=function(g){function a(u,t,s){var h;return(h=g.call(this,u,t,s)||this).selectCurrentItem_=function(){h.items.forEach(function(v){v.selected(h.track_.activeCues[0]===v.cue)})},h}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)},o.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),g.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&g.prototype.update.call(this)}},o.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},o.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],s=t.length-1;s>=0;s--){var h=t[s];if(h.kind===this.kind_)return h}},o.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Qe(this.kind_))},o.createMenu=function(){return this.options_.title=this.getMenuCaption(),g.prototype.createMenu.call(this)},o.createItems=function(){var t=[];if(!this.track_)return t;var s=this.track_.cues;if(!s)return t;for(var h=0,v=s.length;h<v;h++){var x=new eh(this.player_,{track:this.track_,cue:s[h]});t.push(x)}return t},a}(Yu);Zl.prototype.kind_="chapters",Zl.prototype.controlText_="Chapters",gn.registerComponent("ChaptersButton",Zl);var Ec=function(g){function a(u,t,s){var h;h=g.call(this,u,t,s)||this;var v=u.textTracks(),S=ys(ut(h),h.handleTracksChange);return v.addEventListener("change",S),h.on("dispose",function(){v.removeEventListener("change",S)}),h}$e(a,g);var o=a.prototype;return o.handleTracksChange=function(t){for(var s=this.player().textTracks(),h=!1,v=0,S=s.length;v<S;v++){var x=s[v];if(x.kind!==this.kind_&&"showing"===x.mode){h=!0;break}}h?this.disable():this.enable()},o.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)},a}(Yu);Ec.prototype.kind_="descriptions",Ec.prototype.controlText_="Descriptions",gn.registerComponent("DescriptionsButton",Ec);var Aa=function(g){function a(u,t,s){return g.call(this,u,t,s)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)},a}(Yu);Aa.prototype.kind_="subtitles",Aa.prototype.controlText_="Subtitles",gn.registerComponent("SubtitlesButton",Aa);var Yl=function(g){function a(u,t){var s;return t.track={player:u,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(s=g.call(this,u,t)||this).addClass("vjs-texttrack-settings"),s.controlText(", opens "+t.kind+" settings dialog"),s}return $e(a,g),a.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},a}(Kr);gn.registerComponent("CaptionSettingsMenuItem",Yl);var ml=function(g){function a(u,t,s){return g.call(this,u,t,s)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-captions-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Yl(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t)},a}(Yu);ml.prototype.kind_="captions",ml.prototype.controlText_="Captions",gn.registerComponent("CaptionsButton",ml);var Wp=function(g){function a(){return g.apply(this,arguments)||this}return $e(a,g),a.prototype.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(S.appendChild(gr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(gr("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),v},a}(Kr);gn.registerComponent("SubsCapsMenuItem",Wp);var Sc=function(g){function a(u,t){var s;return void 0===t&&(t={}),(s=g.call(this,u,t)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(Qe(s.label_)),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Yl(this.player_,{kind:this.label_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t,Wp)},a}(Yu);Sc.prototype.kinds_=["captions","subtitles"],Sc.prototype.controlText_="Subtitles",gn.registerComponent("SubsCapsButton",Sc);var wc=function(g){function a(u,t){var s,h=t.track,v=u.audioTracks();t.label=h.label||h.language||"Unknown",t.selected=h.enabled,(s=g.call(this,u,t)||this).track=h,s.addClass("vjs-"+h.kind+"-menu-item");var S=function(){for(var L=arguments.length,ne=new Array(L),Y=0;Y<L;Y++)ne[Y]=arguments[Y];s.handleTracksChange.apply(ut(s),ne)};return v.addEventListener("change",S),s.on("dispose",function(){v.removeEventListener("change",S)}),s}$e(a,g);var o=a.prototype;return o.createEl=function(t,s,h){var v=g.prototype.createEl.call(this,t,s,h),S=v.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(S.appendChild(gr("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(gr("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),v},o.handleClick=function(t){if(g.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),h=0;h<s.length;h++){var v=s[h];v!==this.track&&(v.enabled=v===this.track)}},o.handleTracksChange=function(t){this.selected(this.track.enabled)},a}(hd);gn.registerComponent("AudioTrackMenuItem",wc);var zp=function(g){function a(u,t){return void 0===t&&(t={}),t.tracks=u.audioTracks(),g.call(this,u,t)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),h=0;h<s.length;h++)t.push(new wc(this.player_,{track:s[h],selectable:!0,multiSelectable:!1}));return t},a}(Tc);zp.prototype.controlText_="Audio Track",gn.registerComponent("AudioTrackButton",zp);var fd=function(g){function a(u,t){var s,h=t.rate,v=parseFloat(h,10);return t.label=h,t.selected=v===u.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(s=g.call(this,u,t)||this).label=h,s.rate=v,s.on(u,"ratechange",function(S){return s.update(S)}),s}$e(a,g);var o=a.prototype;return o.handleClick=function(t){g.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},o.update=function(t){this.selected(this.player().playbackRate()===this.rate)},a}(hd);fd.prototype.contentElType="button",gn.registerComponent("PlaybackRateMenuItem",fd);var th=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(u,"loadstart",function(h){return s.updateVisibility(h)}),s.on(u,"ratechange",function(h){return s.updateLabel(h)}),s.on(u,"playbackrateschange",function(h){return s.handlePlaybackRateschange(h)}),s}$e(a,g);var o=a.prototype;return o.createEl=function(){var t=g.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=gr("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},o.dispose=function(){this.labelEl_=null,g.prototype.dispose.call(this)},o.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)},o.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)},o.createItems=function(){for(var t=this.playbackRates(),s=[],h=t.length-1;h>=0;h--)s.push(new fd(this.player(),{rate:t[h]+"x"}));return s},o.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},o.handleClick=function(t){var s=this.player().playbackRate(),h=this.playbackRates(),S=(h.indexOf(s)+1)%h.length;this.player().playbackRate(h[S])},o.handlePlaybackRateschange=function(t){this.update()},o.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},o.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},o.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},o.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},a}(Xd);th.prototype.controlText_="Playback Rate",gn.registerComponent("PlaybackRateMenuButton",th);var sa=function(g){function a(){return g.apply(this,arguments)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)},o.createEl=function(t,s,h){return void 0===t&&(t="div"),void 0===s&&(s={}),void 0===h&&(h={}),s.className||(s.className=this.buildCSSClass()),g.prototype.createEl.call(this,t,s,h)},a}(gn);gn.registerComponent("Spacer",sa);var Hh=function(g){function a(){return g.apply(this,arguments)||this}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)},o.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},a}(sa);gn.registerComponent("CustomControlSpacer",Hh);var pd=function(g){function a(){return g.apply(this,arguments)||this}return $e(a,g),a.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},a}(gn);pd.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ae()&&pd.prototype.options_.children.splice(pd.prototype.options_.children.length-1,0,"pictureInPictureToggle"),gn.registerComponent("ControlBar",pd);var oa=function(g){function a(u,t){var s;return(s=g.call(this,u,t)||this).on(u,"error",function(h){return s.open(h)}),s}$e(a,g);var o=a.prototype;return o.buildCSSClass=function(){return"vjs-error-display "+g.prototype.buildCSSClass.call(this)},o.content=function(){var t=this.player().error();return t?this.localize(t.message):""},a}($i);oa.prototype.options_=Ie({},$i.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),gn.registerComponent("ErrorDisplay",oa);var nh="vjs-text-track-settings",rh=["#000","Black"],ao=["#00F","Blue"],Lu=["#0FF","Cyan"],gd=["#0F0","Green"],Uf=["#F0F","Magenta"],Eu=["#F00","Red"],Ql=["#FFF","White"],$h=["#FF0","Yellow"],md=["1","Opaque"],Bf=["0.5","Semi-Transparent"],ih=["0","Transparent"],Ml={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[rh,Ql,Eu,gd,ao,$h,Uf,Lu]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[md,Bf,ih]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ql,rh,Eu,gd,ao,$h,Uf,Lu]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[md,Bf]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ih,Bf,md]}};function Gh(g,a){if(a&&(g=a(g)),g&&"none"!==g)return g}Ml.windowColor.options=Ml.backgroundColor.options;var C=function(g){function a(u,t){var s;return t.temporary=!1,(s=g.call(this,u,t)||this).updateDisplay=s.updateDisplay.bind(ut(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=gr("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),void 0===t.persistTextTrackSettings&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),z(Ml,function(h){s.on(s.$(h.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}$e(a,g);var o=a.prototype;return o.dispose=function(){this.endDialog=null,g.prototype.dispose.call(this)},o.createElSelect_=function(t,s,h){var v=this;void 0===s&&(s=""),void 0===h&&(h="label");var S=Ml[t],x=S.id.replace("%s",this.id_),L=[s,x].join(" ").trim();return["<"+h+' id="'+x+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(S.label),"</"+h+">",'<select aria-labelledby="'+L+'">'].concat(S.options.map(function(ne){var Y=x+"-"+ne[1].replace(/\W+/g,"");return['<option id="'+Y+'" value="'+ne[0]+'" ','aria-labelledby="'+L+" "+Y+'">',v.localize(ne[1]),"</option>"].join("")})).concat("</select>").join("")},o.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},o.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},o.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},o.createElColors_=function(){return gr("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},o.createElFont_=function(){return gr("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},o.createElControls_=function(){var t=this.localize("restore all settings to the default values");return gr("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},o.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},o.label=function(){return this.localize("Caption Settings Dialog")},o.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},o.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},o.getValues=function(){var t=this;return function we(g,a,o){return void 0===o&&(o=0),ge(g).reduce(function(u,t){return a(u,g[t],t)},o)}(Ml,function(s,h,v){var S=function sh(g,a){return Gh(g.options[g.options.selectedIndex].value,a)}(t.$(h.selector),h.parser);return void 0!==S&&(s[v]=S),s},{})},o.setValues=function(t){var s=this;z(Ml,function(h,v){!function qp(g,a,o){if(a)for(var u=0;u<g.options.length;u++)if(Gh(g.options[u].value,o)===a){g.selectedIndex=u;break}}(s.$(h.selector),t[v],h.parser)})},o.setDefaults=function(){var t=this;z(Ml,function(s){var h=s.hasOwnProperty("default")?s.default:0;t.$(s.selector).selectedIndex=h})},o.restoreSettings=function(){var t;try{t=JSON.parse(se().localStorage.getItem(nh))}catch(s){Dr.warn(s)}t&&this.setValues(t)},o.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?se().localStorage.setItem(nh,JSON.stringify(t)):se().localStorage.removeItem(nh)}catch(s){Dr.warn(s)}}},o.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},o.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,s=t&&t.subsCapsButton,h=t&&t.captionsButton;s?s.focus():h&&h.focus()},a}($i);gn.registerComponent("TextTrackSettings",C);var y=function(g){function a(u,t){var s,h=t.ResizeObserver||se().ResizeObserver;null===t.ResizeObserver&&(h=!1);var v=bn({createEl:!h,reportTouchActivity:!1},t);return(s=g.call(this,u,v)||this).ResizeObserver=t.ResizeObserver||se().ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=function(a,o,u,t){void 0===t&&(t=se());var s,v=function(){var x=this,L=arguments,ne=function(){s=null,ne=null,a.apply(x,L)};t.clearTimeout(s),s=t.setTimeout(ne,100)};return v.cancel=function(){t.clearTimeout(s),s=null},v}(function(){s.resizeHandler()},0,0,ut(s)),h?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(u.el())):(s.loadListener_=function(){if(s.el_&&s.el_.contentWindow){var S=s.debouncedHandler_,x=s.unloadListener_=function(){Go(this,"resize",S),Go(this,"unload",x),x=null};va(s.el_.contentWindow,"unload",x),va(s.el_.contentWindow,"resize",S)}},s.one("load",s.loadListener_)),s}$e(a,g);var o=a.prototype;return o.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},o.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},o.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,g.prototype.dispose.call(this)},a}(gn);gn.registerComponent("ResizeManager",y);var T={trackingThreshold:20,liveTolerance:15},P=function(g){function a(u,t){var s,h=bn(T,t,{createEl:!1});return(s=g.call(this,u,h)||this).handleVisibilityChange_=function(v){return s.handleVisibilityChange(v)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(v){return s.handlePlay(v)},s.handleFirstTimeupdate_=function(v){return s.handleFirstTimeupdate(v)},s.handleSeeked_=function(v){return s.handleSeeked(v)},s.seekToLiveEdge_=function(v){return s.seekToLiveEdge(v)},s.reset_(),s.on(s.player_,"durationchange",function(v){return s.handleDurationchange(v)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),Ho&&"hidden"in Ae()&&"visibilityState"in Ae()&&s.on(Ae(),"visibilitychange",s.handleVisibilityChange_),s}$e(a,g);var o=a.prototype;return o.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ae().hidden?this.stopTracking():this.startTracking())},o.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var s=Number(se().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+h;var v=this.liveCurrentTime(),S=this.player_.currentTime(),x=this.player_.paused()||this.seekedBehindLive_||Math.abs(v-S)>this.options_.liveTolerance;(!this.timeupdateSeen_||v===1/0)&&(x=!1),x!==this.behindLiveEdge_&&(this.behindLiveEdge_=x,this.trigger("liveedgechange"))}},o.handleDurationchange=function(){this.toggleTracking()},o.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},o.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},o.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},o.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},o.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},o.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},o.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},o.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},o.seekableEnd=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.end(h));return s.length?s.sort()[s.length-1]:1/0},o.seekableStart=function(){for(var t=this.player_.seekable(),s=[],h=t?t.length:0;h--;)s.push(t.start(h));return s.length?s.sort()[0]:0},o.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},o.isLive=function(){return this.isTracking()},o.atLiveEdge=function(){return!this.behindLiveEdge()},o.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},o.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},o.behindLiveEdge=function(){return this.behindLiveEdge_},o.isTracking=function(){return"number"==typeof this.trackingInterval_},o.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},o.dispose=function(){this.off(Ae(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),g.prototype.dispose.call(this)},a}(gn);gn.registerComponent("LiveTracker",P);var zc,de=function(a){var o=a.el();if(o.hasAttribute("src"))return a.triggerSourceset(o.src),!0;var u=a.$$("source"),t=[],s="";if(!u.length)return!1;for(var h=0;h<u.length;h++){var v=u[h].src;v&&-1===t.indexOf(v)&&t.push(v)}return!!t.length&&(1===t.length&&(s=t[0]),a.triggerSourceset(s),!0)},De=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var o=Ae().createElement(this.nodeName.toLowerCase());o.innerHTML=a;for(var u=Ae().createDocumentFragment();o.childNodes.length;)u.appendChild(o.childNodes[0]);return this.innerText="",se().Element.prototype.appendChild.call(this,u),this.innerHTML}}),gt=function(a,o){for(var u={},t=0;t<a.length&&!((u=Object.getOwnPropertyDescriptor(a[t],o))&&u.set&&u.get);t++);return u.enumerable=!0,u.configurable=!0,u},On=function(a){var o=a.el();if(!o.resetSourceWatch_){var u={},t=function(a){return gt([a.el(),se().HTMLMediaElement.prototype,se().Element.prototype,De],"innerHTML")}(a),s=function(v){return function(){for(var S=arguments.length,x=new Array(S),L=0;L<S;L++)x[L]=arguments[L];var ne=v.apply(o,x);return de(a),ne}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){!o[h]||(u[h]=o[h],o[h]=s(u[h]))}),Object.defineProperty(o,"innerHTML",bn(t,{set:s(t.set)})),o.resetSourceWatch_=function(){o.resetSourceWatch_=null,Object.keys(u).forEach(function(h){o[h]=u[h]}),Object.defineProperty(o,"innerHTML",t)},a.one("sourceset",o.resetSourceWatch_)}},lr=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Il(se().Element.prototype.getAttribute.call(this,"src")):""},set:function(a){return se().Element.prototype.setAttribute.call(this,"src",a),a}}),Ki=function(a,o,u,t){void 0===t&&(t=!0);var s=function(S){return Object.defineProperty(a,o,{value:S,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var S=u();return s(S),S}};return t&&(h.set=s),Object.defineProperty(a,o,h)},Fn=function(g){function a(u,t){var s;s=g.call(this,u,t)||this;var h=u.source,v=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&"VIDEO"===s.el_.tagName,h&&(s.el_.currentSrc!==h.src||u.tag&&3===u.tag.initNetworkState_)?s.setSource(h):s.handleLateInit_(s.el_),u.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var S=s.el_.childNodes,x=S.length,L=[];x--;){var ne=S[x];"track"===ne.nodeName.toLowerCase()&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(ne),s.remoteTextTracks().addTrack(ne.track),s.textTracks().addTrack(ne.track),!v&&!s.el_.hasAttribute("crossorigin")&&As(ne.src)&&(v=!0)):L.push(ne))}for(var Te=0;Te<L.length;Te++)s.el_.removeChild(L[Te])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&v&&Dr.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),s.restoreMetadataTracksInIOSNativePlayer_(),(fs||ku||Fa)&&!0===u.nativeControlsForTouch&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}$e(a,g);var o=a.prototype;return o.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),a.disposeMediaElement(this.el_),this.options_=null,g.prototype.dispose.call(this)},o.setupSourcesetHandling_=function(){!function(a){if(a.featuresSourceset){var o=a.el();if(!o.resetSourceset_){var u=function(a){return gt([a.el(),se().HTMLMediaElement.prototype,lr],"src")}(a),t=o.setAttribute,s=o.load;Object.defineProperty(o,"src",bn(u,{set:function(v){var S=u.set.call(o,v);return a.triggerSourceset(o.src),S}})),o.setAttribute=function(h,v){var S=t.call(o,h,v);return/src/i.test(h)&&a.triggerSourceset(o.src),S},o.load=function(){var h=s.call(o);return de(a)||(a.triggerSourceset(""),On(a)),h},o.currentSrc?a.triggerSourceset(o.currentSrc):de(a)||On(a),o.resetSourceset_=function(){o.resetSourceset_=null,o.load=s,o.setAttribute=t,Object.defineProperty(o,"src",u),o.resetSourceWatch_&&o.resetSourceWatch_()}}}}(this)},o.restoreMetadataTracksInIOSNativePlayer_=function(){var s,t=this.textTracks(),h=function(){s=[];for(var x=0;x<t.length;x++){var L=t[x];"metadata"===L.kind&&s.push({track:L,storedMode:L.mode})}};h(),t.addEventListener("change",h),this.on("dispose",function(){return t.removeEventListener("change",h)});var v=function S(){for(var x=0;x<s.length;x++){var L=s[x];"disabled"===L.track.mode&&L.track.mode!==L.storedMode&&(L.track.mode=L.storedMode)}t.removeEventListener("change",S)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",h),t.removeEventListener("change",v),t.addEventListener("change",v)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",h),t.addEventListener("change",h),t.removeEventListener("change",v)})},o.overrideNative_=function(t,s){var h=this;if(s===this["featuresNative"+t+"Tracks"]){var v=t.toLowerCase();this[v+"TracksListeners_"]&&Object.keys(this[v+"TracksListeners_"]).forEach(function(S){h.el()[v+"Tracks"].removeEventListener(S,h[v+"TracksListeners_"][S])}),this["featuresNative"+t+"Tracks"]=!s,this[v+"TracksListeners_"]=null,this.proxyNativeTracksForType_(v)}},o.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},o.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},o.proxyNativeTracksForType_=function(t){var s=this,h=os[t],v=this.el()[h.getterName],S=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&v&&v.addEventListener){var x={change:function(Y){var Te={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(Te),"text"===t&&s[id.remoteText.getterName]().trigger(Te)},addtrack:function(Y){S.addTrack(Y.track)},removetrack:function(Y){S.removeTrack(Y.track)}},L=function(){for(var Y=[],Te=0;Te<S.length;Te++){for(var je=!1,Ve=0;Ve<v.length;Ve++)if(v[Ve]===S[Te]){je=!0;break}je||Y.push(S[Te])}for(;Y.length;)S.removeTrack(Y.shift())};this[h.getterName+"Listeners_"]=x,Object.keys(x).forEach(function(ne){var Y=x[ne];v.addEventListener(ne,Y),s.on("dispose",function(Te){return v.removeEventListener(ne,Y)})}),this.on("loadstart",L),this.on("dispose",function(ne){return s.off("loadstart",L)})}},o.proxyNativeTracks_=function(){var t=this;os.names.forEach(function(s){t.proxyNativeTracksForType_(s)})},o.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var s=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(s,t),a.disposeMediaElement(t),t=s}else{t=Ae().createElement("video");var v=bn({},this.options_.tag&&Ss(this.options_.tag));(!fs||!0!==this.options_.nativeControlsForTouch)&&delete v.controls,vs(t,et(v,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&dr(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var S=["loop","muted","playsinline","autoplay"],x=0;x<S.length;x++){var L=S[x],ne=this.options_[L];typeof ne<"u"&&(ne?dr(t,L,L):hu(t,L),t[L]=ne)}return t},o.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var s=!1,h=function(){s=!0};this.on("loadstart",h);var v=function(){s||this.trigger("loadstart")};return this.on("loadedmetadata",v),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",v),s||this.trigger("loadstart")})}var S=["loadstart"];S.push("loadedmetadata"),t.readyState>=2&&S.push("loadeddata"),t.readyState>=3&&S.push("canplay"),t.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(x){this.trigger(x)},this)})}},o.setScrubbing=function(t){this.isScrubbing_=t},o.scrubbing=function(){return this.isScrubbing_},o.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&Tl?this.el_.fastSeek(t):this.el_.currentTime=t}catch(s){Dr(s,"Video is not ready. (Video.js)")}},o.duration=function(){var t=this;return this.el_.duration===1/0&&li&&wo&&0===this.el_.currentTime?(this.on("timeupdate",function h(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",h))}),NaN):this.el_.duration||NaN},o.width=function(){return this.el_.offsetWidth},o.height=function(){return this.el_.offsetHeight},o.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){t.off("webkitbeginfullscreen",h),t.off("webkitendfullscreen",s)})}},o.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=se().navigator&&se().navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},o.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)ya(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{t.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},o.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},o.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},o.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):g.prototype.requestVideoFrameCallback.call(this,t)},o.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):g.prototype.cancelVideoFrameCallback.call(this,t)},o.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},o.reset=function(){a.resetMediaElement(this.el_)},o.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},o.setControls=function(t){this.el_.controls=!!t},o.addTextTrack=function(t,s,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,s,h):g.prototype.addTextTrack.call(this,t,s,h)},o.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,t);var s=Ae().createElement("track");return t.kind&&(s.kind=t.kind),t.label&&(s.label=t.label),(t.language||t.srclang)&&(s.srclang=t.language||t.srclang),t.default&&(s.default=t.default),t.id&&(s.id=t.id),t.src&&(s.src=t.src),s},o.addRemoteTextTrack=function(t,s){var h=g.prototype.addRemoteTextTrack.call(this,t,s);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},o.removeRemoteTextTrack=function(t){if(g.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var s=this.$$("track"),h=s.length;h--;)(t===s[h]||t===s[h].track)&&this.el().removeChild(s[h])},o.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),se().performance&&"function"==typeof se().performance.now?t.creationTime=se().performance.now():se().performance&&se().performance.timing&&"number"==typeof se().performance.timing.navigationStart&&(t.creationTime=se().Date.now()-se().performance.timing.navigationStart),t},a}(ws);Ki(Fn,"TEST_VID",function(){if(Mu()){var g=Ae().createElement("video"),a=Ae().createElement("track");return a.kind="captions",a.srclang="en",a.label="English",g.appendChild(a),g}}),Fn.isSupported=function(){try{Fn.TEST_VID.volume=.5}catch{return!1}return!(!Fn.TEST_VID||!Fn.TEST_VID.canPlayType)},Fn.canPlayType=function(g){return Fn.TEST_VID.canPlayType(g)},Fn.canPlaySource=function(g,a){return Fn.canPlayType(g.type)},Fn.canControlVolume=function(){try{var g=Fn.TEST_VID.volume;Fn.TEST_VID.volume=g/2+.1;var a=g!==Fn.TEST_VID.volume;return a&&$o?(se().setTimeout(function(){Fn&&Fn.prototype&&(Fn.prototype.featuresVolumeControl=g!==Fn.TEST_VID.volume)}),!1):a}catch{return!1}},Fn.canMuteVolume=function(){try{var g=Fn.TEST_VID.muted;return Fn.TEST_VID.muted=!g,Fn.TEST_VID.muted?dr(Fn.TEST_VID,"muted","muted"):hu(Fn.TEST_VID,"muted"),g!==Fn.TEST_VID.muted}catch{return!1}},Fn.canControlPlaybackRate=function(){if(li&&wo&&ma<58)return!1;try{var g=Fn.TEST_VID.playbackRate;return Fn.TEST_VID.playbackRate=g/2+.1,g!==Fn.TEST_VID.playbackRate}catch{return!1}},Fn.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(Ae().createElement("video"),"src",{get:g,set:g}),Object.defineProperty(Ae().createElement("audio"),"src",{get:g,set:g}),Object.defineProperty(Ae().createElement("video"),"innerHTML",{get:g,set:g}),Object.defineProperty(Ae().createElement("audio"),"innerHTML",{get:g,set:g})}catch{return!1}return!0},Fn.supportsNativeTextTracks=function(){return Tl||$o&&wo},Fn.supportsNativeVideoTracks=function(){return!(!Fn.TEST_VID||!Fn.TEST_VID.videoTracks)},Fn.supportsNativeAudioTracks=function(){return!(!Fn.TEST_VID||!Fn.TEST_VID.audioTracks)},Fn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(g){var o=g[1];Ki(Fn.prototype,g[0],function(){return Fn[o]()},!0)}),Fn.prototype.featuresVolumeControl=Fn.canControlVolume(),Fn.prototype.movingMediaElementInDOM=!$o,Fn.prototype.featuresFullscreenResize=!0,Fn.prototype.featuresProgressEvents=!0,Fn.prototype.featuresTimeupdateEvents=!0,Fn.prototype.featuresVideoFrameCallback=!(!Fn.TEST_VID||!Fn.TEST_VID.requestVideoFrameCallback),Fn.patchCanPlayType=function(){es>=4&&!mo&&!wo&&(zc=Fn.TEST_VID&&Fn.TEST_VID.constructor.prototype.canPlayType,Fn.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(g)?"maybe":zc.call(this,g)})},Fn.unpatchCanPlayType=function(){var g=Fn.TEST_VID.constructor.prototype.canPlayType;return zc&&(Fn.TEST_VID.constructor.prototype.canPlayType=zc),g},Fn.patchCanPlayType(),Fn.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},Fn.resetMediaElement=function(g){if(g){for(var a=g.querySelectorAll("source"),o=a.length;o--;)g.removeChild(a[o]);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(g){Fn.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){Fn.prototype["set"+Qe(g)]=function(a){this.el_[g]=a,a?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(g){Fn.prototype[g]=function(){return this.el_[g]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(g){Fn.prototype["set"+Qe(g)]=function(a){this.el_[g]=a}}),["pause","load","play"].forEach(function(g){Fn.prototype[g]=function(){return this.el_[g]()}}),ws.withSourceHandlers(Fn),Fn.nativeSourceHandler={},Fn.nativeSourceHandler.canPlayType=function(g){try{return Fn.TEST_VID.canPlayType(g)}catch{return""}},Fn.nativeSourceHandler.canHandleSource=function(g,a){if(g.type)return Fn.nativeSourceHandler.canPlayType(g.type);if(g.src){var o=dl(g.src);return Fn.nativeSourceHandler.canPlayType("video/"+o)}return""},Fn.nativeSourceHandler.handleSource=function(g,a,o){a.setSrc(g.src)},Fn.nativeSourceHandler.dispose=function(){},Fn.registerSourceHandler(Fn.nativeSourceHandler),ws.registerTech("Html5",Fn);var vl=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Cc={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},vd=["tiny","xsmall","small","medium","large","xlarge","huge"],oh={};vd.forEach(function(g){var a="x"===g.charAt(0)?"x-"+g.substring(1):g;oh[g]="vjs-layout-"+a});var Kp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},qo=function(g){function a(u,t,s){var h;if(u.id=u.id||t.id||"vjs_video_"+Ai(),(t=et(a.getTagSettings(u),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof u.closest){var v=u.closest("[lang]");v&&v.getAttribute&&(t.language=v.getAttribute("lang"))}else for(var S=u;S&&1===S.nodeType;){if(Ss(S).hasOwnProperty("lang")){t.language=S.getAttribute("lang");break}S=S.parentNode}if((h=g.call(this,null,t,s)||this).boundDocumentFullscreenChange_=function(Y){return h.documentFullscreenChange_(Y)},h.boundFullWindowOnEscKey_=function(Y){return h.fullWindowOnEscKey(Y)},h.boundUpdateStyleEl_=function(Y){return h.updateStyleEl_(Y)},h.boundApplyInitTime_=function(Y){return h.applyInitTime_(Y)},h.boundUpdateCurrentBreakpoint_=function(Y){return h.updateCurrentBreakpoint_(Y)},h.boundHandleTechClick_=function(Y){return h.handleTechClick_(Y)},h.boundHandleTechDoubleClick_=function(Y){return h.handleTechDoubleClick_(Y)},h.boundHandleTechTouchStart_=function(Y){return h.handleTechTouchStart_(Y)},h.boundHandleTechTouchMove_=function(Y){return h.handleTechTouchMove_(Y)},h.boundHandleTechTouchEnd_=function(Y){return h.handleTechTouchEnd_(Y)},h.boundHandleTechTap_=function(Y){return h.handleTechTap_(Y)},h.isFullscreen_=!1,h.log=Oo(h.id_),h.fsApi_=Vi,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,h.audioOnlyMode_=!1,h.audioPosterMode_=!1,h.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=u,h.tagAttributes=u&&Ss(u),h.language(h.options_.language),t.languages){var x={};Object.getOwnPropertyNames(t.languages).forEach(function(Y){x[Y.toLowerCase()]=t.languages[Y]}),h.languages_=x}else h.languages_=a.prototype.options_.languages;h.resetCache_(),h.poster_=t.poster||"",h.controls_=!!t.controls,u.controls=!1,u.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],u.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(Y){if("function"!=typeof h[Y])throw new Error('plugin "'+Y+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),U(ut(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(va(Ae(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var L=bn(h.options_);t.plugins&&Object.keys(t.plugins).forEach(function(Y){h[Y](t.plugins[Y])}),t.debug&&h.debug(!0),h.options_.playerOptions=L,h.middleware_=[],h.playbackRates(t.playbackRates),h.initChildren(),h.isAudio("audio"===u.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),fs&&h.addClass("vjs-touch-enabled"),$o||h.addClass("vjs-workinghover"),a.players[h.id_]=ut(h);var ne="7.20.3".split(".")[0];return h.addClass("vjs-v"+ne),h.userActive(!0),h.reportUserActivity(),h.one("play",function(Y){return h.listenForUserActivity_(Y)}),h.on("stageclick",function(Y){return h.handleStageClick_(Y)}),h.on("keydown",function(Y){return h.handleKeyDown(Y)}),h.on("languagechange",function(Y){return h.handleLanguagechange(Y)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h.on("ready",function(){h.audioPosterMode(h.options_.audioPosterMode),h.audioOnlyMode(h.options_.audioOnlyMode)}),h}$e(a,g);var o=a.prototype;return o.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Go(Ae(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Go(Ae(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),a.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Nh(g){Wd[g.id()]=null}(this),$a.names.forEach(function(s){var v=t[$a[s].getterName]();v&&v.off&&v.off()}),g.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},o.createEl=function(){var s,t=this.tag,h=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),v="video-js"===this.tag.tagName.toLowerCase();h?s=this.el_=t.parentNode:v||(s=this.el_=g.prototype.createEl.call(this,"div"));var S=Ss(t);if(v){for(s=this.el_=t,t=this.tag=Ae().createElement("video");s.children.length;)t.appendChild(s.firstChild);ja(s,"video-js")||$u(s,"video-js"),s.appendChild(t),h=this.playerElIngest_=s,Object.keys(s).forEach(function(je){try{t[je]=s[je]}catch{}})}if(t.setAttribute("tabindex","-1"),S.tabindex="-1",(Ho||wo&&Co)&&(t.setAttribute("role","application"),S.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in S&&delete S.width,"height"in S&&delete S.height,Object.getOwnPropertyNames(S).forEach(function(je){v&&"class"===je||s.setAttribute(je,S[je]),v&&t.setAttribute(je,S[je])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=s.player=this,this.addClass("vjs-paused"),!0!==se().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Er("vjs-styles-dimensions");var x=Xa(".vjs-styles-defaults"),L=Xa("head");L.insertBefore(this.styleEl_,x?x.nextSibling:L.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var ne=t.getElementsByTagName("a"),Y=0;Y<ne.length;Y++){var Te=ne.item(Y);$u(Te,"vjs-hidden"),Te.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!h&&t.parentNode.insertBefore(s,t),oo(t,s),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},o.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):Dr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},o.width=function(t){return this.dimension("width",t)},o.height=function(t){return this.dimension("height",t)},o.dimension=function(t,s){var h=t+"_";if(void 0===s)return this[h]||0;if(""===s||"auto"===s)return this[h]=void 0,void this.updateStyleEl_();var v=parseFloat(s);isNaN(v)?Dr.error('Improper value "'+s+'" supplied for for '+t):(this[h]=v,this.updateStyleEl_())},o.fluid=function(t){var s=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,ss(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(a,o){ss(a)?o():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(o))}(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},o.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},o.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},o.updateStyleEl_=function(){if(!0!==se().VIDEOJS_NO_DYNAMIC_STYLE){var v,S,L,ne=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),Y=ne[1]/ne[0];v=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/Y:this.videoWidth()||300,S=void 0!==this.height_?this.height_:v*Y,L=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(L),gu(this.styleEl_,"\n      ."+L+" {\n        width: "+v+"px;\n        height: "+S+"px;\n      }\n\n      ."+L+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*Y+"%;\n      }\n    ")}else{var t="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(t>=0&&(h.width=t),s>=0&&(h.height=s))}},o.loadTech_=function(t,s){var h=this;this.tech_&&this.unloadTech_();var v=Qe(t),S=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==v&&this.tag&&(ws.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=v,this.isReady_=!1;var x=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(x=!1);var L={source:s,autoplay:x,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};$a.names.forEach(function(Y){var Te=$a[Y];L[Te.getterName]=h[Te.privateName]}),et(L,this.options_[v]),et(L,this.options_[S]),et(L,this.options_[t.toLowerCase()]),this.tag&&(L.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(L.startTime=this.cache_.currentTime);var ne=ws.getTech(t);if(!ne)throw new Error("No Tech named '"+v+"' exists! '"+v+"' should be registered using videojs.registerTech()'");this.tech_=new ne(L),this.tech_.ready(ys(this,this.handleTechReady_),!0),function(a,o){a.forEach(function(u){var t=o.addRemoteTextTrack(u).track;!u.src&&u.cues&&u.cues.forEach(function(s){return t.addCue(s)})}),o.textTracks()}(this.textTracksJson_||[],this.tech_),vl.forEach(function(Y){h.on(h.tech_,Y,function(Te){return h["handleTech"+Qe(Y)+"_"](Te)})}),Object.keys(Cc).forEach(function(Y){h.on(h.tech_,Y,function(Te){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+Cc[Y]+"_"].bind(h),event:Te}):h["handleTech"+Cc[Y]+"_"](Te)})}),this.on(this.tech_,"loadstart",function(Y){return h.handleTechLoadStart_(Y)}),this.on(this.tech_,"sourceset",function(Y){return h.handleTechSourceset_(Y)}),this.on(this.tech_,"waiting",function(Y){return h.handleTechWaiting_(Y)}),this.on(this.tech_,"ended",function(Y){return h.handleTechEnded_(Y)}),this.on(this.tech_,"seeking",function(Y){return h.handleTechSeeking_(Y)}),this.on(this.tech_,"play",function(Y){return h.handleTechPlay_(Y)}),this.on(this.tech_,"firstplay",function(Y){return h.handleTechFirstPlay_(Y)}),this.on(this.tech_,"pause",function(Y){return h.handleTechPause_(Y)}),this.on(this.tech_,"durationchange",function(Y){return h.handleTechDurationChange_(Y)}),this.on(this.tech_,"fullscreenchange",function(Y,Te){return h.handleTechFullscreenChange_(Y,Te)}),this.on(this.tech_,"fullscreenerror",function(Y,Te){return h.handleTechFullscreenError_(Y,Te)}),this.on(this.tech_,"enterpictureinpicture",function(Y){return h.handleTechEnterPictureInPicture_(Y)}),this.on(this.tech_,"leavepictureinpicture",function(Y){return h.handleTechLeavePictureInPicture_(Y)}),this.on(this.tech_,"error",function(Y){return h.handleTechError_(Y)}),this.on(this.tech_,"posterchange",function(Y){return h.handleTechPosterChange_(Y)}),this.on(this.tech_,"textdata",function(Y){return h.handleTechTextData_(Y)}),this.on(this.tech_,"ratechange",function(Y){return h.handleTechRateChange_(Y)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==v||!this.tag)&&oo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},o.unloadTech_=function(){var t=this;$a.names.forEach(function(s){var h=$a[s];t[h.privateName]=t[h.getterName]()}),this.textTracksJson_=function(a){var o=a.$$("track"),u=Array.prototype.map.call(o,function(s){return s.track});return Array.prototype.map.call(o,function(s){var h=Ia(s.track);return s.src&&(h.src=s.src),h}).concat(Array.prototype.filter.call(a.textTracks(),function(s){return-1===u.indexOf(s)}).map(Ia))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},o.tech=function(t){return void 0===t&&Dr.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},o.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},o.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},o.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},o.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},o.manualAutoplay_=function(t){var s=this;if(this.tech_&&"string"==typeof t){var v,h=function(){var x=s.muted();s.muted(!0);var L=function(){s.muted(x)};s.playTerminatedQueue_.push(L);var ne=s.play();if(Io(ne))return ne.catch(function(Y){throw L(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(Y||""))})};if("any"!==t||this.muted()?v="muted"!==t||this.muted()?this.play():h():Io(v=this.play())&&(v=v.catch(h)),Io(v))return v.then(function(){s.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:t})})}},o.updateSourceCaches_=function(t){void 0===t&&(t="");var s=t,h="";"string"!=typeof s&&(s=t.src,h=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!h&&(h=function(a,o){if(!o)return"";if(a.cache_.source.src===o&&a.cache_.source.type)return a.cache_.source.type;var u=a.cache_.sources.filter(function(v){return v.src===o});if(u.length)return u[0].type;for(var t=a.$$("source"),s=0;s<t.length;s++){var h=t[s];if(h.type&&h.src&&h.src===o)return h.type}return Vc(o)}(this,s)),this.cache_.source=bn({},t,{src:s,type:h});for(var v=this.cache_.sources.filter(function(Te){return Te.src&&Te.src===s}),S=[],x=this.$$("source"),L=[],ne=0;ne<x.length;ne++){var Y=Ss(x[ne]);S.push(Y),Y.src&&Y.src===s&&L.push(Y.src)}L.length&&!v.length?this.cache_.sources=S:v.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},o.handleTechSourceset_=function(t){var s=this;if(!this.changingSrc_){var h=function(L){return s.updateSourceCaches_(L)},v=this.currentSource().src,S=t.src;v&&!/^blob:/.test(v)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==v)&&(h=function(){}),h(S),t.src||this.tech_.any(["sourceset","loadstart"],function(x){if("sourceset"!==x.type){var L=s.techGet("currentSrc");s.lastSource_.tech=L,s.updateSourceCaches_(L)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},o.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},o.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},o.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},o.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime();this.on("timeupdate",function v(){s!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",v))})},o.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},o.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},o.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},o.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},o.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},o.handleTechFirstPlay_=function(){this.options_.starttime&&(Dr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},o.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},o.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},o.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},o.handleTechClick_=function(t){!this.controls_||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,t):this.paused()?ya(this.play()):this.pause())},o.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(t.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},o.handleTechTap_=function(){this.userActive(!this.userActive())},o.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},o.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},o.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},o.handleStageClick_=function(){this.reportUserActivity()},o.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},o.documentFullscreenChange_=function(t){var s=t.target.player;if(!s||s===this){var h=this.el(),v=Ae()[this.fsApi_.fullscreenElement]===h;!v&&h.matches?v=h.matches(":"+this.fsApi_.fullscreen):!v&&h.msMatchesSelector&&(v=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(v)}},o.handleTechFullscreenChange_=function(t,s){var h=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){h.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},o.handleTechFullscreenError_=function(t,s){this.trigger("fullscreenerror",s)},o.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},o.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},o.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},o.handleTechError_=function(){var t=this.tech_.error();this.error(t)},o.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},o.getCache=function(){return this.cache_},o.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},o.techCall_=function(t,s){this.ready(function(){if(t in ad)return function Fp(g,a,o,u){return a[o](g.reduce(zd(o),u))}(this.middleware_,this.tech_,t,s);if(t in Wl)return Pf(this.middleware_,this.tech_,t,s);try{this.tech_&&this.tech_[t](s)}catch(h){throw Dr(h),h}},!0)},o.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in yc)return function od(g,a,o){return g.reduceRight(zd(o),a[o]())}(this.middleware_,this.tech_,t);if(t in Wl)return Pf(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(s){throw void 0===this.tech_[t]?(Dr("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",s),s):"TypeError"===s.name?(Dr("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(Dr(s),s)}}},o.play=function(){var t=this,s=this.options_.Promise||se().Promise;return s?new s(function(h){t.play_(h)}):this.play_()},o.play_=function(t){var s=this;void 0===t&&(t=ya),this.playCallbacks_.push(t);var h=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(S){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&(Tl||$o)&&this.load());var v=this.techGet_("play");null===v?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(v)},o.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(s){s()})},o.runPlayCallbacks_=function(t){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(h){h(t)})},o.pause=function(){this.techCall_("pause")},o.paused=function(){return!1!==this.techGet_("paused")},o.played=function(){return this.techGet_("played")||Lo(0,0)},o.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},o.currentTime=function(t){return typeof t<"u"?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},o.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},o.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},o.remainingTime=function(){return this.duration()-this.currentTime()},o.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},o.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=Lo(0,0)),t},o.bufferedPercent=function(){return Va(this.buffered(),this.duration())},o.bufferedEnd=function(){var t=this.buffered(),s=this.duration(),h=t.end(t.length-1);return h>s&&(h=s),h},o.volume=function(t){var s;return void 0!==t?(s=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=s,this.techCall_("setVolume",s),void(s>0&&this.lastVolume_(s))):(s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s)},o.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},o.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},o.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},o.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},o.isFullscreen=function(t){if(void 0!==t){var s=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},o.requestFullscreen=function(t){var s=this.options_.Promise||se().Promise;if(s){var h=this;return new s(function(v,S){function x(){h.off("fullscreenerror",ne),h.off("fullscreenchange",L)}function L(){x(),v()}function ne(Te,je){x(),S(je)}h.one("fullscreenchange",L),h.one("fullscreenerror",ne);var Y=h.requestFullscreenHelper_(t);Y&&(Y.then(x,x),Y.then(v,S))})}return this.requestFullscreenHelper_()},o.requestFullscreenHelper_=function(t){var h,s=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(h=t)),this.fsApi_.requestFullscreen){var v=this.el_[this.fsApi_.requestFullscreen](h);return v&&v.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),v}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},o.exitFullscreen=function(){var t=this.options_.Promise||se().Promise;if(t){var s=this;return new t(function(h,v){function S(){s.off("fullscreenerror",L),s.off("fullscreenchange",x)}function x(){S(),h()}function L(Y,Te){S(),v(Te)}s.one("fullscreenchange",x),s.one("fullscreenerror",L);var ne=s.exitFullscreenHelper_();ne&&(ne.then(S,S),ne.then(h,v))})}return this.exitFullscreenHelper_()},o.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var s=Ae()[this.fsApi_.exitFullscreen]();return s&&ya(s.then(function(){return t.isFullscreen(!1)})),s}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},o.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ae().documentElement.style.overflow,va(Ae(),"keydown",this.boundFullWindowOnEscKey_),Ae().documentElement.style.overflow="hidden",$u(Ae().body,"vjs-full-window"),this.trigger("enterFullWindow")},o.fullWindowOnEscKey=function(t){Se().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},o.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Go(Ae(),"keydown",this.boundFullWindowOnEscKey_),Ae().documentElement.style.overflow=this.docOrigOverflow,En(Ae().body,"vjs-full-window"),this.trigger("exitFullWindow")},o.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},o.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},o.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ae()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},o.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ae())return Ae().exitPictureInPicture()},o.handleKeyDown=function(t){var S,x,s=this.options_.userActions;s&&s.hotkeys&&(x=(S=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),S.isContentEditable||("input"===x?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(S.type):-1!==["textarea"].indexOf(x))||("function"==typeof s.hotkeys?s.hotkeys.call(this,t):this.handleHotkeys(t)))},o.handleHotkeys=function(t){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},h=s.fullscreenKey,S=s.muteKey,x=void 0===S?function(Ve){return Se().isEventKey(Ve,"m")}:S,L=s.playPauseKey,ne=void 0===L?function(Ve){return Se().isEventKey(Ve,"k")||Se().isEventKey(Ve,"Space")}:L;if((void 0===h?function(Ve){return Se().isEventKey(Ve,"f")}:h).call(this,t)){t.preventDefault(),t.stopPropagation();var Y=gn.getComponent("FullscreenToggle");!1!==Ae()[this.fsApi_.fullscreenEnabled]&&Y.prototype.handleClick.call(this,t)}else x.call(this,t)?(t.preventDefault(),t.stopPropagation(),gn.getComponent("MuteToggle").prototype.handleClick.call(this,t)):ne.call(this,t)&&(t.preventDefault(),t.stopPropagation(),gn.getComponent("PlayToggle").prototype.handleClick.call(this,t))},o.canPlayType=function(t){for(var s,h=0,v=this.options_.techOrder;h<v.length;h++){var S=v[h],x=ws.getTech(S);if(x||(x=gn.getComponent(S)),x){if(x.isSupported()&&(s=x.canPlayType(t)))return s}else Dr.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},o.selectSource=function(t){var Y,s=this,h=this.options_.techOrder.map(function(ne){return[ne,ws.getTech(ne)]}).filter(function(ne){var Y=ne[0],Te=ne[1];return Te?Te.isSupported():(Dr.error('The "'+Y+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),v=function(Y,Te,je){var Ve;return Y.some(function(qe){return Te.some(function(Wt){if(Ve=je(qe,Wt))return!0})}),Ve},L=function(Y,Te){var je=Y[0];if(Y[1].canPlaySource(Te,s.options_[je.toLowerCase()]))return{source:Te,tech:je}};return(this.options_.sourceOrder?v(t,h,(Y=L,function(Te,je){return Y(je,Te)})):v(h,t,L))||!1},o.handleSrc_=function(t,s){var h=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var v=jp(t);if(v.length){if(this.changingSrc_=!0,s||(this.cache_.sources=v),this.updateSourceCaches_(v[0]),Ou(this,v[0],function(L,ne){if(h.middleware_=ne,s||(h.cache_.sources=v),h.updateSourceCaches_(L),h.src_(L))return v.length>1?h.handleSrc_(v.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void h.triggerReady());!function vc(g,a){g.forEach(function(o){return o.setTech&&o.setTech(a)})}(ne,h.tech_)}),this.options_.retryOnError&&v.length>1){var S=function(){h.error(null),h.handleSrc_(v.slice(1),!0)},x=function(){h.off("error",S)};this.one("error",S),this.one("playing",x),this.resetRetryOnError_=function(){h.off("error",S),h.off("playing",x)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},o.src=function(t){return this.handleSrc_(t,!1)},o.src_=function(t){var s=this,h=this.selectSource([t]);return!h||(function(a,o){return Qe(a)===Qe(o)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1))},o.load=function(){this.techCall_("load")},o.reset=function(){var t=this,s=this.options_.Promise||se().Promise;this.paused()||!s?this.doReset_():ya(this.play().then(function(){return t.doReset_()}))},o.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ss(this)&&this.trigger("playerreset")},o.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},o.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},s=t.durationDisplay,h=t.remainingTimeDisplay;s&&s.updateContent(),h&&h.updateContent()},o.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},o.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},o.currentSources=function(){var t=this.currentSource(),s=[];return 0!==Object.keys(t).length&&s.push(t),this.cache_.sources||s},o.currentSource=function(){return this.cache_.source||{}},o.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},o.currentType=function(){return this.currentSource()&&this.currentSource().type||""},o.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},o.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var s;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),s=!1):this.options_.autoplay=!!t,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},o.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},o.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},o.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},o.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},o.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},o.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},o.error=function(t){var s=this;if(void 0===t)return this.error_||null;if(Tn("beforeerror").forEach(function(v){var S=v(s,t);Ot(S)&&!Array.isArray(S)||"string"==typeof S||"number"==typeof S||null===S?t=S:s.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){var h=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new vo(t),this.addClass("vjs-error"),Dr.error("(CODE:"+this.error_.code+" "+vo.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Tn("error").forEach(function(v){return v(s,s.error_)})},o.reportUserActivity=function(t){this.userActivity_=!0},o.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},o.listenForUserActivity_=function(){var t,s,h,v=ys(this,this.reportUserActivity),L=function(je){v(),this.clearInterval(t)};this.on("mousedown",function(){v(),this.clearInterval(t),t=this.setInterval(v,250)}),this.on("mousemove",function(je){(je.screenX!==s||je.screenY!==h)&&(s=je.screenX,h=je.screenY,v())}),this.on("mouseup",L),this.on("mouseleave",L);var Y,ne=this.getChild("controlBar");ne&&!$o&&!li&&(ne.on("mouseenter",function(Te){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),ne.on("mouseleave",function(Te){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",v),this.on("keyup",v),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(Y);var Te=this.options_.inactivityTimeout;Te<=0||(Y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},Te))}},250)},o.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},o.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},o.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},o.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var s=this.children(),h=this.getChild("ControlBar"),v=h&&h.currentHeight();s.forEach(function(S){S!==h&&S.el_&&!S.hasClass("vjs-hidden")&&(S.hide(),t.audioOnlyCache_.hiddenChildren.push(S))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(v),this.trigger("audioonlymodechange")},o.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},o.audioOnlyMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var h=this.options_.Promise||se().Promise;if(h){if(t){var v=[];return this.isInPictureInPicture()&&v.push(this.exitPictureInPicture()),this.isFullscreen()&&v.push(this.exitFullscreen()),this.audioPosterMode()&&v.push(this.audioPosterMode(!1)),h.all(v).then(function(){return s.enableAudioOnlyUI_()})}return h.resolve().then(function(){return s.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},o.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},o.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},o.audioPosterMode=function(t){var s=this;if("boolean"!=typeof t||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var h=this.options_.Promise||se().Promise;return h?t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.enablePosterModeUI_()}):h.resolve().then(function(){s.disablePosterModeUI_()}):t?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},o.addTextTrack=function(t,s,h){if(this.tech_)return this.tech_.addTextTrack(t,s,h)},o.addRemoteTextTrack=function(t,s){if(this.tech_)return this.tech_.addRemoteTextTrack(t,s)},o.removeRemoteTextTrack=function(t){void 0===t&&(t={});var h=t.track;if(h||(h=t),this.tech_)return this.tech_.removeRemoteTextTrack(h)},o.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},o.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},o.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},o.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),ss(this)&&this.trigger("languagechange"))},o.languages=function(){return bn(a.prototype.options_.languages,this.languages_)},o.toJSON=function(){var t=bn(this.options_),s=t.tracks;t.tracks=[];for(var h=0;h<s.length;h++){var v=s[h];(v=bn(v)).player=void 0,t.tracks[h]=v}return t},o.createModal=function(t,s){var h=this;(s=s||{}).content=t||"";var v=new $i(this,s);return this.addChild(v),v.on("dispose",function(){h.removeChild(v)}),v.open(),v},o.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),s=this.currentWidth(),h=0;h<vd.length;h++){var v=vd[h];if(s<=this.breakpoints_[v]){if(t===v)return;t&&this.removeClass(oh[t]),this.addClass(oh[v]),this.breakpoint_=v;break}}},o.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},o.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=et({},Kp,t),this.updateCurrentBreakpoint_()),et(this.breakpoints_)},o.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},o.currentBreakpoint=function(){return this.breakpoint_},o.currentBreakpointClass=function(){return oh[this.breakpoint_]||""},o.loadMedia=function(t,s){var h=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=bn(t);var v=this.cache_.media,x=v.poster,L=v.src,ne=v.textTracks;!v.artwork&&x&&(this.cache_.media.artwork=[{src:x,type:Vc(x)}]),L&&this.src(L),x&&this.poster(x),Array.isArray(ne)&&ne.forEach(function(Y){return h.addRemoteTextTrack(Y,!1)}),this.ready(s)}},o.getMedia=function(){if(!this.cache_.media){var t=this.poster(),v={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(S){return{kind:S.kind,label:S.label,language:S.language,src:S.src}})};return t&&(v.poster=t,v.artwork=[{src:v.poster,type:Vc(v.poster)}]),v}return bn(this.cache_.media)},a.getTagSettings=function(t){var s={sources:[],tracks:[]},h=Ss(t),v=h["data-setup"];if(ja(t,"vjs-fill")&&(h.fill=!0),ja(t,"vjs-fluid")&&(h.fluid=!0),null!==v){var S=Be()(v||"{}"),x=S[0],L=S[1];x&&Dr.error(x),et(h,L)}if(et(s,h),t.hasChildNodes())for(var ne=t.childNodes,Y=0,Te=ne.length;Y<Te;Y++){var je=ne[Y],Ve=je.nodeName.toLowerCase();"source"===Ve?s.sources.push(Ss(je)):"track"===Ve&&s.tracks.push(Ss(je))}return s},o.flexNotSupported_=function(){var t=Ae().createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},o.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},o.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;!Array.isArray(t)||!t.every(function(s){return"number"==typeof s})||(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},a}(gn);$a.names.forEach(function(g){var a=$a[g];qo.prototype[a.getterName]=function(){return this.tech_?this.tech_[a.getterName]():(this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName])}}),qo.prototype.crossorigin=qo.prototype.crossOrigin,qo.players={};var ah=se().navigator;qo.prototype.options_={techOrder:ws.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ah&&(ah.languages&&ah.languages[0]||ah.userLanguage||ah.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(g){qo.prototype[g]=function(){return this.techGet_(g)}}),vl.forEach(function(g){qo.prototype["handleTech"+Qe(g)+"_"]=function(){return this.trigger(g)}}),gn.registerComponent("Player",qo);var yd="plugin",xc="activePlugins_",Ic={},qc=function(a){return Ic.hasOwnProperty(a)},uh=function(a){return qc(a)?Ic[a]:void 0},fm=function(a,o){a[xc]=a[xc]||{},a[xc][o]=!0},Wh=function(a,o,u){var t=(u?"before":"")+"pluginsetup";a.trigger(t,o),a.trigger(t+":"+o.name,o)},Zp=function(a,o){return o.prototype.name=a,function(){Wh(this,{name:a,plugin:o,instance:null},!0);for(var u=arguments.length,t=new Array(u),s=0;s<u;s++)t[s]=arguments[s];var h=We(o,[this].concat(t));return this[a]=function(){return h},Wh(this,h.getEventHash()),h}},Qu=function(){function g(o){if(this.constructor===g)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=o,this.log||(this.log=this.player.log.createLogger(this.name)),U(this),delete this.trigger,_e(this,this.constructor.defaultState),fm(o,this.name),this.dispose=this.dispose.bind(this),o.on("dispose",this.dispose)}var a=g.prototype;return a.version=function(){return this.constructor.VERSION},a.getEventHash=function(u){return void 0===u&&(u={}),u.name=this.name,u.plugin=this.constructor,u.instance=this,u},a.trigger=function(u,t){return void 0===t&&(t={}),xo(this.eventBusEl_,u,this.getEventHash(t))},a.handleStateChanged=function(u){},a.dispose=function(){var u=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[xc][u]=!1,this.player=this.state=null,t[u]=Zp(u,Ic[u])},g.isBasic=function(u){var t="string"==typeof u?uh(u):u;return"function"==typeof t&&!g.prototype.isPrototypeOf(t.prototype)},g.registerPlugin=function(u,t){if("string"!=typeof u)throw new Error('Illegal plugin name, "'+u+'", must be a string, was '+typeof u+".");if(qc(u))Dr.warn('A plugin named "'+u+'" already exists. You may want to avoid re-registering plugins!');else if(qo.prototype.hasOwnProperty(u))throw new Error('Illegal plugin name, "'+u+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+u+'", must be a function, was '+typeof t+".");return Ic[u]=t,u!==yd&&(qo.prototype[u]=g.isBasic(t)?function(a,o){var u=function(){Wh(this,{name:a,plugin:o,instance:null},!0);var s=o.apply(this,arguments);return fm(this,a),Wh(this,{name:a,plugin:o,instance:s}),s};return Object.keys(o).forEach(function(t){u[t]=o[t]}),u}(u,t):Zp(u,t)),t},g.deregisterPlugin=function(u){if(u===yd)throw new Error("Cannot de-register base plugin.");qc(u)&&(delete Ic[u],delete qo.prototype[u])},g.getPlugins=function(u){var t;return void 0===u&&(u=Object.keys(Ic)),u.forEach(function(s){var h=uh(s);h&&((t=t||{})[s]=h)}),t},g.getPluginVersion=function(u){var t=uh(u);return t&&t.VERSION||""},g}();Qu.getPlugin=uh,Qu.BASE_PLUGIN_NAME=yd,Qu.registerPlugin(yd,Qu),qo.prototype.usingPlugin=function(g){return!!this[xc]&&!0===this[xc][g]},qo.prototype.hasPlugin=function(g){return!!qc(g)};var $v=function(a){return 0===a.indexOf("#")?a.slice(1):a};function It(g,a,o){var u=It.getPlayer(g);if(u)return a&&Dr.warn('Player "'+g+'" is already initialised. Options will not be applied.'),o&&u.ready(o),u;var t="string"==typeof g?Xa("#"+$v(g)):g;if(!du(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&Dr.warn("The element supplied is not included in the DOM"),!0===(a=a||{}).restoreEl&&(a.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),Tn("beforesetup").forEach(function(h){var v=h(t,bn(a));Ot(v)&&!Array.isArray(v)?a=bn(a,v):Dr.error("please return an object in beforesetup hooks")});var s=gn.getComponent("Player");return u=new s(t,a,o),Tn("setup").forEach(function(h){return h(u)}),u}if(It.hooks_=Hn,It.hooks=Tn,It.hook=function(a,o){Tn(a,o)},It.hookOnce=function(a,o){Tn(a,[].concat(o).map(function(u){return function s(){return Gr(a,s),u.apply(void 0,arguments)}}))},It.removeHook=Gr,!0!==se().VIDEOJS_NO_DYNAMIC_STYLE&&Mu()){var Vf=Xa(".vjs-styles-defaults");if(!Vf){Vf=Er("vjs-styles-defaults");var Yp=Xa("head");Yp&&Yp.insertBefore(Vf,Yp.firstChild),gu(Vf,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Cl(1,It),It.VERSION="7.20.3",It.options=qo.prototype.options_,It.getPlayers=function(){return qo.players},It.getPlayer=function(g){var o,a=qo.players;if("string"==typeof g){var u=$v(g),t=a[u];if(t)return t;o=Xa("#"+u)}else o=g;if(du(o)){var h=o.player,v=o.playerId;if(h||a[v])return h||a[v]}},It.getAllPlayers=function(){return Object.keys(qo.players).map(function(g){return qo.players[g]}).filter(Boolean)},It.players=qo.players,It.getComponent=gn.getComponent,It.registerComponent=function(g,a){ws.isTech(a)&&Dr.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),gn.registerComponent.call(gn,g,a)},It.getTech=ws.getTech,It.registerTech=ws.registerTech,It.use=function Lp(g,a){sd[g]=sd[g]||[],sd[g].push(a)},Object.defineProperty(It,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(It.middleware,"TERMINATOR",{value:Oh,writeable:!1,enumerable:!0}),It.browser=ul,It.TOUCH_ENABLED=fs,It.extend=function(a,o){void 0===o&&(o={});var u=function(){a.apply(this,arguments)},t={};for(var s in"object"==typeof o?(o.constructor!==Object.prototype.constructor&&(u=o.constructor),t=o):"function"==typeof o&&(u=o),function _t(g,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(a&&a.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),a&&mt(g,a)}(u,a),a&&(u.super_=a),t)t.hasOwnProperty(s)&&(u.prototype[s]=t[s]);return u},It.mergeOptions=bn,It.bind=ys,It.registerPlugin=Qu.registerPlugin,It.deregisterPlugin=Qu.deregisterPlugin,It.plugin=function(g,a){return Dr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Qu.registerPlugin(g,a)},It.getPlugins=Qu.getPlugins,It.getPlugin=Qu.getPlugin,It.getPluginVersion=Qu.getPluginVersion,It.addLanguage=function(g,a){var o;return g=(""+g).toLowerCase(),(It.options.languages=bn(It.options.languages,((o={})[g]=a,o)))[g]},It.log=Dr,It.createLogger=Oo,It.createTimeRange=It.createTimeRanges=Lo,It.formatTime=cd,It.setFormatTime=function zl(g){qd=g},It.resetFormatTime=function Nf(){qd=bu},It.parseUrl=zo,It.isCrossOrigin=As,It.EventTarget=Fi,It.on=va,It.one=ll,It.off=Go,It.trigger=xo,It.xhr=yt(),It.TextTrack=Pu,It.AudioTrack=Ha,It.VideoTrack=$d,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(g){It[g]=function(){return Dr.warn("videojs."+g+"() is deprecated; use videojs.dom."+g+"() instead"),pu[g].apply(null,arguments)}}),It.computedStyle=Bn,It.dom=pu,It.url=Gl,It.defineLazyProperty=Ki,It.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Pl=Fe,Qp=function(a,o,u){return a&&u&&u.responseURL&&o!==u.responseURL?u.responseURL:o},yl=function(a){return It.log.debug?It.log.debug.bind(It,"VHS:",a+" >"):function(){}},Zs=1/30,Ol=.1,Xp=function(a,o){var t,u=[];if(a&&a.length)for(t=0;t<a.length;t++)o(a.start(t),a.end(t))&&u.push([a.start(t),a.end(t)]);return It.createTimeRanges(u)},_d=function(a,o){return Xp(a,function(u,t){return u-Ol<=o&&t+Ol>=o})},Rl=function(a,o){return Xp(a,function(u){return u-Zs>=o})},ou=function(a){var o=[];if(!a||!a.length)return"";for(var u=0;u<a.length;u++)o.push(a.start(u)+" => "+a.end(u));return o.join(", ")},Xu=function(a){for(var o=[],u=0;u<a.length;u++)o.push({start:a.start(u),end:a.end(u)});return o},Fo=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},Xl=function(a,o){var u=0;if(!a||!a.length)return u;for(var t=0;t<a.length;t++){var s=a.start(t),h=a.end(t);if(!(o>h)){if(o>s&&o<=h){u+=h-o;continue}u+=h-s}}return u},Jp=It.createTimeRange,Hf=function(a,o){if(!o.preload)return o.duration;var u=0;return(o.parts||[]).forEach(function(t){u+=t.duration}),(o.preloadHints||[]).forEach(function(t){"PART"===t.type&&(u+=a.partTargetDuration)}),u},$f=function(a){return(a.segments||[]).reduce(function(o,u,t){return u.parts?u.parts.forEach(function(s,h){o.push({duration:s.duration,segmentIndex:t,partIndex:h,part:s,segment:u})}):o.push({duration:u.duration,segmentIndex:t,partIndex:null,segment:u,part:null}),o},[])},eg=function(a){var o=a.segments&&a.segments.length&&a.segments[a.segments.length-1];return o&&o.parts||[]},pm=function(a){var o=a.preloadSegment;if(o){var u=o.parts;return(o.preloadHints||[]).reduce(function(h,v){return h+("PART"===v.type?1:0)},0)+(u&&u.length?u.length:0)}},gm=function(a,o){if(o.endList)return 0;if(a&&a.suggestedPresentationDelay)return a.suggestedPresentationDelay;var u=eg(o).length>0;return u&&o.serverControl&&o.serverControl.partHoldBack?o.serverControl.partHoldBack:u&&o.partTargetDuration?3*o.partTargetDuration:o.serverControl&&o.serverControl.holdBack?o.serverControl.holdBack:o.targetDuration?3*o.targetDuration:0},Gf=function(a,o,u){if(typeof o>"u"&&(o=a.mediaSequence+a.segments.length),o<a.mediaSequence)return 0;var t=function(a,o){var u=0,t=o-a.mediaSequence,s=a.segments[t];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;t--;){if(typeof(s=a.segments[t]).end<"u")return{result:u+s.end,precise:!0};if(u+=Hf(a,s),typeof s.start<"u")return{result:u+s.start,precise:!0}}return{result:u,precise:!1}}(a,o);if(t.precise)return t.result;var s=function(a,o){for(var t,u=0,s=o-a.mediaSequence;s<a.segments.length;s++){if(typeof(t=a.segments[s]).start<"u")return{result:t.start-u,precise:!0};if(u+=Hf(a,t),typeof t.end<"u")return{result:t.end-u,precise:!0}}return{result:-1,precise:!1}}(a,o);return s.precise?s.result:t.result+u},qh=function(a,o,u){if(!a)return 0;if("number"!=typeof u&&(u=0),typeof o>"u"){if(a.totalDuration)return a.totalDuration;if(!a.endList)return se()[1/0]}return Gf(a,o,u)},Jl=function(a){var o=a.defaultDuration,u=a.durationList,t=a.startIndex,s=a.endIndex,h=0;if(t>s){var v=[s,t];t=v[0],s=v[1]}if(t<0){for(var S=t;S<Math.min(0,s);S++)h+=o;t=0}for(var x=t;x<s;x++)h+=u[x].duration;return h},zv=function(a,o,u,t){if(!a||!a.segments)return null;if(a.endList)return qh(a);if(null===o)return null;var s=Gf(a,a.mediaSequence+a.segments.length,o=o||0);return u&&(s-=t="number"==typeof t?t:gm(null,a)),Math.max(0,s)},Dc=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},vm=function(a){return a.excludeUntil&&a.excludeUntil===1/0},bd=function(a){var o=Dc(a);return!a.disabled&&!o},tg=function(a,o){return o.attributes&&o.attributes[a]},Nl=function(a,o){if(1===a.playlists.length)return!0;var u=o.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(t){return!!bd(t)&&(t.attributes.BANDWIDTH||0)<u}).length},lh=function(a,o){return!(!a&&!o||!a&&o||a&&!o||!(a===o||a.id&&o.id&&a.id===o.id||a.resolvedUri&&o.resolvedUri&&a.resolvedUri===o.resolvedUri||a.uri&&o.uri&&a.uri===o.uri))},ch=function(a,o){var u=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{},t=!1;for(var s in u){for(var h in u[s])if(t=o(u[s][h]))break;if(t)break}return!!t},Wf=function(a){if(!a||!a.playlists||!a.playlists.length)return ch(a,function(h){return h.playlists&&h.playlists.length||h.uri});for(var u=function(v){var S=a.playlists[v],x=S.attributes&&S.attributes.CODECS;return x&&x.split(",").every(function(ne){return ti(ne)})||ch(a,function(ne){return lh(S,ne)})?"continue":{v:!1}},t=0;t<a.playlists.length;t++){var s=u(t);if("continue"!==s&&"object"==typeof s)return s.v}return!0},Su={liveEdgeDelay:gm,duration:qh,seekable:function(a,o,u){var s=o||0,h=zv(a,o,!0,u);return null===h?Jp():Jp(s,h)},getMediaInfoForTime:function(a){for(var o=a.playlist,u=a.currentTime,t=a.startingSegmentIndex,s=a.startingPartIndex,h=a.startTime,v=a.experimentalExactManifestTimings,S=u-h,x=$f(o),L=0,ne=0;ne<x.length;ne++){var Y=x[ne];if(t===Y.segmentIndex&&("number"!=typeof s||"number"!=typeof Y.partIndex||s===Y.partIndex)){L=ne;break}}if(S<0){if(L>0)for(var Te=L-1;Te>=0;Te--){var je=x[Te];if(S+=je.duration,v){if(S<0)continue}else if(S+Zs<=0)continue;return{partIndex:je.partIndex,segmentIndex:je.segmentIndex,startTime:h-Jl({defaultDuration:o.targetDuration,durationList:x,startIndex:L,endIndex:Te})}}return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:u}}if(L<0){for(var Ve=L;Ve<0;Ve++)if((S-=o.targetDuration)<0)return{partIndex:x[0]&&x[0].partIndex||null,segmentIndex:x[0]&&x[0].segmentIndex||0,startTime:u};L=0}for(var qe=L;qe<x.length;qe++){var Wt=x[qe];if(S-=Wt.duration,v){if(S>0)continue}else if(S-Zs>=0)continue;return{partIndex:Wt.partIndex,segmentIndex:Wt.segmentIndex,startTime:h+Jl({defaultDuration:o.targetDuration,durationList:x,startIndex:L,endIndex:qe})}}return{segmentIndex:x[x.length-1].segmentIndex,partIndex:x[x.length-1].partIndex,startTime:u}},isEnabled:bd,isDisabled:function(a){return a.disabled},isBlacklisted:Dc,isIncompatible:vm,playlistEnd:zv,isAes:function(a){for(var o=0;o<a.segments.length;o++)if(a.segments[o].key)return!0;return!1},hasAttribute:tg,estimateSegmentRequestTime:function(a,o,u,t){return void 0===t&&(t=0),tg("BANDWIDTH",u)?(a*u.attributes.BANDWIDTH-8*t)/o:NaN},isLowestEnabledRendition:Nl,isAudioOnly:Wf,playlistMatch:lh,segmentDurationWithParts:Hf},Qh=It.log,Ac=function(a,o){return a+"-"+o},Xh=function(a,o){!a.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(u){if(a.mediaGroups[u])for(var t in a.mediaGroups[u])for(var s in a.mediaGroups[u][t])o(a.mediaGroups[u][t][s],u,t,s)})},qf=function(a){var o=a.playlist,u=a.uri;o.id=a.id,o.playlistErrors_=0,u&&(o.uri=u),o.attributes=o.attributes||{}},kc=function(a,o){a.uri=o;for(var u=0;u<a.playlists.length;u++)a.playlists[u].uri||(a.playlists[u].uri="placeholder-uri-"+u);var s=Wf(a);Xh(a,function(h,v,S,x){var L="placeholder-uri-"+v+"-"+S+"-"+x;if(!h.playlists||!h.playlists.length){if(s&&"AUDIO"===v&&!h.uri)for(var ne=0;ne<a.playlists.length;ne++){var Y=a.playlists[ne];if(Y.attributes&&Y.attributes.AUDIO&&Y.attributes.AUDIO===S)return}h.playlists=[Ie({},h)]}h.playlists.forEach(function(Te,je){var Ve=Ac(je,L);Te.uri?Te.resolvedUri=Te.resolvedUri||Pl(a.uri,Te.uri):(Te.uri=0===je?L:Ve,Te.resolvedUri=Te.uri),Te.id=Te.id||Ve,Te.attributes=Te.attributes||{},a.playlists[Te.id]=Te,a.playlists[Te.uri]=Te})}),function(a){for(var o=a.playlists.length;o--;){var u=a.playlists[o];qf({playlist:u,id:Ac(o,u.uri)}),u.resolvedUri=Pl(a.uri,u.uri),a.playlists[u.id]=u,a.playlists[u.uri]=u,u.attributes.BANDWIDTH||Qh.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(a),function(a){Xh(a,function(o){o.uri&&(o.resolvedUri=Pl(a.uri,o.uri))})}(a)},dh=It.mergeOptions,ng=function(a,o){if(!a)return o;var u=dh(a,o);if(a.preloadHints&&!o.preloadHints&&delete u.preloadHints,a.parts&&!o.parts)delete u.parts;else if(a.parts&&o.parts)for(var t=0;t<o.parts.length;t++)a.parts&&a.parts[t]&&(u.parts[t]=dh(a.parts[t],o.parts[t]));return!a.skipped&&o.skipped&&(u.skipped=!1),a.preload&&!o.preload&&(u.preload=!1),u},Kv=function(a,o){!a.resolvedUri&&a.uri&&(a.resolvedUri=Pl(o,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Pl(o,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Pl(o,a.map.uri)),a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=Pl(o,a.map.key.uri)),a.parts&&a.parts.length&&a.parts.forEach(function(u){u.resolvedUri||(u.resolvedUri=Pl(o,u.uri))}),a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(function(u){u.resolvedUri||(u.resolvedUri=Pl(o,u.uri))})},fh=function(a){var o=a.segments||[],u=a.preloadSegment;if(u&&u.parts&&u.parts.length){if(u.preloadHints)for(var t=0;t<u.preloadHints.length;t++)if("MAP"===u.preloadHints[t].type)return o;u.duration=a.targetDuration,u.preload=!0,o.push(u)}return o},bm=function(a,o){return a===o||a.segments&&o.segments&&a.segments.length===o.segments.length&&a.endList===o.endList&&a.mediaSequence===o.mediaSequence&&a.preloadSegment===o.preloadSegment},Mc=function(a,o,u){void 0===u&&(u=bm);var t=dh(a,{}),s=t.playlists[o.id];if(!s||u(s,o))return null;o.segments=fh(o);var h=dh(s,o);if(h.preloadSegment&&!o.preloadSegment&&delete h.preloadSegment,s.segments){if(o.skip){o.segments=o.segments||[];for(var v=0;v<o.skip.skippedSegments;v++)o.segments.unshift({skipped:!0})}h.segments=function(a,o,u){var t=a.slice(),s=o.slice();u=u||0;for(var v,h=[],S=0;S<s.length;S++){var x=t[S+u],L=s[S];x?(v=x.map||v,h.push(ng(x,L))):(v&&!L.map&&(L.map=v),h.push(L))}return h}(s.segments,o.segments,o.mediaSequence-s.mediaSequence)}h.segments.forEach(function(x){Kv(x,h.resolvedUri)});for(var S=0;S<t.playlists.length;S++)t.playlists[S].id===o.id&&(t.playlists[S]=h);return t.playlists[o.id]=h,t.playlists[o.uri]=h,Xh(a,function(x,L,ne,Y){if(x.playlists)for(var Te=0;Te<x.playlists.length;Te++)o.id===x.playlists[Te].id&&(x.playlists[Te]=h)}),t},rg=function(a,o){var u=a.segments||[],t=u[u.length-1],s=t&&t.parts&&t.parts[t.parts.length-1],h=s&&s.duration||t&&t.duration;return o&&h?1e3*h:500*(a.partTargetDuration||a.targetDuration||10)},ph=function(g){function a(u,t,s){var h;if(void 0===s&&(s={}),h=g.call(this)||this,!u)throw new Error("A non-empty playlist URL or object is required");h.logger_=yl("PlaylistLoader");var S=s.withCredentials,x=void 0!==S&&S,L=s.handleManifestRedirects,ne=void 0!==L&&L;h.src=u,h.vhs_=t,h.withCredentials=x,h.handleManifestRedirects=ne;var Y=t.options_;return h.customTagParsers=Y&&Y.customTagParsers||[],h.customTagMappers=Y&&Y.customTagMappers||[],h.experimentalLLHLS=Y&&Y.experimentalLLHLS||!1,It.browser.IE_VERSION&&(h.experimentalLLHLS=!1),h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(ut(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}$e(a,g);var o=a.prototype;return o.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var s=this.media(),h=Pl(this.master.uri,s.uri);this.experimentalLLHLS&&(h=function(a,o){if(o.endList||!o.serverControl)return a;var u={};if(o.serverControl.canBlockReload){var t=o.preloadSegment,s=o.mediaSequence+o.segments.length;if(t){var h=t.parts||[],v=pm(o)-1;v>-1&&v!==h.length-1&&(u._HLS_part=v),(v>-1||h.length)&&s--}u._HLS_msn=s}if(o.serverControl&&o.serverControl.canSkipUntil&&(u._HLS_skip=o.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(u).length){var S=new(se().URL)(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(x){!u.hasOwnProperty(x)||S.searchParams.set(x,u[x])}),a=S.toString()}return a}(h,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(v,S){if(t.request){if(v)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},o.playlistRequestError=function(t,s,h){var v=s.uri,S=s.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[S],status:t.status,message:"HLS playlist request error at URL: "+v+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},o.parseManifest_=function(t){var s=this,h=t.url;return function(a){var o=a.onwarn,u=a.oninfo,t=a.manifestString,s=a.customTagParsers,h=void 0===s?[]:s,v=a.customTagMappers,S=void 0===v?[]:v,x=a.experimentalLLHLS,L=new _n;o&&L.on("warn",o),u&&L.on("info",u),h.forEach(function(Ve){return L.addParser(Ve)}),S.forEach(function(Ve){return L.addTagMapper(Ve)}),L.push(t),L.end();var ne=L.manifest;if(x||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Ve){ne.hasOwnProperty(Ve)&&delete ne[Ve]}),ne.segments&&ne.segments.forEach(function(Ve){["parts","preloadHints"].forEach(function(qe){Ve.hasOwnProperty(qe)&&delete Ve[qe]})})),!ne.targetDuration){var Y=10;ne.segments&&ne.segments.length&&(Y=ne.segments.reduce(function(Ve,qe){return Math.max(Ve,qe.duration)},0)),o&&o("manifest has no targetDuration defaulting to "+Y),ne.targetDuration=Y}var Te=eg(ne);if(Te.length&&!ne.partTargetDuration){var je=Te.reduce(function(Ve,qe){return Math.max(Ve,qe.duration)},0);o&&(o("manifest has no partTargetDuration defaulting to "+je),Qh.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),ne.partTargetDuration=je}return ne}({onwarn:function(x){return s.logger_("m3u8-parser warn for "+h+": "+x.message)},oninfo:function(x){return s.logger_("m3u8-parser info for "+h+": "+x.message)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},o.haveMetadata=function(t){var s=t.playlistString,h=t.playlistObject,v=t.url,S=t.id;this.request=null,this.state="HAVE_METADATA";var x=h||this.parseManifest_({url:v,manifestString:s});x.lastRequest=Date.now(),qf({playlist:x,uri:v,id:S});var L=Mc(this.master,x);this.targetDuration=x.partTargetDuration||x.targetDuration,this.pendingMedia_=null,L?(this.master=L,this.media_=this.master.playlists[S]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(rg(this.media(),!!L)),this.trigger("loadedplaylist")},o.dispose=function(){this.trigger("dispose"),this.stopRequest(),se().clearTimeout(this.mediaUpdateTimeout),se().clearTimeout(this.finalRenditionTimeout),this.off()},o.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},o.media=function(t,s){var h=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(se().clearTimeout(this.finalRenditionTimeout),s){var v=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=se().setTimeout(this.media.bind(this,t,!1),v)}else{var S=this.state,x=!this.media_||t.id!==this.media_.id,L=this.master.playlists[t.id];if(L&&L.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(x&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(rg(t,!0)),x){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(ne,Y){if(h.request){if(t.lastRequest=Date.now(),t.resolvedUri=Qp(h.handleManifestRedirects,t.resolvedUri,Y),ne)return h.playlistRequestError(h.request,t,S);h.haveMetadata({playlistString:Y.responseText,url:t.uri,id:t.id}),h.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")}})}}},o.pause=function(){this.mediaUpdateTimeout&&(se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},o.load=function(t){var s=this;this.mediaUpdateTimeout&&(se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(t){var v=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=se().setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},v)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},o.updateMediaUpdateTimeout_=function(t){var s=this;this.mediaUpdateTimeout&&(se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=se().setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(t)},t))},o.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=se().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,h){if(t.request){if(t.request=null,s)return t.error={status:h.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Qp(t.handleManifestRedirects,t.src,h);var v=t.parseManifest_({manifestString:h.responseText,url:t.src});t.setupInitialPlaylist(v)}})},o.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},o.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,kc(this.master,this.srcUri()),t.playlists.forEach(function(h){h.segments=fh(h),h.segments.forEach(function(v){Kv(v,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var s=this.srcUri()||se().location.href;this.master=function(a,o){var u=Ac(0,o),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:se().location.href,resolvedUri:se().location.href,playlists:[{uri:o,id:u,resolvedUri:o,attributes:{}}]};return t.playlists[u]=t.playlists[0],t.playlists[o]=t.playlists[0],t}(0,s),this.haveMetadata({playlistObject:t,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},a}(It.EventTarget),Tm=It.xhr,Zv=It.mergeOptions,Kf=function(a,o,u,t){var s="arraybuffer"===a.responseType?a.response:a.responseText;!o&&s&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=s.byteLength||s.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),u.headers&&(a.responseHeaders=u.headers),o&&"ETIMEDOUT"===o.code&&(a.timedout=!0),!o&&!a.aborted&&200!==u.statusCode&&206!==u.statusCode&&0!==u.statusCode&&(o=new Error("XHR Failed with a response of: "+(a&&(s||a.responseText)))),t(o,a)},Zf=function(){var a=function o(u,t){u=Zv({timeout:45e3},u);var s=o.beforeRequest||It.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var h=s(u);h&&(u=h)}var S=(!0===It.Vhs.xhr.original?Tm:It.Vhs.xhr)(u,function(L,ne){return Kf(S,L,ne,t)}),x=S.abort;return S.abort=function(){return S.aborted=!0,x.apply(S,arguments)},S.uri=u.uri,S.requestTime=Date.now(),S};return a.original=!0,a},ig=function(a){var o={};return a.byterange&&(o.Range=function(a){return"bytes="+a.offset+"-"+("bigint"==typeof a.offset||"bigint"==typeof a.length?se().BigInt(a.offset)+se().BigInt(a.length)-se().BigInt(1):a.offset+a.length-1)}(a.byterange)),o},Em=function(a,o){return a.start(o)+"-"+a.end(o)},gh=function(a,o){var u=a.toString(16);return"00".substring(0,2-u.length)+u+(o%2?" ":"")},Sm=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},Yc=function(a){var o={};return Object.keys(a).forEach(function(u){var t=a[u];o[u]=vi(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),o},Td=function(a){var o=a.byterange||{length:1/0,offset:0};return[o.length,o.offset,a.resolvedUri].join(",")},Qv=function(a){return a.resolvedUri},ef=function(a){for(var o=Array.prototype.slice.call(a),u=16,t="",v=0;v<o.length/u;v++)t+=o.slice(v*u,v*u+u).map(gh).join("")+" "+o.slice(v*u,v*u+u).map(Sm).join("")+"\n";return t},Xv=Object.freeze({__proto__:null,createTransferableMessage:Yc,initSegmentId:Td,segmentKeyId:Qv,hexDump:ef,tagDump:function(a){return ef(a.bytes)},textRanges:function(a){var u,o="";for(u=0;u<a.length;u++)o+=Em(a,u)+" ";return o}}),Dm=function g(a){var o=a.programTime,u=a.playlist,t=a.retryCount,s=void 0===t?2:t,h=a.seekTo,v=a.pauseAfterSeek,S=void 0===v||v,x=a.tech,L=a.callback;if(!L)throw new Error("seekToProgramTime: callback must be provided");if(typeof o>"u"||!u||!h)return L({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!u.endList&&!x.hasStarted_)return L({message:"player must be playing a live stream to start buffering"});if(!function(a){if(!a.segments||0===a.segments.length)return!1;for(var o=0;o<a.segments.length;o++)if(!a.segments[o].dateTimeObject)return!1;return!0}(u))return L({message:"programDateTime tags must be provided in the manifest "+u.resolvedUri});var ne=function(a,o){var u;try{u=new Date(a)}catch{return null}if(!o||!o.segments||0===o.segments.length)return null;var t=o.segments[0];if(u<t.dateTimeObject)return null;for(var s=0;s<o.segments.length-1&&(t=o.segments[s],!(u<o.segments[s+1].dateTimeObject));s++);var v=o.segments[o.segments.length-1],S=v.dateTimeObject,x=v.videoTimingInfo?function(a){return a.transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds}(v.videoTimingInfo):v.duration+.25*v.duration;return u>new Date(S.getTime()+1e3*x)?null:(u>S&&(t=v),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:Su.duration(o,o.mediaSequence+o.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})}(o,u);if(!ne)return L({message:o+" was not found in the stream"});var Y=ne.segment,Te=function(a,o){var u,t;try{u=new Date(a),t=new Date(o)}catch{}var s=u.getTime();return(t.getTime()-s)/1e3}(Y.dateTimeObject,o);if("estimate"===ne.type)return 0===s?L({message:o+" is not buffered yet. Try again"}):(h(ne.estimatedStart+Te),void x.one("seeked",function(){g({programTime:o,playlist:u,retryCount:s-1,seekTo:h,pauseAfterSeek:S,tech:x,callback:L})}));var je=Y.start+Te;x.one("seeked",function(){return L(null,x.currentTime())}),S&&x.pause(),h(je)},Pc=function(a,o){if(4===a.readyState)return o()},ag=It.mergeOptions,ug=function(a,o){if(!bm(a,o)||a.sidx&&o.sidx&&(a.sidx.offset!==o.sidx.offset||a.sidx.length!==o.sidx.length))return!1;if(!a.sidx&&o.sidx||a.sidx&&!o.sidx||a.segments&&!o.segments||!a.segments&&o.segments)return!1;if(!a.segments&&!o.segments)return!0;for(var u=0;u<a.segments.length;u++){var t=a.segments[u],s=o.segments[u];if(t.uri!==s.uri)return!1;if(t.byterange||s.byterange){var h=t.byterange,v=s.byterange;if(h&&!v||!h&&v||h.offset!==v.offset||h.length!==v.length)return!1}}return!0},lg=function(a,o){return(Boolean(!a.map&&!o.map)||Boolean(a.map&&o.map&&a.map.byterange.offset===o.map.byterange.offset&&a.map.byterange.length===o.map.byterange.length))&&a.uri===o.uri&&a.byterange.offset===o.byterange.offset&&a.byterange.length===o.byterange.length},km=function(a,o){var u={};for(var t in a){var h=a[t].sidx;if(h){var v=di(h);if(!o[v])break;lg(o[v].sidxInfo,h)&&(u[v]=o[v])}}return u},Pm=function(g){function a(u,t,s,h){var v;void 0===s&&(s={}),(v=g.call(this)||this).masterPlaylistLoader_=h||ut(v),h||(v.isMaster_=!0);var x=s.withCredentials,L=void 0!==x&&x,ne=s.handleManifestRedirects,Y=void 0!==ne&&ne;if(v.vhs_=t,v.withCredentials=L,v.handleManifestRedirects=Y,!u)throw new Error("A non-empty playlist URL or object is required");return v.on("minimumUpdatePeriod",function(){v.refreshXml_()}),v.on("mediaupdatetimeout",function(){v.refreshMedia_(v.media().id)}),v.state="HAVE_NOTHING",v.loadedPlaylists_={},v.logger_=yl("DashPlaylistLoader"),v.isMaster_?(v.masterPlaylistLoader_.srcUrl=u,v.masterPlaylistLoader_.sidxMapping_={}):v.childPlaylist_=u,v}$e(a,g);var o=a.prototype;return o.requestErrored_=function(t,s,h){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2}:t,h&&(this.state=h),this.trigger("error"),!0):void 0)},o.addSidxSegments_=function(t,s,h){var v=this,S=t.sidx&&di(t.sidx);if(t.sidx&&S&&!this.masterPlaylistLoader_.sidxMapping_[S]){var x=Qp(this.handleManifestRedirects,t.sidx.resolvedUri),L=function(Y,Te){if(!v.requestErrored_(Y,Te,s)){var Ve,je=v.masterPlaylistLoader_.sidxMapping_;try{Ve=go()(sn(Te.response).subarray(8))}catch(qe){return void v.requestErrored_(qe,Te,s)}return je[S]={sidxInfo:t.sidx,sidx:Ve},Xi(t,Ve,t.sidx.resolvedUri),h(!0)}};this.request=function(a,o,u){var s,t=[],h=!1,v=function(Y,Te,je,Ve){return Te.abort(),h=!0,u(Y,Te,je,Ve)},S=function(Y,Te){if(!h){if(Y)return v(Y,Te,"",t);var je=Te.responseText.substring(t&&t.byteLength||0,Te.responseText.length);if(t=function(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];if((o=o.filter(function(v){return v&&(v.byteLength||v.length)&&"string"!=typeof v})).length<=1)return sn(o[0]);var t=o.reduce(function(v,S,x){return v+(S.byteLength||S.length)},0),s=new Uint8Array(t),h=0;return o.forEach(function(v){v=sn(v),s.set(v,h),h+=v.byteLength}),s}(t,rr(je,!0)),s=s||da(t),t.length<10||s&&t.length<s+2)return Pc(Te,function(){return v(Y,Te,"",t)});var Ve=Je(t);return"ts"===Ve&&t.length<188||!Ve&&t.length<376?Pc(Te,function(){return v(Y,Te,"",t)}):v(null,Te,Ve,t)}},L=o({uri:a,beforeSend:function(Y){Y.overrideMimeType("text/plain; charset=x-user-defined"),Y.addEventListener("progress",function(Te){return Kf(Y,null,{statusCode:Y.status},S)})}},function(ne,Y){return Kf(L,ne,Y,S)});return L}(x,this.vhs_.xhr,function(ne,Y,Te,je){if(ne)return L(ne,Y);if(!Te||"mp4"!==Te)return L({status:Y.status,message:"Unsupported "+(Te||"unknown")+" container type for sidx segment at URL: "+x,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},Y);var Ve=t.sidx.byterange,qe=Ve.offset,Wt=Ve.length;if(je.length>=Wt+qe)return L(ne,{response:je.subarray(qe,qe+Wt),status:Y.status,uri:Y.uri});v.request=v.vhs_.xhr({uri:x,responseType:"arraybuffer",headers:ig({byterange:t.sidx.byterange})},L)})}else this.mediaRequest_=se().setTimeout(function(){return h(!1)},0)},o.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},se().clearTimeout(this.minimumUpdatePeriodTimeout_),se().clearTimeout(this.mediaRequest_),se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},o.hasPendingRequest=function(){return this.request||this.mediaRequest_},o.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},o.media=function(t){var s=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var v=!this.media_||t.id!==this.media_.id;if(v&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(v&&(this.trigger("mediachanging"),this.trigger("mediachange")));!v||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,h,function(S){s.haveMetadata({startingState:h,playlist:t})}))},o.haveMetadata=function(t){var s=t.startingState,h=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===s?"loadedmetadata":"mediachange")},o.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(se().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},o.load=function(t){var s=this;se().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(t){var v=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=se().setTimeout(function(){return s.load()},v)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},o.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(s,h){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=se().setTimeout(function(){return t.haveMaster_()},0)},o.requestMaster_=function(t){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,v){if(!s.requestErrored_(h,v)){var S=v.responseText!==s.masterPlaylistLoader_.masterXml_;return s.masterPlaylistLoader_.masterXml_=v.responseText,s.masterLoaded_=v.responseHeaders&&v.responseHeaders.date?Date.parse(v.responseHeaders.date):Date.now(),s.masterPlaylistLoader_.srcUrl=Qp(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,v),S?(s.handleMaster_(),void s.syncClientServerClock_(function(){return t(v,S)})):t(v,S)}"HAVE_NOTHING"===s.state&&(s.started=!1)})},o.syncClientServerClock_=function(t){var s=this,h=function(a){return function(a){var o=kn(a,"UTCTiming")[0];if(!o)return null;var u=Wi(o);switch(u.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":u.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":u.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":u.method="DIRECT",u.value=Date.parse(u.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return u}(Na(a))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Pl(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(v,S){if(s.request){if(v)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),t();var x;x="HEAD"===h.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):s.masterLoaded_:Date.parse(S.responseText),s.masterPlaylistLoader_.clientOffset_=x-Date.now(),t()}}))},o.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},o.handleMaster_=function(){this.mediaRequest_=null;var t=this.masterPlaylistLoader_.master,s=function(a){var u=a.srcUrl,v=function(a,o){void 0===o&&(o={});var u=function(a,o){void 0===o&&(o={});var u=o,t=u.manifestUri,s=void 0===t?"":t,h=u.NOW,v=void 0===h?Date.now():h,S=u.clientOffset,x=void 0===S?0:S,L=kn(a,"Period");if(!L.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var ne=kn(a,"Location"),Y=Wi(a),Te=zi([s],kn(a,"BaseURL"));Y.type=Y.type||"static",Y.sourceDuration=Y.mediaPresentationDuration||0,Y.NOW=v,Y.clientOffset=x,ne.length&&(Y.locations=ne.map(Tr));var je=[];return L.forEach(function(Ve,qe){var Wt=Wi(Ve),yn=je[qe-1];Wt.start=function(a){var o=a.attributes,u=a.priorPeriodAttributes;return"number"==typeof o.start?o.start:u&&"number"==typeof u.start&&"number"==typeof u.duration?u.start+u.duration:u||"static"!==a.mpdType?null:0}({attributes:Wt,priorPeriodAttributes:yn?yn.attributes:null,mpdType:Y.type}),je.push({node:Ve,attributes:Wt})}),{locations:Y.locations,representationInfo:ye(je.map(ho(Y,Te)))}}(Na(a),o),t=function(a){return a.map(an)}(u.representationInfo);return ns({dashPlaylists:t,locations:u.locations,sidxMapping:o.sidxMapping,previousManifest:o.previousManifest})}(a.masterXml,{manifestUri:u,clientOffset:a.clientOffset,sidxMapping:a.sidxMapping,previousManifest:a.previousManifest});return kc(v,u),v}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(s=function(a,o,u){for(var t=!0,s=ag(a,{duration:o.duration,minimumUpdatePeriod:o.minimumUpdatePeriod,timelineStarts:o.timelineStarts}),h=0;h<o.playlists.length;h++){var v=o.playlists[h];if(v.sidx){var S=di(v.sidx);u&&u[S]&&u[S].sidx&&Xi(v,u[S].sidx,v.sidx.resolvedUri)}var x=Mc(s,v,ug);x&&(s=x,t=!1)}return Xh(o,function(L,ne,Y,Te){if(L.playlists&&L.playlists.length){var je=L.playlists[0].id,Ve=Mc(s,L.playlists[0],ug);Ve&&((s=Ve).mediaGroups[ne][Y][Te].playlists[0]=s.playlists[je],t=!1)}}),o.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(t=!1),t?null:s}(t,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||t;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!t||s&&s.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(s)},o.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(se().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var s=t.master&&t.master.minimumUpdatePeriod;0===s&&(t.media()?s=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof s||s<=0?s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout"):this.createMUPTimeout_(s)},o.createMUPTimeout_=function(t){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=se().setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(t)},t)},o.refreshXml_=function(){var t=this;this.requestMaster_(function(s,h){!h||(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(a,o){var t=km(a.playlists,o);return Xh(a,function(s,h,v,S){s.playlists&&s.playlists.length&&(t=ag(t,km(s.playlists,o)))}),t}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(v){t.refreshMedia_(t.media().id)}))})},o.refreshMedia_=function(t){var s=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,v=!this.media_||this.media_!==h[t];v?this.media_=h[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function x(){s.media().endList||(s.mediaUpdateTimeout=se().setTimeout(function(){s.trigger("mediaupdatetimeout"),x()},rg(s.media(),Boolean(v))))}(),this.trigger("loadedplaylist")},a}(It.EventTarget),_a={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},cg=function(a){return a.on=a.addEventListener,a.off=a.removeEventListener,a},Om=function(a){return function(){var o=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch{var o=new BlobBuilder;return o.append(a),URL.createObjectURL(o.getBlob())}}(a),u=cg(new Worker(o));u.objURL=o;var t=u.terminate;return u.on=u.addEventListener,u.off=u.removeEventListener,u.terminate=function(){return URL.revokeObjectURL(o),t.call(this)},u}},Rm=function(a){return"var browserWorkerPolyFill = "+cg.toString()+";\nbrowserWorkerPolyFill(self);\n"+a},Nm=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)},s_=Rm(Nm(function(){var g=function(){this.init=function(){var A={};this.on=function(j,F){A[j]||(A[j]=[]),A[j]=A[j].concat(F)},this.off=function(j,F){var V;return!!A[j]&&(V=A[j].indexOf(F),A[j]=A[j].slice(),A[j].splice(V,1),V>-1)},this.trigger=function(j){var F,V,ue,pe;if(F=A[j])if(2===arguments.length)for(ue=F.length,V=0;V<ue;++V)F[V].call(this,arguments[1]);else{for(pe=[],V=arguments.length,V=1;V<arguments.length;++V)pe.push(arguments[V]);for(ue=F.length,V=0;V<ue;++V)F[V].apply(this,pe)}},this.dispose=function(){A={}}}};g.prototype.pipe=function(Ee){return this.on("data",function(A){Ee.push(A)}),this.on("done",function(A){Ee.flush(A)}),this.on("partialdone",function(A){Ee.partialFlush(A)}),this.on("endedtimeline",function(A){Ee.endTimeline(A)}),this.on("reset",function(A){Ee.reset(A)}),Ee},g.prototype.push=function(Ee){this.trigger("data",Ee)},g.prototype.flush=function(Ee){this.trigger("done",Ee)},g.prototype.partialFlush=function(Ee){this.trigger("partialdone",Ee)},g.prototype.endTimeline=function(Ee){this.trigger("endedtimeline",Ee)},g.prototype.reset=function(Ee){this.trigger("reset",Ee)};var h,v,S,x,L,ne,Y,Te,je,Ve,qe,Wt,yn,Vn,Xt,tn,Cn,un,on,In,mn,kr,Yn,Hr,$s,Cs,jo,Ko,Ys,Ma,Fs,Rd,xu,rc,rl,Nd,Ee,A,a=g,o=Math.pow(2,32),t={getUint64:function(A){var F,j=new DataView(A.buffer,A.byteOffset,A.byteLength);return j.getBigUint64?(F=j.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(F):F:j.getUint32(0)*o+j.getUint32(4)},MAX_UINT32:o},s=t.MAX_UINT32;(function(){var Ee;if(Yn={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(Ee in Yn)Yn.hasOwnProperty(Ee)&&(Yn[Ee]=[Ee.charCodeAt(0),Ee.charCodeAt(1),Ee.charCodeAt(2),Ee.charCodeAt(3)]);Hr=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Cs=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),$s=new Uint8Array([0,0,0,1]),jo=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ko=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Ys={video:jo,audio:Ko},Rd=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Fs=new Uint8Array([0,0,0,0,0,0,0,0]),xu=new Uint8Array([0,0,0,0,0,0,0,0]),rc=xu,rl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Nd=xu,Ma=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),h=function(A){var V,ue,j=[],F=0;for(V=1;V<arguments.length;V++)j.push(arguments[V]);for(V=j.length;V--;)F+=j[V].byteLength;for(ue=new Uint8Array(F+8),new DataView(ue.buffer,ue.byteOffset,ue.byteLength).setUint32(0,ue.byteLength),ue.set(A,4),V=0,F=8;V<j.length;V++)ue.set(j[V],F),F+=j[V].byteLength;return ue},v=function(){return h(Yn.dinf,h(Yn.dref,Rd))},S=function(A){return h(Yn.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,A.audioobjecttype<<3|A.samplingfrequencyindex>>>1,A.samplingfrequencyindex<<7|A.channelcount<<3,6,1,2]))},x=function(){return h(Yn.ftyp,Hr,$s,Hr,Cs)},tn=function(A){return h(Yn.hdlr,Ys[A])},L=function(A){return h(Yn.mdat,A)},Xt=function(A){var j=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,A.duration>>>24&255,A.duration>>>16&255,A.duration>>>8&255,255&A.duration,85,196,0,0]);return A.samplerate&&(j[12]=A.samplerate>>>24&255,j[13]=A.samplerate>>>16&255,j[14]=A.samplerate>>>8&255,j[15]=255&A.samplerate),h(Yn.mdhd,j)},Vn=function(A){return h(Yn.mdia,Xt(A),tn(A.type),Y(A))},ne=function(A){return h(Yn.mfhd,new Uint8Array([0,0,0,0,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A]))},Y=function(A){return h(Yn.minf,"video"===A.type?h(Yn.vmhd,Ma):h(Yn.smhd,Fs),v(),un(A))},Te=function(A,j){for(var F=[],V=j.length;V--;)F[V]=In(j[V]);return h.apply(null,[Yn.moof,ne(A)].concat(F))},je=function(A){for(var j=A.length,F=[];j--;)F[j]=Wt(A[j]);return h.apply(null,[Yn.moov,qe(4294967295)].concat(F).concat(Ve(A)))},Ve=function(A){for(var j=A.length,F=[];j--;)F[j]=mn(A[j]);return h.apply(null,[Yn.mvex].concat(F))},qe=function(A){var j=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&A)>>24,(16711680&A)>>16,(65280&A)>>8,255&A,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h(Yn.mvhd,j)},Cn=function(A){var V,ue,j=A.samples||[],F=new Uint8Array(4+j.length);for(ue=0;ue<j.length;ue++)F[ue+4]=(V=j[ue].flags).dependsOn<<4|V.isDependedOn<<2|V.hasRedundancy;return h(Yn.sdtp,F)},un=function(A){return h(Yn.stbl,on(A),h(Yn.stts,Nd),h(Yn.stsc,rc),h(Yn.stsz,rl),h(Yn.stco,xu))},on=function(F){return h(Yn.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===F.type?Ee(F):A(F))},Ee=function(F){var nt,pt,V=F.sps||[],ue=F.pps||[],pe=[],He=[];for(nt=0;nt<V.length;nt++)pe.push((65280&V[nt].byteLength)>>>8),pe.push(255&V[nt].byteLength),pe=pe.concat(Array.prototype.slice.call(V[nt]));for(nt=0;nt<ue.length;nt++)He.push((65280&ue[nt].byteLength)>>>8),He.push(255&ue[nt].byteLength),He=He.concat(Array.prototype.slice.call(ue[nt]));if(pt=[Yn.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&F.width)>>8,255&F.width,(65280&F.height)>>8,255&F.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h(Yn.avcC,new Uint8Array([1,F.profileIdc,F.profileCompatibility,F.levelIdc,255].concat([V.length],pe,[ue.length],He))),h(Yn.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],F.sarRatio){var lt=F.sarRatio[0],Dt=F.sarRatio[1];pt.push(h(Yn.pasp,new Uint8Array([(4278190080&lt)>>24,(16711680&lt)>>16,(65280&lt)>>8,255&lt,(4278190080&Dt)>>24,(16711680&Dt)>>16,(65280&Dt)>>8,255&Dt])))}return h.apply(null,pt)},A=function(F){return h(Yn.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&F.channelcount)>>8,255&F.channelcount,(65280&F.samplesize)>>8,255&F.samplesize,0,0,0,0,(65280&F.samplerate)>>8,255&F.samplerate,0,0]),S(F))},yn=function(A){var j=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,0,(4278190080&A.duration)>>24,(16711680&A.duration)>>16,(65280&A.duration)>>8,255&A.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&A.width)>>8,255&A.width,0,0,(65280&A.height)>>8,255&A.height,0,0]);return h(Yn.tkhd,j)},In=function(A){var j,F,V,ue,He,nt;return j=h(Yn.tfhd,new Uint8Array([0,0,0,58,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),He=Math.floor(A.baseMediaDecodeTime/s),nt=Math.floor(A.baseMediaDecodeTime%s),F=h(Yn.tfdt,new Uint8Array([1,0,0,0,He>>>24&255,He>>>16&255,He>>>8&255,255&He,nt>>>24&255,nt>>>16&255,nt>>>8&255,255&nt])),"audio"===A.type?(V=kr(A,92),h(Yn.traf,j,F,V)):(ue=Cn(A),V=kr(A,ue.length+92),h(Yn.traf,j,F,V,ue))},Wt=function(A){return A.duration=A.duration||4294967295,h(Yn.trak,yn(A),Vn(A))},mn=function(A){var j=new Uint8Array([0,0,0,0,(4278190080&A.id)>>24,(16711680&A.id)>>16,(65280&A.id)>>8,255&A.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==A.type&&(j[j.length-1]=0),h(Yn.trex,j)},function(){var Ee,A,j;j=function(V,ue){var pe=0,He=0,nt=0,pt=0;return V.length&&(void 0!==V[0].duration&&(pe=1),void 0!==V[0].size&&(He=2),void 0!==V[0].flags&&(nt=4),void 0!==V[0].compositionTimeOffset&&(pt=8)),[0,0,pe|He|nt|pt,1,(4278190080&V.length)>>>24,(16711680&V.length)>>>16,(65280&V.length)>>>8,255&V.length,(4278190080&ue)>>>24,(16711680&ue)>>>16,(65280&ue)>>>8,255&ue]},A=function(V,ue){var pe,He,nt,pt,lt,Dt;for(nt=j(pt=V.samples||[],ue+=20+16*pt.length),(He=new Uint8Array(nt.length+16*pt.length)).set(nt),pe=nt.length,Dt=0;Dt<pt.length;Dt++)He[pe++]=(4278190080&(lt=pt[Dt]).duration)>>>24,He[pe++]=(16711680&lt.duration)>>>16,He[pe++]=(65280&lt.duration)>>>8,He[pe++]=255&lt.duration,He[pe++]=(4278190080&lt.size)>>>24,He[pe++]=(16711680&lt.size)>>>16,He[pe++]=(65280&lt.size)>>>8,He[pe++]=255&lt.size,He[pe++]=lt.flags.isLeading<<2|lt.flags.dependsOn,He[pe++]=lt.flags.isDependedOn<<6|lt.flags.hasRedundancy<<4|lt.flags.paddingValue<<1|lt.flags.isNonSyncSample,He[pe++]=61440&lt.flags.degradationPriority,He[pe++]=15&lt.flags.degradationPriority,He[pe++]=(4278190080&lt.compositionTimeOffset)>>>24,He[pe++]=(16711680&lt.compositionTimeOffset)>>>16,He[pe++]=(65280&lt.compositionTimeOffset)>>>8,He[pe++]=255&lt.compositionTimeOffset;return h(Yn.trun,He)},Ee=function(V,ue){var pe,He,nt,pt,lt,Dt;for(nt=j(pt=V.samples||[],ue+=20+8*pt.length),(pe=new Uint8Array(nt.length+8*pt.length)).set(nt),He=nt.length,Dt=0;Dt<pt.length;Dt++)pe[He++]=(4278190080&(lt=pt[Dt]).duration)>>>24,pe[He++]=(16711680&lt.duration)>>>16,pe[He++]=(65280&lt.duration)>>>8,pe[He++]=255&lt.duration,pe[He++]=(4278190080&lt.size)>>>24,pe[He++]=(16711680&lt.size)>>>16,pe[He++]=(65280&lt.size)>>>8,pe[He++]=255&lt.size;return h(Yn.trun,pe)},kr=function(V,ue){return"audio"===V.type?Ee(V,ue):A(V,ue)}}();var bv,Tp,Ep,Lc,Sp,wp,Tv,Fd,il_mdat=L,il_moof=Te,_v=function(A,j){var F={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return F.dataOffset=j,F.compositionTimeOffset=A.pts-A.dts,F.duration=A.duration,F.size=4*A.length,F.size+=A.byteLength,A.keyFrame&&(F.flags.dependsOn=2,F.flags.isNonSyncSample=0),F},ed=[33,16,5,32,164,27],ua=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Os=function(A){for(var j=[];A--;)j.push(0);return j};Tp=function(A){return 9e4*A},Ep=function(A,j){return A*j},Lc=function(A){return A/9e4},Sp=function(A,j){return A/j},wp=function(A,j){return Tp(Sp(A,j))},Tv=function(A,j){return Ep(Lc(A),j)},Fd=function(A,j,F){return Lc(F?A:A-j)};var Ri_secondsToVideoTs=Tp,Ri_videoTsToSeconds=Lc,Ri_audioTsToVideoTs=wp,Ri_videoTsToAudioTs=Tv,Ri_metadataTsToSeconds=Fd,oc_prefixWithSilence=function(A,j,F,V){var ue,lt,Dt,cn,pe=0,He=0,nt=0,pt=0;if(j.length&&(ue=Ri_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),pe=Math.ceil(9e4/(A.samplerate/1024)),F&&V&&(He=ue-Math.max(F,V),pt=(nt=Math.floor(He/pe))*pe),!(nt<1||pt>45e3))){for((lt=function(){if(!bv){var A={96e3:[ed,[227,64],Os(154),[56]],88200:[ed,[231],Os(170),[56]],64e3:[ed,[248,192],Os(240),[56]],48e3:[ed,[255,192],Os(268),[55,148,128],Os(54),[112]],44100:[ed,[255,192],Os(268),[55,163,128],Os(84),[112]],32e3:[ed,[255,192],Os(268),[55,234],Os(226),[112]],24e3:[ed,[255,192],Os(268),[55,255,128],Os(268),[111,112],Os(126),[224]],16e3:[ed,[255,192],Os(268),[55,255,128],Os(268),[111,255],Os(269),[223,108],Os(195),[1,192]],12e3:[ua,Os(268),[3,127,248],Os(268),[6,255,240],Os(268),[13,255,224],Os(268),[27,253,128],Os(259),[56]],11025:[ua,Os(268),[3,127,248],Os(268),[6,255,240],Os(268),[13,255,224],Os(268),[27,255,192],Os(268),[55,175,128],Os(108),[112]],8e3:[ua,Os(268),[3,121,16],Os(47),[7]]};bv=function(A){return Object.keys(A).reduce(function(j,F){return j[F]=new Uint8Array(A[F].reduce(function(V,ue){return V.concat(ue)},[])),j},{})}(A)}return bv}()[A.samplerate])||(lt=j[0].data),Dt=0;Dt<nt;Dt++)j.splice(0,0,{data:lt,dts:(cn=j[0]).dts-pe,pts:cn.pts-pe});return A.baseMediaDecodeTime-=Math.floor(Ri_videoTsToAudioTs(pt,A.samplerate)),pt}},Vl_clearDtsInfo=function(A){delete A.minSegmentDts,delete A.maxSegmentDts,delete A.minSegmentPts,delete A.maxSegmentPts},Vl_calculateTrackBaseMediaDecodeTime=function(A,j){var F,ue=A.minSegmentDts;return j||(ue-=A.timelineStartInfo.dts),F=A.timelineStartInfo.baseMediaDecodeTime,F+=ue,F=Math.max(0,F),"audio"===A.type&&(F*=A.samplerate/9e4,F=Math.floor(F)),F},Vl_collectDtsInfo=function(A,j){"number"==typeof j.pts&&(void 0===A.timelineStartInfo.pts&&(A.timelineStartInfo.pts=j.pts),A.minSegmentPts=void 0===A.minSegmentPts?j.pts:Math.min(A.minSegmentPts,j.pts),A.maxSegmentPts=void 0===A.maxSegmentPts?j.pts:Math.max(A.maxSegmentPts,j.pts)),"number"==typeof j.dts&&(void 0===A.timelineStartInfo.dts&&(A.timelineStartInfo.dts=j.dts),A.minSegmentDts=void 0===A.minSegmentDts?j.dts:Math.min(A.minSegmentDts,j.dts),A.maxSegmentDts=void 0===A.maxSegmentDts?j.dts:Math.max(A.maxSegmentDts,j.dts))},Iu=function Ee(A){A=A||{},Ee.prototype.init.call(this),this.parse708captions_="boolean"!=typeof A.parse708captions||A.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Do(0,0),new Do(0,1),new Do(1,0),new Do(1,1)],this.parse708captions_&&(this.cc708Stream_=new Qs({captionServices:A.captionServices})),this.reset(),this.ccStreams_.forEach(function(j){j.on("data",this.trigger.bind(this,"data")),j.on("partialdone",this.trigger.bind(this,"partialdone")),j.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Iu.prototype=new a).push=function(Ee){var A,j,F;if("sei_rbsp"===Ee.nalUnitType&&(A=function(A){for(var j=0,F={payloadType:-1,payloadSize:0},V=0,ue=0;j<A.byteLength&&128!==A[j];){for(;255===A[j];)V+=255,j++;for(V+=A[j++];255===A[j];)ue+=255,j++;if(ue+=A[j++],!F.payload&&4===V){if("GA94"===String.fromCharCode(A[j+3],A[j+4],A[j+5],A[j+6])){F.payloadType=V,F.payloadSize=ue,F.payload=A.subarray(j,j+ue);break}F.payload=void 0}j+=ue,V=0,ue=0}return F}(Ee.escapedRBSP)).payload&&4===A.payloadType&&(j=function(A){return 181!==A.payload[0]||49!=(A.payload[1]<<8|A.payload[2])||"GA94"!==String.fromCharCode(A.payload[3],A.payload[4],A.payload[5],A.payload[6])||3!==A.payload[7]?null:A.payload.subarray(8,A.payload.length-1)}(A))){if(Ee.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(Ee.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));F=function(A,j){var V,ue,pe,He,F=[];if(!(64&j[0]))return F;for(ue=31&j[0],V=0;V<ue;V++)He={type:3&j[2+(pe=3*V)],pts:A},4&j[pe+2]&&(He.ccData=j[pe+3]<<8|j[pe+4],F.push(He));return F}(Ee.pts,j),this.captionPackets_=this.captionPackets_.concat(F),this.latestDts_!==Ee.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=Ee.dts}},Iu.prototype.flushCCStreams=function(Ee){this.ccStreams_.forEach(function(A){return"flush"===Ee?A.flush():A.partialFlush()},this)},Iu.prototype.flushStream=function(Ee){this.captionPackets_.length?(this.captionPackets_.forEach(function(A,j){A.presortIndex=j}),this.captionPackets_.sort(function(A,j){return A.pts===j.pts?A.presortIndex-j.presortIndex:A.pts-j.pts}),this.captionPackets_.forEach(function(A){A.type<2?this.dispatchCea608Packet(A):this.dispatchCea708Packet(A)},this),this.captionPackets_.length=0,this.flushCCStreams(Ee)):this.flushCCStreams(Ee)},Iu.prototype.flush=function(){return this.flushStream("flush")},Iu.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Iu.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(Ee){Ee.reset()})},Iu.prototype.dispatchCea608Packet=function(Ee){this.setsTextOrXDSActive(Ee)?this.activeCea608Channel_[Ee.type]=null:this.setsChannel1Active(Ee)?this.activeCea608Channel_[Ee.type]=0:this.setsChannel2Active(Ee)&&(this.activeCea608Channel_[Ee.type]=1),null!==this.activeCea608Channel_[Ee.type]&&this.ccStreams_[(Ee.type<<1)+this.activeCea608Channel_[Ee.type]].push(Ee)},Iu.prototype.setsChannel1Active=function(Ee){return 4096==(30720&Ee.ccData)},Iu.prototype.setsChannel2Active=function(Ee){return 6144==(30720&Ee.ccData)},Iu.prototype.setsTextOrXDSActive=function(Ee){return 256==(28928&Ee.ccData)||4138==(30974&Ee.ccData)||6186==(30974&Ee.ccData)},Iu.prototype.dispatchCea708Packet=function(Ee){this.parse708captions_&&this.cc708Stream_.push(Ee)};var Q_={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},xp=function(A){return 32<=A&&A<=127||160<=A&&A<=255},_l=function(A){this.windowNum=A,this.reset()};_l.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_l.prototype.getText=function(){return this.rows.join("\n")},_l.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_l.prototype.newLine=function(Ee){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(Ee),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_l.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_l.prototype.addText=function(Ee){this.rows[this.rowIdx]+=Ee},_l.prototype.backspace=function(){if(!this.isEmpty()){var Ee=this.rows[this.rowIdx];this.rows[this.rowIdx]=Ee.substr(0,Ee.length-1)}};var lc=function(A,j,F){this.serviceNum=A,this.text="",this.currentWindow=new _l(-1),this.windows=[],this.stream=F,"string"==typeof j&&this.createTextDecoder(j)};lc.prototype.init=function(Ee,A){this.startPts=Ee;for(var j=0;j<8;j++)this.windows[j]=new _l(j),"function"==typeof A&&(this.windows[j].beforeRowOverflow=A)},lc.prototype.setCurrentWindow=function(Ee){this.currentWindow=this.windows[Ee]},lc.prototype.createTextDecoder=function(Ee){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(Ee)}catch(A){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+Ee+" encoding. "+A})}};var Qs=function Ee(A){A=A||{},Ee.prototype.init.call(this);var ue,j=this,F=A.captionServices||{},V={};Object.keys(F).forEach(function(pe){ue=F[pe],/^SERVICE/.test(pe)&&(V[pe]=ue.encoding)}),this.serviceEncodings=V,this.current708Packet=null,this.services={},this.push=function(pe){3===pe.type?(j.new708Packet(),j.add708Bytes(pe)):(null===j.current708Packet&&j.new708Packet(),j.add708Bytes(pe))}};Qs.prototype=new a,Qs.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Qs.prototype.add708Bytes=function(Ee){var A=Ee.ccData,j=A>>>8,F=255&A;this.current708Packet.ptsVals.push(Ee.pts),this.current708Packet.data.push(j),this.current708Packet.data.push(F)},Qs.prototype.push708Packet=function(){var Ee=this.current708Packet,A=Ee.data,j=null,F=null,V=0,ue=A[V++];for(Ee.seq=ue>>6,Ee.sizeCode=63&ue;V<A.length;V++)F=31&(ue=A[V++]),7==(j=ue>>5)&&F>0&&(j=ue=A[V++]),this.pushServiceBlock(j,V,F),F>0&&(V+=F-1)},Qs.prototype.pushServiceBlock=function(Ee,A,j){var F,V=A,ue=this.current708Packet.data,pe=this.services[Ee];for(pe||(pe=this.initService(Ee,V));V<A+j&&V<ue.length;V++)xp(F=ue[V])?V=this.handleText(V,pe):24===F?V=this.multiByteCharacter(V,pe):16===F?V=this.extendedCommands(V,pe):128<=F&&F<=135?V=this.setCurrentWindow(V,pe):152<=F&&F<=159?V=this.defineWindow(V,pe):136===F?V=this.clearWindows(V,pe):140===F?V=this.deleteWindows(V,pe):137===F?V=this.displayWindows(V,pe):138===F?V=this.hideWindows(V,pe):139===F?V=this.toggleWindows(V,pe):151===F?V=this.setWindowAttributes(V,pe):144===F?V=this.setPenAttributes(V,pe):145===F?V=this.setPenColor(V,pe):146===F?V=this.setPenLocation(V,pe):143===F?pe=this.reset(V,pe):8===F?pe.currentWindow.backspace():12===F?pe.currentWindow.clearText():13===F?pe.currentWindow.pendingNewLine=!0:14===F?pe.currentWindow.clearText():141===F&&V++},Qs.prototype.extendedCommands=function(Ee,A){var F=this.current708Packet.data[++Ee];return xp(F)&&(Ee=this.handleText(Ee,A,{isExtended:!0})),Ee},Qs.prototype.getPts=function(Ee){return this.current708Packet.ptsVals[Math.floor(Ee/2)]},Qs.prototype.initService=function(Ee,A){var F,V,j=this;return(F="SERVICE"+Ee)in this.serviceEncodings&&(V=this.serviceEncodings[F]),this.services[Ee]=new lc(Ee,V,j),this.services[Ee].init(this.getPts(A),function(ue){j.flushDisplayed(ue,j.services[Ee])}),this.services[Ee]},Qs.prototype.handleText=function(Ee,A,j){var lt,Dt,F=j&&j.isExtended,ue=this.current708Packet.data,pe=F?4096:0,He=ue[Ee],pt=A.currentWindow;return A.textDecoder_&&!F?(j&&j.isMultiByte?(Dt=[He,ue[Ee+1]],Ee++):Dt=[He],lt=A.textDecoder_.decode(new Uint8Array(Dt))):lt=function(A){var j=Q_[A]||A;return 4096&A&&A===j?"":String.fromCharCode(j)}(pe|He),pt.pendingNewLine&&!pt.isEmpty()&&pt.newLine(this.getPts(Ee)),pt.pendingNewLine=!1,pt.addText(lt),Ee},Qs.prototype.multiByteCharacter=function(Ee,A){var j=this.current708Packet.data,V=j[Ee+2];return xp(j[Ee+1])&&xp(V)&&(Ee=this.handleText(++Ee,A,{isMultiByte:!0})),Ee},Qs.prototype.setCurrentWindow=function(Ee,A){return A.setCurrentWindow(7&this.current708Packet.data[Ee]),Ee},Qs.prototype.defineWindow=function(Ee,A){var j=this.current708Packet.data,F=j[Ee];A.setCurrentWindow(7&F);var ue=A.currentWindow;return F=j[++Ee],ue.visible=(32&F)>>5,ue.rowLock=(16&F)>>4,ue.columnLock=(8&F)>>3,ue.priority=7&F,F=j[++Ee],ue.relativePositioning=(128&F)>>7,ue.anchorVertical=127&F,F=j[++Ee],ue.anchorHorizontal=F,F=j[++Ee],ue.anchorPoint=(240&F)>>4,ue.rowCount=15&F,F=j[++Ee],ue.columnCount=63&F,F=j[++Ee],ue.windowStyle=(56&F)>>3,ue.penStyle=7&F,ue.virtualRowCount=ue.rowCount+1,Ee},Qs.prototype.setWindowAttributes=function(Ee,A){var j=this.current708Packet.data,F=j[Ee],V=A.currentWindow.winAttr;return F=j[++Ee],V.fillOpacity=(192&F)>>6,V.fillRed=(48&F)>>4,V.fillGreen=(12&F)>>2,V.fillBlue=3&F,F=j[++Ee],V.borderType=(192&F)>>6,V.borderRed=(48&F)>>4,V.borderGreen=(12&F)>>2,V.borderBlue=3&F,F=j[++Ee],V.borderType+=(128&F)>>5,V.wordWrap=(64&F)>>6,V.printDirection=(48&F)>>4,V.scrollDirection=(12&F)>>2,V.justify=3&F,F=j[++Ee],V.effectSpeed=(240&F)>>4,V.effectDirection=(12&F)>>2,V.displayEffect=3&F,Ee},Qs.prototype.flushDisplayed=function(Ee,A){for(var j=[],F=0;F<8;F++)A.windows[F].visible&&!A.windows[F].isEmpty()&&j.push(A.windows[F].getText());A.endPts=Ee,A.text=j.join("\n\n"),this.pushCaption(A),A.startPts=Ee},Qs.prototype.pushCaption=function(Ee){""!==Ee.text&&(this.trigger("data",{startPts:Ee.startPts,endPts:Ee.endPts,text:Ee.text,stream:"cc708_"+Ee.serviceNum}),Ee.text="",Ee.startPts=Ee.endPts)},Qs.prototype.displayWindows=function(Ee,A){var F=this.current708Packet.data[++Ee],V=this.getPts(Ee);this.flushDisplayed(V,A);for(var ue=0;ue<8;ue++)F&1<<ue&&(A.windows[ue].visible=1);return Ee},Qs.prototype.hideWindows=function(Ee,A){var F=this.current708Packet.data[++Ee],V=this.getPts(Ee);this.flushDisplayed(V,A);for(var ue=0;ue<8;ue++)F&1<<ue&&(A.windows[ue].visible=0);return Ee},Qs.prototype.toggleWindows=function(Ee,A){var F=this.current708Packet.data[++Ee],V=this.getPts(Ee);this.flushDisplayed(V,A);for(var ue=0;ue<8;ue++)F&1<<ue&&(A.windows[ue].visible^=1);return Ee},Qs.prototype.clearWindows=function(Ee,A){var F=this.current708Packet.data[++Ee],V=this.getPts(Ee);this.flushDisplayed(V,A);for(var ue=0;ue<8;ue++)F&1<<ue&&A.windows[ue].clearText();return Ee},Qs.prototype.deleteWindows=function(Ee,A){var F=this.current708Packet.data[++Ee],V=this.getPts(Ee);this.flushDisplayed(V,A);for(var ue=0;ue<8;ue++)F&1<<ue&&A.windows[ue].reset();return Ee},Qs.prototype.setPenAttributes=function(Ee,A){var j=this.current708Packet.data,F=j[Ee],V=A.currentWindow.penAttr;return F=j[++Ee],V.textTag=(240&F)>>4,V.offset=(12&F)>>2,V.penSize=3&F,F=j[++Ee],V.italics=(128&F)>>7,V.underline=(64&F)>>6,V.edgeType=(56&F)>>3,V.fontStyle=7&F,Ee},Qs.prototype.setPenColor=function(Ee,A){var j=this.current708Packet.data,F=j[Ee],V=A.currentWindow.penColor;return F=j[++Ee],V.fgOpacity=(192&F)>>6,V.fgRed=(48&F)>>4,V.fgGreen=(12&F)>>2,V.fgBlue=3&F,F=j[++Ee],V.bgOpacity=(192&F)>>6,V.bgRed=(48&F)>>4,V.bgGreen=(12&F)>>2,V.bgBlue=3&F,F=j[++Ee],V.edgeRed=(48&F)>>4,V.edgeGreen=(12&F)>>2,V.edgeBlue=3&F,Ee},Qs.prototype.setPenLocation=function(Ee,A){var j=this.current708Packet.data,F=j[Ee],V=A.currentWindow.penLoc;return A.currentWindow.pendingNewLine=!0,F=j[++Ee],V.row=15&F,F=j[++Ee],V.column=63&F,Ee},Qs.prototype.reset=function(Ee,A){var j=this.getPts(Ee);return this.flushDisplayed(j,A),this.initService(A.serviceNum,Ee)};var Uy={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Tf=function(A){return null===A?"":(A=Uy[A]||A,String.fromCharCode(A))},wv=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],jd=function(){for(var A=[],j=15;j--;)A.push("");return A},Do=function Ee(A,j){Ee.prototype.init.call(this),this.field_=A||0,this.dataChannel_=j||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(F){var V,ue,pe,He,nt;if((V=32639&F.ccData)!==this.lastControlCode_){if(4096==(61440&V)?this.lastControlCode_=V:V!==this.PADDING_&&(this.lastControlCode_=null),pe=V>>>8,He=255&V,V!==this.PADDING_)if(V===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(V===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(F.pts),this.flushDisplayed(F.pts),ue=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=ue,this.startPts_=F.pts;else if(V===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(F.pts);else if(V===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(F.pts);else if(V===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(F.pts);else if(V===this.CARRIAGE_RETURN_)this.clearFormatting(F.pts),this.flushDisplayed(F.pts),this.shiftRowsUp_(),this.startPts_=F.pts;else if(V===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(V===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(F.pts),this.displayed_=jd();else if(V===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=jd();else if(V===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(F.pts),this.displayed_=jd()),this.mode_="paintOn",this.startPts_=F.pts;else if(this.isSpecialCharacter(pe,He))nt=Tf((pe=(3&pe)<<8)|He),this[this.mode_](F.pts,nt),this.column_++;else if(this.isExtCharacter(pe,He))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),nt=Tf((pe=(3&pe)<<8)|He),this[this.mode_](F.pts,nt),this.column_++;else if(this.isMidRowCode(pe,He))this.clearFormatting(F.pts),this[this.mode_](F.pts," "),this.column_++,14==(14&He)&&this.addFormatting(F.pts,["i"]),1==(1&He)&&this.addFormatting(F.pts,["u"]);else if(this.isOffsetControlCode(pe,He))this.column_+=3&He;else if(this.isPAC(pe,He)){var pt=wv.indexOf(7968&V);"rollUp"===this.mode_&&(pt-this.rollUpRows_+1<0&&(pt=this.rollUpRows_-1),this.setRollUp(F.pts,pt)),pt!==this.row_&&(this.clearFormatting(F.pts),this.row_=pt),1&He&&-1===this.formatting_.indexOf("u")&&this.addFormatting(F.pts,["u"]),16==(16&V)&&(this.column_=4*((14&V)>>1)),this.isColorPAC(He)&&14==(14&He)&&this.addFormatting(F.pts,["i"])}else this.isNormalChar(pe)&&(0===He&&(He=null),nt=Tf(pe),nt+=Tf(He),this[this.mode_](F.pts,nt),this.column_+=nt.length)}else this.lastControlCode_=null}};Do.prototype=new a,Do.prototype.flushDisplayed=function(Ee){var A=this.displayed_.map(function(j,F){try{return j.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+F+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");A.length&&this.trigger("data",{startPts:this.startPts_,endPts:Ee,text:A,stream:this.name_})},Do.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=jd(),this.nonDisplayed_=jd(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Do.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Do.prototype.isSpecialCharacter=function(Ee,A){return Ee===this.EXT_&&A>=48&&A<=63},Do.prototype.isExtCharacter=function(Ee,A){return(Ee===this.EXT_+1||Ee===this.EXT_+2)&&A>=32&&A<=63},Do.prototype.isMidRowCode=function(Ee,A){return Ee===this.EXT_&&A>=32&&A<=47},Do.prototype.isOffsetControlCode=function(Ee,A){return Ee===this.OFFSET_&&A>=33&&A<=35},Do.prototype.isPAC=function(Ee,A){return Ee>=this.BASE_&&Ee<this.BASE_+8&&A>=64&&A<=127},Do.prototype.isColorPAC=function(Ee){return Ee>=64&&Ee<=79||Ee>=96&&Ee<=127},Do.prototype.isNormalChar=function(Ee){return Ee>=32&&Ee<=127},Do.prototype.setRollUp=function(Ee,A){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(Ee),this.nonDisplayed_=jd(),this.displayed_=jd()),void 0!==A&&A!==this.row_)for(var j=0;j<this.rollUpRows_;j++)this.displayed_[A-j]=this.displayed_[this.row_-j],this.displayed_[this.row_-j]="";void 0===A&&(A=this.row_),this.topRow_=A-this.rollUpRows_+1},Do.prototype.addFormatting=function(Ee,A){this.formatting_=this.formatting_.concat(A);var j=A.reduce(function(F,V){return F+"<"+V+">"},"");this[this.mode_](Ee,j)},Do.prototype.clearFormatting=function(Ee){if(this.formatting_.length){var A=this.formatting_.reverse().reduce(function(j,F){return j+"</"+F+">"},"");this.formatting_=[],this[this.mode_](Ee,A)}},Do.prototype.popOn=function(Ee,A){var j=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=j+=A},Do.prototype.rollUp=function(Ee,A){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=A},Do.prototype.shiftRowsUp_=function(){var Ee;for(Ee=0;Ee<this.topRow_;Ee++)this.displayed_[Ee]="";for(Ee=this.row_+1;Ee<15;Ee++)this.displayed_[Ee]="";for(Ee=this.topRow_;Ee<this.row_;Ee++)this.displayed_[Ee]=this.displayed_[Ee+1];this.displayed_[this.row_]=""},Do.prototype.paintOn=function(Ee,A){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=A};var rm={CaptionStream:Iu,Cea608Stream:Do,Cea708Stream:Qs},uu={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ip=function(A,j){var F=1;for(A>j&&(F=-1);Math.abs(j-A)>4294967296;)A+=8589934592*F;return A},Iv=function Ee(A){var j,F;Ee.prototype.init.call(this),this.type_=A||"shared",this.push=function(V){"shared"!==this.type_&&V.type!==this.type_||(void 0===F&&(F=V.dts),V.dts=Ip(V.dts,F),V.pts=Ip(V.pts,F),j=V.dts,this.trigger("data",V))},this.flush=function(){F=j,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){F=void 0,j=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Iv.prototype=new a;var Ch,Dv_TimestampRolloverStream=Iv,Dv_handleRollover=Ip,Ef=function(A,j,F){var V,ue="";for(V=j;V<F;V++)ue+="%"+("00"+A[V].toString(16)).slice(-2);return ue},Sf=function(A,j,F){return decodeURIComponent(Ef(A,j,F))},M_=function(A,j,F){return unescape(Ef(A,j,F))},im=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},Av={TXXX:function(A){var j;if(3===A.data[0]){for(j=1;j<A.data.length;j++)if(0===A.data[j]){A.description=Sf(A.data,1,j),A.value=Sf(A.data,j+1,A.data.length).replace(/\0*$/,"");break}A.data=A.value}},WXXX:function(A){var j;if(3===A.data[0])for(j=1;j<A.data.length;j++)if(0===A.data[j]){A.description=Sf(A.data,1,j),A.url=Sf(A.data,j+1,A.data.length);break}},PRIV:function(A){var j;for(j=0;j<A.data.length;j++)if(0===A.data[j]){A.owner=M_(A.data,0,j);break}A.privateData=A.data.subarray(j+1),A.data=A.privateData}};Ch=function(A){var pe,j={descriptor:A&&A.descriptor},F=0,V=[],ue=0;if(Ch.prototype.init.call(this),this.dispatchType=uu.METADATA_STREAM_TYPE.toString(16),j.descriptor)for(pe=0;pe<j.descriptor.length;pe++)this.dispatchType+=("00"+j.descriptor[pe].toString(16)).slice(-2);this.push=function(He){var nt,pt,lt,Dt,cn;if("timed-metadata"===He.type){if(He.dataAlignmentIndicator&&(ue=0,V.length=0),0===V.length&&(He.data.length<10||He.data[0]!=="I".charCodeAt(0)||He.data[1]!=="D".charCodeAt(0)||He.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(V.push(He),ue+=He.data.byteLength,1===V.length&&(F=im(He.data.subarray(6,10)),F+=10),!(ue<F)){for(nt={data:new Uint8Array(F),frames:[],pts:V[0].pts,dts:V[0].dts},cn=0;cn<F;)nt.data.set(V[0].data.subarray(0,F-cn),cn),cn+=V[0].data.byteLength,ue-=V[0].data.byteLength,V.shift();pt=10,64&nt.data[5]&&(pt+=4,pt+=im(nt.data.subarray(10,14)),F-=im(nt.data.subarray(16,20)));do{if((lt=im(nt.data.subarray(pt+4,pt+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((Dt={id:String.fromCharCode(nt.data[pt],nt.data[pt+1],nt.data[pt+2],nt.data[pt+3]),data:nt.data.subarray(pt+10,pt+lt+10)}).key=Dt.id,Av[Dt.id]&&(Av[Dt.id](Dt),"com.apple.streaming.transportStreamTimestamp"===Dt.owner)){var hr=Dt.data,Nn=(1&hr[3])<<30|hr[4]<<22|hr[5]<<14|hr[6]<<6|hr[7]>>>2;Nn*=4,Dt.timeStamp=Nn+=3&hr[7],void 0===nt.pts&&void 0===nt.dts&&(nt.pts=Dt.timeStamp,nt.dts=Dt.timeStamp),this.trigger("timestamp",Dt)}nt.frames.push(Dt),pt+=10,pt+=lt}while(pt<F);this.trigger("data",nt)}}}},Ch.prototype=new a;var Dp,cc,ju,P_=Ch,Vy=Dv_TimestampRolloverStream;Dp=function(){var A=new Uint8Array(188),j=0;Dp.prototype.init.call(this),this.push=function(F){var pe,V=0,ue=188;for(j?((pe=new Uint8Array(F.byteLength+j)).set(A.subarray(0,j)),pe.set(F,j),j=0):pe=F;ue<pe.byteLength;)71!==pe[V]||71!==pe[ue]?(V++,ue++):(this.trigger("data",pe.subarray(V,ue)),V+=188,ue+=188);V<pe.byteLength&&(A.set(pe.subarray(V),0),j=pe.byteLength-V)},this.flush=function(){188===j&&71===A[0]&&(this.trigger("data",A),j=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){j=0,this.trigger("reset")}},Dp.prototype=new a,cc=function(){var A,j,F,V;cc.prototype.init.call(this),V=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,A=function(pe,He){var nt=0;He.payloadUnitStartIndicator&&(nt+=pe[nt]+1),"pat"===He.type?j(pe.subarray(nt),He):F(pe.subarray(nt),He)},j=function(pe,He){He.section_number=pe[7],He.last_section_number=pe[8],V.pmtPid=(31&pe[10])<<8|pe[11],He.pmtPid=V.pmtPid},F=function(pe,He){var pt,Dt;if(1&pe[5]){for(V.programMapTable={video:null,audio:null,"timed-metadata":{}},pt=3+((15&pe[1])<<8|pe[2])-4,Dt=12+((15&pe[10])<<8|pe[11]);Dt<pt;){var cn=pe[Dt],zn=(31&pe[Dt+1])<<8|pe[Dt+2];cn===uu.H264_STREAM_TYPE&&null===V.programMapTable.video?V.programMapTable.video=zn:cn===uu.ADTS_STREAM_TYPE&&null===V.programMapTable.audio?V.programMapTable.audio=zn:cn===uu.METADATA_STREAM_TYPE&&(V.programMapTable["timed-metadata"][zn]=cn),Dt+=5+((15&pe[Dt+3])<<8|pe[Dt+4])}He.programMapTable=V.programMapTable}},this.push=function(ue){var pe={},He=4;if(pe.payloadUnitStartIndicator=!!(64&ue[1]),pe.pid=31&ue[1],pe.pid<<=8,pe.pid|=ue[2],(48&ue[3])>>>4>1&&(He+=ue[He]+1),0===pe.pid)pe.type="pat",A(ue.subarray(He),pe),this.trigger("data",pe);else if(pe.pid===this.pmtPid)for(pe.type="pmt",A(ue.subarray(He),pe),this.trigger("data",pe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([ue,He,pe]):this.processPes_(ue,He,pe)},this.processPes_=function(ue,pe,He){He.streamType=He.pid===this.programMapTable.video?uu.H264_STREAM_TYPE:He.pid===this.programMapTable.audio?uu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][He.pid],He.type="pes",He.data=ue.subarray(pe),this.trigger("data",He)}},cc.prototype=new a,cc.STREAM_TYPES={h264:27,adts:15},ju=function(){var pe,A=this,j=!1,F={data:[],size:0},V={data:[],size:0},ue={data:[],size:0},nt=function(lt,Dt,cn){var bl,zn=new Uint8Array(lt.size),hr={type:Dt},Nn=0,Ur=0,za=!1;if(lt.data.length&&!(lt.size<9)){for(hr.trackId=lt.data[0].pid,Nn=0;Nn<lt.data.length;Nn++)zn.set((bl=lt.data[Nn]).data,Ur),Ur+=bl.data.byteLength;(function(lt,Dt){var cn,zn=lt[0]<<16|lt[1]<<8|lt[2];Dt.data=new Uint8Array,1===zn&&(Dt.packetLength=6+(lt[4]<<8|lt[5]),Dt.dataAlignmentIndicator=0!=(4&lt[6]),192&(cn=lt[7])&&(Dt.pts=(14&lt[9])<<27|(255&lt[10])<<20|(254&lt[11])<<12|(255&lt[12])<<5|(254&lt[13])>>>3,Dt.pts*=4,Dt.pts+=(6&lt[13])>>>1,Dt.dts=Dt.pts,64&cn&&(Dt.dts=(14&lt[14])<<27|(255&lt[15])<<20|(254&lt[16])<<12|(255&lt[17])<<5|(254&lt[18])>>>3,Dt.dts*=4,Dt.dts+=(6&lt[18])>>>1)),Dt.data=lt.subarray(9+lt[8]))})(zn,hr),za="video"===Dt||hr.packetLength<=lt.size,(cn||za)&&(lt.size=0,lt.data.length=0),za&&A.trigger("data",hr)}};ju.prototype.init.call(this),this.push=function(pt){({pat:function(){},pes:function(){var Dt,cn;switch(pt.streamType){case uu.H264_STREAM_TYPE:Dt=F,cn="video";break;case uu.ADTS_STREAM_TYPE:Dt=V,cn="audio";break;case uu.METADATA_STREAM_TYPE:Dt=ue,cn="timed-metadata";break;default:return}pt.payloadUnitStartIndicator&&nt(Dt,cn,!0),Dt.data.push(pt),Dt.size+=pt.data.byteLength},pmt:function(){var Dt={type:"metadata",tracks:[]};null!==(pe=pt.programMapTable).video&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.video,codec:"avc",type:"video"}),null!==pe.audio&&Dt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.audio,codec:"adts",type:"audio"}),j=!0,A.trigger("data",Dt)}})[pt.type]()},this.reset=function(){F.size=0,F.data.length=0,V.size=0,V.data.length=0,this.trigger("reset")},this.flushStreams_=function(){nt(F,"video"),nt(V,"audio"),nt(ue,"timed-metadata")},this.flush=function(){if(!j&&pe){var pt={type:"metadata",tracks:[]};null!==pe.video&&pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.video,codec:"avc",type:"video"}),null!==pe.audio&&pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+pe.audio,codec:"adts",type:"audio"}),A.trigger("data",pt)}j=!1,this.flushStreams_(),this.trigger("done")}},ju.prototype=new a;var kv={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Dp,TransportParseStream:cc,ElementaryStream:ju,TimestampRolloverStream:Vy,CaptionStream:rm.CaptionStream,Cea608Stream:rm.Cea608Stream,Cea708Stream:rm.Cea708Stream,MetadataStream:P_};for(var xh in uu)uu.hasOwnProperty(xh)&&(kv[xh]=uu[xh]);var Ap,ol=kv,kp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ap=function(A){var j,F=0;Ap.prototype.init.call(this),this.skipWarn_=function(V,ue){this.trigger("log",{level:"warn",message:"adts skiping bytes "+V+" to "+ue+" in frame "+F+" outside syncword"})},this.push=function(V){var pe,He,nt,pt,lt,ue=0;if(A||(F=0),"audio"===V.type){j&&j.length?(nt=j,(j=new Uint8Array(nt.byteLength+V.data.byteLength)).set(nt),j.set(V.data,nt.byteLength)):j=V.data;for(var Dt;ue+7<j.length;)if(255===j[ue]&&240==(246&j[ue+1])){if("number"==typeof Dt&&(this.skipWarn_(Dt,ue),Dt=null),He=2*(1&~j[ue+1]),lt=9e4*(pt=1024*(1+(3&j[ue+6])))/kp[(60&j[ue+2])>>>2],j.byteLength-ue<(pe=(3&j[ue+3])<<11|j[ue+4]<<3|(224&j[ue+5])>>5))break;this.trigger("data",{pts:V.pts+F*lt,dts:V.dts+F*lt,sampleCount:pt,audioobjecttype:1+(j[ue+2]>>>6&3),channelcount:(1&j[ue+2])<<2|(192&j[ue+3])>>>6,samplerate:kp[(60&j[ue+2])>>>2],samplingfrequencyindex:(60&j[ue+2])>>>2,samplesize:16,data:j.subarray(ue+7+He,ue+pe)}),F++,ue+=pe}else"number"!=typeof Dt&&(Dt=ue),ue++;"number"==typeof Dt&&(this.skipWarn_(Dt,ue),Dt=null),j=j.subarray(ue)}},this.flush=function(){F=0,this.trigger("done")},this.reset=function(){j=void 0,this.trigger("reset")},this.endTimeline=function(){j=void 0,this.trigger("endedtimeline")}},Ap.prototype=new a;var nd,Ud=Ap;nd=function(A){var j=A.byteLength,F=0,V=0;this.length=function(){return 8*j},this.bitsAvailable=function(){return 8*j+V},this.loadWord=function(){var ue=A.byteLength-j,pe=new Uint8Array(4),He=Math.min(4,j);if(0===He)throw new Error("no bytes available");pe.set(A.subarray(ue,ue+He)),F=new DataView(pe.buffer).getUint32(0),V=8*He,j-=He},this.skipBits=function(ue){var pe;V>ue?(F<<=ue,V-=ue):(ue-=V,ue-=8*(pe=Math.floor(ue/8)),j-=pe,this.loadWord(),F<<=ue,V-=ue)},this.readBits=function(ue){var pe=Math.min(V,ue),He=F>>>32-pe;return(V-=pe)>0?F<<=pe:j>0&&this.loadWord(),(pe=ue-pe)>0?He<<pe|this.readBits(pe):He},this.skipLeadingZeros=function(){var ue;for(ue=0;ue<V;++ue)if(0!=(F&2147483648>>>ue))return F<<=ue,V-=ue,ue;return this.loadWord(),ue+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var ue=this.skipLeadingZeros();return this.readBits(ue+1)-1},this.readExpGolomb=function(){var ue=this.readUnsignedExpGolomb();return 1&ue?1+ue>>>1:-1*(ue>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var dc,wf,Mv,om=nd;wf=function(){var j,F,A=0;wf.prototype.init.call(this),this.push=function(V){var ue;F?((ue=new Uint8Array(F.byteLength+V.data.byteLength)).set(F),ue.set(V.data,F.byteLength),F=ue):F=V.data;for(var pe=F.byteLength;A<pe-3;A++)if(1===F[A+2]){j=A+5;break}for(;j<pe;)switch(F[j]){case 0:if(0!==F[j-1]){j+=2;break}if(0!==F[j-2]){j++;break}A+3!==j-2&&this.trigger("data",F.subarray(A+3,j-2));do{j++}while(1!==F[j]&&j<pe);A=j-2,j+=3;break;case 1:if(0!==F[j-1]||0!==F[j-2]){j+=3;break}this.trigger("data",F.subarray(A+3,j-2)),A=j-2,j+=3;break;default:j+=3}F=F.subarray(A),j-=A,A=0},this.reset=function(){F=null,A=0,this.trigger("reset")},this.flush=function(){F&&F.byteLength>3&&this.trigger("data",F.subarray(A+3)),F=null,A=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},wf.prototype=new a,Mv={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},dc=function(){var j,F,V,ue,pe,He,nt,A=new wf;dc.prototype.init.call(this),j=this,this.push=function(pt){"video"===pt.type&&(F=pt.trackId,V=pt.pts,ue=pt.dts,A.push(pt))},A.on("data",function(pt){var lt={trackId:F,pts:V,dts:ue,data:pt,nalUnitTypeCode:31&pt[0]};switch(lt.nalUnitTypeCode){case 5:lt.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:lt.nalUnitType="sei_rbsp",lt.escapedRBSP=pe(pt.subarray(1));break;case 7:lt.nalUnitType="seq_parameter_set_rbsp",lt.escapedRBSP=pe(pt.subarray(1)),lt.config=He(lt.escapedRBSP);break;case 8:lt.nalUnitType="pic_parameter_set_rbsp";break;case 9:lt.nalUnitType="access_unit_delimiter_rbsp"}j.trigger("data",lt)}),A.on("done",function(){j.trigger("done")}),A.on("partialdone",function(){j.trigger("partialdone")}),A.on("reset",function(){j.trigger("reset")}),A.on("endedtimeline",function(){j.trigger("endedtimeline")}),this.flush=function(){A.flush()},this.partialFlush=function(){A.partialFlush()},this.reset=function(){A.reset()},this.endTimeline=function(){A.endTimeline()},nt=function(lt,Dt){var hr,cn=8,zn=8;for(hr=0;hr<lt;hr++)0!==zn&&(zn=(cn+Dt.readExpGolomb()+256)%256),cn=0===zn?cn:zn},pe=function(lt){for(var hr,Nn,Dt=lt.byteLength,cn=[],zn=1;zn<Dt-2;)0===lt[zn]&&0===lt[zn+1]&&3===lt[zn+2]?(cn.push(zn+2),zn+=2):zn++;if(0===cn.length)return lt;hr=Dt-cn.length,Nn=new Uint8Array(hr);var Ur=0;for(zn=0;zn<hr;Ur++,zn++)Ur===cn[0]&&(Ur++,cn.shift()),Nn[zn]=lt[Ur];return Nn},He=function(lt){var Nn,Ur,za,bl,cm,Zy,Yy,p0,Qy,B_,V_,Af,Dt=0,cn=0,zn=0,hr=0,la=[1,1];if(Ur=(Nn=new om(lt)).readUnsignedByte(),bl=Nn.readUnsignedByte(),za=Nn.readUnsignedByte(),Nn.skipUnsignedExpGolomb(),Mv[Ur]&&(3===(cm=Nn.readUnsignedExpGolomb())&&Nn.skipBits(1),Nn.skipUnsignedExpGolomb(),Nn.skipUnsignedExpGolomb(),Nn.skipBits(1),Nn.readBoolean()))for(V_=3!==cm?8:12,Af=0;Af<V_;Af++)Nn.readBoolean()&&nt(Af<6?16:64,Nn);if(Nn.skipUnsignedExpGolomb(),0===(Zy=Nn.readUnsignedExpGolomb()))Nn.readUnsignedExpGolomb();else if(1===Zy)for(Nn.skipBits(1),Nn.skipExpGolomb(),Nn.skipExpGolomb(),Yy=Nn.readUnsignedExpGolomb(),Af=0;Af<Yy;Af++)Nn.skipExpGolomb();if(Nn.skipUnsignedExpGolomb(),Nn.skipBits(1),p0=Nn.readUnsignedExpGolomb(),Qy=Nn.readUnsignedExpGolomb(),0===(B_=Nn.readBits(1))&&Nn.skipBits(1),Nn.skipBits(1),Nn.readBoolean()&&(Dt=Nn.readUnsignedExpGolomb(),cn=Nn.readUnsignedExpGolomb(),zn=Nn.readUnsignedExpGolomb(),hr=Nn.readUnsignedExpGolomb()),Nn.readBoolean()&&Nn.readBoolean())switch(Nn.readUnsignedByte()){case 1:la=[1,1];break;case 2:la=[12,11];break;case 3:la=[10,11];break;case 4:la=[16,11];break;case 5:la=[40,33];break;case 6:la=[24,11];break;case 7:la=[20,11];break;case 8:la=[32,11];break;case 9:la=[80,33];break;case 10:la=[18,11];break;case 11:la=[15,11];break;case 12:la=[64,33];break;case 13:la=[160,99];break;case 14:la=[4,3];break;case 15:la=[3,2];break;case 16:la=[2,1];break;case 255:la=[Nn.readUnsignedByte()<<8|Nn.readUnsignedByte(),Nn.readUnsignedByte()<<8|Nn.readUnsignedByte()]}return{profileIdc:Ur,levelIdc:za,profileCompatibility:bl,width:16*(p0+1)-2*Dt-2*cn,height:(2-B_)*(Qy+1)*16-2*zn-2*hr,sarRatio:la}}},dc.prototype=new a;var Pp,Hy={H264Stream:dc,NalByteStream:wf},al=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],$y=function(A,j){var F=A[j+6]<<21|A[j+7]<<14|A[j+8]<<7|A[j+9];return F=F>=0?F:0,(16&A[j+5])>>4?F+20:F+10},O_=function Ee(A,j){return A.length-j<10||A[j]!=="I".charCodeAt(0)||A[j+1]!=="D".charCodeAt(0)||A[j+2]!=="3".charCodeAt(0)?j:Ee(A,j+=$y(A,j))},Gy=function(A){return A[0]<<21|A[1]<<14|A[2]<<7|A[3]},Wy=function(A,j,F){return unescape(function(A,j,F){var V,ue="";for(V=j;V<F;V++)ue+="%"+("00"+A[V].toString(16)).slice(-2);return ue}(A,j,F))},am={isLikelyAacData:function(A){var j=O_(A,0);return A.length>=j+2&&255==(255&A[j])&&240==(240&A[j+1])&&16==(22&A[j+1])},parseId3TagSize:$y,parseAdtsSize:function(A,j){return 6144&A[j+3]|A[j+4]<<3|(224&A[j+5])>>5},parseType:function(A,j){return A[j]==="I".charCodeAt(0)&&A[j+1]==="D".charCodeAt(0)&&A[j+2]==="3".charCodeAt(0)?"timed-metadata":!0&A[j]&&240==(240&A[j+1])?"audio":null},parseSampleRate:function(A){for(var j=0;j+5<A.length;){if(255===A[j]&&240==(246&A[j+1]))return al[(60&A[j+2])>>>2];j++}return null},parseAacTimestamp:function(A){var j,F,V;j=10,64&A[5]&&(j+=4,j+=Gy(A.subarray(10,14)));do{if((F=Gy(A.subarray(j+4,j+8)))<1)return null;if("PRIV"===String.fromCharCode(A[j],A[j+1],A[j+2],A[j+3])){V=A.subarray(j+10,j+F+10);for(var pe=0;pe<V.byteLength;pe++)if(0===V[pe]){if("com.apple.streaming.transportStreamTimestamp"===Wy(V,0,pe)){var nt=V.subarray(pe+1),pt=(1&nt[3])<<30|nt[4]<<22|nt[5]<<14|nt[6]<<6|nt[7]>>>2;return(pt*=4)+(3&nt[7])}break}}j+=10,j+=F}while(j<A.byteLength);return null}};Pp=function(){var A=new Uint8Array,j=0;Pp.prototype.init.call(this),this.setTimestamp=function(F){j=F},this.push=function(F){var He,nt,pt,V=0,ue=0;for(A.length?(pt=A.length,(A=new Uint8Array(F.byteLength+pt)).set(A.subarray(0,pt)),A.set(F,pt)):A=F;A.length-ue>=3;)if(A[ue]!=="I".charCodeAt(0)||A[ue+1]!=="D".charCodeAt(0)||A[ue+2]!=="3".charCodeAt(0))if(255!=(255&A[ue])||240!=(240&A[ue+1]))ue++;else{if(A.length-ue<7||ue+(V=am.parseAdtsSize(A,ue))>A.length)break;nt={type:"audio",data:A.subarray(ue,ue+V),pts:j,dts:j},this.trigger("data",nt),ue+=V}else{if(A.length-ue<10||ue+(V=am.parseId3TagSize(A,ue))>A.length)break;He={type:"timed-metadata",data:A.subarray(ue,ue+V)},this.trigger("data",He),ue+=V}A=A.length-ue>0?A.subarray(ue):new Uint8Array},this.reset=function(){A=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){A=new Uint8Array,this.trigger("endedtimeline")}},Pp.prototype=new a;var Ah,xf,l,e,zy=Pp,Rv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Dh=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Zo=Hy.H264Stream,J_=am.isLikelyAacData,n=function(A,j){j.stream=A,this.trigger("log",j)},d=function(A,j){for(var F=Object.keys(j),V=0;V<F.length;V++){var ue=F[V];"headOfPipeline"===ue||!j[ue].on||j[ue].on("log",n.bind(A,ue))}},p=function(A,j){var F;if(A.length!==j.length)return!1;for(F=0;F<A.length;F++)if(A[F]!==j[F])return!1;return!0},_=function(A,j,F,V,ue,pe){return{start:{dts:A,pts:A+(F-j)},end:{dts:A+(V-j),pts:A+(ue-F)},prependedContentDuration:pe,baseMediaDecodeTime:A}};xf=function(A,j){var V,F=[],ue=0,pe=0,He=1/0;V=(j=j||{}).firstSequenceNumber||0,xf.prototype.init.call(this),this.push=function(nt){Vl_collectDtsInfo(A,nt),A&&Rv.forEach(function(pt){A[pt]=nt[pt]}),F.push(nt)},this.setEarliestDts=function(nt){ue=nt},this.setVideoBaseMediaDecodeTime=function(nt){He=nt},this.setAudioAppendStart=function(nt){pe=nt},this.flush=function(){var nt,pt,lt,Dt,cn,zn,hr;0!==F.length?(nt=function(A,j,F){return j.minSegmentDts>=F?A:(j.minSegmentDts=1/0,A.filter(function(V){return V.dts>=F&&(j.minSegmentDts=Math.min(j.minSegmentDts,V.dts),j.minSegmentPts=j.minSegmentDts,!0)}))}(F,A,ue),A.baseMediaDecodeTime=Vl_calculateTrackBaseMediaDecodeTime(A,j.keepOriginalTimestamps),hr=oc_prefixWithSilence(A,nt,pe,He),A.samples=function(A){var j,V=[];for(j=0;j<A.length;j++)V.push({size:A[j].data.byteLength,duration:1024});return V}(nt),lt=il_mdat(function(A){var j,F,V=0,ue=new Uint8Array(function(A){var j,V=0;for(j=0;j<A.length;j++)V+=A[j].data.byteLength;return V}(A));for(j=0;j<A.length;j++)ue.set((F=A[j]).data,V),V+=F.data.byteLength;return ue}(nt)),F=[],pt=il_moof(V,[A]),Dt=new Uint8Array(pt.byteLength+lt.byteLength),V++,Dt.set(pt),Dt.set(lt,pt.byteLength),Vl_clearDtsInfo(A),cn=Math.ceil(9216e4/A.samplerate),nt.length&&(zn=nt.length*cn,this.trigger("segmentTimingInfo",_(Ri_audioTsToVideoTs(A.baseMediaDecodeTime,A.samplerate),nt[0].dts,nt[0].pts,nt[0].dts+zn,nt[0].pts+zn,hr||0)),this.trigger("timingInfo",{start:nt[0].pts,end:nt[0].pts+zn})),this.trigger("data",{track:A,boxes:Dt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Vl_clearDtsInfo(A),F=[],this.trigger("reset")}},xf.prototype=new a,Ah=function(A,j){var F,pe,He,V=[],ue=[];F=(j=j||{}).firstSequenceNumber||0,Ah.prototype.init.call(this),delete A.minPTS,this.gopCache_=[],this.push=function(nt){Vl_collectDtsInfo(A,nt),"seq_parameter_set_rbsp"===nt.nalUnitType&&!pe&&(pe=nt.config,A.sps=[nt.data],Dh.forEach(function(pt){A[pt]=pe[pt]},this)),"pic_parameter_set_rbsp"===nt.nalUnitType&&!He&&(He=nt.data,A.pps=[nt.data]),V.push(nt)},this.flush=function(){for(var nt,pt,lt,Dt,cn,zn,Nn,Ur,hr=0;V.length&&"access_unit_delimiter_rbsp"!==V[0].nalUnitType;)V.shift();if(0===V.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(nt=function(A){var j,F,V=[],ue=[];for(ue.byteLength=0,ue.nalCount=0,ue.duration=0,V.byteLength=0,j=0;j<A.length;j++)"access_unit_delimiter_rbsp"===(F=A[j]).nalUnitType?(V.length&&(V.duration=F.dts-V.dts,ue.byteLength+=V.byteLength,ue.nalCount+=V.length,ue.duration+=V.duration,ue.push(V)),(V=[F]).byteLength=F.data.byteLength,V.pts=F.pts,V.dts=F.dts):("slice_layer_without_partitioning_rbsp_idr"===F.nalUnitType&&(V.keyFrame=!0),V.duration=F.dts-V.dts,V.byteLength+=F.data.byteLength,V.push(F));return ue.length&&(!V.duration||V.duration<=0)&&(V.duration=ue[ue.length-1].duration),ue.byteLength+=V.byteLength,ue.nalCount+=V.length,ue.duration+=V.duration,ue.push(V),ue}(V),(lt=function(A){var j,F,V=[],ue=[];for(V.byteLength=0,V.nalCount=0,V.duration=0,V.pts=A[0].pts,V.dts=A[0].dts,ue.byteLength=0,ue.nalCount=0,ue.duration=0,ue.pts=A[0].pts,ue.dts=A[0].dts,j=0;j<A.length;j++)(F=A[j]).keyFrame?(V.length&&(ue.push(V),ue.byteLength+=V.byteLength,ue.nalCount+=V.nalCount,ue.duration+=V.duration),(V=[F]).nalCount=F.length,V.byteLength=F.byteLength,V.pts=F.pts,V.dts=F.dts,V.duration=F.duration):(V.duration+=F.duration,V.nalCount+=F.length,V.byteLength+=F.byteLength,V.push(F));return ue.length&&V.duration<=0&&(V.duration=ue[ue.length-1].duration),ue.byteLength+=V.byteLength,ue.nalCount+=V.nalCount,ue.duration+=V.duration,ue.push(V),ue}(nt))[0][0].keyFrame||((pt=this.getGopForFusion_(V[0],A))?(hr=pt.duration,lt.unshift(pt),lt.byteLength+=pt.byteLength,lt.nalCount+=pt.nalCount,lt.pts=pt.pts,lt.dts=pt.dts,lt.duration+=pt.duration):lt=function(A){var j;return!A[0][0].keyFrame&&A.length>1&&(j=A.shift(),A.byteLength-=j.byteLength,A.nalCount-=j.nalCount,A[0][0].dts=j.dts,A[0][0].pts=j.pts,A[0][0].duration+=j.duration),A}(lt)),ue.length){var za;if(!(za=j.alignGopsAtEnd?this.alignGopsAtEnd_(lt):this.alignGopsAtStart_(lt)))return this.gopCache_.unshift({gop:lt.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),V=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Vl_clearDtsInfo(A),lt=za}Vl_collectDtsInfo(A,lt),A.samples=function(A,j){var F,V,ue,pe,nt=j||0,pt=[];for(F=0;F<A.length;F++)for(pe=A[F],V=0;V<pe.length;V++)nt+=(ue=_v(pe[V],nt)).size,pt.push(ue);return pt}(lt),cn=il_mdat(function(A){var j,F,V,ue,pe,He,nt=0,cn=new Uint8Array(A.byteLength+4*A.nalCount),zn=new DataView(cn.buffer);for(j=0;j<A.length;j++)for(ue=A[j],F=0;F<ue.length;F++)for(pe=ue[F],V=0;V<pe.length;V++)zn.setUint32(nt,(He=pe[V]).data.byteLength),cn.set(He.data,nt+=4),nt+=He.data.byteLength;return cn}(lt)),A.baseMediaDecodeTime=Vl_calculateTrackBaseMediaDecodeTime(A,j.keepOriginalTimestamps),this.trigger("processedGopsInfo",lt.map(function(bl){return{pts:bl.pts,dts:bl.dts,byteLength:bl.byteLength}})),this.trigger("segmentTimingInfo",_(A.baseMediaDecodeTime,(Nn=lt[0]).dts,Nn.pts,(Ur=lt[lt.length-1]).dts+Ur.duration,Ur.pts+Ur.duration,hr)),this.trigger("timingInfo",{start:lt[0].pts,end:lt[lt.length-1].pts+lt[lt.length-1].duration}),this.gopCache_.unshift({gop:lt.pop(),pps:A.pps,sps:A.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),V=[],this.trigger("baseMediaDecodeTime",A.baseMediaDecodeTime),this.trigger("timelineStartInfo",A.timelineStartInfo),Dt=il_moof(F,[A]),zn=new Uint8Array(Dt.byteLength+cn.byteLength),F++,zn.set(Dt),zn.set(cn,Dt.byteLength),this.trigger("data",{track:A,boxes:zn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),V=[],this.gopCache_.length=0,ue.length=0,this.trigger("reset")},this.resetStream_=function(){Vl_clearDtsInfo(A),pe=void 0,He=void 0},this.getGopForFusion_=function(nt){var cn,zn,hr,Nn,Ur,Dt=1/0;for(Ur=0;Ur<this.gopCache_.length;Ur++)hr=(Nn=this.gopCache_[Ur]).gop,A.pps&&p(A.pps[0],Nn.pps[0])&&A.sps&&p(A.sps[0],Nn.sps[0])&&(hr.dts<A.timelineStartInfo.dts||(cn=nt.dts-hr.dts-hr.duration)>=-1e4&&cn<=45e3&&(!zn||Dt>cn)&&(zn=Nn,Dt=cn));return zn?zn.gop:null},this.alignGopsAtStart_=function(nt){var pt,lt,Dt,cn,zn,hr,Nn,Ur;for(zn=nt.byteLength,hr=nt.nalCount,Nn=nt.duration,pt=lt=0;pt<ue.length&&lt<nt.length&&(Dt=ue[pt]).pts!==(cn=nt[lt]).pts;)cn.pts>Dt.pts?pt++:(lt++,zn-=cn.byteLength,hr-=cn.nalCount,Nn-=cn.duration);return 0===lt?nt:lt===nt.length?null:((Ur=nt.slice(lt)).byteLength=zn,Ur.duration=Nn,Ur.nalCount=hr,Ur.pts=Ur[0].pts,Ur.dts=Ur[0].dts,Ur)},this.alignGopsAtEnd_=function(nt){var pt,lt,Dt,cn,zn,hr,Nn;for(pt=ue.length-1,lt=nt.length-1,zn=null,hr=!1;pt>=0&&lt>=0;){if((Dt=ue[pt]).pts===(cn=nt[lt]).pts){hr=!0;break}Dt.pts>cn.pts?pt--:(pt===ue.length-1&&(zn=lt),lt--)}if(!hr&&null===zn)return null;if(0===(Nn=hr?lt:zn))return nt;var Ur=nt.slice(Nn),za=Ur.reduce(function(bl,cm){return bl.byteLength+=cm.byteLength,bl.duration+=cm.duration,bl.nalCount+=cm.nalCount,bl},{byteLength:0,duration:0,nalCount:0});return Ur.byteLength=za.byteLength,Ur.duration=za.duration,Ur.nalCount=za.nalCount,Ur.pts=Ur[0].pts,Ur.dts=Ur[0].dts,Ur},this.alignGopsWith=function(nt){ue=nt}},Ah.prototype=new a,e=function(A,j){this.numberOfTracks=0,this.metadataStream=j,this.remuxTracks=!(typeof(A=A||{}).remux<"u"&&!A.remux),this.keepOriginalTimestamps="boolean"==typeof A.keepOriginalTimestamps&&A.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,e.prototype.init.call(this),this.push=function(F){return F.text?this.pendingCaptions.push(F):F.frames?this.pendingMetadata.push(F):(this.pendingTracks.push(F.track),this.pendingBytes+=F.boxes.byteLength,"video"===F.track.type&&(this.videoTrack=F.track,this.pendingBoxes.push(F.boxes)),void("audio"===F.track.type&&(this.audioTrack=F.track,this.pendingBoxes.unshift(F.boxes))))}},e.prototype=new a,e.prototype.flush=function(Ee){var F,V,ue,He,A=0,j={captions:[],captionStreams:{},metadata:[],info:{}},pe=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==Ee&&"AudioSegmentStream"!==Ee)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(pe=this.videoTrack.timelineStartInfo.pts,Dh.forEach(function(nt){j.info[nt]=this.videoTrack[nt]},this)):this.audioTrack&&(pe=this.audioTrack.timelineStartInfo.pts,Rv.forEach(function(nt){j.info[nt]=this.audioTrack[nt]},this)),this.videoTrack||this.audioTrack){for(j.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,ue=function(A){var V,j=x(),F=je(A);return(V=new Uint8Array(j.byteLength+F.byteLength)).set(j),V.set(F,j.byteLength),V}(this.pendingTracks),j.initSegment=new Uint8Array(ue.byteLength),j.initSegment.set(ue),j.data=new Uint8Array(this.pendingBytes),He=0;He<this.pendingBoxes.length;He++)j.data.set(this.pendingBoxes[He],A),A+=this.pendingBoxes[He].byteLength;for(He=0;He<this.pendingCaptions.length;He++)(F=this.pendingCaptions[He]).startTime=Ri_metadataTsToSeconds(F.startPts,pe,this.keepOriginalTimestamps),F.endTime=Ri_metadataTsToSeconds(F.endPts,pe,this.keepOriginalTimestamps),j.captionStreams[F.stream]=!0,j.captions.push(F);for(He=0;He<this.pendingMetadata.length;He++)(V=this.pendingMetadata[He]).cueTime=Ri_metadataTsToSeconds(V.pts,pe,this.keepOriginalTimestamps),j.metadata.push(V);for(j.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",j),He=0;He<j.captions.length;He++)this.trigger("caption",F=j.captions[He]);for(He=0;He<j.metadata.length;He++)this.trigger("id3Frame",V=j.metadata[He])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},e.prototype.setRemux=function(Ee){this.remuxTracks=Ee},l=function(A){var V,ue,j=this,F=!0;l.prototype.init.call(this),this.baseMediaDecodeTime=(A=A||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var pe={};this.transmuxPipeline_=pe,pe.type="aac",pe.metadataStream=new ol.MetadataStream,pe.aacStream=new zy,pe.audioTimestampRolloverStream=new ol.TimestampRolloverStream("audio"),pe.timedMetadataTimestampRolloverStream=new ol.TimestampRolloverStream("timed-metadata"),pe.adtsStream=new Ud,pe.coalesceStream=new e(A,pe.metadataStream),pe.headOfPipeline=pe.aacStream,pe.aacStream.pipe(pe.audioTimestampRolloverStream).pipe(pe.adtsStream),pe.aacStream.pipe(pe.timedMetadataTimestampRolloverStream).pipe(pe.metadataStream).pipe(pe.coalesceStream),pe.metadataStream.on("timestamp",function(He){pe.aacStream.setTimestamp(He.timeStamp)}),pe.aacStream.on("data",function(He){"timed-metadata"!==He.type&&"audio"!==He.type||pe.audioSegmentStream||(ue=ue||{timelineStartInfo:{baseMediaDecodeTime:j.baseMediaDecodeTime},codec:"adts",type:"audio"},pe.coalesceStream.numberOfTracks++,pe.audioSegmentStream=new xf(ue,A),pe.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),pe.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),pe.adtsStream.pipe(pe.audioSegmentStream).pipe(pe.coalesceStream),j.trigger("trackinfo",{hasAudio:!!ue,hasVideo:!!V}))}),pe.coalesceStream.on("data",this.trigger.bind(this,"data")),pe.coalesceStream.on("done",this.trigger.bind(this,"done")),d(this,pe)},this.setupTsPipeline=function(){var pe={};this.transmuxPipeline_=pe,pe.type="ts",pe.metadataStream=new ol.MetadataStream,pe.packetStream=new ol.TransportPacketStream,pe.parseStream=new ol.TransportParseStream,pe.elementaryStream=new ol.ElementaryStream,pe.timestampRolloverStream=new ol.TimestampRolloverStream,pe.adtsStream=new Ud,pe.h264Stream=new Zo,pe.captionStream=new ol.CaptionStream(A),pe.coalesceStream=new e(A,pe.metadataStream),pe.headOfPipeline=pe.packetStream,pe.packetStream.pipe(pe.parseStream).pipe(pe.elementaryStream).pipe(pe.timestampRolloverStream),pe.timestampRolloverStream.pipe(pe.h264Stream),pe.timestampRolloverStream.pipe(pe.adtsStream),pe.timestampRolloverStream.pipe(pe.metadataStream).pipe(pe.coalesceStream),pe.h264Stream.pipe(pe.captionStream).pipe(pe.coalesceStream),pe.elementaryStream.on("data",function(He){var nt;if("metadata"===He.type){for(nt=He.tracks.length;nt--;)V||"video"!==He.tracks[nt].type?!ue&&"audio"===He.tracks[nt].type&&((ue=He.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime):(V=He.tracks[nt]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime;V&&!pe.videoSegmentStream&&(pe.coalesceStream.numberOfTracks++,pe.videoSegmentStream=new Ah(V,A),pe.videoSegmentStream.on("log",j.getLogTrigger_("videoSegmentStream")),pe.videoSegmentStream.on("timelineStartInfo",function(pt){ue&&!A.keepOriginalTimestamps&&(ue.timelineStartInfo=pt,pe.audioSegmentStream.setEarliestDts(pt.dts-j.baseMediaDecodeTime))}),pe.videoSegmentStream.on("processedGopsInfo",j.trigger.bind(j,"gopInfo")),pe.videoSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"videoSegmentTimingInfo")),pe.videoSegmentStream.on("baseMediaDecodeTime",function(pt){ue&&pe.audioSegmentStream.setVideoBaseMediaDecodeTime(pt)}),pe.videoSegmentStream.on("timingInfo",j.trigger.bind(j,"videoTimingInfo")),pe.h264Stream.pipe(pe.videoSegmentStream).pipe(pe.coalesceStream)),ue&&!pe.audioSegmentStream&&(pe.coalesceStream.numberOfTracks++,pe.audioSegmentStream=new xf(ue,A),pe.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),pe.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),pe.audioSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"audioSegmentTimingInfo")),pe.adtsStream.pipe(pe.audioSegmentStream).pipe(pe.coalesceStream)),j.trigger("trackinfo",{hasAudio:!!ue,hasVideo:!!V})}}),pe.coalesceStream.on("data",this.trigger.bind(this,"data")),pe.coalesceStream.on("id3Frame",function(He){He.dispatchType=pe.metadataStream.dispatchType,j.trigger("id3Frame",He)}),pe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),pe.coalesceStream.on("done",this.trigger.bind(this,"done")),d(this,pe)},this.setBaseMediaDecodeTime=function(pe){var He=this.transmuxPipeline_;A.keepOriginalTimestamps||(this.baseMediaDecodeTime=pe),ue&&(ue.timelineStartInfo.dts=void 0,ue.timelineStartInfo.pts=void 0,Vl_clearDtsInfo(ue),He.audioTimestampRolloverStream&&He.audioTimestampRolloverStream.discontinuity()),V&&(He.videoSegmentStream&&(He.videoSegmentStream.gopCache_=[]),V.timelineStartInfo.dts=void 0,V.timelineStartInfo.pts=void 0,Vl_clearDtsInfo(V),He.captionStream.reset()),He.timestampRolloverStream&&He.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(pe){ue&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(pe)},this.setRemux=function(pe){var He=this.transmuxPipeline_;A.remux=pe,He&&He.coalesceStream&&He.coalesceStream.setRemux(pe)},this.alignGopsWith=function(pe){V&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(pe)},this.getLogTrigger_=function(pe){var He=this;return function(nt){nt.stream=pe,He.trigger("log",nt)}},this.push=function(pe){if(F){var He=J_(pe);He&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!He&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),F=!1}this.transmuxPipeline_.headOfPipeline.push(pe)},this.flush=function(){F=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},l.prototype=new a;var r0,o0,L_,w={Transmuxer:l,VideoSegmentStream:Ah,AudioSegmentStream:xf,AUDIO_PROPERTIES:Rv,VIDEO_PROPERTIES:Dh,generateSegmentTimingInfo:_},me_toUnsigned=function(A){return A>>>0},st=function(A){var j="";return j+=String.fromCharCode(A[0]),j+=String.fromCharCode(A[1]),(j+=String.fromCharCode(A[2]))+String.fromCharCode(A[3])},Lt=me_toUnsigned,Zt=function Ee(A,j){var V,ue,pe,He,nt,F=[];if(!j.length)return null;for(V=0;V<A.byteLength;)ue=Lt(A[V]<<24|A[V+1]<<16|A[V+2]<<8|A[V+3]),pe=st(A.subarray(V+4,V+8)),He=ue>1?V+ue:A.byteLength,pe===j[0]&&(1===j.length?F.push(A.subarray(V+8,He)):(nt=Ee(A.subarray(V+8,He),j.slice(1))).length&&(F=F.concat(nt))),V=He;return F},Xn=me_toUnsigned,ir=t.getUint64,Uo=function(A){return{isLeading:(12&A[0])>>>2,dependsOn:3&A[0],isDependedOn:(192&A[1])>>>6,hasRedundancy:(48&A[1])>>>4,paddingValue:(14&A[1])>>>1,isNonSyncSample:1&A[1],degradationPriority:A[2]<<8|A[3]}},R_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fv=typeof window<"u"?window:typeof R_<"u"?R_:typeof self<"u"?self:{},vb=function(A){for(var ue,pe,j=A.byteLength,F=[],V=1;V<j-2;)0===A[V]&&0===A[V+1]&&3===A[V+2]?(F.push(V+2),V+=2):V++;if(0===F.length)return A;ue=j-F.length,pe=new Uint8Array(ue);var He=0;for(V=0;V<ue;He++,V++)He===F[0]&&(He++,F.shift()),pe[V]=A[He];return pe},yb=rm.CaptionStream,_b=function(A,j){for(var F=A,V=0;V<j.length;V++){var ue=j[V];if(F<ue.size)return ue;F-=ue.size}return null},qy=function(A,j){var F=Zt(A,["moof","traf"]),V=Zt(A,["mdat"]),ue={},pe=[];return V.forEach(function(He,nt){pe.push({mdat:He,traf:F[nt]})}),pe.forEach(function(He){var Ur,za,nt=He.mdat,pt=He.traf,Dt=function(A){var Dt,j=new DataView(A.buffer,A.byteOffset,A.byteLength),F={version:A[0],flags:new Uint8Array(A.subarray(1,4)),trackId:j.getUint32(4)},V=1&F.flags[2],ue=2&F.flags[2],pe=8&F.flags[2],He=16&F.flags[2],nt=32&F.flags[2],pt=65536&F.flags[0],lt=131072&F.flags[0];return Dt=8,V&&(Dt+=4,F.baseDataOffset=j.getUint32(12),Dt+=4),ue&&(F.sampleDescriptionIndex=j.getUint32(Dt),Dt+=4),pe&&(F.defaultSampleDuration=j.getUint32(Dt),Dt+=4),He&&(F.defaultSampleSize=j.getUint32(Dt),Dt+=4),nt&&(F.defaultSampleFlags=j.getUint32(Dt)),pt&&(F.durationIsEmpty=!0),!V&&lt&&(F.baseDataOffsetIsMoof=!0),F}(Zt(pt,["tfhd"])[0]),cn=Dt.trackId,zn=Zt(pt,["tfdt"]),hr=zn.length>0?function(A){var j={version:A[0],flags:new Uint8Array(A.subarray(1,4))};return j.baseMediaDecodeTime=1===j.version?ir(A.subarray(4)):Xn(A[4]<<24|A[5]<<16|A[6]<<8|A[7]),j}(zn[0]).baseMediaDecodeTime:0,Nn=Zt(pt,["trun"]);j===cn&&Nn.length>0&&(Ur=function(A,j,F){var V=j,ue=F.defaultSampleDuration||0,pe=F.defaultSampleSize||0,He=F.trackId,nt=[];return A.forEach(function(pt){var Dt=function(A){var cn,j={version:A[0],flags:new Uint8Array(A.subarray(1,4)),samples:[]},F=new DataView(A.buffer,A.byteOffset,A.byteLength),V=1&j.flags[2],ue=4&j.flags[2],pe=1&j.flags[1],He=2&j.flags[1],nt=4&j.flags[1],pt=8&j.flags[1],lt=F.getUint32(4),Dt=8;for(V&&(j.dataOffset=F.getInt32(Dt),Dt+=4),ue&&lt&&(cn={flags:Uo(A.subarray(Dt,Dt+4))},Dt+=4,pe&&(cn.duration=F.getUint32(Dt),Dt+=4),He&&(cn.size=F.getUint32(Dt),Dt+=4),pt&&(cn.compositionTimeOffset=1===j.version?F.getInt32(Dt):F.getUint32(Dt),Dt+=4),j.samples.push(cn),lt--);lt--;)cn={},pe&&(cn.duration=F.getUint32(Dt),Dt+=4),He&&(cn.size=F.getUint32(Dt),Dt+=4),nt&&(cn.flags=Uo(A.subarray(Dt,Dt+4)),Dt+=4),pt&&(cn.compositionTimeOffset=1===j.version?F.getInt32(Dt):F.getUint32(Dt),Dt+=4),j.samples.push(cn);return j}(pt).samples;Dt.forEach(function(cn){void 0===cn.duration&&(cn.duration=ue),void 0===cn.size&&(cn.size=pe),cn.trackId=He,cn.dts=V,void 0===cn.compositionTimeOffset&&(cn.compositionTimeOffset=0),"bigint"==typeof V?(cn.pts=V+Fv.BigInt(cn.compositionTimeOffset),V+=Fv.BigInt(cn.duration)):(cn.pts=V+cn.compositionTimeOffset,V+=cn.duration)}),nt=nt.concat(Dt)}),nt}(Nn,hr,Dt),za=function(A,j,F){var pe,He,nt,pt,V=new DataView(A.buffer,A.byteOffset,A.byteLength),ue={logs:[],seiNals:[]};for(He=0;He+4<A.length;He+=nt)if(nt=V.getUint32(He),He+=4,!(nt<=0))switch(31&A[He]){case 6:var lt=A.subarray(He+1,He+1+nt),Dt=_b(He,j);if(pe={nalUnitType:"sei_rbsp",size:nt,data:lt,escapedRBSP:vb(lt),trackId:F},Dt)pe.pts=Dt.pts,pe.dts=Dt.dts,pt=Dt;else{if(!pt){ue.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+He+" for trackId "+F+". See mux.js#223."});break}pe.pts=pt.pts,pe.dts=pt.dts}ue.seiNals.push(pe)}return ue}(nt,Ur,cn),ue[cn]||(ue[cn]={seiNals:[],logs:[]}),ue[cn].seiNals=ue[cn].seiNals.concat(za.seiNals),ue[cn].logs=ue[cn].logs.concat(za.logs))}),ue},t0=function(){var j,F,V,ue,pe,He,A=!1;this.isInitialized=function(){return A},this.init=function(nt){j=new yb,A=!0,He=!!nt&&nt.isPartial,j.on("data",function(pt){pt.startTime=pt.startPts/ue,pt.endTime=pt.endPts/ue,pe.captions.push(pt),pe.captionStreams[pt.stream]=!0}),j.on("log",function(pt){pe.logs.push(pt)})},this.isNewInit=function(nt,pt){return!(nt&&0===nt.length||pt&&"object"==typeof pt&&0===Object.keys(pt).length||V===nt[0]&&ue===pt[V])},this.parse=function(nt,pt,lt){var Dt;if(!this.isInitialized())return null;if(!pt||!lt)return null;if(this.isNewInit(pt,lt))ue=lt[V=pt[0]];else if(null===V||!ue)return F.push(nt),null;for(;F.length>0;){var cn=F.shift();this.parse(cn,pt,lt)}return Dt=function(A,j,F){if(null===j)return null;var ue=qy(A,j)[j]||{};return{seiNals:ue.seiNals,logs:ue.logs,timescale:F}}(nt,V,ue),Dt&&Dt.logs&&(pe.logs=pe.logs.concat(Dt.logs)),null!==Dt&&Dt.seiNals?(this.pushNals(Dt.seiNals),this.flushStream(),pe):pe.logs.length?{logs:pe.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(nt){if(!this.isInitialized()||!nt||0===nt.length)return null;nt.forEach(function(pt){j.push(pt)})},this.flushStream=function(){if(!this.isInitialized())return null;He?j.partialFlush():j.flush()},this.clearParsedCaptions=function(){pe.captions=[],pe.captionStreams={},pe.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;j.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){F=[],V=null,ue=null,pe?this.clearParsedCaptions():pe={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Df=me_toUnsigned,jv=function(A){return("00"+A.toString(16)).slice(-2)},I0=t.getUint64;r0=function(A,j){var V=Zt(j,["moof","traf"]).reduce(function(ue,pe){var cn,zn,He=Zt(pe,["tfhd"])[0],nt=Df(He[4]<<24|He[5]<<16|He[6]<<8|He[7]),pt=A[nt]||9e4,lt=Zt(pe,["tfdt"])[0],Dt=new DataView(lt.buffer,lt.byteOffset,lt.byteLength);return"bigint"==typeof(cn=1===lt[0]?I0(lt.subarray(4,12)):Dt.getUint32(4))?zn=cn/Fv.BigInt(pt):"number"==typeof cn&&!isNaN(cn)&&(zn=cn/pt),zn<Number.MAX_SAFE_INTEGER&&(zn=Number(zn)),zn<ue&&(ue=zn),ue},1/0);return"bigint"==typeof V||isFinite(V)?V:0},L_=function(A){var F=0===A[0]?12:20;return Df(A[F]<<24|A[F+1]<<16|A[F+2]<<8|A[F+3])},o0=function(A){var j=Zt(A,["moov","trak"]),F=[];return j.forEach(function(V){var He,nt,ue={},pe=Zt(V,["tkhd"])[0];pe&&(nt=(He=new DataView(pe.buffer,pe.byteOffset,pe.byteLength)).getUint8(0),ue.id=He.getUint32(0===nt?12:20));var pt=Zt(V,["mdia","hdlr"])[0];if(pt){var lt=st(pt.subarray(8,12));ue.type="vide"===lt?"video":"soun"===lt?"audio":lt}var Dt=Zt(V,["mdia","minf","stbl","stsd"])[0];if(Dt){var cn=Dt.subarray(8);ue.codec=st(cn.subarray(4,8));var hr,zn=Zt(cn,[ue.codec])[0];zn&&(/^[asm]vc[1-9]$/i.test(ue.codec)?(hr=zn.subarray(78),"avcC"===st(hr.subarray(4,8))&&hr.length>11?(ue.codec+=".",ue.codec+=jv(hr[9]),ue.codec+=jv(hr[10]),ue.codec+=jv(hr[11])):ue.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(ue.codec)?(hr=zn.subarray(28),"esds"===st(hr.subarray(4,8))&&hr.length>20&&0!==hr[19]?(ue.codec+="."+jv(hr[19]),ue.codec+="."+jv(hr[20]>>>2&63).replace(/^0/,"")):ue.codec="mp4a.40.2"):ue.codec=ue.codec.toLowerCase())}var Ur=Zt(V,["mdia","mdhd"])[0];Ur&&(ue.timescale=L_(Ur)),F.push(ue)}),F};var um_startTime=r0,um_tracks=o0,a0=function(A){var j=31&A[1];return(j<<=8)|A[2]},Uv=function(A){return!!(64&A[1])},Ky=function(A){var j=0;return(48&A[3])>>>4>1&&(j+=A[4]+1),j},j_=function(A){switch(A){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},d0={parseType:function(A,j){var F=a0(A);return 0===F?"pat":F===j?"pmt":j?"pes":null},parsePat:function(A){var j=Uv(A),F=4+Ky(A);return j&&(F+=A[F]+1),(31&A[F+10])<<8|A[F+11]},parsePmt:function(A){var j={},F=Uv(A),V=4+Ky(A);if(F&&(V+=A[V]+1),1&A[V+5]){var pe;pe=3+((15&A[V+1])<<8|A[V+2])-4;for(var nt=12+((15&A[V+10])<<8|A[V+11]);nt<pe;){var pt=V+nt;j[(31&A[pt+1])<<8|A[pt+2]]=A[pt],nt+=5+((15&A[pt+3])<<8|A[pt+4])}return j}},parsePayloadUnitStartIndicator:Uv,parsePesType:function(A,j){switch(j[a0(A)]){case uu.H264_STREAM_TYPE:return"video";case uu.ADTS_STREAM_TYPE:return"audio";case uu.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(A){if(!Uv(A))return null;var F=4+Ky(A);if(F>=A.byteLength)return null;var ue,V=null;return 192&(ue=A[F+7])&&((V={}).pts=(14&A[F+9])<<27|(255&A[F+10])<<20|(254&A[F+11])<<12|(255&A[F+12])<<5|(254&A[F+13])>>>3,V.pts*=4,V.pts+=(6&A[F+13])>>>1,V.dts=V.pts,64&ue&&(V.dts=(14&A[F+14])<<27|(255&A[F+15])<<20|(254&A[F+16])<<12|(255&A[F+17])<<5|(254&A[F+18])>>>3,V.dts*=4,V.dts+=(6&A[F+18])>>>1)),V},videoPacketContainsKeyFrame:function(A){for(var j=4+Ky(A),F=A.subarray(j),V=0,ue=0,pe=!1;ue<F.byteLength-3;ue++)if(1===F[ue+2]){V=ue+5;break}for(;V<F.byteLength;)switch(F[V]){case 0:if(0!==F[V-1]){V+=2;break}if(0!==F[V-2]){V++;break}ue+3!==V-2&&"slice_layer_without_partitioning_rbsp_idr"===j_(31&F[ue+3])&&(pe=!0);do{V++}while(1!==F[V]&&V<F.length);ue=V-2,V+=3;break;case 1:if(0!==F[V-1]||0!==F[V-2]){V+=3;break}"slice_layer_without_partitioning_rbsp_idr"===j_(31&F[ue+3])&&(pe=!0),ue=V-2,V+=3;break;default:V+=3}return F=F.subarray(ue),V-=ue,ue=0,F&&F.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===j_(31&F[ue+3])&&(pe=!0),pe}},lm=Dv_handleRollover,Xs={};Xs.ts=d0,Xs.aac=am;var Rp=9e4,Uu=188,f0=function(A,j,F){for(var pe,nt,pt,lt,V=0,ue=Uu,Dt=!1;ue<=A.byteLength;)if(71!==A[V]||71!==A[ue]&&ue!==A.byteLength)V++,ue++;else{if("pes"===(pe=A.subarray(V,ue),Xs.ts.parseType(pe,j.pid))&&(nt=Xs.ts.parsePesType(pe,j.table),pt=Xs.ts.parsePayloadUnitStartIndicator(pe),"audio"===nt&&pt&&(lt=Xs.ts.parsePesTime(pe))&&(lt.type="audio",F.audio.push(lt),Dt=!0)),Dt)break;V+=Uu,ue+=Uu}for(V=(ue=A.byteLength)-Uu,Dt=!1;V>=0;)if(71!==A[V]||71!==A[ue]&&ue!==A.byteLength)V--,ue--;else{if("pes"===(pe=A.subarray(V,ue),Xs.ts.parseType(pe,j.pid))&&(nt=Xs.ts.parsePesType(pe,j.table),pt=Xs.ts.parsePayloadUnitStartIndicator(pe),"audio"===nt&&pt&&(lt=Xs.ts.parsePesTime(pe))&&(lt.type="audio",F.audio.push(lt),Dt=!0)),Dt)break;V-=Uu,ue-=Uu}},k0=function(A,j,F){for(var pe,nt,pt,lt,Dt,cn,zn,V=0,ue=Uu,hr=!1,Nn={data:[],size:0};ue<A.byteLength;)if(71!==A[V]||71!==A[ue])V++,ue++;else{if("pes"===(pe=A.subarray(V,ue),Xs.ts.parseType(pe,j.pid))&&(nt=Xs.ts.parsePesType(pe,j.table),pt=Xs.ts.parsePayloadUnitStartIndicator(pe),"video"===nt&&(pt&&!hr&&(lt=Xs.ts.parsePesTime(pe))&&(lt.type="video",F.video.push(lt),hr=!0),!F.firstKeyFrame))){if(pt&&0!==Nn.size){for(Dt=new Uint8Array(Nn.size),cn=0;Nn.data.length;)zn=Nn.data.shift(),Dt.set(zn,cn),cn+=zn.byteLength;if(Xs.ts.videoPacketContainsKeyFrame(Dt)){var Ur=Xs.ts.parsePesTime(Dt);Ur?(F.firstKeyFrame=Ur,F.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Nn.size=0}Nn.data.push(pe),Nn.size+=pe.byteLength}if(hr&&F.firstKeyFrame)break;V+=Uu,ue+=Uu}for(V=(ue=A.byteLength)-Uu,hr=!1;V>=0;)if(71!==A[V]||71!==A[ue])V--,ue--;else{if("pes"===(pe=A.subarray(V,ue),Xs.ts.parseType(pe,j.pid))&&(nt=Xs.ts.parsePesType(pe,j.table),pt=Xs.ts.parsePayloadUnitStartIndicator(pe),"video"===nt&&pt&&(lt=Xs.ts.parsePesTime(pe))&&(lt.type="video",F.video.push(lt),hr=!0)),hr)break;V-=Uu,ue-=Uu}},N0_inspect=function(A,j){var V;return V=Xs.aac.isLikelyAacData(A)?function(A){for(var nt,j=!1,F=0,V=null,ue=null,pe=0,He=0;A.length-He>=3;){switch(Xs.aac.parseType(A,He)){case"timed-metadata":if(A.length-He<10){j=!0;break}if((pe=Xs.aac.parseId3TagSize(A,He))>A.length){j=!0;break}null===ue&&(nt=A.subarray(He,He+pe),ue=Xs.aac.parseAacTimestamp(nt)),He+=pe;break;case"audio":if(A.length-He<7){j=!0;break}if((pe=Xs.aac.parseAdtsSize(A,He))>A.length){j=!0;break}null===V&&(nt=A.subarray(He,He+pe),V=Xs.aac.parseSampleRate(nt)),F++,He+=pe;break;default:He++}if(j)return null}if(null===V||null===ue)return null;var lt=Rp/V;return{audio:[{type:"audio",dts:ue,pts:ue},{type:"audio",dts:ue+1024*F*lt,pts:ue+1024*F*lt}]}}(A):function(A){var j={pid:null,table:null},F={};for(var V in function(A,j){for(var ue,F=0,V=Uu;V<A.byteLength;)if(71!==A[F]||71!==A[V])F++,V++;else{switch(ue=A.subarray(F,V),Xs.ts.parseType(ue,j.pid)){case"pat":j.pid=Xs.ts.parsePat(ue);break;case"pmt":var He=Xs.ts.parsePmt(ue);j.table=j.table||{},Object.keys(He).forEach(function(nt){j.table[nt]=He[nt]})}F+=Uu,V+=Uu}}(A,j),j.table)if(j.table.hasOwnProperty(V))switch(j.table[V]){case uu.H264_STREAM_TYPE:F.video=[],k0(A,j,F),0===F.video.length&&delete F.video;break;case uu.ADTS_STREAM_TYPE:F.audio=[],f0(A,j,F),0===F.audio.length&&delete F.audio}return F}(A),V&&(V.audio||V.video)?(function(A,j){if(A.audio&&A.audio.length){var F=j;(typeof F>"u"||isNaN(F))&&(F=A.audio[0].dts),A.audio.forEach(function(pe){pe.dts=lm(pe.dts,F),pe.pts=lm(pe.pts,F),pe.dtsTime=pe.dts/Rp,pe.ptsTime=pe.pts/Rp})}if(A.video&&A.video.length){var V=j;if((typeof V>"u"||isNaN(V))&&(V=A.video[0].dts),A.video.forEach(function(pe){pe.dts=lm(pe.dts,V),pe.pts=lm(pe.pts,V),pe.dtsTime=pe.dts/Rp,pe.ptsTime=pe.pts/Rp}),A.firstKeyFrame){var ue=A.firstKeyFrame;ue.dts=lm(ue.dts,V),ue.pts=lm(ue.pts,V),ue.dtsTime=ue.dts/Rp,ue.ptsTime=ue.pts/Rp}}}(V,j),V):null},U_=function(){function Ee(j,F){this.options=F||{},this.self=j,this.init()}var A=Ee.prototype;return A.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new w.Transmuxer(this.options),function(A,j){j.on("data",function(F){var V=F.initSegment;F.initSegment={data:V.buffer,byteOffset:V.byteOffset,byteLength:V.byteLength};var ue=F.data;F.data=ue.buffer,A.postMessage({action:"data",segment:F,byteOffset:ue.byteOffset,byteLength:ue.byteLength},[F.data])}),j.on("done",function(F){A.postMessage({action:"done"})}),j.on("gopInfo",function(F){A.postMessage({action:"gopInfo",gopInfo:F})}),j.on("videoSegmentTimingInfo",function(F){var V={start:{decode:Ri_videoTsToSeconds(F.start.dts),presentation:Ri_videoTsToSeconds(F.start.pts)},end:{decode:Ri_videoTsToSeconds(F.end.dts),presentation:Ri_videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:Ri_videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(V.prependedContentDuration=Ri_videoTsToSeconds(F.prependedContentDuration)),A.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:V})}),j.on("audioSegmentTimingInfo",function(F){var V={start:{decode:Ri_videoTsToSeconds(F.start.dts),presentation:Ri_videoTsToSeconds(F.start.pts)},end:{decode:Ri_videoTsToSeconds(F.end.dts),presentation:Ri_videoTsToSeconds(F.end.pts)},baseMediaDecodeTime:Ri_videoTsToSeconds(F.baseMediaDecodeTime)};F.prependedContentDuration&&(V.prependedContentDuration=Ri_videoTsToSeconds(F.prependedContentDuration)),A.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:V})}),j.on("id3Frame",function(F){A.postMessage({action:"id3Frame",id3Frame:F})}),j.on("caption",function(F){A.postMessage({action:"caption",caption:F})}),j.on("trackinfo",function(F){A.postMessage({action:"trackinfo",trackInfo:F})}),j.on("audioTimingInfo",function(F){A.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ri_videoTsToSeconds(F.start),end:Ri_videoTsToSeconds(F.end)}})}),j.on("videoTimingInfo",function(F){A.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ri_videoTsToSeconds(F.start),end:Ri_videoTsToSeconds(F.end)}})}),j.on("log",function(F){A.postMessage({action:"log",log:F})})}(this.self,this.transmuxer)},A.pushMp4Captions=function(F){this.captionParser||(this.captionParser=new t0,this.captionParser.init());var V=new Uint8Array(F.data,F.byteOffset,F.byteLength),ue=this.captionParser.parse(V,F.trackIds,F.timescales);this.self.postMessage({action:"mp4Captions",captions:ue&&ue.captions||[],logs:ue&&ue.logs||[],data:V.buffer},[V.buffer])},A.probeMp4StartTime=function(F){var ue=F.data,pe=um_startTime(F.timescales,ue);this.self.postMessage({action:"probeMp4StartTime",startTime:pe,data:ue},[ue.buffer])},A.probeMp4Tracks=function(F){var V=F.data,ue=um_tracks(V);this.self.postMessage({action:"probeMp4Tracks",tracks:ue,data:V},[V.buffer])},A.probeTs=function(F){var V=F.data,ue=F.baseStartTime,pe="number"!=typeof ue||isNaN(ue)?void 0:9e4*ue,He=N0_inspect(V,pe),nt=null;He&&((nt={hasVideo:He.video&&2===He.video.length||!1,hasAudio:He.audio&&2===He.audio.length||!1}).hasVideo&&(nt.videoStart=He.video[0].ptsTime),nt.hasAudio&&(nt.audioStart=He.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:nt,data:V},[V.buffer])},A.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},A.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},A.push=function(F){var V=new Uint8Array(F.data,F.byteOffset,F.byteLength);this.transmuxer.push(V)},A.reset=function(){this.transmuxer.reset()},A.setTimestampOffset=function(F){this.transmuxer.setBaseMediaDecodeTime(Math.round(Ri_secondsToVideoTs(F.timestampOffset||0)))},A.setAudioAppendStart=function(F){this.transmuxer.setAudioAppendStart(Math.ceil(Ri_secondsToVideoTs(F.appendStart)))},A.setRemux=function(F){this.transmuxer.setRemux(F.remux)},A.flush=function(F){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},A.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},A.alignGopsWith=function(F){this.transmuxer.alignGopsWith(F.gopsToAlignWith.slice())},Ee}();self.onmessage=function(Ee){"init"===Ee.data.action&&Ee.data.options?this.messageHandlers=new U_(self,Ee.data.options):(this.messageHandlers||(this.messageHandlers=new U_(self)),Ee.data&&Ee.data.action&&"init"!==Ee.data.action&&this.messageHandlers[Ee.data.action]&&this.messageHandlers[Ee.data.action](Ee.data))}})),rf=Om(s_),Lm=function(a){var o=a.transmuxer,u=a.bytes,t=a.audioAppendStart,s=a.gopsToAlignWith,h=a.remux,v=a.onData,S=a.onTrackInfo,x=a.onAudioTimingInfo,L=a.onVideoTimingInfo,ne=a.onVideoSegmentTimingInfo,Y=a.onAudioSegmentTimingInfo,Te=a.onId3,je=a.onCaptions,Ve=a.onDone,qe=a.onEndedTimeline,Wt=a.onTransmuxerLog,yn=a.isEndOfTimeline,Vn={buffer:[]},Xt=yn;if(o.onmessage=function(In){o.currentTransmux===a&&("data"===In.data.action&&function(a,o,u){var t=a.data.segment,s=t.type,h=t.initSegment,L=t.videoFrameDtsTime,ne=t.videoFramePtsTime;o.buffer.push({captions:t.captions,captionStreams:t.captionStreams,metadata:t.metadata});var Y=a.data.segment.boxes||{data:a.data.segment.data},Te={type:s,data:new Uint8Array(Y.data,Y.data.byteOffset,Y.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};typeof L<"u"&&(Te.videoFrameDtsTime=L),typeof ne<"u"&&(Te.videoFramePtsTime=ne),u(Te)}(In,Vn,v),"trackinfo"===In.data.action&&S(In.data.trackInfo),"gopInfo"===In.data.action&&function(a,o){o.gopInfo=a.data.gopInfo}(In,Vn),"audioTimingInfo"===In.data.action&&x(In.data.audioTimingInfo),"videoTimingInfo"===In.data.action&&L(In.data.videoTimingInfo),"videoSegmentTimingInfo"===In.data.action&&ne(In.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===In.data.action&&Y(In.data.audioSegmentTimingInfo),"id3Frame"===In.data.action&&Te([In.data.id3Frame],In.data.id3Frame.dispatchType),"caption"===In.data.action&&je(In.data.caption),"endedtimeline"===In.data.action&&(Xt=!1,qe()),"log"===In.data.action&&Wt(In.data.log),"transmuxed"===In.data.type&&(Xt||(o.onmessage=null,function(a){var o=a.transmuxedData,u=a.callback;o.buffer=[],u(o)}({transmuxedData:Vn,callback:Ve}),Fm(o))))},t&&o.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(s)&&o.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof h<"u"&&o.postMessage({action:"setRemux",remux:h}),u.byteLength){var Cn=u instanceof ArrayBuffer?u:u.buffer,un=u instanceof ArrayBuffer?0:u.byteOffset;o.postMessage({action:"push",data:Cn,byteOffset:un,byteLength:u.byteLength},[Cn])}yn&&o.postMessage({action:"endTimeline"}),o.postMessage({action:"flush"})},Fm=function(a){a.currentTransmux=null,a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"==typeof a.currentTransmux?a.currentTransmux():Lm(a.currentTransmux))},pi=function(a,o){a.postMessage({action:o}),Fm(a)},Qf_reset=function(a){!function(a,o){if(!o.currentTransmux)return o.currentTransmux=a,void pi(o,a);o.transmuxQueue.push(pi.bind(null,o,a))}("reset",a)},af=function(a){var o=a.transmuxer,u=a.endAction||a.action,t=a.callback,s=Ie({},a,{endAction:null,transmuxer:null,callback:null});if(o.addEventListener("message",function x(L){L.data.action===u&&(o.removeEventListener("message",x),L.data.data&&(L.data.data=new Uint8Array(L.data.data,a.byteOffset||0,a.byteLength||L.data.data.byteLength),a.data&&(a.data=L.data.data)),t(L.data))}),a.data){var v=a.data instanceof ArrayBuffer;s.byteOffset=v?0:a.data.byteOffset,s.byteLength=a.data.byteLength,o.postMessage(s,[v?a.data:a.data.buffer])}else o.postMessage(s)},mh=function(a){a.forEach(function(o){o.abort()})},uf=function(a,o){return o.timedout?{status:o.status,message:"HLS request timed-out at URL: "+o.uri,code:-101,xhr:o}:o.aborted?{status:o.status,message:"HLS request aborted at URL: "+o.uri,code:-102,xhr:o}:a?{status:o.status,message:"HLS request errored at URL: "+o.uri,code:2,xhr:o}:"arraybuffer"===o.responseType&&0===o.response.byteLength?{status:o.status,message:"Empty HLS response at URL: "+o.uri,code:2,xhr:o}:null},Xf=function(a,o,u){return function(t,s){var h=s.response,v=uf(t,s);if(v)return u(v,a);if(16!==h.byteLength)return u({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:2,xhr:s},a);for(var S=new DataView(h),x=new Uint32Array([S.getUint32(0),S.getUint32(4),S.getUint32(8),S.getUint32(12)]),L=0;L<o.length;L++)o[L].bytes=x;return u(null,a)}},Qc=function(a,o){var u=Je(a.map.bytes);if("mp4"!==u)return o({internal:!0,message:"Found unsupported "+(u||"unknown")+" container for initialization segment at URL: "+(a.map.resolvedUri||a.map.uri),code:2});af({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:function(h){var v=h.tracks;return a.map.bytes=h.data,v.forEach(function(x){a.map.tracks=a.map.tracks||{},!a.map.tracks[x.type]&&(a.map.tracks[x.type]=x,"number"==typeof x.id&&x.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[x.id]=x.timescale))}),o(null)}})},Um=function(a){var o=a.segment,u=a.bytes,t=a.trackInfoFn,s=a.timingInfoFn,h=a.videoSegmentTimingInfoFn,v=a.audioSegmentTimingInfoFn,S=a.id3Fn,x=a.captionsFn,L=a.isEndOfTimeline,ne=a.endedTimelineFn,Y=a.dataFn,Te=a.doneFn,je=a.onTransmuxerLog,Ve=o.map&&o.map.tracks||{},qe=Boolean(Ve.audio&&Ve.video),Wt=s.bind(null,o,"audio","start"),yn=s.bind(null,o,"audio","end"),Vn=s.bind(null,o,"video","start"),Xt=s.bind(null,o,"video","end");af({action:"probeTs",transmuxer:o.transmuxer,data:u,baseStartTime:o.baseStartTime,callback:function(un){o.bytes=u=un.data;var on=un.result;on&&(t(o,{hasAudio:on.hasAudio,hasVideo:on.hasVideo,isMuxed:qe}),t=null,on.hasAudio&&!qe&&Wt(on.audioStart),on.hasVideo&&Vn(on.videoStart),Wt=null,Vn=null),function(a){if(!a.transmuxer.currentTransmux)return a.transmuxer.currentTransmux=a,void Lm(a);a.transmuxer.transmuxQueue.push(a)}({bytes:u,transmuxer:o.transmuxer,audioAppendStart:o.audioAppendStart,gopsToAlignWith:o.gopsToAlignWith,remux:qe,onData:function(on){on.type="combined"===on.type?"video":on.type,Y(o,on)},onTrackInfo:function(on){t&&(qe&&(on.isMuxed=!0),t(o,on))},onAudioTimingInfo:function(on){Wt&&typeof on.start<"u"&&(Wt(on.start),Wt=null),yn&&typeof on.end<"u"&&yn(on.end)},onVideoTimingInfo:function(on){Vn&&typeof on.start<"u"&&(Vn(on.start),Vn=null),Xt&&typeof on.end<"u"&&Xt(on.end)},onVideoSegmentTimingInfo:function(on){h(on)},onAudioSegmentTimingInfo:function(on){v(on)},onId3:function(on,In){S(o,on,In)},onCaptions:function(on){x(o,[on])},isEndOfTimeline:L,onEndedTimeline:function(){ne()},onTransmuxerLog:je,onDone:function(on){!Te||(on.type="combined"===on.type?"video":on.type,Te(null,o,on))}})}})},iy=function(a){var o=a.segment,u=a.bytes,t=a.trackInfoFn,s=a.timingInfoFn,h=a.videoSegmentTimingInfoFn,v=a.audioSegmentTimingInfoFn,S=a.id3Fn,x=a.captionsFn,L=a.isEndOfTimeline,ne=a.endedTimelineFn,Y=a.dataFn,Te=a.doneFn,je=a.onTransmuxerLog,Ve=new Uint8Array(u);if(function(a){return Ji(a,["moof"]).length>0}(Ve)){o.isFmp4=!0;var qe=o.map.tracks,Wt={isFmp4:!0,hasVideo:!!qe.video,hasAudio:!!qe.audio};qe.audio&&qe.audio.codec&&"enca"!==qe.audio.codec&&(Wt.audioCodec=qe.audio.codec),qe.video&&qe.video.codec&&"encv"!==qe.video.codec&&(Wt.videoCodec=qe.video.codec),qe.video&&qe.audio&&(Wt.isMuxed=!0),t(o,Wt);var yn=function(Xt){Y(o,{data:Ve,type:Wt.hasAudio&&!Wt.isMuxed?"audio":"video"}),Xt&&Xt.length&&x(o,Xt),Te(null,o,{})};af({action:"probeMp4StartTime",timescales:o.map.timescales,data:Ve,transmuxer:o.transmuxer,callback:function(Xt){var tn=Xt.data,Cn=Xt.startTime;u=tn.buffer,o.bytes=Ve=tn,Wt.hasAudio&&!Wt.isMuxed&&s(o,"audio","start",Cn),Wt.hasVideo&&s(o,"video","start",Cn),qe.video&&tn.byteLength&&o.transmuxer?af({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:o.transmuxer,data:Ve,timescales:o.map.timescales,trackIds:[qe.video.id],callback:function(on){u=on.data.buffer,o.bytes=Ve=on.data,on.logs.forEach(function(In){je(It.mergeOptions(In,{stream:"mp4CaptionParser"}))}),yn(on.captions)}}):yn()}})}else{if(o.transmuxer)return typeof o.container>"u"&&(o.container=Je(Ve)),"ts"!==o.container&&"aac"!==o.container?(t(o,{hasAudio:!1,hasVideo:!1}),void Te(null,o,{})):void Um({segment:o,bytes:u,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:L,endedTimelineFn:ne,dataFn:Y,doneFn:Te,onTransmuxerLog:je});Te(null,o,{})}},a_=function(a,o){var S,u=a.id,t=a.key,s=a.encryptedBytes,h=a.decryptionWorker;h.addEventListener("message",function x(L){if(L.data.source===u){h.removeEventListener("message",x);var ne=L.data.decrypted;o(new Uint8Array(ne.bytes,ne.byteOffset,ne.byteLength))}}),S=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),h.postMessage(Yc({source:u,encrypted:s,key:S,iv:t.iv}),[s.buffer,S.buffer])},l_=function(a){var o=a.xhr,u=a.xhrOptions,s=a.segment,h=a.abortFn,v=a.progressFn,S=a.trackInfoFn,x=a.timingInfoFn,L=a.videoSegmentTimingInfoFn,ne=a.audioSegmentTimingInfoFn,Y=a.id3Fn,Te=a.captionsFn,je=a.isEndOfTimeline,Ve=a.endedTimelineFn,qe=a.dataFn,Vn=[],Xt=function(a){var o=a.activeXhrs,u=a.decryptionWorker,t=a.trackInfoFn,s=a.timingInfoFn,h=a.videoSegmentTimingInfoFn,v=a.audioSegmentTimingInfoFn,S=a.id3Fn,x=a.captionsFn,L=a.isEndOfTimeline,ne=a.endedTimelineFn,Y=a.dataFn,Te=a.doneFn,je=a.onTransmuxerLog,Ve=0,qe=!1;return function(Wt,yn){if(!qe){if(Wt)return qe=!0,mh(o),Te(Wt,yn);if((Ve+=1)===o.length){var Vn=function(){if(yn.encryptedBytes)return function(a){var u=a.segment,t=a.trackInfoFn,s=a.timingInfoFn,h=a.videoSegmentTimingInfoFn,v=a.audioSegmentTimingInfoFn,S=a.id3Fn,x=a.captionsFn,L=a.isEndOfTimeline,ne=a.endedTimelineFn,Y=a.dataFn,Te=a.doneFn,je=a.onTransmuxerLog;a_({id:u.requestId,key:u.key,encryptedBytes:u.encryptedBytes,decryptionWorker:a.decryptionWorker},function(Ve){u.bytes=Ve,iy({segment:u,bytes:u.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:L,endedTimelineFn:ne,dataFn:Y,doneFn:Te,onTransmuxerLog:je})})}({decryptionWorker:u,segment:yn,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:L,endedTimelineFn:ne,dataFn:Y,doneFn:Te,onTransmuxerLog:je});iy({segment:yn,bytes:yn.bytes,trackInfoFn:t,timingInfoFn:s,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:x,isEndOfTimeline:L,endedTimelineFn:ne,dataFn:Y,doneFn:Te,onTransmuxerLog:je})};if(yn.endOfAllRequests=Date.now(),yn.map&&yn.map.encryptedBytes&&!yn.map.bytes)return a_({decryptionWorker:u,id:yn.requestId+"-init",encryptedBytes:yn.map.encryptedBytes,key:yn.map.key},function(Xt){yn.map.bytes=Xt,Qc(yn,function(tn){if(tn)return mh(o),Te(tn,yn);Vn()})});Vn()}}}}({activeXhrs:Vn,decryptionWorker:a.decryptionWorker,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:L,audioSegmentTimingInfoFn:ne,id3Fn:Y,captionsFn:Te,isEndOfTimeline:je,endedTimelineFn:Ve,dataFn:qe,doneFn:a.doneFn,onTransmuxerLog:a.onTransmuxerLog});if(s.key&&!s.key.bytes){var tn=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&tn.push(s.map.key);var on=o(It.mergeOptions(u,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),Xf(s,tn,Xt));Vn.push(on)}if(s.map&&!s.map.bytes){if(s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri)){var Yn=o(It.mergeOptions(u,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),Xf(s,[s.map.key],Xt));Vn.push(Yn)}var Hr=It.mergeOptions(u,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:ig(s.map)}),$s=function(a){var o=a.segment,u=a.finishProcessingFn;return function(t,s){var h=uf(t,s);if(h)return u(h,o);var v=new Uint8Array(s.response);if(o.map.key)return o.map.encryptedBytes=v,u(null,o);o.map.bytes=v,Qc(o,function(S){if(S)return S.xhr=s,S.status=s.status,u(S,o);u(null,o)})}}({segment:s,finishProcessingFn:Xt}),Cs=o(Hr,$s);Vn.push(Cs)}var jo=It.mergeOptions(u,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:ig(s)}),Ys=o(jo,function(a){var o=a.segment,u=a.finishProcessingFn,t=a.responseType;return function(s,h){var v=uf(s,h);if(v)return u(v,o);var S="arraybuffer"!==t&&h.responseText?function(a){for(var o=new Uint8Array(new ArrayBuffer(a.length)),u=0;u<a.length;u++)o[u]=a.charCodeAt(u);return o.buffer}(h.responseText.substring(o.lastReachedChar||0)):h.response;return o.stats=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}}(h),o.key?o.encryptedBytes=new Uint8Array(S):o.bytes=new Uint8Array(S),u(null,o)}}({segment:s,finishProcessingFn:Xt,responseType:jo.responseType}));Ys.addEventListener("progress",function(a){var o=a.segment,u=a.progressFn;return function(t){if(!t.target.aborted)return o.stats=It.mergeOptions(o.stats,function(a){var o=a.target,t={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-o.requestTime||0};return t.bytesReceived=a.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t}(t)),!o.stats.firstBytesReceivedAt&&o.stats.bytesReceived&&(o.stats.firstBytesReceivedAt=Date.now()),u(t,o)}}({segment:s,progressFn:v,trackInfoFn:S,timingInfoFn:x,videoSegmentTimingInfoFn:L,audioSegmentTimingInfoFn:ne,id3Fn:Y,captionsFn:Te,isEndOfTimeline:je,endedTimelineFn:Ve,dataFn:qe})),Vn.push(Ys);var Ma={};return Vn.forEach(function(Fs){Fs.addEventListener("loadend",function(a){var o=a.loadendState,u=a.abortFn;return function(t){t.target.aborted&&u&&!o.calledAbortFn&&(u(),o.calledAbortFn=!0)}}({loadendState:Ma,abortFn:h}))}),function(){return mh(Vn)}},c_=yl("CodecUtils"),sy=function(a,o){var u=o.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&u.AUDIO&&a.mediaGroups.AUDIO[u.AUDIO]},Xc=function(a){var o={};return a.forEach(function(u){var t=u.mediaType,s=u.type,h=u.details;o[t]=o[t]||[],o[t].push(wr(""+s+h))}),Object.keys(o).forEach(function(u){if(o[u].length>1)return c_("multiple "+u+" codecs found as attributes: "+o[u].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(o[u]=null);o[u]=o[u][0]}),o},ay=function(a){var o=0;return a.audio&&o++,a.video&&o++,o},cf=function(a,o){var u=o.attributes||{},t=Xc(function(a){var o=a.attributes||{};if(o.CODECS)return cr(o.CODECS)}(o)||[]);if(sy(a,o)&&!t.audio&&!function(a,o){if(!sy(a,o))return!0;var t=a.mediaGroups.AUDIO[(o.attributes||{}).AUDIO];for(var s in t)if(!t[s].uri&&!t[s].playlists)return!0;return!1}(a,o)){var s=Xc(function(a,o){if(!a.mediaGroups.AUDIO||!o)return null;var u=a.mediaGroups.AUDIO[o];if(!u)return null;for(var t in u){var s=u[t];if(s.default&&s.playlists)return cr(s.playlists[0].attributes.CODECS)}return null}(a,u.AUDIO)||[]);s.audio&&(t.audio=s.audio)}return t},Ed=yl("PlaylistSelector"),yg=function(a){if(a&&a.playlist){var o=a.playlist;return JSON.stringify({id:o.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:o.attributes&&o.attributes.CODECS||""})}},Jc=function(a,o){if(!a)return"";var u=se().getComputedStyle(a);return u?u[o]:""},Sd=function(a,o){var u=a.slice();a.sort(function(t,s){var h=o(t,s);return 0===h?u.indexOf(t)-u.indexOf(s):h})},df=function(a,o){var u,t;return a.attributes.BANDWIDTH&&(u=a.attributes.BANDWIDTH),u=u||se().Number.MAX_VALUE,o.attributes.BANDWIDTH&&(t=o.attributes.BANDWIDTH),u-(t||se().Number.MAX_VALUE)},_g=function(a,o,u,t,s,h){if(a){var v={bandwidth:o,width:u,height:t,limitRenditionByPlayerDimensions:s},S=a.playlists;Su.isAudioOnly(a)&&(S=h.getAudioTrackPlaylists_(),v.audioOnly=!0);var x=S.map(function(mn){var Yn=mn.attributes&&mn.attributes.RESOLUTION&&mn.attributes.RESOLUTION.width,Hr=mn.attributes&&mn.attributes.RESOLUTION&&mn.attributes.RESOLUTION.height;return{bandwidth:mn.attributes&&mn.attributes.BANDWIDTH||se().Number.MAX_VALUE,width:Yn,height:Hr,playlist:mn}});Sd(x,function(mn,kr){return mn.bandwidth-kr.bandwidth});var L=(x=x.filter(function(mn){return!Su.isIncompatible(mn.playlist)})).filter(function(mn){return Su.isEnabled(mn.playlist)});L.length||(L=x.filter(function(mn){return!Su.isDisabled(mn.playlist)}));var ne=L.filter(function(mn){return mn.bandwidth*_a.BANDWIDTH_VARIANCE<o}),Y=ne[ne.length-1],Te=ne.filter(function(mn){return mn.bandwidth===Y.bandwidth})[0];if(!1===s){var je=Te||L[0]||x[0];if(je&&je.playlist){var Ve="sortedPlaylistReps";return Te&&(Ve="bandwidthBestRep"),L[0]&&(Ve="enabledPlaylistReps"),Ed("choosing "+yg(je)+" using "+Ve+" with options",v),je.playlist}return Ed("could not choose a playlist with options",v),null}var qe=ne.filter(function(mn){return mn.width&&mn.height});Sd(qe,function(mn,kr){return mn.width-kr.width});var Wt=qe.filter(function(mn){return mn.width===u&&mn.height===t});Y=Wt[Wt.length-1];var Vn,Xt,tn,Cn,yn=Wt.filter(function(mn){return mn.bandwidth===Y.bandwidth})[0];if(yn||(Xt=(Vn=qe.filter(function(mn){return mn.width>u||mn.height>t})).filter(function(mn){return mn.width===Vn[0].width&&mn.height===Vn[0].height}),Y=Xt[Xt.length-1],tn=Xt.filter(function(mn){return mn.bandwidth===Y.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var un=qe.map(function(mn){return mn.pixelDiff=Math.abs(mn.width-u)+Math.abs(mn.height-t),mn});Sd(un,function(mn,kr){return mn.pixelDiff===kr.pixelDiff?kr.bandwidth-mn.bandwidth:mn.pixelDiff-kr.pixelDiff}),Cn=un[0]}var on=Cn||tn||yn||Te||L[0]||x[0];if(on&&on.playlist){var In="sortedPlaylistReps";return Cn?In="leastPixelDiffRep":tn?In="resolutionPlusOneRep":yn?In="resolutionBestRep":Te?In="bandwidthBestRep":L[0]&&(In="enabledPlaylistReps"),Ed("choosing "+yg(on)+" using "+In+" with options",v),on.playlist}return Ed("could not choose a playlist with options",v),null}},bg=function(){var a=this.useDevicePixelRatio&&se().devicePixelRatio||1;return _g(this.playlists.master,this.systemBandwidth,parseInt(Jc(this.tech_.el(),"width"),10)*a,parseInt(Jc(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Oc=function(a,o,u){var t,s;if(u&&u.cues)for(t=u.cues.length;t--;)(s=u.cues[t]).startTime>=a&&s.endTime<=o&&u.removeCue(s)},Vm=function(a){return"number"==typeof a&&isFinite(a)},tp=1/60,Id=function(a){var o=a.startOfSegment,u=a.duration,t=a.segment,s=a.part,h=a.playlist,v=h.mediaSequence,S=h.id,x=h.segments,ne=a.mediaIndex,Y=a.partIndex,Te=a.timeline,je=(void 0===x?[]:x).length-1,Ve="mediaIndex/partIndex increment";a.getMediaInfoForTime?Ve="getMediaInfoForTime ("+a.getMediaInfoForTime+")":a.isSyncRequest&&(Ve="getSyncSegmentCandidate (isSyncRequest)"),a.independent&&(Ve+=" with independent "+a.independent);var qe="number"==typeof Y,Wt=a.segment.uri?"segment":"pre-segment",yn=qe?pm({preloadSegment:t})-1:0;return Wt+" ["+(v+ne)+"/"+(v+je)+"]"+(qe?" part ["+Y+"/"+yn+"]":"")+" segment start/end ["+t.start+" => "+t.end+"]"+(qe?" part start/end ["+s.start+" => "+s.end+"]":"")+" startOfSegment ["+o+"] duration ["+u+"] timeline ["+Te+"] selected by ["+Ve+"] playlist ["+S+"]"},gf=function(a){return a+"TimingInfo"},$m=function(a){var o=a.timelineChangeController,t=a.segmentTimeline,s=a.loaderType,h=a.audioDisabled;if(a.currentTimeline===t)return!1;if("audio"===s){var v=o.lastTimelineChange({type:"main"});return!v||v.to!==t}if("main"===s&&h){var S=o.pendingTimelineChange({type:"audio"});return!(S&&S.to===t)}return!1},Ig=function(a){var o=a.segmentDuration,u=a.maxDuration;return!!o&&Math.round(o)>u+Zs},np=function(g){function a(u,t){var s;if(s=g.call(this)||this,!u)throw new TypeError("Initialization settings are required");if("function"!=typeof u.currentTime)throw new TypeError("No currentTime getter specified");if(!u.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=u.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=u.hasPlayed,s.currentTime_=u.currentTime,s.seekable_=u.seekable,s.seeking_=u.seeking,s.duration_=u.duration,s.mediaSource_=u.mediaSource,s.vhs_=u.vhs,s.loaderType_=u.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=u.segmentMetadataTrack,s.goalBufferLength_=u.goalBufferLength,s.sourceType_=u.sourceType,s.sourceUpdater_=u.sourceUpdater,s.inbandTextTracks_=u.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=u.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=u.parse708captions,s.useDtsForTimestampOffset_=u.useDtsForTimestampOffset,s.captionServices_=u.captionServices,s.experimentalExactManifestTimings=u.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=It.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=u.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=u.decrypter,s.syncController_=u.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=yl("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(ut(s),"state",{get:function(){return this.state_},set:function(v){v!==this.state_&&(this.logger_(this.state_+" -> "+v),this.state_=v,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"main"===s.loaderType_&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),"audio"===s.loaderType_&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}$e(a,g);var o=a.prototype;return o.createTransmuxer_=function(){return function(a){var o=new rf;o.currentTransmux=null,o.transmuxQueue=[];var u=o.terminate;return o.terminate=function(){return o.currentTransmux=null,o.transmuxQueue.length=0,u.call(o)},o.postMessage({action:"init",options:a}),o}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},o.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},o.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&se().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},o.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},o.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},o.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,se().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},o.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},o.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},o.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Qf_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},o.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return It.createTimeRanges();if("main"===this.loaderType_){var h=t.hasVideo;if(h&&t.hasAudio&&!this.audioDisabled_&&!t.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},o.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=Td(t),v=this.initSegments_[h];return s&&!v&&t.bytes&&(this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),v||t},o.segmentKey=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=Qv(t),v=this.keyCache_[h];this.cacheEncryptionKeys_&&s&&!v&&t.bytes&&(this.keyCache_[h]=v={resolvedUri:t.resolvedUri,bytes:t.bytes});var S={resolvedUri:(v||t).resolvedUri};return v&&(S.bytes=v.bytes),S},o.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},o.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},o.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},o.playlist=function(t,s){if(void 0===s&&(s={}),t){var h=this.playlist_,v=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=s,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var S=null;if(h&&(h.id?S=h.id:h.uri&&(S=h.uri)),this.logger_("playlist update ["+S+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==t.uri)return null!==this.mediaIndex&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var x=t.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+x+"]"),null!==this.mediaIndex)if(this.mediaIndex-=x,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var L=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!L.parts||!L.parts.length||!L.parts[this.partIndex])){var ne=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=ne}}v&&(v.mediaIndex-=x,v.mediaIndex<0?(v.mediaIndex=null,v.partIndex=null):(v.mediaIndex>=0&&(v.segment=t.segments[v.mediaIndex]),v.partIndex>=0&&v.segment.parts&&(v.part=v.segment.parts[v.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,t)}},o.pause=function(){this.checkBufferTimeout_&&(se().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},o.paused=function(){return null===this.checkBufferTimeout_},o.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},o.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},o.resyncLoader=function(){this.transmuxer_&&Qf_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},o.remove=function(t,s,h,v){if(void 0===h&&(h=function(){}),void 0===v&&(v=!1),s===1/0&&(s=this.duration_()),s<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var S=1,x=function(){0==--S&&h()};for(var L in(v||!this.audioDisabled_)&&(S++,this.sourceUpdater_.removeAudio(t,s,x)),(v||"main"===this.loaderType_)&&(this.gopBuffer_=function(a,o,u,t){for(var s=Math.ceil((o-t)*Nt.ONE_SECOND_IN_TS),h=Math.ceil((u-t)*Nt.ONE_SECOND_IN_TS),v=a.slice(),S=a.length;S--&&!(a[S].pts<=h););if(-1===S)return v;for(var x=S+1;x--&&!(a[x].pts<=s););return x=Math.max(x,0),v.splice(x,S-x+1),v}(this.gopBuffer_,t,s,this.timeMapping_),S++,this.sourceUpdater_.removeVideo(t,s,x)),this.inbandTextTracks_)Oc(t,s,this.inbandTextTracks_[L]);Oc(t,s,this.segmentMetadataTrack_),x()}else this.logger_("skipping remove because no source updater or starting media info")},o.monitorBuffer_=function(){this.checkBufferTimeout_&&se().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=se().setTimeout(this.monitorBufferTick_.bind(this),1)},o.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&se().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=se().setTimeout(this.monitorBufferTick_.bind(this),500)},o.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();!t||("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},o.isEndOfStream_=function(t,s,h){if(void 0===t&&(t=this.mediaIndex),void 0===s&&(s=this.playlist_),void 0===h&&(h=this.partIndex),!s||!this.mediaSource_)return!1;var v="number"==typeof t&&s.segments[t];return s.endList&&"open"===this.mediaSource_.readyState&&t+1===s.segments.length&&(!v||!v.parts||h+1===v.parts.length)},o.chooseNextRequest_=function(){var t=this.buffered_(),s=Fo(t)||0,h=Xl(t,this.currentTime_()),v=!this.hasPlayed_()&&h>=1,S=h>=this.goalBufferLength_(),x=this.playlist_.segments;if(!x.length||v||S)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var L={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(L.isSyncRequest)L.mediaIndex=function(a,o,u){o=o||[];for(var t=[],s=0,h=0;h<o.length;h++){var v=o[h];if(a===v.timeline&&(t.push(h),(s+=v.duration)>u))return h}return 0===t.length?0:t[t.length-1]}(this.currentTimeline_,x,s);else if(null!==this.mediaIndex){var ne=x[this.mediaIndex],Y="number"==typeof this.partIndex?this.partIndex:-1;L.startOfSegment=ne.end?ne.end:s,ne.parts&&ne.parts[Y+1]?(L.mediaIndex=this.mediaIndex,L.partIndex=Y+1):L.mediaIndex=this.mediaIndex+1}else{var Te=Su.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),je=Te.segmentIndex,Ve=Te.startTime,qe=Te.partIndex;L.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),L.mediaIndex=je,L.startOfSegment=Ve,L.partIndex=qe}var Wt=x[L.mediaIndex],yn=Wt&&"number"==typeof L.partIndex&&Wt.parts&&Wt.parts[L.partIndex];if(!Wt||"number"==typeof L.partIndex&&!yn)return null;if("number"!=typeof L.partIndex&&Wt.parts&&(L.partIndex=0,yn=Wt.parts[0]),!h&&yn&&!yn.independent)if(0===L.partIndex){var Vn=x[L.mediaIndex-1],Xt=Vn.parts&&Vn.parts.length&&Vn.parts[Vn.parts.length-1];Xt&&Xt.independent&&(L.mediaIndex-=1,L.partIndex=Vn.parts.length-1,L.independent="previous segment")}else Wt.parts[L.partIndex-1].independent&&(L.partIndex-=1,L.independent="previous part");return L.mediaIndex>=x.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(L)},o.generateSegmentInfo_=function(t){var s=t.independent,h=t.playlist,v=t.mediaIndex,S=t.startOfSegment,x=t.isSyncRequest,L=t.partIndex,ne=t.forceTimestampOffset,Y=t.getMediaInfoForTime,Te=h.segments[v],je="number"==typeof L&&Te.parts[L],Ve={requestId:"segment-loader-"+Math.random(),uri:je&&je.resolvedUri||Te.resolvedUri,mediaIndex:v,partIndex:je?L:null,isSyncRequest:x,startOfSegment:S,playlist:h,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:Te.timeline,duration:je&&je.duration||Te.duration,segment:Te,part:je,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Y,independent:s},qe=typeof ne<"u"?ne:this.isPendingTimestampOffset_;Ve.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:Te.timeline,currentTimeline:this.currentTimeline_,startOfSegment:S,buffered:this.buffered_(),overrideCheck:qe});var Wt=Fo(this.sourceUpdater_.audioBuffered());return"number"==typeof Wt&&(Ve.audioAppendStart=Wt-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(Ve.gopsToAlignWith=function(a,o,u){if(typeof o>"u"||null===o||!a.length)return[];var s,t=Math.ceil((o-u+3)*Nt.ONE_SECOND_IN_TS);for(s=0;s<a.length&&!(a[s].pts>t);s++);return a.slice(s)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),Ve},o.timestampOffsetForSegment_=function(t){return function(a){var o=a.segmentTimeline,u=a.currentTimeline,t=a.startOfSegment,s=a.buffered;return a.overrideCheck||o!==u?o<u?t:s.length?s.end(s.length-1):t:null}(t)},o.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),h=t.bandwidth,v=this.pendingSegment_.duration,S=Su.estimateSegmentRequestTime(v,h,this.playlist_,t.bytesReceived),x=function(a,o,u){return void 0===u&&(u=1),((a.length?a.end(a.length-1):0)-o)/u}(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(S<=x)){var L=function(a){var u=a.currentTime,t=a.bandwidth,s=a.duration,h=a.segmentDuration,v=a.timeUntilRebuffer,S=a.currentTimeline,x=a.syncController,L=a.master.playlists.filter(function(Ve){return!Su.isIncompatible(Ve)}),ne=L.filter(Su.isEnabled);ne.length||(ne=L.filter(function(Ve){return!Su.isDisabled(Ve)}));var Te=ne.filter(Su.hasAttribute.bind(null,"BANDWIDTH")).map(function(Ve){var Wt=x.getSyncPoint(Ve,s,S,u)?1:2;return{playlist:Ve,rebufferingImpact:Su.estimateSegmentRequestTime(h,t,Ve)*Wt-v}}),je=Te.filter(function(Ve){return Ve.rebufferingImpact<=0});return Sd(je,function(Ve,qe){return df(qe.playlist,Ve.playlist)}),je.length?je[0]:(Sd(Te,function(Ve,qe){return Ve.rebufferingImpact-qe.rebufferingImpact}),Te[0]||null)}({master:this.vhs_.playlists.master,currentTime:s,bandwidth:h,duration:this.duration_(),segmentDuration:v,timeUntilRebuffer:x,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(L){var Te=.5;x<=Zs&&(Te=1),L.playlist&&L.playlist.uri!==this.playlist_.uri&&!(S-x-L.rebufferingImpact<Te)&&(this.bandwidth=L.playlist.attributes.BANDWIDTH*_a.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},o.handleAbort_=function(t){this.logger_("Aborting "+Id(t)),this.mediaRequestsAborted+=1},o.handleProgress_=function(t,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},o.handleTrackInfo_=function(t,s){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(s)||(function(a,o){if(!a&&!o||!a&&o||a&&!o)return!1;if(a===o)return!0;var u=Object.keys(a).sort(),t=Object.keys(o).sort();if(u.length!==t.length)return!1;for(var s=0;s<u.length;s++){var h=u[s];if(h!==t[s]||a[h]!==o[h])return!1}return!0}(this.currentMediaInfo_,s=s||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},o.handleTimingInfo_=function(t,s,h,v){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var S=this.pendingSegment_,x=gf(s);S[x]=S[x]||{},S[x][h]=v,this.logger_("timinginfo: "+s+" - "+h+" - "+v),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},o.handleCaptions_=function(t,s){var h=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(0===s.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,s));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),x={};s.forEach(function(L){x[L.stream]=x[L.stream]||{startTime:1/0,captions:[],endTime:0};var ne=x[L.stream];ne.startTime=Math.min(ne.startTime,L.startTime+S),ne.endTime=Math.max(ne.endTime,L.endTime+S),ne.captions.push(L)}),Object.keys(x).forEach(function(L){var ne=x[L],Y=ne.startTime,Te=ne.endTime,je=ne.captions,Ve=h.inbandTextTracks_;h.logger_("adding cues from "+Y+" -> "+Te+" for "+L),function(a,o,u){if(!a[u]){o.trigger({type:"usage",name:"vhs-608"}),o.trigger({type:"usage",name:"hls-608"});var t=u;/^cc708_/.test(u)&&(t="SERVICE"+u.split("_")[1]);var s=o.textTracks().getTrackById(t);if(s)a[u]=s;else{var v=u,S=u,x=!1,L=(o.options_.vhs&&o.options_.vhs.captionServices||{})[t];L&&(v=L.label,S=L.language,x=L.default),a[u]=o.addRemoteTextTrack({kind:"captions",id:t,default:x,label:v,language:S},!1).track}}}(Ve,h.vhs_.tech_,L),Oc(Y,Te,Ve[L]),function(a){var o=a.inbandTextTracks,u=a.captionArray,t=a.timestampOffset;if(u){var s=se().WebKitDataCue||se().VTTCue;u.forEach(function(h){o[h.stream].addCue(new s(h.startTime+t,h.endTime+t,h.text))})}}({captionArray:je,inbandTextTracks:Ve,timestampOffset:S})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},o.handleId3_=function(t,s,h){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,s,h));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(a,o,u){a.metadataTrack_||(a.metadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=o)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(a){var o=a.inbandTextTracks,u=a.metadataArray,t=a.timestampOffset,s=a.videoDuration;if(u){var h=se().WebKitDataCue||se().VTTCue,v=o.metadataTrack_;if(v&&(u.forEach(function(Te){var je=Te.cueTime+t;"number"!=typeof je||se().isNaN(je)||je<0||!(je<1/0)||Te.frames.forEach(function(Ve){var qe=new h(je,je,Ve.value||Ve.url||Ve.data||"");qe.frame=Ve,qe.value=Ve,function(a){Object.defineProperties(a.frame,{id:{get:function(){return It.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return It.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return It.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})}(qe),v.addCue(qe)})}),v.cues&&v.cues.length)){for(var S=v.cues,x=[],L=0;L<S.length;L++)S[L]&&x.push(S[L]);var ne=x.reduce(function(Te,je){var Ve=Te[je.startTime]||[];return Ve.push(je),Te[je.startTime]=Ve,Te},{}),Y=Object.keys(ne).sort(function(Te,je){return Number(Te)-Number(je)});Y.forEach(function(Te,je){var Ve=ne[Te],qe=Number(Y[je+1])||s;Ve.forEach(function(Wt){Wt.endTime=qe})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:S,videoDuration:this.duration_()})}},o.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},o.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(s){return s()})},o.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(s){return s()})},o.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&$m({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},o.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},o.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},o.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,s=this.getCurrentMediaInfo_();return!(!t||!s||s.hasVideo&&!t.videoTimingInfo||s.hasAudio&&!this.audioDisabled_&&!s.isMuxed&&!t.audioTimingInfo||$m({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},o.handleData_=function(t,s){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,s));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.part||h.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),h.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),h.isFmp4=t.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[gf(s.type)].start;else{var x,v=this.getCurrentMediaInfo_(),S="main"===this.loaderType_&&v&&v.hasVideo;S&&(x=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:x,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,s.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var L=this.chooseNextRequest_();if(L.mediaIndex!==h.mediaIndex||L.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,s)}}},o.updateAppendInitSegmentStatus=function(t,s){"main"===this.loaderType_&&"number"==typeof t.timestampOffset&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==t.playlist&&(this.appendInitSegment_[s]=!0)},o.getInitSegmentAndUpdateState_=function(t){var s=t.type,h=t.initSegment,v=t.map,S=t.playlist;if(v){var x=Td(v);if(this.activeInitSegmentId_===x)return null;h=this.initSegmentForMap(v,!0).bytes,this.activeInitSegmentId_=x}return h&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=S,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,h):null},o.handleQuotaExceededError_=function(t,s){var h=this,v=t.segmentInfo,S=t.type,x=t.bytes,L=this.sourceUpdater_.audioBuffered(),ne=this.sourceUpdater_.videoBuffered();L.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Xu(L).join(", ")),ne.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Xu(ne).join(", "));var Y=L.length?L.start(0):0,Te=L.length?L.end(L.length-1):0,je=ne.length?ne.start(0):0,Ve=ne.length?ne.end(ne.length-1):0;if(Te-Y<=1&&Ve-je<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+x.byteLength+", audio buffer: "+Xu(L).join(", ")+", video buffer: "+Xu(ne).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:v,type:S,bytes:x}));var Wt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Wt),this.remove(0,Wt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=se().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},o.handleAppendError_=function(t,s){var h=t.segmentInfo,v=t.type,S=t.bytes;if(s){if(22===s.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:v,bytes:S});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(v+" append of "+S.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},o.appendToSourceBuffer_=function(t){var s=t.segmentInfo,h=t.type,v=t.initSegment,S=t.data,x=t.bytes;if(!x){var L=[S],ne=S.byteLength;v&&(L.unshift(v),ne+=v.byteLength),x=function(a){var u,o=0;return a.bytes&&(u=new Uint8Array(a.bytes),a.segments.forEach(function(t){u.set(t,o),o+=t.byteLength})),u}({bytes:ne,segments:L})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:h,bytes:x},this.handleAppendError_.bind(this,{segmentInfo:s,type:h,bytes:x}))},o.handleSegmentTimingInfo_=function(t,s,h){if(this.pendingSegment_&&s===this.pendingSegment_.requestId){var v=this.pendingSegment_.segment,S=t+"TimingInfo";v[S]||(v[S]={}),v[S].transmuxerPrependedSeconds=h.prependedContentDuration||0,v[S].transmuxedPresentationStart=h.start.presentation,v[S].transmuxedDecodeStart=h.start.decode,v[S].transmuxedPresentationEnd=h.end.presentation,v[S].transmuxedDecodeEnd=h.end.decode,v[S].baseMediaDecodeTime=h.baseMediaDecodeTime}},o.appendData_=function(t,s){var h=s.type,v=s.data;if(v&&v.byteLength&&("audio"!==h||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:h,initSegment:s.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:h,initSegment:S,data:v})}},o.loadSegment_=function(t){var s=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var h=Ie({},t,{forceTimestampOffset:!0});Ie(t,s.generateSegmentInfo_(h)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(t)})},o.updateTransmuxerAndRequestSegment_=function(t){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var h=this.createSimplifiedSegmentObj_(t),L=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)||null!==this.mediaIndex&&t.timeline!==this.currentTimeline_&&t.timeline>0;this.logger_("Requesting "+Id(t)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=l_({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:L,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(Y){var Te=Y.message,je=Y.level,Ve=Y.stream;s.logger_(Id(t)+" logged from transmuxer stream "+Ve+" as a "+je+": "+Te)}})},o.trimBackBuffer_=function(t){var s=function(a,o,u){var t=o-_a.BACK_BUFFER_LENGTH;return a.length&&(t=Math.max(t,a.start(0))),Math.min(o-u,t)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},o.createSimplifiedSegmentObj_=function(t){var s=t.segment,h=t.part,v={resolvedUri:h?h.resolvedUri:s.resolvedUri,byterange:h?h.byterange:s.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},S=t.playlist.segments[t.mediaIndex-1];if(S&&S.timeline===s.timeline&&(S.videoTimingInfo?v.baseStartTime=S.videoTimingInfo.transmuxedDecodeEnd:S.audioTimingInfo&&(v.baseStartTime=S.audioTimingInfo.transmuxedDecodeEnd)),s.key){var x=s.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);v.key=this.segmentKey(s.key),v.key.iv=x}return s.map&&(v.map=this.initSegmentForMap(s.map)),v},o.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},o.saveBandwidthRelatedStats_=function(t,s){this.pendingSegment_.byteLength=s.bytesReceived,t<tp?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+tp):(this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime)},o.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},o.segmentRequestFinished_=function(t,s,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,s,h));else if(this.saveTransferStats_(s.stats),this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",-102===t.code)return;return this.pause(),-101===t.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var v=this.pendingSegment_;this.saveBandwidthRelatedStats_(v.duration,s.stats),v.endOfAllRequests=s.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(a,o,u){if(!o.length)return a;if(u)return o.slice();for(var t=o[0].pts,s=0;s<a.length&&!(a[s].pts>=t);s++);return a.slice(0,s).concat(o)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(v)}},o.setTimeMapping_=function(t){var s=this.syncController_.mappingForTimeline(t);null!==s&&(this.timeMapping_=s)},o.updateMediaSecondsLoaded_=function(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration},o.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},o.trueSegmentStart_=function(t){var s=t.currentStart,v=t.mediaIndex,S=t.firstVideoFrameTimeForData;if(typeof s<"u")return s;if(!t.useVideoTimingInfo)return t.audioTimingInfo.start;var Te=t.playlist.segments[v-1];return 0===v||!Te||typeof Te.start>"u"||Te.end!==S+t.currentVideoTimestampOffset?S:t.videoTimingInfo.start},o.waitForAppendsToComplete_=function(t){var s=this.getCurrentMediaInfo_(t);if(!s)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var x="main"===this.loaderType_&&s.hasVideo,L=!this.audioDisabled_&&s.hasAudio&&!s.isMuxed;if(t.waitingOnAppends=0,!t.hasAppendedData_)return!t.timingInfo&&"number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);x&&t.waitingOnAppends++,L&&t.waitingOnAppends++,x&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),L&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},o.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},o.checkForIllegalMediaSwitch=function(t){var s=function(a,o,u){return"main"===a&&o&&u?u.hasAudio||u.hasVideo?o.hasVideo&&!u.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!o.hasVideo&&u.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!s&&(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0)},o.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var s=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),s=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},o.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var s=t.videoTimingInfo,h=t.audioTimingInfo,v=t.timingInfo;return this.useDtsForTimestampOffset_?s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:h&&"number"==typeof h.transmuxedDecodeStart?h.transmuxedDecodeStart:v.start:v.start},o.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var s=this.getMediaInfo_(),v="main"===this.loaderType_&&s&&s.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;!v||(t.timingInfo.end="number"==typeof v.end?v.end:v.start+t.duration)},o.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=function(a,o){if("hls"!==o)return null;var u=function(a){var o=0;return["video","audio"].forEach(function(u){var t=a[u+"TimingInfo"];if(t){var v,s=t.start,h=t.end;"bigint"==typeof s||"bigint"==typeof h?v=se().BigInt(h)-se().BigInt(s):"number"==typeof s&&"number"==typeof h&&(v=h-s),typeof v<"u"&&v>o&&(o=v)}}),"bigint"==typeof o&&o<Number.MAX_SAFE_INTEGER&&(o=Number(o)),o}({audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo});if(!u)return null;var t=a.playlist.targetDuration,s=Ig({segmentDuration:u,maxDuration:2*t}),h=Ig({segmentDuration:u,maxDuration:t});return s||h?{severity:s?"warn":"info",message:"Segment with index "+a.mediaIndex+" from playlist "+a.playlist.id+" has a duration of "+u+" when the reported duration is "+a.duration+" and the target duration is "+t+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(t,this.sourceType_);if(s&&("warn"===s.severity?It.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+Id(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var h=t.segment,v=t.part,S=h.end&&this.currentTime_()-h.end>3*t.playlist.targetDuration,x=v&&v.end&&this.currentTime_()-v.end>3*t.playlist.partTargetDuration;if(S||x)return this.logger_("bad "+(S?"segment":"part")+" "+Id(t)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Id(t))},o.recordThroughput_=function(t){if(t.duration<tp)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+tp);else{var s=this.throughput.rate,h=Date.now()-t.endOfAllRequests+1,v=Math.floor(t.byteLength/h*8*1e3);this.throughput.rate+=(v-s)/++this.throughput.count}},o.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var s=t.segment,h=s.start,v=s.end;if(Vm(h)&&Vm(v)){Oc(h,v,this.segmentMetadataTrack_);var S=se().WebKitDataCue||se().VTTCue,x={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:h,end:v},ne=new S(h,v,JSON.stringify(x));ne.value=x,this.segmentMetadataTrack_.addCue(ne)}}},a}(It.EventTarget);function Fu(){}var jl,Dd=function(a){return"string"!=typeof a?a:a.replace(/./,function(o){return o.toUpperCase()})},Wm=["video","audio"],vh=function(a,o){var u=o[a+"Buffer"];return u&&u.updating||o.queuePending[a]},rp=function g(a,o){if(0!==o.queue.length){var u=0,t=o.queue[u];if("mediaSource"===t.type)return void(!o.updating()&&"closed"!==o.mediaSource.readyState&&(o.queue.shift(),t.action(o),t.doneFn&&t.doneFn(),g("audio",o),g("video",o)));if("mediaSource"!==a&&o.ready()&&"closed"!==o.mediaSource.readyState&&!vh(a,o)){if(t.type!==a){if(u=function(a,o){for(var u=0;u<o.length;u++){var t=o[u];if("mediaSource"===t.type)return null;if(t.type===a)return u}return null}(a,o.queue),null===u)return;t=o.queue[u]}if(o.queue.splice(u,1),o.queuePending[a]=t,t.action(a,o),!t.doneFn)return o.queuePending[a]=null,void g(a,o)}}},_h=function(a,o){var u=o[a+"Buffer"],t=Dd(a);!u||(u.removeEventListener("updateend",o["on"+t+"UpdateEnd_"]),u.removeEventListener("error",o["on"+t+"Error_"]),o.codecs[a]=null,o[a+"Buffer"]=null)},Ll=function(a,o){return a&&o&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,o)},Fl_appendBuffer=function(a,o,u){return function(t,s){var h=s[t+"Buffer"];if(Ll(s.mediaSource,h)){s.logger_("Appending segment "+o.mediaIndex+"'s "+a.length+" bytes to "+t+"Buffer");try{h.appendBuffer(a)}catch(v){s.logger_("Error with code "+v.code+" "+(22===v.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+o.mediaIndex+" to "+t+"Buffer"),s.queuePending[t]=null,u(v)}}}},Fl_remove=function(a,o){return function(u,t){var s=t[u+"Buffer"];if(Ll(t.mediaSource,s)){t.logger_("Removing "+a+" to "+o+" from "+u+"Buffer");try{s.remove(a,o)}catch{t.logger_("Remove "+a+" to "+o+" from "+u+"Buffer failed")}}}},Fl_timestampOffset=function(a){return function(o,u){var t=u[o+"Buffer"];!Ll(u.mediaSource,t)||(u.logger_("Setting "+o+"timestampOffset to "+a),t.timestampOffset=a)}},Fl_callback=function(a){return function(o,u){a()}},Fl_endOfStream=function(a){return function(o){if("open"===o.mediaSource.readyState){o.logger_("Calling mediaSource endOfStream("+(a||"")+")");try{o.mediaSource.endOfStream(a)}catch(u){It.log.warn("Failed to call media source endOfStream",u)}}}},Fl_duration=function(a){return function(o){o.logger_("Setting mediaSource duration to "+a);try{o.mediaSource.duration=a}catch(u){It.log.warn("Failed to set media source duration",u)}}},Fl_addSourceBuffer=function(a,o){return function(u){var t=Dd(a),s=en(o);u.logger_("Adding "+a+"Buffer with codec "+o+" to mediaSource");var h=u.mediaSource.addSourceBuffer(s);h.addEventListener("updateend",u["on"+t+"UpdateEnd_"]),h.addEventListener("error",u["on"+t+"Error_"]),u.codecs[a]=o,u[a+"Buffer"]=h}},Fl_removeSourceBuffer=function(a){return function(o){var u=o[a+"Buffer"];if(_h(a,o),Ll(o.mediaSource,u)){o.logger_("Removing "+a+"Buffer with codec "+o.codecs[a]+" from mediaSource");try{o.mediaSource.removeSourceBuffer(u)}catch(t){It.log.warn("Failed to removeSourceBuffer "+a+"Buffer",t)}}}},Fl_changeType=function(a){return function(o,u){var t=u[o+"Buffer"],s=en(a);!Ll(u.mediaSource,t)||u.codecs[o]!==a&&(u.logger_("changing "+o+"Buffer codec from "+u.codecs[o]+" to "+a),t.changeType(s),u.codecs[o]=a)}},tl=function(a){var o=a.type,u=a.sourceUpdater;u.queue.push({type:o,action:a.action,doneFn:a.doneFn,name:a.name}),rp(o,u)},zm=function(a,o){return function(u){if(o.queuePending[a]){var t=o.queuePending[a].doneFn;o.queuePending[a]=null,t&&t(o[a+"Error_"])}rp(a,o)}},qm=function(g){function a(u){var t;return(t=g.call(this)||this).mediaSource=u,t.sourceopenListener_=function(){return rp("mediaSource",ut(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=yl("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=zm("video",ut(t)),t.onAudioUpdateEnd_=zm("audio",ut(t)),t.onVideoError_=function(s){t.videoError_=s},t.onAudioError_=function(s){t.audioError_=s},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}$e(a,g);var o=a.prototype;return o.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},o.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},o.hasInitializedAnyEme=function(){return this.initializedEme_},o.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},o.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},o.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},o.addSourceBuffer=function(t,s){tl({type:"mediaSource",sourceUpdater:this,action:Fl_addSourceBuffer(t,s),name:"addSourceBuffer"})},o.abort=function(t){tl({type:t,sourceUpdater:this,action:function(a,o){if("open"===o.mediaSource.readyState){var u=o[a+"Buffer"];if(Ll(o.mediaSource,u)){o.logger_("calling abort on "+a+"Buffer");try{u.abort()}catch(t){It.log.warn("Failed to abort on "+a+"Buffer",t)}}}},name:"abort"})},o.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?tl({type:"mediaSource",sourceUpdater:this,action:Fl_removeSourceBuffer(t),name:"removeSourceBuffer"}):It.log.error("removeSourceBuffer is not supported!")},o.canRemoveSourceBuffer=function(){return!It.browser.IE_VERSION&&!It.browser.IS_FIREFOX&&se().MediaSource&&se().MediaSource.prototype&&"function"==typeof se().MediaSource.prototype.removeSourceBuffer},a.canChangeType=function(){return se().SourceBuffer&&se().SourceBuffer.prototype&&"function"==typeof se().SourceBuffer.prototype.changeType},o.canChangeType=function(){return this.constructor.canChangeType()},o.changeType=function(t,s){this.canChangeType()?tl({type:t,sourceUpdater:this,action:Fl_changeType(s),name:"changeType"}):It.log.error("changeType is not supported!")},o.addOrChangeSourceBuffers=function(t){var s=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(h){var v=t[h];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(h,v);s.canChangeType()&&s.changeType(h,v)})},o.appendBuffer=function(t,s){var h=this,v=t.segmentInfo,S=t.type,x=t.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,s]),void this.logger_("delayed audio append of "+x.length+" until video append");if(tl({type:S,sourceUpdater:this,action:Fl_appendBuffer(x,v||{mediaIndex:-1},s),doneFn:s,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var ne=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+ne.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,ne.forEach(function(Y){h.appendBuffer.apply(h,Y)})}},o.audioBuffered=function(){return Ll(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:It.createTimeRange()},o.videoBuffered=function(){return Ll(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:It.createTimeRange()},o.buffered=function(){var t=Ll(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=Ll(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!t?this.audioBuffered():t&&!s?this.videoBuffered():function(a,o){var u=null,t=null,s=0,h=[],v=[];if(!(a&&a.length&&o&&o.length))return It.createTimeRange();for(var S=a.length;S--;)h.push({time:a.start(S),type:"start"}),h.push({time:a.end(S),type:"end"});for(S=o.length;S--;)h.push({time:o.start(S),type:"start"}),h.push({time:o.end(S),type:"end"});for(h.sort(function(x,L){return x.time-L.time}),S=0;S<h.length;S++)"start"===h[S].type?2==++s&&(u=h[S].time):"end"===h[S].type&&1==--s&&(t=h[S].time),null!==u&&null!==t&&(v.push([u,t]),u=null,t=null);return It.createTimeRanges(v)}(this.audioBuffered(),this.videoBuffered())},o.setDuration=function(t,s){void 0===s&&(s=Fu),tl({type:"mediaSource",sourceUpdater:this,action:Fl_duration(t),name:"duration",doneFn:s})},o.endOfStream=function(t,s){void 0===t&&(t=null),void 0===s&&(s=Fu),"string"!=typeof t&&(t=void 0),tl({type:"mediaSource",sourceUpdater:this,action:Fl_endOfStream(t),name:"endOfStream",doneFn:s})},o.removeAudio=function(t,s,h){void 0===h&&(h=Fu),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?tl({type:"audio",sourceUpdater:this,action:Fl_remove(t,s),doneFn:h,name:"remove"}):h()},o.removeVideo=function(t,s,h){void 0===h&&(h=Fu),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?tl({type:"video",sourceUpdater:this,action:Fl_remove(t,s),doneFn:h,name:"remove"}):h()},o.updating=function(){return!(!vh("audio",this)&&!vh("video",this))},o.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(tl({type:"audio",sourceUpdater:this,action:Fl_timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},o.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(tl({type:"video",sourceUpdater:this,action:Fl_timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},o.audioQueueCallback=function(t){!this.audioBuffer||tl({type:"audio",sourceUpdater:this,action:Fl_callback(t),name:"callback"})},o.videoQueueCallback=function(t){!this.videoBuffer||tl({type:"video",sourceUpdater:this,action:Fl_callback(t),name:"callback"})},o.dispose=function(){var t=this;this.trigger("dispose"),Wm.forEach(function(s){t.abort(s),t.canRemoveSourceBuffer()?t.removeSourceBuffer(s):t[s+"QueueCallback"](function(){return _h(s,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},a}(It.EventTarget),Km=function(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},f_=new Uint8Array("\n\n".split("").map(function(g){return g.charCodeAt(0)})),K_=function(g){function a(u,t){var s;return void 0===t&&(t={}),(s=g.call(this,u,t)||this).mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=u.featuresNativeTextTracks,s.shouldSaveSegmentTimingInfo_=!1,s}$e(a,g);var o=a.prototype;return o.createTransmuxer_=function(){return null},o.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return It.createTimeRanges();var t=this.subtitlesTrack_.cues;return It.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])},o.initSegmentForMap=function(t,s){if(void 0===s&&(s=!1),!t)return null;var h=Td(t),v=this.initSegments_[h];if(s&&!v&&t.bytes){var x=new Uint8Array(f_.byteLength+t.bytes.byteLength);x.set(t.bytes),x.set(f_,t.bytes.byteLength),this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:x}}return v||t},o.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},o.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},o.track=function(t){return typeof t>"u"||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},o.remove=function(t,s){Oc(t,s,this.subtitlesTrack_)},o.fillBuffer_=function(){var t=this,s=this.chooseNextRequest_();if(s){if(null===this.syncController_.timestampOffsetForTimeline(s.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(s)}},o.timestampOffsetForSegment_=function(){return null},o.chooseNextRequest_=function(){return this.skipEmptySegments_(g.prototype.chooseNextRequest_.call(this))},o.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},o.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},o.segmentRequestFinished_=function(t,s,h){var v=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(s.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return-101===t.code&&this.handleTimeout_(),-102===t.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var S=this.pendingSegment_;this.saveBandwidthRelatedStats_(S.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var x=S.segment;if(x.map&&(x.map.bytes=s.map.bytes),S.bytes=s.bytes,"function"!=typeof se().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var L,ne=function(){v.subtitlesTrack_.tech_.off("vttjsloaded",L),v.stopForError({message:"Error loading vtt.js"})};return L=function(){v.subtitlesTrack_.tech_.off("vttjserror",ne),v.segmentRequestFinished_(t,s,h)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",L),void this.subtitlesTrack_.tech_.one("vttjserror",ne)}x.requested=!0;try{this.parseVTTCues_(S)}catch(Y){return void this.stopForError({message:Y.message})}if(this.updateTimeMapping_(S,this.syncController_.timelines[S.timeline],this.playlist_),S.timingInfo=S.cues.length?{start:S.cues[0].startTime,end:S.cues[S.cues.length-1].endTime}:{start:S.startOfSegment,end:S.startOfSegment+S.duration},S.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");S.byteLength=S.bytes.byteLength,this.mediaSecondsLoaded+=x.duration,S.cues.forEach(function(Y){v.subtitlesTrack_.addCue(v.featuresNativeTextTracks_?new(se().VTTCue)(Y.startTime,Y.endTime,Y.text):Y)}),function(a){var o=a.cues;if(o)for(var u=0;u<o.length;u++){for(var t=[],s=0,h=0;h<o.length;h++)o[u].startTime===o[h].startTime&&o[u].endTime===o[h].endTime&&o[u].text===o[h].text&&++s>1&&t.push(o[h]);t.length&&t.forEach(function(v){return a.removeCue(v)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},o.handleData_=function(){},o.updateTimingInfoEnd_=function(){},o.parseVTTCues_=function(t){var s,h=!1;"function"==typeof se().TextDecoder?s=new(se().TextDecoder)("utf8"):(s=se().WebVTT.StringDecoder(),h=!0);var v=new(se().WebVTT.Parser)(se(),se().vttjs,s);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},v.oncue=t.cues.push.bind(t.cues),v.ontimestampmap=function(L){t.timestampmap=L},v.onparsingerror=function(L){It.log.warn("Error encountered when parsing cues: "+L.message)},t.segment.map){var S=t.segment.map.bytes;h&&(S=Km(S)),v.parse(S)}var x=t.bytes;h&&(x=Km(x)),v.parse(x),v.flush()},o.updateTimeMapping_=function(t,s,h){var v=t.segment;if(s){if(!t.cues.length)return void(v.empty=!0);var S=t.timestampmap,x=S.MPEGTS/Nt.ONE_SECOND_IN_TS-S.LOCAL+s.mapping;t.cues.forEach(function(Y){Y.startTime+=x,Y.endTime+=x}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-v.duration)})}},a}(np),fy=function(a,o){for(var u=a.cues,t=0;t<u.length;t++){var s=u[t];if(o>=s.adStartTime&&o<=s.adEndTime)return s}return null},Rc=[{name:"VOD",run:function(a,o,u,t,s){return u!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(a,o,u,t,s){if(!Object.keys(a.timelineToDatetimeMappings).length)return null;var h=null,v=null,S=$f(o);s=s||0;for(var x=0;x<S.length;x++){var ne=S[o.endList||0===s?x:S.length-(x+1)],Y=ne.segment,Te=a.timelineToDatetimeMappings[Y.timeline];if(Te&&Y.dateTimeObject){var Ve=Y.dateTimeObject.getTime()/1e3+Te;if(Y.parts&&"number"==typeof ne.partIndex)for(var qe=0;qe<ne.partIndex;qe++)Ve+=Y.parts[qe].duration;var Wt=Math.abs(s-Ve);if(null!==v&&(0===Wt||v<Wt))break;v=Wt,h={time:Ve,segmentIndex:ne.segmentIndex,partIndex:ne.partIndex}}}return h}},{name:"Segment",run:function(a,o,u,t,s){var h=null,v=null;s=s||0;for(var S=$f(o),x=0;x<S.length;x++){var ne=S[o.endList||0===s?x:S.length-(x+1)],Y=ne.segment,Te=ne.part&&ne.part.start||Y&&Y.start;if(Y.timeline===t&&typeof Te<"u"){var je=Math.abs(s-Te);if(null!==v&&v<je)break;(!h||null===v||v>=je)&&(v=je,h={time:Te,segmentIndex:ne.segmentIndex,partIndex:ne.partIndex})}}return h}},{name:"Discontinuity",run:function(a,o,u,t,s){var h=null;if(s=s||0,o.discontinuityStarts&&o.discontinuityStarts.length)for(var v=null,S=0;S<o.discontinuityStarts.length;S++){var x=o.discontinuityStarts[S],ne=a.discontinuities[o.discontinuitySequence+S+1];if(ne){var Y=Math.abs(s-ne.time);if(null!==v&&v<Y)break;(!h||null===v||v>=Y)&&(v=Y,h={time:ne.time,segmentIndex:x,partIndex:null})}}return h}},{name:"Playlist",run:function(a,o,u,t,s){return o.syncInfo?{time:o.syncInfo.time,segmentIndex:o.syncInfo.mediaSequence-o.mediaSequence,partIndex:null}:null}}],Zm=function(g){function a(u){var t;return(t=g.call(this)||this).timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=yl("SyncController"),t}$e(a,g);var o=a.prototype;return o.getSyncPoint=function(t,s,h,v){var S=this.runStrategies_(t,s,h,v);return S.length?this.selectSyncPoint_(S,{key:"time",value:v}):null},o.getExpiredTime=function(t,s){if(!t||!t.segments)return null;var h=this.runStrategies_(t,s,t.discontinuitySequence,0);if(!h.length)return null;var v=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return v.segmentIndex>0&&(v.time*=-1),Math.abs(v.time+Jl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:v.segmentIndex,endIndex:0}))},o.runStrategies_=function(t,s,h,v){for(var S=[],x=0;x<Rc.length;x++){var L=Rc[x],ne=L.run(this,t,s,h,v);ne&&(ne.strategy=L.name,S.push({strategy:L.name,syncPoint:ne}))}return S},o.selectSyncPoint_=function(t,s){for(var h=t[0].syncPoint,v=Math.abs(t[0].syncPoint[s.key]-s.value),S=t[0].strategy,x=1;x<t.length;x++){var L=Math.abs(t[x].syncPoint[s.key]-s.value);L<v&&(v=L,h=t[x].syncPoint,S=t[x].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy ["+S+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},o.saveExpiredSegmentInfo=function(t,s){var h=s.mediaSequence-t.mediaSequence;if(h>86400)It.log.warn("Not saving expired segment info. Media sequence gap "+h+" is too large.");else for(var v=h-1;v>=0;v--){var S=t.segments[v];if(S&&typeof S.start<"u"){s.syncInfo={mediaSequence:t.mediaSequence+v,time:S.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+", mediaSequence: "+s.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},o.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var s=t.segments[0],h=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-h}},o.saveSegmentTimingInfo=function(t){var s=t.segmentInfo,h=t.shouldSaveTimelineMapping,v=this.calculateSegmentTimeMapping_(s,s.timingInfo,h),S=s.segment;v&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:S.start}));var x=S.dateTimeObject;S.discontinuity&&h&&x&&(this.timelineToDatetimeMappings[S.timeline]=-x.getTime()/1e3)},o.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},o.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},o.calculateSegmentTimeMapping_=function(t,s,h){var L,ne,v=t.segment,S=t.part,x=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)x={time:t.startOfSegment,mapping:t.startOfSegment-s.start},h&&(this.timelines[t.timeline]=x,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+x.time+"] [mapping: "+x.mapping+"]")),L=t.startOfSegment,ne=s.end+x.mapping;else{if(!x)return!1;L=s.start+x.mapping,ne=s.end+x.mapping}return S&&(S.start=L,S.end=ne),(!v.start||L<v.start)&&(v.start=L),v.end=ne,!0},o.saveDiscontinuitySyncInfo_=function(t){var s=t.playlist,h=t.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var v=0;v<s.discontinuityStarts.length;v++){var S=s.discontinuityStarts[v],x=s.discontinuitySequence+v+1,L=S-t.mediaIndex,ne=Math.abs(L);if(!this.discontinuities[x]||this.discontinuities[x].accuracy>ne){var Y;Y=L<0?h.start-Jl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex,endIndex:S}):h.end+Jl({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:t.mediaIndex+1,endIndex:S}),this.discontinuities[x]={time:Y,accuracy:ne}}}},o.dispose=function(){this.trigger("dispose"),this.off()},a}(It.EventTarget),gy=function(g){function a(){var u;return(u=g.call(this)||this).pendingTimelineChanges_={},u.lastTimelineChanges_={},u}$e(a,g);var o=a.prototype;return o.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},o.pendingTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.pendingTimelineChanges_[s]={type:s,from:h,to:v},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},o.lastTimelineChange=function(t){var s=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.lastTimelineChanges_[s]={type:s,from:h,to:v},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},o.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},a}(It.EventTarget),Ym=Rm(Nm(function(){var g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a(Xt,tn,Cn){return Xt(Cn={path:tn,exports:{},require:function(on,In){return function o(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Cn.exports),Cn.exports}var u=a(function(Xt){function tn(un,on){for(var In=0;In<on.length;In++){var mn=on[In];mn.enumerable=mn.enumerable||!1,mn.configurable=!0,"value"in mn&&(mn.writable=!0),Object.defineProperty(un,mn.key,mn)}}Xt.exports=function Cn(un,on,In){return on&&tn(un.prototype,on),In&&tn(un,In),un},Xt.exports.default=Xt.exports,Xt.exports.__esModule=!0}),t=a(function(Xt){function tn(Cn,un){return Xt.exports=tn=Object.setPrototypeOf||function(In,mn){return In.__proto__=mn,In},Xt.exports.default=Xt.exports,Xt.exports.__esModule=!0,tn(Cn,un)}Xt.exports=tn,Xt.exports.default=Xt.exports,Xt.exports.__esModule=!0}),s=a(function(Xt){Xt.exports=function tn(Cn,un){Cn.prototype=Object.create(un.prototype),Cn.prototype.constructor=Cn,t(Cn,un)},Xt.exports.default=Xt.exports,Xt.exports.__esModule=!0}),h=function(){function Xt(){this.listeners={}}var tn=Xt.prototype;return tn.on=function(un,on){this.listeners[un]||(this.listeners[un]=[]),this.listeners[un].push(on)},tn.off=function(un,on){if(!this.listeners[un])return!1;var In=this.listeners[un].indexOf(on);return this.listeners[un]=this.listeners[un].slice(0),this.listeners[un].splice(In,1),In>-1},tn.trigger=function(un){var on=this.listeners[un];if(on)if(2===arguments.length)for(var In=on.length,mn=0;mn<In;++mn)on[mn].call(this,arguments[1]);else for(var kr=Array.prototype.slice.call(arguments,1),Yn=on.length,Hr=0;Hr<Yn;++Hr)on[Hr].apply(this,kr)},tn.dispose=function(){this.listeners={}},tn.pipe=function(un){this.on("data",function(on){un.push(on)})},Xt}(),x=null,L=function(){function Xt(Cn){x||(x=function(){var mn,kr,Yn,Cs,jo,Ys,Ma,Fs,tn=[[[],[],[],[],[]],[[],[],[],[],[]]],Cn=tn[0],un=tn[1],on=Cn[4],In=un[4],Hr=[],$s=[];for(mn=0;mn<256;mn++)$s[(Hr[mn]=mn<<1^283*(mn>>7))^mn]=mn;for(kr=Yn=0;!on[kr];kr^=Cs||1,Yn=$s[Yn]||1)for(on[kr]=Ys=(Ys=Yn^Yn<<1^Yn<<2^Yn<<3^Yn<<4)>>8^255&Ys^99,In[Ys]=kr,Fs=16843009*Hr[jo=Hr[Cs=Hr[kr]]]^65537*jo^257*Cs^16843008*kr,Ma=257*Hr[Ys]^16843008*Ys,mn=0;mn<4;mn++)Cn[mn][kr]=Ma=Ma<<24^Ma>>>8,un[mn][Ys]=Fs=Fs<<24^Fs>>>8;for(mn=0;mn<5;mn++)Cn[mn]=Cn[mn].slice(0),un[mn]=un[mn].slice(0);return tn}()),this._tables=[[x[0][0].slice(),x[0][1].slice(),x[0][2].slice(),x[0][3].slice(),x[0][4].slice()],[x[1][0].slice(),x[1][1].slice(),x[1][2].slice(),x[1][3].slice(),x[1][4].slice()]];var un,on,In,mn=this._tables[0][4],kr=this._tables[1],Yn=Cn.length,Hr=1;if(4!==Yn&&6!==Yn&&8!==Yn)throw new Error("Invalid aes key size");var $s=Cn.slice(0),Cs=[];for(this._key=[$s,Cs],un=Yn;un<4*Yn+28;un++)In=$s[un-1],(un%Yn==0||8===Yn&&un%Yn==4)&&(In=mn[In>>>24]<<24^mn[In>>16&255]<<16^mn[In>>8&255]<<8^mn[255&In],un%Yn==0&&(In=In<<8^In>>>24^Hr<<24,Hr=Hr<<1^283*(Hr>>7))),$s[un]=$s[un-Yn]^In;for(on=0;un;on++,un--)In=$s[3&on?un:un-4],Cs[on]=un<=4||on<4?In:kr[0][mn[In>>>24]]^kr[1][mn[In>>16&255]]^kr[2][mn[In>>8&255]]^kr[3][mn[255&In]]}return Xt.prototype.decrypt=function(un,on,In,mn,kr,Yn){var Ys,Ma,Fs,xu,Hr=this._key[1],$s=un^Hr[0],Cs=mn^Hr[1],jo=In^Hr[2],Ko=on^Hr[3],Rd=Hr.length/4-2,rc=4,rl=this._tables[1],Nd=rl[0],il=rl[1],Ld=rl[2],ic=rl[3],sl=rl[4];for(xu=0;xu<Rd;xu++)Ys=Nd[$s>>>24]^il[Cs>>16&255]^Ld[jo>>8&255]^ic[255&Ko]^Hr[rc],Ma=Nd[Cs>>>24]^il[jo>>16&255]^Ld[Ko>>8&255]^ic[255&$s]^Hr[rc+1],Fs=Nd[jo>>>24]^il[Ko>>16&255]^Ld[$s>>8&255]^ic[255&Cs]^Hr[rc+2],Ko=Nd[Ko>>>24]^il[$s>>16&255]^Ld[Cs>>8&255]^ic[255&jo]^Hr[rc+3],rc+=4,$s=Ys,Cs=Ma,jo=Fs;for(xu=0;xu<4;xu++)kr[(3&-xu)+Yn]=sl[$s>>>24]<<24^sl[Cs>>16&255]<<16^sl[jo>>8&255]<<8^sl[255&Ko]^Hr[rc++],Ys=$s,$s=Cs,Cs=jo,jo=Ko,Ko=Ys},Xt}(),ne=function(Xt){function tn(){var un;return(un=Xt.call(this,h)||this).jobs=[],un.delay=1,un.timeout_=null,un}s(tn,Xt);var Cn=tn.prototype;return Cn.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Cn.push=function(on){this.jobs.push(on),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},tn}(h),Y=function(tn){return tn<<24|(65280&tn)<<8|(16711680&tn)>>8|tn>>>24},je=function(){function Xt(Cn,un,on,In){var mn=Xt.STEP,kr=new Int32Array(Cn.buffer),Yn=new Uint8Array(Cn.byteLength),Hr=0;for(this.asyncStream_=new ne,this.asyncStream_.push(this.decryptChunk_(kr.subarray(Hr,Hr+mn),un,on,Yn)),Hr=mn;Hr<kr.length;Hr+=mn)on=new Uint32Array([Y(kr[Hr-4]),Y(kr[Hr-3]),Y(kr[Hr-2]),Y(kr[Hr-1])]),this.asyncStream_.push(this.decryptChunk_(kr.subarray(Hr,Hr+mn),un,on,Yn));this.asyncStream_.push(function(){In(null,function v(Xt){return Xt.subarray(0,Xt.byteLength-Xt[Xt.byteLength-1])}(Yn))})}return Xt.prototype.decryptChunk_=function(un,on,In,mn){return function(){var kr=function(tn,Cn,un){var Yn,Hr,$s,Cs,jo,Ko,Ys,Ma,Fs,on=new Int32Array(tn.buffer,tn.byteOffset,tn.byteLength>>2),In=new L(Array.prototype.slice.call(Cn)),mn=new Uint8Array(tn.byteLength),kr=new Int32Array(mn.buffer);for(Yn=un[0],Hr=un[1],$s=un[2],Cs=un[3],Fs=0;Fs<on.length;Fs+=4)jo=Y(on[Fs]),Ko=Y(on[Fs+1]),Ys=Y(on[Fs+2]),Ma=Y(on[Fs+3]),In.decrypt(jo,Ko,Ys,Ma,kr,Fs),kr[Fs]=Y(kr[Fs]^Yn),kr[Fs+1]=Y(kr[Fs+1]^Hr),kr[Fs+2]=Y(kr[Fs+2]^$s),kr[Fs+3]=Y(kr[Fs+3]^Cs),Yn=jo,Hr=Ko,$s=Ys,Cs=Ma;return mn}(un,on,In);mn.set(kr,un.byteOffset)}},u(Xt,null,[{key:"STEP",get:function(){return 32e3}}]),Xt}(),yn=(typeof window<"u"?window:typeof g<"u"?g:typeof self<"u"?self:{}).BigInt||Number;yn("0x1"),yn("0x100"),yn("0x10000"),yn("0x1000000"),yn("0x100000000"),yn("0x10000000000"),yn("0x1000000000000"),yn("0x100000000000000"),yn("0x10000000000000000");self.onmessage=function(Xt){var tn=Xt.data,Cn=new Uint8Array(tn.encrypted.bytes,tn.encrypted.byteOffset,tn.encrypted.byteLength),un=new Uint32Array(tn.key.bytes,tn.key.byteOffset,tn.key.byteLength/4),on=new Uint32Array(tn.iv.bytes,tn.iv.byteOffset,tn.iv.byteLength/4);new je(Cn,un,on,function(In,mn){self.postMessage(function(tn){var Cn={};return Object.keys(tn).forEach(function(un){var on=tn[un];Cn[un]=function(tn){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(tn):tn&&tn.buffer instanceof ArrayBuffer}(on)?{bytes:on.buffer,byteOffset:on.byteOffset,byteLength:on.byteLength}:on}),Cn}({source:tn.source,decrypted:mn}),[mn.buffer])})}})),Dg=Om(Ym),Qm=function(a){var o=a.default?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(o="main-desc"),o},mf=function(a,o){a.abort(),a.pause(),o&&o.activePlaylistLoader&&(o.activePlaylistLoader.pause(),o.activePlaylistLoader=null)},Xm=function(a,o){o.activePlaylistLoader=a,a.load()},vf={AUDIO:function(a,o){return function(){var t=o.mediaTypes[a],s=o.blacklistCurrentPlaylist;mf(o.segmentLoaders[a],t);var h=t.activeTrack(),v=t.activeGroup(),S=(v.filter(function(ne){return ne.default})[0]||v[0]).id,x=t.tracks[S];if(h!==x){for(var L in It.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[L].enabled=t.tracks[L]===x;t.onTrackChanged()}else s({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(a,o){return function(){var u=o.segmentLoaders[a],t=o.mediaTypes[a];It.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),mf(u,t);var s=t.activeTrack();s&&(s.mode="disabled"),t.onTrackChanged()}}},ip={AUDIO:function(a,o,u){if(o){var t=u.tech,s=u.requestOptions,h=u.segmentLoaders[a];o.on("loadedmetadata",function(){var v=o.media();h.playlist(v,s),(!t.paused()||v.endList&&"none"!==t.preload())&&h.load()}),o.on("loadedplaylist",function(){h.playlist(o.media(),s),t.paused()||h.load()}),o.on("error",vf[a](a,u))}},SUBTITLES:function(a,o,u){var t=u.tech,s=u.requestOptions,h=u.segmentLoaders[a],v=u.mediaTypes[a];o.on("loadedmetadata",function(){var S=o.media();h.playlist(S,s),h.track(v.activeTrack()),(!t.paused()||S.endList&&"none"!==t.preload())&&h.load()}),o.on("loadedplaylist",function(){h.playlist(o.media(),s),t.paused()||h.load()}),o.on("error",vf[a](a,u))}},p_={AUDIO:function(a,o){var u=o.vhs,t=o.sourceType,s=o.segmentLoaders[a],h=o.requestOptions,v=o.master.mediaGroups,S=o.mediaTypes[a],x=S.groups,L=S.tracks,ne=S.logger_,Y=o.masterPlaylistLoader,Te=Wf(Y.master);for(var je in(!v[a]||0===Object.keys(v[a]).length)&&(v[a]={main:{default:{default:!0}}},Te&&(v[a].main.default.playlists=Y.master.playlists)),v[a])for(var Ve in x[je]||(x[je]=[]),v[a][je]){var qe=v[a][je][Ve],Wt=void 0;if(Te?(ne("AUDIO group '"+je+"' label '"+Ve+"' is a master playlist"),qe.isMasterPlaylist=!0,Wt=null):Wt="vhs-json"===t&&qe.playlists?new ph(qe.playlists[0],u,h):qe.resolvedUri?new ph(qe.resolvedUri,u,h):qe.playlists&&"dash"===t?new Pm(qe.playlists[0],u,h,Y):null,qe=It.mergeOptions({id:Ve,playlistLoader:Wt},qe),ip[a](a,qe.playlistLoader,o),x[je].push(qe),typeof L[Ve]>"u"){var yn=new It.AudioTrack({id:Ve,kind:Qm(qe),enabled:!1,language:qe.language,default:qe.default,label:Ve});L[Ve]=yn}}s.on("error",vf[a](a,o))},SUBTITLES:function(a,o){var u=o.tech,t=o.vhs,s=o.sourceType,h=o.segmentLoaders[a],v=o.requestOptions,S=o.master.mediaGroups,x=o.mediaTypes[a],L=x.groups,ne=x.tracks,Y=o.masterPlaylistLoader;for(var Te in S[a])for(var je in L[Te]||(L[Te]=[]),S[a][Te])if(!S[a][Te][je].forced){var Ve=S[a][Te][je],qe=void 0;if("hls"===s)qe=new ph(Ve.resolvedUri,t,v);else if("dash"===s){if(!Ve.playlists.filter(function(Vn){return Vn.excludeUntil!==1/0}).length)return;qe=new Pm(Ve.playlists[0],t,v,Y)}else"vhs-json"===s&&(qe=new ph(Ve.playlists?Ve.playlists[0]:Ve.resolvedUri,t,v));if(Ve=It.mergeOptions({id:je,playlistLoader:qe},Ve),ip[a](a,Ve.playlistLoader,o),L[Te].push(Ve),typeof ne[je]>"u"){var yn=u.addRemoteTextTrack({id:je,kind:"subtitles",default:Ve.default&&Ve.autoselect,language:Ve.language,label:je},!1).track;ne[je]=yn}}h.on("error",vf[a](a,o))},"CLOSED-CAPTIONS":function(a,o){var u=o.tech,t=o.master.mediaGroups,s=o.mediaTypes[a],h=s.groups,v=s.tracks;for(var S in t[a])for(var x in h[S]||(h[S]=[]),t[a][S]){var L=t[a][S][x];if(/^(?:CC|SERVICE)/.test(L.instreamId)){var ne=u.options_.vhs&&u.options_.vhs.captionServices||{},Y={label:x,language:L.language,instreamId:L.instreamId,default:L.default&&L.autoselect};if(ne[Y.instreamId]&&(Y=It.mergeOptions(Y,ne[Y.instreamId])),void 0===Y.default&&delete Y.default,h[S].push(It.mergeOptions({id:x},L)),typeof v[x]>"u"){var Te=u.addRemoteTextTrack({id:Y.instreamId,kind:"captions",default:Y.default,language:Y.language,label:Y.label},!1).track;v[x]=Te}}}}},ev=function g(a,o){for(var u=0;u<a.length;u++)if(lh(o,a[u])||a[u].playlists&&g(a[u].playlists,o))return!0;return!1},kd={AUDIO:function(a,o){return function(){var u=o.mediaTypes[a].tracks;for(var t in u)if(u[t].enabled)return u[t];return null}},SUBTITLES:function(a,o){return function(){var u=o.mediaTypes[a].tracks;for(var t in u)if("showing"===u[t].mode||"hidden"===u[t].mode)return u[t];return null}}},vy=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],sp=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},Og=function(g){function a(u){var t;t=g.call(this)||this;var s=u.src,h=u.handleManifestRedirects,v=u.withCredentials,S=u.tech,x=u.bandwidth,L=u.externVhs,ne=u.useCueTags,Y=u.blacklistDuration,Te=u.enableLowInitialPlaylist,je=u.sourceType,Ve=u.cacheEncryptionKeys,qe=u.experimentalBufferBasedABR,Wt=u.experimentalLeastPixelDiffSelector,yn=u.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Vn=u.maxPlaylistRetries;(null===Vn||typeof Vn>"u")&&(Vn=1/0),jl=L,t.experimentalBufferBasedABR=Boolean(qe),t.experimentalLeastPixelDiffSelector=Boolean(Wt),t.withCredentials=v,t.tech_=S,t.vhs_=S.vhs,t.sourceType_=je,t.useCueTags_=ne,t.blacklistDuration=Y,t.maxPlaylistRetries=Vn,t.enableLowInitialPlaylist=Te,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:v,handleManifestRedirects:h,maxPlaylistRetries:Vn,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=function(){var a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(o){a[o]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Fu,activeTrack:Fu,getActiveGroup:Fu,onGroupChanged:Fu,onTrackChanged:Fu,lastTrack_:null,logger_:yl("MediaGroups["+o+"]")}}),a}(),t.mediaSource=new(se().MediaSource),t.handleDurationChange_=t.handleDurationChange_.bind(ut(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(ut(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(ut(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=It.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new Zm(u),t.segmentMetadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new Dg,t.sourceUpdater_=new qm(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new gy;var Xt={vhs:t.vhs_,parse708captions:u.parse708captions,useDtsForTimestampOffset:u.useDtsForTimestampOffset,captionServices:yn,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:x,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:Ve,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:u.experimentalExactManifestTimings};t.masterPlaylistLoader_="dash"===t.sourceType_?new Pm(s,t.vhs_,t.requestOptions_):new ph(s,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new np(It.mergeOptions(Xt,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),u),t.audioSegmentLoader_=new np(It.mergeOptions(Xt,{loaderType:"audio"}),u),t.subtitleSegmentLoader_=new K_(It.mergeOptions(Xt,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),u),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),vy.forEach(function(Cn){t[Cn+"_"]=sp.bind(ut(t),Cn)}),t.logger_=yl("MPC"),t.triggeredFmp4Usage=!1,"none"===t.tech_.preload()?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var tn="none"===t.tech_.preload()?"play":"loadstart";return t.tech_.one(tn,function(){var Cn=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-Cn,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}$e(a,g);var o=a.prototype;return o.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},o.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},o.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return-1===t||-1===s?-1:t+s},o.timeToLoadedData_=function(){return this.timeToLoadedData__},o.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},o.switchMedia_=function(t,s,h){var v=this.media(),S=v&&(v.id||v.uri),x=t.id||t.uri;S&&S!==x&&(this.logger_("switch media "+S+" -> "+x+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(t,h)},o.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=se().setInterval(function(){return t.checkABR_()},250)},o.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(se().clearInterval(this.abrTimer_),this.abrTimer_=null)},o.getAudioTrackPlaylists_=function(){var t=this.master(),s=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return s;var S,h=t.mediaGroups.AUDIO,v=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)S=this.mediaTypes_.AUDIO.activeTrack();else{var x=h.main||v.length&&h[v[0]];for(var L in x)if(x[L].default){S={label:L};break}}if(!S)return s;var ne=[];for(var Y in h)if(h[Y][S.label]){var Te=h[Y][S.label];if(Te.playlists&&Te.playlists.length)ne.push.apply(ne,Te.playlists);else if(Te.uri)ne.push(Te);else if(t.playlists.length)for(var je=0;je<t.playlists.length;je++){var Ve=t.playlists[je];Ve.attributes&&Ve.attributes.AUDIO&&Ve.attributes.AUDIO===Y&&ne.push(Ve)}}return ne.length?ne:s},o.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Nl(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,s.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load()),function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(je){p_[je](je,a)});var o=a.mediaTypes,u=a.masterPlaylistLoader,t=a.tech,s=a.vhs,h=a.segmentLoaders,v=h.AUDIO,S=h.main;["AUDIO","SUBTITLES"].forEach(function(je){o[je].activeGroup=function(a,o){return function(u){var s=o.mediaTypes[a].groups,h=o.masterPlaylistLoader.media();if(!h)return null;var v=null;h.attributes[a]&&(v=s[h.attributes[a]]);var S=Object.keys(s);if(!v)if("AUDIO"===a&&S.length>1&&Wf(o.master))for(var x=0;x<S.length;x++){var L=s[S[x]];if(ev(L,h)){v=L;break}}else s.main?v=s.main:1===S.length&&(v=s[S[0]]);return typeof u>"u"?v:null!==u&&v&&v.filter(function(ne){return ne.id===u.id})[0]||null}}(je,a),o[je].activeTrack=kd[je](je,a),o[je].onGroupChanged=function(a,o){return function(){var u=o.segmentLoaders,t=u[a],s=u.main,h=o.mediaTypes[a],v=h.activeTrack(),S=h.getActiveGroup(),x=h.activePlaylistLoader,L=h.lastGroup_;if((!S||!L||S.id!==L.id)&&(h.lastGroup_=S,h.lastTrack_=v,mf(t,h),S&&!S.isMasterPlaylist)){if(!S.playlistLoader)return void(x&&s.resetEverything());t.resyncLoader(),Xm(S.playlistLoader,h)}}}(je,a),o[je].onGroupChanging=function(a,o){return function(){var u=o.segmentLoaders[a];o.mediaTypes[a].lastGroup_=null,u.abort(),u.pause()}}(je,a),o[je].onTrackChanged=function(a,o){return function(){var u=o.masterPlaylistLoader,t=o.segmentLoaders,s=t[a],h=t.main,v=o.mediaTypes[a],S=v.activeTrack(),x=v.getActiveGroup(),L=v.activePlaylistLoader,ne=v.lastTrack_;if((!ne||!S||ne.id!==S.id)&&(v.lastGroup_=x,v.lastTrack_=S,mf(s,v),x)){if(x.isMasterPlaylist){if(!S||!ne||S.id===ne.id)return;var Y=o.vhs.masterPlaylistController_,Te=Y.selectPlaylist();if(Y.media()===Te)return;return v.logger_("track change. Switching master audio from "+ne.id+" to "+S.id),u.pause(),h.resetEverything(),void Y.fastQualityChange_(Te)}if("AUDIO"===a){if(!x.playlistLoader)return h.setAudio(!0),void h.resetEverything();s.setAudio(!0),h.setAudio(!1)}if(L===x.playlistLoader)return void Xm(x.playlistLoader,v);s.track&&s.track(S),s.resetEverything(),Xm(x.playlistLoader,v)}}}(je,a),o[je].getActiveGroup=function(a,o){var u=o.mediaTypes;return function(){var t=u[a].activeTrack();return t?u[a].activeGroup(t):null}}(je,a)});var x=o.AUDIO.activeGroup();if(x){var L=(x.filter(function(je){return je.default})[0]||x[0]).id;o.AUDIO.tracks[L].enabled=!0,o.AUDIO.onGroupChanged(),o.AUDIO.onTrackChanged(),o.AUDIO.getActiveGroup().playlistLoader?(S.setAudio(!1),v.setAudio(!0)):S.setAudio(!0)}u.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(je){return o[je].onGroupChanged()})}),u.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(je){return o[je].onGroupChanging()})});var Y=function(){o.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};for(var Te in t.audioTracks().addEventListener("change",Y),t.remoteTextTracks().addEventListener("change",o.SUBTITLES.onTrackChanged),s.on("dispose",function(){t.audioTracks().removeEventListener("change",Y),t.remoteTextTracks().removeEventListener("change",o.SUBTITLES.onTrackChanged)}),t.clearTracks("audio"),o.AUDIO.tracks)t.audioTracks().addTrack(o.AUDIO.tracks[Te])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),s),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var s=t.masterPlaylistLoader_.media();if(!s){var h;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(h=t.selectInitialPlaylist()),h||(h=t.selectPlaylist()),!h||!t.shouldSwitchToMedia_(h))return;if(t.initialMedia_=h,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;s=t.initialMedia_}t.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=t.masterPlaylistLoader_.media(),h=1.5*s.targetDuration*1e3;t.requestOptions_.timeout=Nl(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,t.mainSegmentLoader_.playlist(s,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=t.masterPlaylistLoader_.media();"playlist-unchanged"!==s.lastExcludeReason_&&t.stuckAtPlaylistEnd_(s)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},o.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},o.triggerPresenceUsage_=function(t,s){var h=t.mediaGroups||{},v=!0,S=Object.keys(h.AUDIO);for(var x in h.AUDIO)for(var L in h.AUDIO[x])h.AUDIO[x][L].uri||(v=!1);v&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),jl.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(h.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},o.shouldSwitchToMedia_=function(t){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,h=this.tech_.currentTime(),v=this.bufferLowWaterLine(),S=this.bufferHighWaterLine();return function(a){var o=a.currentPlaylist,u=a.buffered,t=a.currentTime,s=a.nextPlaylist,h=a.bufferLowWaterLine,v=a.bufferHighWaterLine,S=a.duration,x=a.experimentalBufferBasedABR,L=a.log;if(!s)return It.log.warn("We received no playlist to switch to. Please check your stream."),!1;var ne="allowing switch "+(o&&o.id||"null")+" -> "+s.id;if(!o)return L(ne+" as current playlist is not set"),!0;if(s.id===o.id)return!1;var Y=Boolean(_d(u,t).length);if(!o.endList)return Y||"number"!=typeof o.partTargetDuration?(L(ne+" as current playlist is live"),!0):(L("not "+ne+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var Te=Xl(u,t),je=x?_a.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:_a.MAX_BUFFER_LOW_WATER_LINE;if(S<je)return L(ne+" as duration < max low water line ("+S+" < "+je+")"),!0;var Ve=s.attributes.BANDWIDTH,qe=o.attributes.BANDWIDTH;if(Ve<qe&&(!x||Te<v)){var Wt=ne+" as next bandwidth < current bandwidth ("+Ve+" < "+qe+")";return x&&(Wt+=" and forwardBuffer < bufferHighWaterLine ("+Te+" < "+v+")"),L(Wt),!0}if((!x||Ve>qe)&&Te>=h){var yn=ne+" as forwardBuffer >= bufferLowWaterLine ("+Te+" >= "+h+")";return x&&(yn+=" and next bandwidth > current bandwidth ("+Ve+" > "+qe+")"),L(yn),!0}return L("not "+ne+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:h,currentPlaylist:s,nextPlaylist:t,bufferLowWaterLine:v,bufferHighWaterLine:S,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},o.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var h=t.selectPlaylist();t.shouldSwitchToMedia_(h)&&t.switchMedia_(h,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var s=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var v=t.getCodecsOrExclude_();!v||t.sourceUpdater_.addOrChangeSourceBuffers(v)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},o.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},o.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},o.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},o.fastQualityChange_=function(t){var s=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){s.tech_.setCurrentTime(It.browser.IE_VERSION||It.browser.IS_EDGE?s.tech_.currentTime()+.04:s.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},o.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},o.setupFirstPlay=function(){var t=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var h=this.seekable();if(!h.length)return!1;if(It.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(h.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},o.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();typeof t<"u"&&"function"==typeof t.then&&t.then(null,function(s){})}this.trigger("sourceopen")},o.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var s=this.duration();t[t.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},o.handleDurationChange_=function(){this.tech_.trigger("durationchange")},o.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!s||s.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!t||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},o.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(t,this.duration());if(null===h)return!1;var v=jl.Playlist.playlistEnd(t,h),S=this.tech_.currentTime(),x=this.tech_.buffered();if(!x.length)return v-S<=Ol;var L=x.end(x.length-1);return L-S<=Ol&&v-L<=Ol},o.blacklistCurrentPlaylist=function(t,s){void 0===t&&(t={});var h=t.playlist||this.masterPlaylistLoader_.media();if(s=s||t.blacklistDuration||this.blacklistDuration,!h)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var ne,v=this.masterPlaylistLoader_.master.playlists,S=v.filter(bd),x=1===S.length&&S[0]===h;if(1===v.length&&s!==1/0)return It.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(x);if(x){var L=!1;v.forEach(function(Wt){if(Wt!==h){var yn=Wt.excludeUntil;typeof yn<"u"&&yn!==1/0&&(L=!0,delete Wt.excludeUntil)}}),L&&(It.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}ne=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,h.excludeUntil=ne,t.reason&&(h.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var Y=this.selectPlaylist();if(!Y)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:It.log.warn)((t.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(t.message?" "+t.message:"")+" Switching to playlist "+Y.id+"."),Y.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Y.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var Ve=Y.targetDuration/2*1e3||5e3,qe="number"==typeof Y.lastRequest&&Date.now()-Y.lastRequest<=Ve;return this.switchMedia_(Y,"exclude",x||qe)},o.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},o.delegateLoaders_=function(t,s){var h=this,v=[],S="all"===t;(S||"main"===t)&&v.push(this.masterPlaylistLoader_);var x=[];(S||"audio"===t)&&x.push("AUDIO"),(S||"subtitle"===t)&&(x.push("CLOSED-CAPTIONS"),x.push("SUBTITLES")),x.forEach(function(L){var ne=h.mediaTypes_[L]&&h.mediaTypes_[L].activePlaylistLoader;ne&&v.push(ne)}),["main","audio","subtitle"].forEach(function(L){var ne=h[L+"SegmentLoader_"];ne&&(t===L||"all"===t)&&v.push(ne)}),v.forEach(function(L){return s.forEach(function(ne){"function"==typeof L[ne]&&L[ne]()})})},o.setCurrentTime=function(t){var s=_d(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?s&&s.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},o.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:jl.Playlist.duration(t):1/0:0},o.seekable=function(){return this.seekable_},o.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var h=this.syncController_.getExpiredTime(s,this.duration());if(null!==h){var x,L,v=this.masterPlaylistLoader_.master,S=jl.Playlist.seekable(s,h,jl.Playlist.liveEdgeDelay(v,s));0===S.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(s,this.duration()))||0===(t=jl.Playlist.seekable(s,h,jl.Playlist.liveEdgeDelay(v,s))).length)||(this.seekable_&&this.seekable_.length&&(x=this.seekable_.end(0),L=this.seekable_.start(0)),this.seekable_=t?t.start(0)>S.end(0)||S.start(0)>t.end(0)?S:It.createTimeRanges([[t.start(0)>S.start(0)?t.start(0):S.start(0),t.end(0)<S.end(0)?t.end(0):S.end(0)]]):S,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==x||this.seekable_.start(0)!==L)&&(this.logger_("seekable updated ["+ou(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},o.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1))}else{var h=this.tech_.buffered(),v=jl.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(v=Math.max(v,h.end(h.length-1))),this.mediaSource.duration!==v&&this.sourceUpdater_.setDuration(v)}},o.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var h=t.mediaTypes_[s].groups;for(var v in h)h[v].forEach(function(S){S.playlistLoader&&S.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},o.master=function(){return this.masterPlaylistLoader_.master},o.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},o.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!s||!h)},o.getCodecsOrExclude_=function(){var t=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};s.video=s.main;var h=cf(this.master(),this.media()),v={},S=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(v.video=h.video||s.main.videoCodec||"avc1.4d400d"),s.main.isMuxed&&(v.video+=","+(h.audio||s.main.audioCodec||ni)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||S)&&(v.audio=h.audio||s.main.audioCodec||s.audio.audioCodec||ni,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),v.audio||v.video){var ne,L={};if(["video","audio"].forEach(function(Ve){if(v.hasOwnProperty(Ve)&&!function(qe,Wt){return qe?pr(Wt):Or(Wt)}(s[Ve].isFmp4,v[Ve])){var qe=s[Ve].isFmp4?"browser":"muxer";L[qe]=L[qe]||[],L[qe].push(v[Ve]),"audio"===Ve&&(ne=qe)}}),S&&ne&&this.media().attributes.AUDIO){var Y=this.media().attributes.AUDIO;this.master().playlists.forEach(function(Ve){(Ve.attributes&&Ve.attributes.AUDIO)===Y&&Ve!==t.media()&&(Ve.excludeUntil=1/0)}),this.logger_("excluding audio group "+Y+" as "+ne+' does not support codec(s): "'+v.audio+'"')}if(!Object.keys(L).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var je=[];if(["video","audio"].forEach(function(Ve){var qe=(cr(t.sourceUpdater_.codecs[Ve]||"")[0]||{}).type,Wt=(cr(v[Ve]||"")[0]||{}).type;qe&&Wt&&qe.toLowerCase()!==Wt.toLowerCase()&&je.push('"'+t.sourceUpdater_.codecs[Ve]+'" -> "'+v[Ve]+'"')}),je.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+je.join(", ")+".",blacklistDuration:1/0,internal:!0})}return v}var Te=Object.keys(L).reduce(function(Ve,qe){return Ve&&(Ve+=", "),Ve+(qe+' does not support codec(s): "')+L[qe].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:Te,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},o.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var s=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},o.excludeUnsupportedVariants_=function(){var t=this,s=this.master().playlists,h=[];Object.keys(s).forEach(function(v){var S=s[v];if(-1===h.indexOf(S.id)){h.push(S.id);var x=cf(t.master,S),L=[];x.audio&&!Or(x.audio)&&!pr(x.audio)&&L.push("audio codec "+x.audio),x.video&&!Or(x.video)&&!pr(x.video)&&L.push("video codec "+x.video),x.text&&"stpp.ttml.im1t"===x.text&&L.push("text codec "+x.text),L.length&&(S.excludeUntil=1/0,t.logger_("excluding "+S.id+" for unsupported: "+L.join(", ")))}})},o.excludeIncompatibleVariants_=function(t){var s=this,h=[],v=this.master().playlists,S=Xc(cr(t)),x=ay(S),L=S.video&&cr(S.video)[0]||null,ne=S.audio&&cr(S.audio)[0]||null;Object.keys(v).forEach(function(Y){var Te=v[Y];if(-1===h.indexOf(Te.id)&&Te.excludeUntil!==1/0){h.push(Te.id);var je=[],Ve=cf(s.masterPlaylistLoader_.master,Te),qe=ay(Ve);if(Ve.audio||Ve.video){if(qe!==x&&je.push('codec count "'+qe+'" !== "'+x+'"'),!s.sourceUpdater_.canChangeType()){var Wt=Ve.video&&cr(Ve.video)[0]||null,yn=Ve.audio&&cr(Ve.audio)[0]||null;Wt&&L&&Wt.type.toLowerCase()!==L.type.toLowerCase()&&je.push('video codec "'+Wt.type+'" !== "'+L.type+'"'),yn&&ne&&yn.type.toLowerCase()!==ne.type.toLowerCase()&&je.push('audio codec "'+yn.type+'" !== "'+ne.type+'"')}je.length&&(Te.excludeUntil=1/0,s.logger_("blacklisting "+Te.id+": "+je.join(" && ")))}}})},o.updateAdCues_=function(t){var s=0,h=this.seekable();h.length&&(s=h.start(0)),function(a,o,u){if(void 0===u&&(u=0),a.segments)for(var s,t=u,h=0;h<a.segments.length;h++){var v=a.segments[h];if(s||(s=fy(o,t+v.duration/2)),s){if("cueIn"in v){s.endTime=t,s.adEndTime=t,t+=v.duration,s=null;continue}if(t<s.endTime){t+=v.duration;continue}s.endTime+=v.duration}else if("cueOut"in v&&((s=new(se().VTTCue)(t,t+v.duration,v.cueOut)).adStartTime=t,s.adEndTime=t+parseFloat(v.cueOut),o.addCue(s)),"cueOutCont"in v){var S=v.cueOutCont.split("/").map(parseFloat),x=S[0],L=S[1];(s=new(se().VTTCue)(t,t+v.duration,"")).adStartTime=t-x,s.adEndTime=s.adStartTime+L,o.addCue(s)}t+=v.duration}}(t,this.cueTagsTrack_,s)},o.goalBufferLength=function(){var t=this.tech_.currentTime(),s=_a.GOAL_BUFFER_LENGTH,h=_a.GOAL_BUFFER_LENGTH_RATE,v=Math.max(s,_a.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+t*h,v)},o.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),s=_a.BUFFER_LOW_WATER_LINE,h=_a.BUFFER_LOW_WATER_LINE_RATE,v=Math.max(s,_a.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(s,_a.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+t*h,this.experimentalBufferBasedABR?S:v)},o.bufferHighWaterLine=function(){return _a.BUFFER_HIGH_WATER_LINE},a}(It.EventTarget),rv=function(a,o,u){var t=a.masterPlaylistController_,v=t[(a.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(t);if(o.attributes){var S=o.attributes.RESOLUTION;this.width=S&&S.width,this.height=S&&S.height,this.bandwidth=o.attributes.BANDWIDTH}this.codecs=cf(t.master(),o),this.playlist=o,this.id=u,this.enabled=function(a,o,u){return function(t){var s=a.master.playlists[o],h=vm(s),v=bd(s);return typeof t>"u"?v:(t?delete s.disabled:s.disabled=!0,t!==v&&!h&&(u(),a.trigger(t?"renditionenabled":"renditiondisabled")),t)}}(a.playlists,o.id,v)},Rg=["seeking","seeked","pause","playing","error"],bh=function(){function g(o){var u=this;this.masterPlaylistController_=o.masterPlaylistController,this.tech_=o.tech,this.seekable=o.seekable,this.allowSeeksWithinUnsafeLiveWindow=o.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=o.liveRangeSafeTimeDelta,this.media=o.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=yl("PlaybackWatcher"),this.logger_("initialize");var t=function(){return u.monitorCurrentTime_()},s=function(){return u.monitorCurrentTime_()},h=function(){return u.techWaiting_()},v=function(){return u.cancelTimer_()},S=this.masterPlaylistController_,x=["main","subtitle","audio"],L={};x.forEach(function(Y){L[Y]={reset:function(){return u.resetSegmentDownloads_(Y)},updateend:function(){return u.checkSegmentDownloads_(Y)}},S[Y+"SegmentLoader_"].on("appendsdone",L[Y].updateend),S[Y+"SegmentLoader_"].on("playlistupdate",L[Y].reset),u.tech_.on(["seeked","seeking"],L[Y].reset)});var ne=function(Te){["main","audio"].forEach(function(je){S[je+"SegmentLoader_"][Te]("appended",u.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){u.fixesBadSeeks_()&&(u.consecutiveUpdates=0,u.lastRecordedTime=u.tech_.currentTime(),ne("off"))},this.clearSeekingAppendCheck_=function(){return ne("off")},this.watchForBadSeeking_=function(){u.clearSeekingAppendCheck_(),ne("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",h),this.tech_.on(Rg,v),this.tech_.on("canplay",s),this.tech_.one("play",t),this.dispose=function(){u.clearSeekingAppendCheck_(),u.logger_("dispose"),u.tech_.off("waiting",h),u.tech_.off(Rg,v),u.tech_.off("canplay",s),u.tech_.off("play",t),u.tech_.off("seeking",u.watchForBadSeeking_),u.tech_.off("seeked",u.clearSeekingAppendCheck_),x.forEach(function(Y){S[Y+"SegmentLoader_"].off("appendsdone",L[Y].updateend),S[Y+"SegmentLoader_"].off("playlistupdate",L[Y].reset),u.tech_.off(["seeked","seeking"],L[Y].reset)}),u.checkCurrentTimeTimeout_&&se().clearTimeout(u.checkCurrentTimeTimeout_),u.cancelTimer_()}}var a=g.prototype;return a.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&se().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=se().setTimeout(this.monitorCurrentTime_.bind(this),250)},a.resetSegmentDownloads_=function(u){var t=this.masterPlaylistController_[u+"SegmentLoader_"];this[u+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+u+" loader"),this[u+"StalledDownloads_"]=0,this[u+"Buffered_"]=t.buffered_()},a.checkSegmentDownloads_=function(u){var t=this.masterPlaylistController_,s=t[u+"SegmentLoader_"],h=s.buffered_(),v=function(a,o){if(a===o)return!1;if(!a&&o||!o&&a||a.length!==o.length)return!0;for(var u=0;u<a.length;u++)if(a.start(u)!==o.start(u)||a.end(u)!==o.end(u))return!0;return!1}(this[u+"Buffered_"],h);this[u+"Buffered_"]=h,v?this.resetSegmentDownloads_(u):(this[u+"StalledDownloads_"]++,this.logger_("found #"+this[u+"StalledDownloads_"]+" "+u+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:Xu(h)}),!(this[u+"StalledDownloads_"]<10)&&(this.logger_(u+" loader stalled download exclusion"),this.resetSegmentDownloads_(u),this.tech_.trigger({type:"usage",name:"vhs-"+u+"-download-exclusion"}),"subtitle"!==u&&t.blacklistCurrentPlaylist({message:"Excessive "+u+" segment downloading detected."},1/0)))},a.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var u=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===u&&(!t.length||u+Ol>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&u===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):u===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=u)}},a.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},a.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var v,t=this.seekable(),s=this.tech_.currentTime();if(this.afterSeekableWindow_(t,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(v=t.end(t.length-1)),this.beforeSeekableWindow_(t,s)){var x=t.start(0);v=x+(x===t.end(0)?0:Ol)}if(typeof v<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+ou(t)+". Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0;for(var L=this.masterPlaylistController_.sourceUpdater_,ne=this.tech_.buffered(),Y=L.audioBuffer?L.audioBuffered():null,Te=L.videoBuffer?L.videoBuffered():null,je=this.media(),Ve=je.partTargetDuration?je.partTargetDuration:2*(je.targetDuration-Zs),qe=[Y,Te],Wt=0;Wt<qe.length;Wt++)if(qe[Wt]&&Xl(qe[Wt],s)<Ve)return!1;var Vn=Rl(ne,s);return 0!==Vn.length&&(v=Vn.start(0)+Ol,this.logger_("Buffered region starts ("+Vn.start(0)+")  just beyond seek point ("+s+"). Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0)},a.waiting_=function(){if(!this.techWaiting_()){var u=this.tech_.currentTime(),t=this.tech_.buffered(),s=_d(t,u);if(s.length&&u+3<=s.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(u),this.logger_("Stopped at "+u+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},a.techWaiting_=function(){var u=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(u,t)){var s=u.end(u.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var x=Rl(v,t);if(x.length>0){var L=x.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+L+", seeking to "+x.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*L,t),!0}return!1},a.afterSeekableWindow_=function(u,t,s,h){if(void 0===h&&(h=!1),!u.length)return!1;var v=u.end(u.length-1)+Ol;return!s.endList&&h&&(v=u.end(u.length-1)+3*s.targetDuration),t>v},a.beforeSeekableWindow_=function(u,t){return!!(u.length&&u.start(0)>0&&t<u.start(0)-this.liveRangeSafeTimeDelta)},a.videoUnderflow_=function(u){var t=u.videoBuffered,s=u.audioBuffered,h=u.currentTime;if(t){var v;if(t.length&&s.length){var S=_d(t,h-3),x=_d(t,h),L=_d(s,h);L.length&&!x.length&&S.length&&(v={start:S.end(0),end:L.end(0)})}else Rl(t,h).length||(v=this.gapFromVideoUnderflow_(t,h));return!!v&&(this.logger_("Encountered a gap in video from "+v.start+" to "+v.end+". Seeking to current time "+h),!0)}},a.skipTheGap_=function(u){var t=this.tech_.buffered(),s=this.tech_.currentTime(),h=Rl(t,s);this.cancelTimer_(),0!==h.length&&s===u&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",u,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+Zs),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},a.gapFromVideoUnderflow_=function(u,t){for(var s=function(a){if(a.length<2)return It.createTimeRanges();for(var o=[],u=1;u<a.length;u++){var t=a.end(u-1),s=a.start(u);o.push([t,s])}return It.createTimeRanges(o)}(u),h=0;h<s.length;h++){var v=s.start(h),S=s.end(h);if(t-v<4&&t-v>2)return{start:v,end:S}}return null},g}(),_y={errorInterval:30,getSource:function(a){return a(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Ng=function g(a,o){var u=0,t=0,s=It.mergeOptions(_y,o);a.ready(function(){a.trigger({type:"usage",name:"vhs-error-reload-initialized"}),a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){t&&a.currentTime(t)},v=function(Y){null!=Y&&(t=a.duration()!==1/0&&a.currentTime()||0,a.one("loadedmetadata",h),a.src(Y),a.trigger({type:"usage",name:"vhs-error-reload"}),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},S=function(){return Date.now()-u<1e3*s.errorInterval?(a.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void a.trigger({type:"usage",name:"hls-error-reload-canceled"})):s.getSource&&"function"==typeof s.getSource?(u=Date.now(),s.getSource.call(a,v)):void It.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},x=function ne(){a.off("loadedmetadata",h),a.off("error",S),a.off("dispose",ne)};a.on("error",S),a.on("dispose",x),a.reloadSourceOnError=function(Y){x(),g(a,Y)}},au={PlaylistLoader:ph,Playlist:Su,utils:Xv,STANDARD_PLAYLIST_SELECTOR:bg,INITIAL_PLAYLIST_SELECTOR:function(){var a=this,o=this.playlists.master.playlists.filter(Su.isEnabled);return Sd(o,function(t,s){return df(t,s)}),o.filter(function(t){return!!cf(a.playlists.master,t).video})[0]||null},lastBandwidthSelector:bg,movingAverageBandwidthSelector:function(a){var o=-1,u=-1;if(a<0||a>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&se().devicePixelRatio||1;return o<0&&(o=this.systemBandwidth,u=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==u&&(o=a*this.systemBandwidth+(1-a)*o,u=this.systemBandwidth),_g(this.playlists.master,o,parseInt(Jc(this.tech_.el(),"width"),10)*t,parseInt(Jc(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:df,comparePlaylistResolution:function(a,o){var u,t;return a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(u=a.attributes.RESOLUTION.width),u=u||se().Number.MAX_VALUE,o.attributes.RESOLUTION&&o.attributes.RESOLUTION.width&&(t=o.attributes.RESOLUTION.width),u===(t=t||se().Number.MAX_VALUE)&&a.attributes.BANDWIDTH&&o.attributes.BANDWIDTH?a.attributes.BANDWIDTH-o.attributes.BANDWIDTH:u-t},xhr:Zf()};Object.keys(_a).forEach(function(g){Object.defineProperty(au,g,{get:function(){return It.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),_a[g]},set:function(o){It.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),"number"!=typeof o||o<0?It.log.warn("value of Vhs."+g+" must be greater than or equal to 0"):_a[g]=o}})});var jg="videojs-vhs",op=function(a,o){for(var u=o.media(),t=-1,s=0;s<a.length;s++)if(a[s].id===u.id){t=s;break}a.selectedIndex_=t,a.trigger({selectedIndex:t,type:"change"})};au.canPlaySource=function(){return It.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ap=function(){if(!se().localStorage)return null;var a=se().localStorage.getItem(jg);if(!a)return null;try{return JSON.parse(a)}catch{return null}};au.supportsNativeHls=function(){if(!Ae()||!Ae().createElement)return!1;var g=Ae().createElement("video");return!!It.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(o){return/maybe|probably/i.test(g.canPlayType(o))})}(),au.supportsNativeDash=!!(Ae()&&Ae().createElement&&It.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ae().createElement("video").canPlayType("application/dash+xml")),au.supportsTypeNatively=function(g){return"hls"===g?au.supportsNativeHls:"dash"===g&&au.supportsNativeDash},au.isSupported=function(){return It.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Bg=function(g){function a(u,t,s){var h;if(h=g.call(this,t,It.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&It.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof s.initialBandwidth&&(h.options_.bandwidth=s.initialBandwidth),h.logger_=yl("VhsHandler"),t.options_&&t.options_.playerId){var v=It(t.options_.playerId);v.hasOwnProperty("hls")||Object.defineProperty(v,"hls",{get:function(){return It.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),ut(h)},configurable:!0}),v.hasOwnProperty("vhs")||Object.defineProperty(v,"vhs",{get:function(){return It.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),ut(h)},configurable:!0}),v.hasOwnProperty("dash")||Object.defineProperty(v,"dash",{get:function(){return It.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),ut(h)},configurable:!0}),h.player_=v}if(h.tech_=t,h.source_=u,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(Ae(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(S){var x=Ae().fullscreenElement||Ae().webkitFullscreenElement||Ae().mozFullScreenElement||Ae().msFullscreenElement;x&&x.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}$e(a,g);var o=a.prototype;return o.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var s=ap();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=_a.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===_a.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){typeof t.source_[h]<"u"&&(t.options_[h]=t.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},o.src=function(t,s){var h=this;if(t){this.setOptions_(),this.options_.src=function(a){return 0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=au,this.options_.sourceType=Wr(s),this.options_.seekTo=function(x){h.tech_.setCurrentTime(x)},this.options_.smoothQualityChange&&It.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Og(this.options_);var v=It.mergeOptions({liveRangeSafeTimeDelta:Ol},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new bh(v),this.masterPlaylistController_.on("error",function(){var x=It.players[h.tech_.options_.playerId],L=h.masterPlaylistController_.error;"object"!=typeof L||L.code?"string"==typeof L&&(L={message:L,code:3}):L.code=3,x.error(L)});var S=this.options_.experimentalBufferBasedABR?au.movingAverageBandwidthSelector(.55):au.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.bind(this),this.masterPlaylistController_.selectInitialPlaylist=au.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(L){this.masterPlaylistController_.selectPlaylist=L.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(L){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=L,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var L=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,ne=se().navigator.connection||se().navigator.mozConnection||se().navigator.webkitConnection,Y=1e7;if(this.options_.useNetworkInformationApi&&ne){var Te=1e3*ne.downlink*1e3;L=Te>=Y&&L>=Y?Math.max(L,Te):Te}return L},set:function(L){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=L,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){It.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Xu(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Xu(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(a){if(!se().localStorage)return!1;var o=ap();o=o?It.mergeOptions(o,a):a;try{se().localStorage.setItem(jg,JSON.stringify(o))}catch{return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(a){a.representations=function(){var o=a.masterPlaylistController_.master(),u=Wf(o)?a.masterPlaylistController_.getAudioTrackPlaylists_():o.playlists;return u?u.filter(function(t){return!vm(t)}).map(function(t,s){return new rv(a,t,t.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=se().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},o.createKeySessions_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(a){var o=a.player,u=a.sourceKeySystems,t=a.audioMedia,s=a.mainPlaylists;if(!o.eme.initializeMediaKeys)return Promise.resolve();var v=function(a,o){return a.reduce(function(u,t){if(!t.contentProtection)return u;var s=o.reduce(function(h,v){var S=t.contentProtection[v];return S&&S.pssh&&(h[v]={pssh:S.pssh}),h},{});return Object.keys(s).length&&u.push(s),u},[])}(t?s.concat([t]):s,Object.keys(u)),S=[],x=[];return v.forEach(function(L){x.push(new Promise(function(ne,Y){o.tech_.one("keysessioncreated",ne)})),S.push(new Promise(function(ne,Y){o.eme.initializeMediaKeys({keySystems:L},function(Te){Te?Y(Te):ne()})}))}),Promise.race([Promise.all(S),Promise.race(x)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(h){t.logger_("error while creating EME key session",h),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},o.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},o.setupEme_=function(){var t=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(a){var o=a.player,h=function(a,o,u){if(!a)return a;var t={};o&&o.attributes&&o.attributes.CODECS&&(t=Xc(cr(o.attributes.CODECS))),u&&u.attributes&&u.attributes.CODECS&&(t.audio=u.attributes.CODECS);var s=en(t.video),h=en(t.audio),v={};for(var S in a)v[S]={},h&&(v[S].audioContentType=h),s&&(v[S].videoContentType=s),o.contentProtection&&o.contentProtection[S]&&o.contentProtection[S].pssh&&(v[S].pssh=o.contentProtection[S].pssh),"string"==typeof a[S]&&(v[S].url=a[S]);return It.mergeOptions(a,v)}(a.sourceKeySystems,a.media,a.audioMedia);return!(!h||(o.currentSource().keySystems=h,h&&!o.eme&&(It.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});this.player_.tech_.on("keystatuschange",function(v){if("output-restricted"===v.status){var S=t.masterPlaylistController_.master();if(S&&S.playlists){var L,x=[];S.playlists.forEach(function(ne){ne&&ne.attributes&&ne.attributes.RESOLUTION&&ne.attributes.RESOLUTION.height>=720&&(!ne.excludeUntil||ne.excludeUntil<1/0)&&(ne.excludeUntil=1/0,x.push(ne))}),x.length&&((L=It.log).warn.apply(L,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(x)),t.masterPlaylistController_.fastQualityChange_())}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==It.browser.IE_VERSION&&h?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},o.setupQualityLevels_=function(){var t=this,s=It.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(a,o){o.representations().forEach(function(u){a.addQualityLevel(u)}),op(a,o.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){op(t.qualityLevels_,t.playlists)}))},a.version=function(){return{"@videojs/http-streaming":"2.14.3","mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},o.version=function(){return this.constructor.version()},o.canChangeType=function(){return qm.canChangeType()},o.play=function(){this.masterPlaylistController_.play()},o.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},o.duration=function(){return this.masterPlaylistController_.duration()},o.seekable=function(){return this.masterPlaylistController_.seekable()},o.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&se().URL.revokeObjectURL&&(se().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),g.prototype.dispose.call(this)},o.convertToProgramTime=function(t,s){return function(a){var o=a.playlist,u=a.time,t=void 0===u?void 0:u,s=a.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!o||void 0===t)return s({message:"getProgramTime: playlist and time must be provided"});var h=function(a,o){if(!o||!o.segments||0===o.segments.length)return null;for(var t,u=0,s=0;s<o.segments.length&&!(a<=(u=(t=o.segments[s]).videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:u+t.duration));s++);var h=o.segments[o.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>u){if(a>u+.25*h.duration)return null;t=h}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:u-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}}(t,o);if(!h)return s({message:"valid programTime was not found"});if("estimate"===h.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var v={mediaSeconds:t},S=function(a,o){if(!o.dateTimeObject)return null;var h=a-(o.videoTimingInfo.transmuxedPresentationStart+o.videoTimingInfo.transmuxerPrependedSeconds);return new Date(o.dateTimeObject.getTime()+1e3*h)}(t,h.segment);return S&&(v.programDateTime=S.toISOString()),s(null,v)}({playlist:this.masterPlaylistController_.media(),time:t,callback:s})},o.seekToProgramTime=function(t,s,h,v){return void 0===h&&(h=!0),void 0===v&&(v=2),Dm({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:v,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},a}(It.getComponent("Component")),Vg={name:"videojs-http-streaming",VERSION:"2.14.3",canHandleSource:function(a,o){void 0===o&&(o={});var u=It.mergeOptions(It.options,o);return Vg.canPlayType(a.type,u)},handleSource:function(a,o,u){void 0===u&&(u={});var t=It.mergeOptions(It.options,u);return o.vhs=new Bg(a,o,t),It.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return It.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),o.vhs},configurable:!0}),o.vhs.xhr=Zf(),o.vhs.src(a.src,a.type),o.vhs},canPlayType:function(a,o){void 0===o&&(o={});var u=It.mergeOptions(It.options,o),t=u.vhs,s=(t=void 0===t?{}:t).overrideNative,h=void 0===s?!It.browser.IS_ANY_SAFARI:s,v=u.hls,S=(v=void 0===v?{}:v).overrideNative,x=void 0!==S&&S,L=Wr(a);return L&&(!au.supportsTypeNatively(L)||x||h)?"maybe":""}};pr("avc1.4d400d,mp4a.40.2")&&It.getTech("Html5").registerSourceHandler(Vg,0),It.VhsHandler=Bg,Object.defineProperty(It,"HlsHandler",{get:function(){return It.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Bg},configurable:!0}),It.VhsSourceHandler=Vg,Object.defineProperty(It,"HlsSourceHandler",{get:function(){return It.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Vg},configurable:!0}),It.Vhs=au,Object.defineProperty(It,"Hls",{get:function(){return It.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),au},configurable:!0}),It.use||(It.registerComponent("Hls",au),It.registerComponent("Vhs",au)),It.options.vhs=It.options.vhs||{},It.options.hls=It.options.hls||{},It.getPlugin&&It.getPlugin("reloadSourceOnError")||(It.registerPlugin||It.plugin)("reloadSourceOnError",function(a){Ng(this,a)});const uv=It;var Hg=W(9905);let lv=(()=>{class g{constructor(o){this.datePipe=o}transform(o){if(!o)return"";const u=o.toDate();return this.datePipe.transform(u,"mediumDate")||""}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Pe.uU,16))},g.\u0275pipe=k.Yjl({name:"fbTimestamp",type:g,pure:!0}),g})();const Sy=function(g){return["/","clip",g]};function wy(g,a){if(1&g&&(k.TgZ(0,"a",2),k._UZ(1,"img",3),k.TgZ(2,"div",4)(3,"div",5)(4,"div",6),k.O4$(),k.TgZ(5,"svg",7),k._UZ(6,"path",8),k.qZA()()()(),k.kcU(),k.TgZ(7,"div",9)(8,"h2",10),k._uU(9),k.qZA(),k.TgZ(10,"p",11),k._uU(11),k.TgZ(12,"span",12),k._uU(13),k.ALo(14,"fbTimestamp"),k.qZA()()()()),2&g){const o=a.$implicit;k.Q6J("routerLink",k.VKq(7,Sy,o.docID)),k.xp6(1),k.Q6J("src",o.screenshotURL,k.LSH),k.xp6(8),k.Oqu(o.title),k.xp6(2),k.hij(" ",o.displayName," \xb7 "),k.xp6(2),k.Oqu(k.lcZ(14,5,o.timestamp))}}let cv=(()=>{class g{constructor(o){this.clipService=o,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:u,offsetHeight:t}=document.documentElement,{innerHeight:s}=window;Math.ceil(u)+s===t&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Hg.Y))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[k._Bn([Pe.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(o,u){1&o&&(k.TgZ(0,"div",0),k.YNc(1,wy,15,9,"a",1),k.qZA()),2&o&&(k.xp6(1),k.Q6J("ngForOf",u.clipService.pageClips))},dependencies:[Pe.sg,ee.yS,lv]}),g})();const __=["videoPlayer"];let up=(()=>{class g{constructor(o){this.route=o}ngOnInit(){this.player=uv(this.target?.nativeElement),this.route.data.subscribe(o=>{this.clip=o.clip}),this.player.src({src:this.clip?.clipURL||"",type:"video/mp4"})}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(ee.gz))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-clip"]],viewQuery:function(o,u){if(1&o&&k.Gf(__,7),2&o){let t;k.iGM(t=k.CRH())&&(u.target=t.first)}},features:[k._Bn([Pe.uU])],decls:17,vars:6,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],["type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"]],template:function(o,u){1&o&&(k.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),k._uU(3),k.qZA(),k.TgZ(4,"div",3),k._uU(5),k.TgZ(6,"span"),k._uU(7),k.ALo(8,"fbTimestamp"),k.qZA()(),k.TgZ(9,"div",4)(10,"video",5,6),k._UZ(12,"source",7),k.qZA()()()(),k.TgZ(13,"div",8)(14,"h2",9),k._uU(15,"More Clips"),k.qZA(),k._UZ(16,"app-clips-list",10),k.qZA()),2&o&&(k.xp6(3),k.Oqu(null==u.clip?null:u.clip.title),k.xp6(2),k.hij(" Uploaded By ",null==u.clip?null:u.clip.displayName," "),k.xp6(2),k.Oqu(k.lcZ(8,4,null==u.clip?null:u.clip.timestamp)),k.xp6(9),k.Q6J("scrollable",!1))},dependencies:[cv,lv],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129, 140, 248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2}),g})(),dv=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(o,u){1&o&&(k.TgZ(0,"section",0)(1,"video",1),k._UZ(2,"source",2),k.qZA(),k._UZ(3,"div",3),k.TgZ(4,"div",4),k._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),k.qZA(),k.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),k._uU(13,"Clip it and ship it!"),k.qZA(),k.TgZ(14,"p"),k._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),k.qZA()()()(),k.TgZ(16,"section",9)(17,"h1",10),k._uU(18," Latest "),k.qZA(),k._UZ(19,"app-clips-list"),k.qZA())},dependencies:[cv]}),g})(),Cy=(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(o,u){1&o&&(k.TgZ(0,"div",0)(1,"span",1),k._uU(2,"404"),k.qZA(),k._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),k.qZA(),k.TgZ(15,"div",14)(16,"h2",15),k._uU(17,"Page not found"),k.qZA(),k.TgZ(18,"p"),k._uU(19,"Looks like the page you're looking for is gone or doesn't exist."),k.qZA()())}}),g})();const lp=[{path:"",component:dv},{path:"about",component:Ue},{path:"clip/:id",component:up,resolve:{clip:Hg.Y}},{path:"",loadChildren:()=>W.e(829).then(W.bind(W,1829)).then(g=>g.VideoModule)},{path:"**",component:Cy}];let $g=(()=>{class g{}return g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=k.oAB({type:g}),g.\u0275inj=k.cJS({imports:[ee.Bz.forRoot(lp),ee.Bz]}),g})();var Nc=W(5861),Zi=W(4004),cp=W(4986),b_=W(7272),Gg=W(5698),yf=W(4482),hv=W(5403),uo=W(5032),Wa=W(9718),dp=W(5577);function hp(g,a){return a?o=>(0,b_.z)(a.pipe((0,Gg.q)(1),function Ga(){return(0,yf.e)((g,a)=>{g.subscribe((0,hv.x)(a,uo.Z))})}()),o.pipe(hp(g))):(0,dp.z)((o,u)=>g(o,u).pipe((0,Gg.q)(1),(0,Wa.h)(o)))}var Pd=W(9751),xy=W(3532);var T_=W(9300),zg=W(3900),E_=W(9646),pv=W(1205),Iy=W(7566);let Dy=(()=>{class g{constructor(o,u,t,s){this.auth=o,this.db=u,this.router=t,this.route=s,this.redirect=!1,this.usersCollection=u.collection("users"),o.user.subscribe(console.log),this.isAuthenticated$=o.user.pipe((0,Zi.U)(h=>!!h)),this.isAuthenticatedWithDelay$=o.user.pipe((0,Zi.U)(h=>!!h),function Wg(g,a=cp.z){const o=function fv(g=0,a,o=cp.P){let u=-1;return null!=a&&((0,xy.K)(a)?o=a:u=a),new Pd.y(t=>{let s=function fp(g){return g instanceof Date&&!isNaN(g)}(g)?+g-o.now():g;s<0&&(s=0);let h=0;return o.schedule(function(){t.closed||(t.next(h++),0<=u?this.schedule(void 0,u):t.complete())},s)})}(g,a);return hp(()=>o)}(2e3)),this.router.events.pipe((0,T_.h)(h=>h instanceof ee.m2),(0,Zi.U)(h=>this.route.firstChild),(0,zg.w)(h=>h?.data??(0,E_.of)({}))).subscribe(h=>{this.redirect=h.authOnly??!1})}createUser(o){var u=this;return(0,Nc.Z)(function*(){if(!o.password)throw new Error("password not provided!");const t=yield u.auth.createUserWithEmailAndPassword(o.email,o.password);if(!t.user)throw new Error("user not found!");yield u.usersCollection.doc(t.user.uid).set({name:o.name,email:o.email,age:o.age,phoneNumber:o.phoneNumber}),yield t.user.updateProfile({displayName:o.name})})()}logout(o){var u=this;return(0,Nc.Z)(function*(){o&&o.preventDefault(),yield u.auth.signOut(),u.redirect&&(yield u.router.navigateByUrl("/"))})()}}return g.\u0275fac=function(o){return new(o||g)(k.LFG(pv.zQ),k.LFG(Iy.ST),k.LFG(ee.F0),k.LFG(ee.gz))},g.\u0275prov=k.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var Ay=W(1609),ky=W(3446);const gv=["*"];let qg=(()=>{class g{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:gv,decls:2,vars:2,template:function(o,u){1&o&&(k.F$t(),k.TgZ(0,"div"),k.Hsn(1),k.qZA()),2&o&&k.ekj("hidden",!u.active)}}),g})();const pp=function(g,a){return{"hover:text-indigo-400":g,"hover:text-white bg-indigo-400":a}};function mv(g,a){if(1&g){const o=k.EpF();k.TgZ(0,"li",2)(1,"a",3),k.NdJ("click",function(){const s=k.CHM(o).$implicit,h=k.oxw();return k.KtG(h.selectTab(s))}),k._uU(2),k.qZA()()}if(2&g){const o=a.$implicit;k.xp6(1),k.Q6J("ngClass",k.WLB(2,pp,!o.active,o.active)),k.xp6(1),k.Oqu(o.tabTitle)}}const gp=["*"];let Kg=(()=>{class g{constructor(){}ngAfterContentInit(){console.log(this.tabs);const o=this.tabs?.filter(u=>u.active);(!o||0===o.length)&&this.selectTab(this.tabs.first)}selectTab(o){return this.tabs?.forEach(u=>u.active=!1),o.active=!0,!1}}return g.\u0275fac=function(o){return new(o||g)},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-tabs-container"]],contentQueries:function(o,u,t){if(1&o&&k.Suo(t,qg,4),2&o){let s;k.iGM(s=k.CRH())&&(u.tabs=s)}},ngContentSelectors:gp,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(o,u){1&o&&(k.F$t(),k.TgZ(0,"ul",0),k.YNc(1,mv,3,5,"li",1),k.qZA(),k.Hsn(2)),2&o&&(k.xp6(1),k.Q6J("ngForOf",u.tabs))},dependencies:[Pe.mk,Pe.sg]}),g})();var Zg=W(8549),as=W(4006);function Yg(g,a){if(1&g&&(k.TgZ(0,"app-alert",11),k._uU(1),k.qZA()),2&g){const o=k.oxw();k.Q6J("color",o.alertColor),k.xp6(1),k.hij(" ",o.alertMsg,"\n")}}function vv(g,a){1&g&&(k.TgZ(0,"p",12),k._uU(1," Email is invalid! "),k.qZA())}function yv(g,a){1&g&&(k.TgZ(0,"p",12),k._uU(1," Passowrd is invalid! "),k.qZA())}let mp=(()=>{class g{constructor(o){this.auth=o,this.showAlert=!1,this.alertMsg="Please wait!",this.alertColor="blue",this.inSubmission=!1,this.credentials={email:"",password:""}}ngOnInit(){}login(){var o=this;return(0,Nc.Z)(function*(){o.inSubmission=!0,o.alertMsg="Please wait, Login in progress!",o.alertColor="blue",o.showAlert=!0;try{yield o.auth.signInWithEmailAndPassword(o.credentials.email,o.credentials.password)}catch{return o.alertMsg="Incorrect username/password!",o.alertColor="red",void(o.inSubmission=!1)}o.alertMsg="Login Successfully!",o.alertColor="green"})()}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(pv.zQ))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["name","email","type","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400","disabled:cursor-not-allowed",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(o,u){if(1&o&&(k.YNc(0,Yg,2,2,"app-alert",0),k.TgZ(1,"form",1,2),k.NdJ("ngSubmit",function(){return u.login()}),k.TgZ(3,"div",3)(4,"label",4),k._uU(5,"Email"),k.qZA(),k.TgZ(6,"input",5,6),k.NdJ("ngModelChange",function(s){return u.credentials.email=s}),k.qZA(),k.YNc(8,vv,2,0,"p",7),k.qZA(),k.TgZ(9,"div",3)(10,"label",4),k._uU(11,"Password"),k.qZA(),k.TgZ(12,"input",8,9),k.NdJ("ngModelChange",function(s){return u.credentials.password=s}),k.qZA(),k.YNc(14,yv,2,0,"p",7),k.qZA(),k.TgZ(15,"button",10),k._uU(16," Submit "),k.qZA()()),2&o){const t=k.MAs(2),s=k.MAs(7),h=k.MAs(13);k.Q6J("ngIf",u.showAlert),k.xp6(6),k.Q6J("ngModel",u.credentials.email),k.xp6(2),k.Q6J("ngIf",s.errors&&s.touched&&s.dirty),k.xp6(4),k.Q6J("ngModel",u.credentials.password),k.xp6(2),k.Q6J("ngIf",h.errors&&h.touched&&h.dirty),k.xp6(1),k.Q6J("disabled",t.invalid||u.inSubmission)}},dependencies:[Pe.O5,Zg.w,as._Y,as.Fj,as.JJ,as.JL,as.Q7,as.c5,as.On,as.F]}),g})();class Bl{static match(a,o){return u=>{const t=u.get(a),s=u.get(o);if(!t||!s)return console.error("Form controls cannot be found in the formgorup"),{controlNotFound:!1};const h=t.value===s.value?null:{noMatch:!0};return s.setErrors(h),h}}}let My=(()=>{class g{constructor(o){this.auth=o,this.validate=u=>this.auth.fetchSignInMethodsForEmail(u.value).then(t=>t.length?{emailTaken:!0}:null)}}return g.\u0275fac=function(o){return new(o||g)(k.LFG(pv.zQ))},g.\u0275prov=k.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var vp=W(235);function S_(g,a){if(1&g&&(k.TgZ(0,"app-alert",11),k._uU(1),k.qZA()),2&g){const o=k.oxw();k.Q6J("color",o.alertColor),k.xp6(1),k.hij(" ",o.alertMsg,"\n")}}let w_=(()=>{class g{constructor(o,u){this.auth=o,this.emailTaken=u,this.showAlert=!1,this.alertMsg="Please wait! Your account is being created.",this.alertColor="blue",this.inSubmission=!1,this.name=new as.NI("",[as.kI.required,as.kI.minLength(3)]),this.email=new as.NI("",[as.kI.required,as.kI.email],[this.emailTaken.validate]),this.age=new as.NI(null,[as.kI.required,as.kI.min(18),as.kI.max(120)]),this.password=new as.NI("",[as.kI.required,as.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new as.NI("",[as.kI.required]),this.phoneNumber=new as.NI("",[as.kI.required,as.kI.minLength(8),as.kI.minLength(8)]),this.registerForm=new as.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Bl.match("password","confirm_password")])}register(){var o=this;return(0,Nc.Z)(function*(){o.showAlert=!0,o.alertMsg="Please wait! Your account is being created.",o.alertColor="blue",o.inSubmission=!0;try{yield o.auth.createUser(o.registerForm.value),o.alertMsg="Success! Your account has been created.",o.alertColor="green"}catch(u){return console.error(u),o.alertMsg="An unexpected error occurred. Please try again later.",o.alertColor="red",void(o.inSubmission=!1)}})()}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Dy),k.Y36(My))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["format","0000-0000","placeholder","Enter Phone Number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(o,u){1&o&&(k.YNc(0,S_,2,2,"app-alert",0),k.TgZ(1,"form",1),k.NdJ("ngSubmit",function(){return u.register()}),k.TgZ(2,"div",2)(3,"label",3),k._uU(4,"Name"),k.qZA(),k._UZ(5,"app-input",4),k.qZA(),k.TgZ(6,"div",2)(7,"label",3),k._uU(8,"Email"),k.qZA(),k._UZ(9,"app-input",5),k.qZA(),k.TgZ(10,"div",2)(11,"label",3),k._uU(12,"Age"),k.qZA(),k._UZ(13,"app-input",6),k.qZA(),k.TgZ(14,"div",2)(15,"label",3),k._uU(16,"Password"),k.qZA(),k._UZ(17,"app-input",7),k.qZA(),k.TgZ(18,"div",2)(19,"label",3),k._uU(20,"Confirm Password"),k.qZA(),k._UZ(21,"app-input",8),k.qZA(),k.TgZ(22,"div",2)(23,"label",3),k._uU(24,"Phone Number"),k.qZA(),k._UZ(25,"app-input",9),k.qZA(),k.TgZ(26,"button",10),k._uU(27," Submit "),k.qZA()()),2&o&&(k.Q6J("ngIf",u.showAlert),k.xp6(1),k.Q6J("formGroup",u.registerForm),k.xp6(4),k.Q6J("control",u.name),k.xp6(4),k.Q6J("control",u.email),k.xp6(4),k.Q6J("control",u.age),k.xp6(4),k.Q6J("control",u.password),k.xp6(4),k.Q6J("control",u.confirm_password),k.xp6(4),k.Q6J("control",u.phoneNumber),k.xp6(1),k.Q6J("disabled",u.registerForm.invalid||u.inSubmission))},dependencies:[Pe.O5,vp.a,Zg.w,as._Y,as.JL,as.sg]}),g})(),Qg=(()=>{class g{constructor(o){this.modal=o}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Ay.Z))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(o,u){1&o&&(k.TgZ(0,"app-modal",0)(1,"p",1),k._uU(2,"Your Account"),k.qZA(),k.TgZ(3,"app-tabs-container")(4,"app-tab",2),k._UZ(5,"app-login"),k.qZA(),k.TgZ(6,"app-tab",3),k._UZ(7,"app-register"),k.qZA()()())},dependencies:[ky.z,Kg,qg,mp,w_]}),g})();function C_(g,a){if(1&g){const o=k.EpF();k.TgZ(0,"li")(1,"a",15),k.NdJ("click",function(t){k.CHM(o);const s=k.oxw();return k.KtG(s.openModal(t))}),k._uU(2,"Login / Register"),k.qZA()()}}const nc=function(){return{exact:!0}},yp=function(){return{sort:"1"}};function Cu(g,a){if(1&g){const o=k.EpF();k.TgZ(0,"li")(1,"a",16),k._uU(2,"Manage"),k.qZA()(),k.TgZ(3,"li")(4,"a",17),k._uU(5,"Upload"),k.qZA()(),k.TgZ(6,"li")(7,"a",15),k.NdJ("click",function(t){k.CHM(o);const s=k.oxw();return k.KtG(s.auth.logout(t))}),k._uU(8,"Logout"),k.qZA()()}2&g&&(k.xp6(1),k.Q6J("routerLinkActiveOptions",k.DdM(2,nc))("queryParams",k.DdM(3,yp)))}let Th=(()=>{class g{constructor(o,u){this.modal=o,this.auth=u,this.isAuthenticated=!1}ngOnInit(){}openModal(o){o.preventDefault(),this.modal.toggleModal("auth")}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Ay.Z),k.Y36(Dy))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2"]],template:function(o,u){if(1&o&&(k.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),k._uU(3,"Clipz"),k.qZA(),k.TgZ(4,"div",3)(5,"ul",4),k.YNc(6,C_,3,0,"li",5),k.ALo(7,"async"),k.YNc(8,Cu,9,4,"ng-template",null,6,k.W1O),k.TgZ(10,"li",7)(11,"a",8),k._uU(12,"About"),k.qZA()()(),k.TgZ(13,"ul",9)(14,"li")(15,"a",10),k._UZ(16,"img",11),k.TgZ(17,"span",12),k._uU(18,"English"),k.qZA()()(),k.TgZ(19,"li",13)(20,"a",10),k._UZ(21,"img",14),k.TgZ(22,"span",12),k._uU(23,"French"),k.qZA()()()()()()()),2&o){const t=k.MAs(9);k.xp6(6),k.Q6J("ngIf",!k.lcZ(7,2,u.auth.isAuthenticated$))("ngIfElse",t)}},dependencies:[Pe.O5,ee.yS,ee.Od,Pe.Ov]}),g})();function Xg(g,a){1&g&&k._UZ(0,"app-auth-modal")}let nl=(()=>{class g{constructor(o){this.auth=o,this.title="clips"}}return g.\u0275fac=function(o){return new(o||g)(k.Y36(Dy))},g.\u0275cmp=k.Xpm({type:g,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(o,u){1&o&&(k._UZ(0,"app-nav")(1,"router-outlet"),k.YNc(2,Xg,1,0,"app-auth-modal",0),k.ALo(3,"async")),2&o&&(k.xp6(2),k.Q6J("ngIf",!k.lcZ(3,1,u.auth.isAuthenticatedWithDelay$)))},dependencies:[Pe.O5,Qg,ee.lC,Th,Pe.Ov]}),g})();var Jg=W(4466);let _f=(()=>{class g{}return g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=k.oAB({type:g}),g.\u0275inj=k.cJS({imports:[Pe.ez,Jg.m,as.UX,as.u5]}),g})();var Ps=W(2011),_p=W(2084);const Eh_firebase={apiKey:"AIzaSyCjEzZTrxNx1IiS13ARClnS-JxYWRFG0Wo",authDomain:"clips-c9d34.firebaseapp.com",projectId:"clips-c9d34",storageBucket:"clips-c9d34.appspot.com",appId:"1:785206664667:web:cd303dc59086ff3b9a9bfe"};let lo=(()=>{class g{}return g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=k.oAB({type:g,bootstrap:[nl]}),g.\u0275inj=k.cJS({imports:[E.b2,_f,Jg.m,Ps.hO.initializeApp(Eh_firebase),pv.ww,Iy.yb,_p.TE,$g]}),g})();var Od=W(127);W(1277),(0,k.G48)(),Od.Z.initializeApp(Eh_firebase);let Sh=!1;Od.Z.auth().onAuthStateChanged(()=>{Sh||E.q6().bootstrapModule(lo).catch(g=>console.error(g)),Sh=!0})},3992:(Yt,at,W)=>{"use strict";var E=W(9226);Yt.exports=function(Pe,Le){return void 0===Le&&(Le=!1),function(se,Ke,Ae){if(se)Pe(se);else if(Ke.statusCode>=400&&Ke.statusCode<=599){var Ie=Ae;if(Le)if(E.TextDecoder){var Re=function ee(Ue){return void 0===Ue&&(Ue=""),Ue.toLowerCase().split(";").reduce(function(Pe,Le){var se=Le.split("="),Ae=se[1];return"charset"===se[0].trim()?Ae.trim():Pe},"utf-8")}(Ke.headers&&Ke.headers["content-type"]);try{Ie=new TextDecoder(Re).decode(Ae)}catch{}}else Ie=String.fromCharCode.apply(null,new Uint8Array(Ae));Pe({cause:Ie})}else Pe(null,Ae)}}},745:(Yt,at,W)=>{"use strict";var E=W(9226),k=W(434),ee=W(2703);function se(Se,ut,mt){var $e=Se;return ee(ut)?(mt=ut,"string"==typeof Se&&($e={uri:Se})):$e=k({},ut,{uri:Se}),$e.callback=mt,$e}function Ke(Se,ut,mt){return Ae(ut=se(Se,ut,mt))}function Ae(Se){if(typeof Se.callback>"u")throw new Error("callback argument missing");var ut=!1,mt=function(Ge,ct,St){ut||(ut=!0,Se.callback(Ge,ct,St))};function jt(){var Me=void 0;if(Me=yt.response?yt.response:yt.responseText||function Ie(Se){try{if("document"===Se.responseType)return Se.responseXML;if(""===Se.responseType&&(!Se.responseXML||"parsererror"!==Se.responseXML.documentElement.nodeName))return Se.responseXML}catch{}return null}(yt),he)try{Me=JSON.parse(Me)}catch{}return Me}function Be(Me){return clearTimeout(fe),Me instanceof Error||(Me=new Error(""+(Me||"Unknown XMLHttpRequest Error"))),Me.statusCode=0,mt(Me,Fe)}function ze(){if(!Z){var Me;clearTimeout(fe);var Ge=Fe,ct=null;return 0!==(Me=Se.useXDR&&void 0===yt.status?200:1223===yt.status?204:yt.status)?(Ge={body:jt(),statusCode:Me,method:We,headers:{},url:xe,rawRequest:yt},yt.getAllResponseHeaders&&(Ge.headers=function(ut){var mt={};return ut&&ut.trim().split("\n").forEach(function($e){var jt=$e.indexOf(":"),Be=$e.slice(0,jt).trim().toLowerCase(),ze=$e.slice(jt+1).trim();typeof mt[Be]>"u"?mt[Be]=ze:Array.isArray(mt[Be])?mt[Be].push(ze):mt[Be]=[mt[Be],ze]}),mt}(yt.getAllResponseHeaders()))):ct=new Error("Internal XMLHttpRequest Error"),mt(ct,Ge,Ge.body)}}var yt=Se.xhr||null;yt||(yt=Se.cors||Se.useXDR?new Ke.XDomainRequest:new Ke.XMLHttpRequest);var le,Z,fe,xe=yt.url=Se.uri||Se.url,We=yt.method=Se.method||"GET",_t=Se.body||Se.data,Et=yt.headers=Se.headers||{},H=!!Se.sync,he=!1,Fe={body:void 0,headers:{},statusCode:0,method:We,url:xe,rawRequest:yt};if("json"in Se&&!1!==Se.json&&(he=!0,Et.accept||Et.Accept||(Et.Accept="application/json"),"GET"!==We&&"HEAD"!==We&&(Et["content-type"]||Et["Content-Type"]||(Et["Content-Type"]="application/json"),_t=JSON.stringify(!0===Se.json?_t:Se.json))),yt.onreadystatechange=function $e(){4===yt.readyState&&setTimeout(ze,0)},yt.onload=ze,yt.onerror=Be,yt.onprogress=function(){},yt.onabort=function(){Z=!0},yt.ontimeout=Be,yt.open(We,xe,!H,Se.username,Se.password),H||(yt.withCredentials=!!Se.withCredentials),!H&&Se.timeout>0&&(fe=setTimeout(function(){if(!Z){Z=!0,yt.abort("timeout");var Me=new Error("XMLHttpRequest timeout");Me.code="ETIMEDOUT",Be(Me)}},Se.timeout)),yt.setRequestHeader)for(le in Et)Et.hasOwnProperty(le)&&yt.setRequestHeader(le,Et[le]);else if(Se.headers&&!function Le(Se){for(var ut in Se)if(Se.hasOwnProperty(ut))return!1;return!0}(Se.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Se&&(yt.responseType=Se.responseType),"beforeSend"in Se&&"function"==typeof Se.beforeSend&&Se.beforeSend(yt),yt.send(_t||null),yt}Ke.httpHandler=W(3992),Yt.exports=Ke,Yt.exports.default=Ke,Ke.XMLHttpRequest=E.XMLHttpRequest||function Re(){},Ke.XDomainRequest="withCredentials"in new Ke.XMLHttpRequest?Ke.XMLHttpRequest:E.XDomainRequest,function Pe(Se,ut){for(var mt=0;mt<Se.length;mt++)ut(Se[mt])}(["get","put","post","patch","head","delete"],function(Se){Ke["delete"===Se?"del":Se]=function(ut,mt,$e){return(mt=se(ut,mt,$e)).method=Se.toUpperCase(),Ae(mt)}})},9401:(Yt,at)=>{"use strict";function E(Ue,Pe){return void 0===Pe&&(Pe=Object),Pe&&"function"==typeof Pe.freeze?Pe.freeze(Ue):Ue}var k=E({HTML:"text/html",isHTML:function(Ue){return Ue===k.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ee=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(Ue){return Ue===ee.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});at.find=function W(Ue,Pe,Le){if(void 0===Le&&(Le=Array.prototype),Ue&&"function"==typeof Le.find)return Le.find.call(Ue,Pe);for(var se=0;se<Ue.length;se++)if(Object.prototype.hasOwnProperty.call(Ue,se)){var Ke=Ue[se];if(Pe.call(void 0,Ke,se,Ue))return Ke}},at.freeze=E,at.MIME_TYPE=k,at.NAMESPACE=ee},1991:(Yt,at,W)=>{var k=W(9401),ee=W(6853),Ue=W(4436),Pe=W(8702),Le=ee.DOMImplementation,se=k.NAMESPACE,Ke=Pe.ParseError,Ae=Pe.XMLReader;function Ie(Be){this.options=Be||{locator:{}}}function Se(){this.cdata=!1}function ut(Be,ze){ze.lineNumber=Be.lineNumber,ze.columnNumber=Be.columnNumber}function mt(Be){if(Be)return"\n@"+(Be.systemId||"")+"#[line:"+Be.lineNumber+",col:"+Be.columnNumber+"]"}function $e(Be,ze,yt){return"string"==typeof Be?Be.substr(ze,yt):Be.length>=ze+yt||ze?new java.lang.String(Be,ze,yt)+"":Be}function jt(Be,ze){Be.currentElement?Be.currentElement.appendChild(ze):Be.doc.appendChild(ze)}Ie.prototype.parseFromString=function(Be,ze){var yt=this.options,le=new Ae,Z=yt.domBuilder||new Se,xe=yt.errorHandler,We=yt.locator,_t=yt.xmlns||{},Et=/\/x?html?$/.test(ze),H=Et?Ue.HTML_ENTITIES:Ue.XML_ENTITIES;return We&&Z.setDocumentLocator(We),le.errorHandler=function Re(Be,ze,yt){if(!Be){if(ze instanceof Se)return ze;Be=ze}var le={},Z=Be instanceof Function;function xe(We){var _t=Be[We];!_t&&Z&&(_t=2==Be.length?function(Et){Be(We,Et)}:Be),le[We]=_t&&function(Et){_t("[xmldom "+We+"]\t"+Et+mt(yt))}||function(){}}return yt=yt||{},xe("warning"),xe("error"),xe("fatalError"),le}(xe,Z,We),le.domBuilder=yt.domBuilder||Z,Et&&(_t[""]=se.HTML),_t.xml=_t.xml||se.XML,Be&&"string"==typeof Be?le.parse(Be,_t,H):le.errorHandler.error("invalid doc source"),Z.doc},Se.prototype={startDocument:function(){this.doc=(new Le).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Be,ze,yt,le){var Z=this.doc,xe=Z.createElementNS(Be,yt||ze),We=le.length;jt(this,xe),this.currentElement=xe,this.locator&&ut(this.locator,xe);for(var _t=0;_t<We;_t++){Be=le.getURI(_t);var Et=le.getValue(_t),H=(yt=le.getQName(_t),Z.createAttributeNS(Be,yt));this.locator&&ut(le.getLocator(_t),H),H.value=H.nodeValue=Et,xe.setAttributeNode(H)}},endElement:function(Be,ze,yt){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Be,ze){},endPrefixMapping:function(Be){},processingInstruction:function(Be,ze){var yt=this.doc.createProcessingInstruction(Be,ze);this.locator&&ut(this.locator,yt),jt(this,yt)},ignorableWhitespace:function(Be,ze,yt){},characters:function(Be,ze,yt){if(Be=$e.apply(this,arguments)){if(this.cdata)var le=this.doc.createCDATASection(Be);else le=this.doc.createTextNode(Be);this.currentElement?this.currentElement.appendChild(le):/^\s*$/.test(Be)&&this.doc.appendChild(le),this.locator&&ut(this.locator,le)}},skippedEntity:function(Be){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Be){(this.locator=Be)&&(Be.lineNumber=0)},comment:function(Be,ze,yt){Be=$e.apply(this,arguments);var le=this.doc.createComment(Be);this.locator&&ut(this.locator,le),jt(this,le)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Be,ze,yt){var le=this.doc.implementation;if(le&&le.createDocumentType){var Z=le.createDocumentType(Be,ze,yt);this.locator&&ut(this.locator,Z),jt(this,Z),this.doc.doctype=Z}},warning:function(Be){console.warn("[xmldom warning]\t"+Be,mt(this.locator))},error:function(Be){console.error("[xmldom error]\t"+Be,mt(this.locator))},fatalError:function(Be){throw new Ke(Be,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Be){Se.prototype[Be]=function(){return null}}),at.DOMParser=Ie},6853:(Yt,at,W)=>{var E=W(9401),k=E.find,ee=E.NAMESPACE;function Ue(ye){return""!==ye}function Le(ye,K){return ye.hasOwnProperty(K)||(ye[K]=!0),ye}function se(ye){if(!ye)return[];var K=function Pe(ye){return ye?ye.split(/[\t\n\f\r ]+/).filter(Ue):[]}(ye);return Object.keys(K.reduce(Le,{}))}function Ae(ye,K){for(var ae in ye)Object.prototype.hasOwnProperty.call(ye,ae)&&(K[ae]=ye[ae])}function Ie(ye,K){var ae=ye.prototype;if(!(ae instanceof K)){let Ze=function(){};Ze.prototype=K.prototype,Ze=new Ze,Ae(ae,Ze),ye.prototype=ae=Ze}ae.constructor!=ye&&("function"!=typeof ye&&console.error("unknown Class:"+ye),ae.constructor=ye)}var Re={},Se=Re.ELEMENT_NODE=1,ut=Re.ATTRIBUTE_NODE=2,mt=Re.TEXT_NODE=3,$e=Re.CDATA_SECTION_NODE=4,jt=Re.ENTITY_REFERENCE_NODE=5,Be=Re.ENTITY_NODE=6,ze=Re.PROCESSING_INSTRUCTION_NODE=7,yt=Re.COMMENT_NODE=8,le=Re.DOCUMENT_NODE=9,Z=Re.DOCUMENT_TYPE_NODE=10,xe=Re.DOCUMENT_FRAGMENT_NODE=11,We=Re.NOTATION_NODE=12,_t={},Et={},fe=(_t.INDEX_SIZE_ERR=(Et[1]="Index size error",1),_t.DOMSTRING_SIZE_ERR=(Et[2]="DOMString size error",2),_t.HIERARCHY_REQUEST_ERR=(Et[3]="Hierarchy request error",3)),St=(_t.WRONG_DOCUMENT_ERR=(Et[4]="Wrong document",4),_t.INVALID_CHARACTER_ERR=(Et[5]="Invalid character",5),_t.NO_DATA_ALLOWED_ERR=(Et[6]="No data allowed",6),_t.NO_MODIFICATION_ALLOWED_ERR=(Et[7]="No modification allowed",7),_t.NOT_FOUND_ERR=(Et[8]="Not found",8)),Pt=(_t.NOT_SUPPORTED_ERR=(Et[9]="Not supported",9),_t.INUSE_ATTRIBUTE_ERR=(Et[10]="Attribute in use",10));function Bt(ye,K){if(K instanceof Error)var ae=K;else ae=this,Error.call(this,Et[ye]),this.message=Et[ye],Error.captureStackTrace&&Error.captureStackTrace(this,Bt);return ae.code=ye,K&&(this.message=this.message+": "+K),ae}function _n(){}function Jt(ye,K){this._node=ye,this._refresh=K,qn(this)}function qn(ye){var K=ye._node._inc||ye._node.ownerDocument._inc;if(ye._inc!=K){var ae=ye._refresh(ye._node);$r(ye,"length",ae.length),Ae(ae,ye),ye._inc=K}}function Qn(){}function wr(ye,K){for(var ae=ye.length;ae--;)if(ye[ae]===K)return ae}function vr(ye,K,ae,ve){if(ve?K[wr(K,ve)]=ae:K[K.length++]=ae,ye){ae.ownerElement=ye;var Ze=ye.ownerDocument;Ze&&(ve&&pr(Ze,ye,ve),function en(ye,K,ae){ye&&ye._inc++,ae.namespaceURI===ee.XMLNS&&(K._nsMap[ae.prefix?ae.localName:""]=ae.value)}(Ze,ye,ae))}}function Ci(ye,K,ae){var ve=wr(K,ae);if(!(ve>=0))throw new Bt(St,new Error(ye.tagName+"@"+ae));for(var Ze=K.length-1;ve<Ze;)K[ve]=K[++ve];if(K.length=Ze,ye){var xt=ye.ownerDocument;xt&&(pr(xt,ye,ae),ae.ownerElement=null)}}function cr(){}function tr(){}function Nr(ye){return("<"==ye?"&lt;":">"==ye&&"&gt;")||"&"==ye&&"&amp;"||'"'==ye&&"&quot;"||"&#"+ye.charCodeAt()+";"}function ti(ye,K){if(K(ye))return!0;if(ye=ye.firstChild)do{if(ti(ye,K))return!0}while(ye=ye.nextSibling)}function yr(){this.ownerDocument=this}function pr(ye,K,ae,ve){ye&&ye._inc++,ae.namespaceURI===ee.XMLNS&&delete K._nsMap[ae.prefix?ae.localName:""]}function Or(ye,K,ae){if(ye&&ye._inc){ye._inc++;var ve=K.childNodes;if(ae)ve[ve.length++]=ae;else{for(var Ze=K.firstChild,xt=0;Ze;)ve[xt++]=Ze,Ze=Ze.nextSibling;ve.length=xt,delete ve[ve.length]}}}function ni(ye,K){var ae=K.previousSibling,ve=K.nextSibling;return ae?ae.nextSibling=ve:ye.firstChild=ve,ve?ve.previousSibling=ae:ye.lastChild=ae,K.parentNode=null,K.previousSibling=null,K.nextSibling=null,Or(ye.ownerDocument,ye),K}function Zr(ye){return ye&&ye.nodeType===tr.DOCUMENT_TYPE_NODE}function Wr(ye){return ye&&ye.nodeType===tr.ELEMENT_NODE}function si(ye){return ye&&ye.nodeType===tr.TEXT_NODE}function nr(ye,K){var ae=ye.childNodes||[];if(k(ae,Wr)||Zr(K))return!1;var ve=k(ae,Zr);return!(K&&ve&&ae.indexOf(ve)>ae.indexOf(K))}function Zn(ye,K){var ae=ye.childNodes||[];if(k(ae,function ve(xt){return Wr(xt)&&xt!==K}))return!1;var Ze=k(ae,Zr);return!(K&&Ze&&ae.indexOf(Ze)>ae.indexOf(K))}function vi(ye,K,ae){var ve=ye.childNodes||[],Ze=K.childNodes||[];if(K.nodeType===tr.DOCUMENT_FRAGMENT_NODE){var xt=Ze.filter(Wr);if(xt.length>1||k(Ze,si))throw new Bt(fe,"More than one element or text in fragment");if(1===xt.length&&!nr(ye,ae))throw new Bt(fe,"Element in fragment can not be inserted before doctype")}if(Wr(K)&&!nr(ye,ae))throw new Bt(fe,"Only one element can be added and only after doctype");if(Zr(K)){if(k(ve,Zr))throw new Bt(fe,"Only one doctype is allowed");var dn=k(ve,Wr);if(ae&&ve.indexOf(dn)<ve.indexOf(ae))throw new Bt(fe,"Doctype can only be inserted before an element");if(!ae&&dn)throw new Bt(fe,"Doctype can not be appended since element is present")}}function Qr(ye,K,ae){var ve=ye.childNodes||[],Ze=K.childNodes||[];if(K.nodeType===tr.DOCUMENT_FRAGMENT_NODE){var xt=Ze.filter(Wr);if(xt.length>1||k(Ze,si))throw new Bt(fe,"More than one element or text in fragment");if(1===xt.length&&!Zn(ye,ae))throw new Bt(fe,"Element in fragment can not be inserted before doctype")}if(Wr(K)&&!Zn(ye,ae))throw new Bt(fe,"Only one element can be added and only after doctype");if(Zr(K)){if(k(ve,function(br){return Zr(br)&&br!==ae}))throw new Bt(fe,"Only one doctype is allowed");var dn=k(ve,Wr);if(ae&&ve.indexOf(dn)<ve.indexOf(ae))throw new Bt(fe,"Doctype can only be inserted before an element")}}function sn(ye,K,ae,ve){(function Yr(ye,K,ae){if(!function _r(ye){return ye&&(ye.nodeType===tr.DOCUMENT_NODE||ye.nodeType===tr.DOCUMENT_FRAGMENT_NODE||ye.nodeType===tr.ELEMENT_NODE)}(ye))throw new Bt(fe,"Unexpected parent node type "+ye.nodeType);if(ae&&ae.parentNode!==ye)throw new Bt(St,"child not in parent");if(!function ci(ye){return ye&&(Wr(ye)||si(ye)||Zr(ye)||ye.nodeType===tr.DOCUMENT_FRAGMENT_NODE||ye.nodeType===tr.COMMENT_NODE||ye.nodeType===tr.PROCESSING_INSTRUCTION_NODE)}(K)||Zr(K)&&ye.nodeType!==tr.DOCUMENT_NODE)throw new Bt(fe,"Unexpected node type "+K.nodeType+" for parent node type "+ye.nodeType)})(ye,K,ae),ye.nodeType===tr.DOCUMENT_NODE&&(ve||vi)(ye,K,ae);var Ze=K.parentNode;if(Ze&&Ze.removeChild(K),K.nodeType===xe){var xt=K.firstChild;if(null==xt)return K;var dn=K.lastChild}else xt=dn=K;var Ln=ae?ae.previousSibling:ye.lastChild;xt.previousSibling=Ln,dn.nextSibling=ae,Ln?Ln.nextSibling=xt:ye.firstChild=xt,null==ae?ye.lastChild=dn:ae.previousSibling=dn;do{xt.parentNode=ye}while(xt!==dn&&(xt=xt.nextSibling));return Or(ye.ownerDocument||ye,ye),K.nodeType==xe&&(K.firstChild=K.lastChild=null),K}function rs(){this._nsMap={}}function Un(){}function ki(){}function Mr(){}function ri(){}function Qi(){}function Mn(){}function Qt(){}function Rn(){}function rr(){}function sr(){}function Dn(){}function it(){}function rt(ye,K){var ae=[],ve=9==this.nodeType&&this.documentElement||this,Ze=ve.prefix,xt=ve.namespaceURI;if(xt&&null==Ze&&null==(Ze=ve.lookupPrefix(xt)))var dn=[{namespace:xt,prefix:null}];return bt(this,ae,ye,K,dn),ae.join("")}function ht(ye,K,ae){var ve=ye.prefix||"",Ze=ye.namespaceURI;if(!Ze||"xml"===ve&&Ze===ee.XML||Ze===ee.XMLNS)return!1;for(var xt=ae.length;xt--;){var dn=ae[xt];if(dn.prefix===ve)return dn.namespace!==Ze}return!0}function qt(ye,K,ae){ye.push(" ",K,'="',ae.replace(/[<&"]/g,Nr),'"')}function bt(ye,K,ae,ve,Ze){if(Ze||(Ze=[]),ve){if(!(ye=ve(ye)))return;if("string"==typeof ye)return void K.push(ye)}switch(ye.nodeType){case Se:var xt=ye.attributes,dn=xt.length,bi=ye.firstChild,Ln=ye.tagName,Kn=Ln;if(!(ae=ee.isHTML(ye.namespaceURI)||ae)&&!ye.prefix&&ye.namespaceURI){for(var br,yi=0;yi<xt.length;yi++)if("xmlns"===xt.item(yi).name){br=xt.item(yi).value;break}if(!br)for(var ar=Ze.length-1;ar>=0;ar--)if(""===(zr=Ze[ar]).prefix&&zr.namespace===ye.namespaceURI){br=zr.namespace;break}if(br!==ye.namespaceURI)for(ar=Ze.length-1;ar>=0;ar--){var zr;if((zr=Ze[ar]).namespace===ye.namespaceURI){zr.prefix&&(Kn=zr.prefix+":"+Ln);break}}}K.push("<",Kn);for(var Xi=0;Xi<dn;Xi++)"xmlns"==(Mi=xt.item(Xi)).prefix?Ze.push({prefix:Mi.localName,namespace:Mi.value}):"xmlns"==Mi.nodeName&&Ze.push({prefix:"",namespace:Mi.value});for(Xi=0;Xi<dn;Xi++){var Mi,Ni,_i;ht(Mi=xt.item(Xi),0,Ze)&&(qt(K,(Ni=Mi.prefix||"")?"xmlns:"+Ni:"xmlns",_i=Mi.namespaceURI),Ze.push({prefix:Ni,namespace:_i})),bt(Mi,K,ae,ve,Ze)}if(Ln===Kn&&ht(ye,0,Ze)&&(qt(K,(Ni=ye.prefix||"")?"xmlns:"+Ni:"xmlns",_i=ye.namespaceURI),Ze.push({prefix:Ni,namespace:_i})),bi||ae&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ln)){if(K.push(">"),ae&&/^script$/i.test(Ln))for(;bi;)bi.data?K.push(bi.data):bt(bi,K,ae,ve,Ze.slice()),bi=bi.nextSibling;else for(;bi;)bt(bi,K,ae,ve,Ze.slice()),bi=bi.nextSibling;K.push("</",Kn,">")}else K.push("/>");return;case le:case xe:for(bi=ye.firstChild;bi;)bt(bi,K,ae,ve,Ze.slice()),bi=bi.nextSibling;return;case ut:return qt(K,ye.name,ye.value);case mt:return K.push(ye.data.replace(/[<&]/g,Nr).replace(/]]>/g,"]]&gt;"));case $e:return K.push("<![CDATA[",ye.data,"]]>");case yt:return K.push("\x3c!--",ye.data,"--\x3e");case Z:var gs=ye.publicId,Pi=ye.systemId;if(K.push("<!DOCTYPE ",ye.name),gs)K.push(" PUBLIC ",gs),Pi&&"."!=Pi&&K.push(" ",Pi),K.push(">");else if(Pi&&"."!=Pi)K.push(" SYSTEM ",Pi,">");else{var Bi=ye.internalSubset;Bi&&K.push(" [",Bi,"]"),K.push(">")}return;case ze:return K.push("<?",ye.target," ",ye.data,"?>");case jt:return K.push("&",ye.nodeName,";");default:K.push("??",ye.nodeName)}}function Sn(ye,K,ae){var ve;switch(K.nodeType){case Se:(ve=K.cloneNode(!1)).ownerDocument=ye;case xe:break;case ut:ae=!0}if(ve||(ve=K.cloneNode(!1)),ve.ownerDocument=ye,ve.parentNode=null,ae)for(var Ze=K.firstChild;Ze;)ve.appendChild(Sn(ye,Ze,ae)),Ze=Ze.nextSibling;return ve}function An(ye,K,ae){var ve=new K.constructor;for(var Ze in K)if(Object.prototype.hasOwnProperty.call(K,Ze)){var xt=K[Ze];"object"!=typeof xt&&xt!=ve[Ze]&&(ve[Ze]=xt)}switch(K.childNodes&&(ve.childNodes=new _n),ve.ownerDocument=ye,ve.nodeType){case Se:var dn=K.attributes,Ln=ve.attributes=new Qn,Kn=dn.length;Ln._ownerElement=ve;for(var br=0;br<Kn;br++)ve.setAttributeNode(An(ye,dn.item(br),!0));break;case ut:ae=!0}if(ae)for(var yi=K.firstChild;yi;)ve.appendChild(An(ye,yi,ae)),yi=yi.nextSibling;return ve}function $r(ye,K,ae){ye[K]=ae}_t.INVALID_STATE_ERR=(Et[11]="Invalid state",11),_t.SYNTAX_ERR=(Et[12]="Syntax error",12),_t.INVALID_MODIFICATION_ERR=(Et[13]="Invalid modification",13),_t.NAMESPACE_ERR=(Et[14]="Invalid namespace",14),_t.INVALID_ACCESS_ERR=(Et[15]="Invalid access",15),Bt.prototype=Error.prototype,Ae(_t,Bt),_n.prototype={length:0,item:function(ye){return this[ye]||null},toString:function(ye,K){for(var ae=[],ve=0;ve<this.length;ve++)bt(this[ve],ae,ye,K);return ae.join("")},filter:function(ye){return Array.prototype.filter.call(this,ye)},indexOf:function(ye){return Array.prototype.indexOf.call(this,ye)}},Jt.prototype.item=function(ye){return qn(this),this[ye]},Ie(Jt,_n),Qn.prototype={length:0,item:_n.prototype.item,getNamedItem:function(ye){for(var K=this.length;K--;){var ae=this[K];if(ae.nodeName==ye)return ae}},setNamedItem:function(ye){var K=ye.ownerElement;if(K&&K!=this._ownerElement)throw new Bt(Pt);var ae=this.getNamedItem(ye.nodeName);return vr(this._ownerElement,this,ye,ae),ae},setNamedItemNS:function(ye){var ae,K=ye.ownerElement;if(K&&K!=this._ownerElement)throw new Bt(Pt);return ae=this.getNamedItemNS(ye.namespaceURI,ye.localName),vr(this._ownerElement,this,ye,ae),ae},removeNamedItem:function(ye){var K=this.getNamedItem(ye);return Ci(this._ownerElement,this,K),K},removeNamedItemNS:function(ye,K){var ae=this.getNamedItemNS(ye,K);return Ci(this._ownerElement,this,ae),ae},getNamedItemNS:function(ye,K){for(var ae=this.length;ae--;){var ve=this[ae];if(ve.localName==K&&ve.namespaceURI==ye)return ve}return null}},cr.prototype={hasFeature:function(ye,K){return!0},createDocument:function(ye,K,ae){var ve=new yr;if(ve.implementation=this,ve.childNodes=new _n,ve.doctype=ae||null,ae&&ve.appendChild(ae),K){var Ze=ve.createElementNS(ye,K);ve.appendChild(Ze)}return ve},createDocumentType:function(ye,K,ae){var ve=new Mn;return ve.name=ye,ve.nodeName=ye,ve.publicId=K||"",ve.systemId=ae||"",ve}},tr.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ye,K){return sn(this,ye,K)},replaceChild:function(ye,K){sn(this,ye,K,Qr),K&&this.removeChild(K)},removeChild:function(ye){return ni(this,ye)},appendChild:function(ye){return this.insertBefore(ye,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(ye){return An(this.ownerDocument||this,this,ye)},normalize:function(){for(var ye=this.firstChild;ye;){var K=ye.nextSibling;K&&K.nodeType==mt&&ye.nodeType==mt?(this.removeChild(K),ye.appendData(K.data)):(ye.normalize(),ye=K)}},isSupported:function(ye,K){return this.ownerDocument.implementation.hasFeature(ye,K)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ye){for(var K=this;K;){var ae=K._nsMap;if(ae)for(var ve in ae)if(Object.prototype.hasOwnProperty.call(ae,ve)&&ae[ve]===ye)return ve;K=K.nodeType==ut?K.ownerDocument:K.parentNode}return null},lookupNamespaceURI:function(ye){for(var K=this;K;){var ae=K._nsMap;if(ae&&ye in ae&&Object.prototype.hasOwnProperty.call(ae,ye))return ae[ye];K=K.nodeType==ut?K.ownerDocument:K.parentNode}return null},isDefaultNamespace:function(ye){return null==this.lookupPrefix(ye)}},Ae(Re,tr),Ae(Re,tr.prototype),yr.prototype={nodeName:"#document",nodeType:le,doctype:null,documentElement:null,_inc:1,insertBefore:function(ye,K){if(ye.nodeType==xe){for(var ae=ye.firstChild;ae;){var ve=ae.nextSibling;this.insertBefore(ae,K),ae=ve}return ye}return sn(this,ye,K),ye.ownerDocument=this,null===this.documentElement&&ye.nodeType===Se&&(this.documentElement=ye),ye},removeChild:function(ye){return this.documentElement==ye&&(this.documentElement=null),ni(this,ye)},replaceChild:function(ye,K){sn(this,ye,K,Qr),ye.ownerDocument=this,K&&this.removeChild(K),Wr(ye)&&(this.documentElement=ye)},importNode:function(ye,K){return Sn(this,ye,K)},getElementById:function(ye){var K=null;return ti(this.documentElement,function(ae){if(ae.nodeType==Se&&ae.getAttribute("id")==ye)return K=ae,!0}),K},getElementsByClassName:function(ye){var K=se(ye);return new Jt(this,function(ae){var ve=[];return K.length>0&&ti(ae.documentElement,function(Ze){if(Ze!==ae&&Ze.nodeType===Se){var xt=Ze.getAttribute("class");if(xt){var dn=ye===xt;if(!dn){var Ln=se(xt);dn=K.every(function Ke(ye){return function(K){return ye&&-1!==ye.indexOf(K)}}(Ln))}dn&&ve.push(Ze)}}}),ve})},createElement:function(ye){var K=new rs;return K.ownerDocument=this,K.nodeName=ye,K.tagName=ye,K.localName=ye,K.childNodes=new _n,(K.attributes=new Qn)._ownerElement=K,K},createDocumentFragment:function(){var ye=new sr;return ye.ownerDocument=this,ye.childNodes=new _n,ye},createTextNode:function(ye){var K=new Mr;return K.ownerDocument=this,K.appendData(ye),K},createComment:function(ye){var K=new ri;return K.ownerDocument=this,K.appendData(ye),K},createCDATASection:function(ye){var K=new Qi;return K.ownerDocument=this,K.appendData(ye),K},createProcessingInstruction:function(ye,K){var ae=new Dn;return ae.ownerDocument=this,ae.tagName=ae.target=ye,ae.nodeValue=ae.data=K,ae},createAttribute:function(ye){var K=new Un;return K.ownerDocument=this,K.name=ye,K.nodeName=ye,K.localName=ye,K.specified=!0,K},createEntityReference:function(ye){var K=new rr;return K.ownerDocument=this,K.nodeName=ye,K},createElementNS:function(ye,K){var ae=new rs,ve=K.split(":"),Ze=ae.attributes=new Qn;return ae.childNodes=new _n,ae.ownerDocument=this,ae.nodeName=K,ae.tagName=K,ae.namespaceURI=ye,2==ve.length?(ae.prefix=ve[0],ae.localName=ve[1]):ae.localName=K,Ze._ownerElement=ae,ae},createAttributeNS:function(ye,K){var ae=new Un,ve=K.split(":");return ae.ownerDocument=this,ae.nodeName=K,ae.name=K,ae.namespaceURI=ye,ae.specified=!0,2==ve.length?(ae.prefix=ve[0],ae.localName=ve[1]):ae.localName=K,ae}},Ie(yr,tr),yr.prototype.getElementsByTagName=(rs.prototype={nodeType:Se,hasAttribute:function(ye){return null!=this.getAttributeNode(ye)},getAttribute:function(ye){var K=this.getAttributeNode(ye);return K&&K.value||""},getAttributeNode:function(ye){return this.attributes.getNamedItem(ye)},setAttribute:function(ye,K){var ae=this.ownerDocument.createAttribute(ye);ae.value=ae.nodeValue=""+K,this.setAttributeNode(ae)},removeAttribute:function(ye){var K=this.getAttributeNode(ye);K&&this.removeAttributeNode(K)},appendChild:function(ye){return ye.nodeType===xe?this.insertBefore(ye,null):function or(ye,K){return K.parentNode&&K.parentNode.removeChild(K),K.parentNode=ye,K.previousSibling=ye.lastChild,K.nextSibling=null,K.previousSibling?K.previousSibling.nextSibling=K:ye.firstChild=K,ye.lastChild=K,Or(ye.ownerDocument,ye,K),K}(this,ye)},setAttributeNode:function(ye){return this.attributes.setNamedItem(ye)},setAttributeNodeNS:function(ye){return this.attributes.setNamedItemNS(ye)},removeAttributeNode:function(ye){return this.attributes.removeNamedItem(ye.nodeName)},removeAttributeNS:function(ye,K){var ae=this.getAttributeNodeNS(ye,K);ae&&this.removeAttributeNode(ae)},hasAttributeNS:function(ye,K){return null!=this.getAttributeNodeNS(ye,K)},getAttributeNS:function(ye,K){var ae=this.getAttributeNodeNS(ye,K);return ae&&ae.value||""},setAttributeNS:function(ye,K,ae){var ve=this.ownerDocument.createAttributeNS(ye,K);ve.value=ve.nodeValue=""+ae,this.setAttributeNode(ve)},getAttributeNodeNS:function(ye,K){return this.attributes.getNamedItemNS(ye,K)},getElementsByTagName:function(ye){return new Jt(this,function(K){var ae=[];return ti(K,function(ve){ve!==K&&ve.nodeType==Se&&("*"===ye||ve.tagName==ye)&&ae.push(ve)}),ae})},getElementsByTagNameNS:function(ye,K){return new Jt(this,function(ae){var ve=[];return ti(ae,function(Ze){Ze!==ae&&Ze.nodeType===Se&&("*"===ye||Ze.namespaceURI===ye)&&("*"===K||Ze.localName==K)&&ve.push(Ze)}),ve})}}).getElementsByTagName,yr.prototype.getElementsByTagNameNS=rs.prototype.getElementsByTagNameNS,Ie(rs,tr),Un.prototype.nodeType=ut,Ie(Un,tr),ki.prototype={data:"",substringData:function(ye,K){return this.data.substring(ye,ye+K)},appendData:function(ye){this.nodeValue=this.data=ye=this.data+ye,this.length=ye.length},insertData:function(ye,K){this.replaceData(ye,0,K)},appendChild:function(ye){throw new Error(Et[fe])},deleteData:function(ye,K){this.replaceData(ye,K,"")},replaceData:function(ye,K,ae){var ve=this.data.substring(0,ye),Ze=this.data.substring(ye+K);this.nodeValue=this.data=ae=ve+ae+Ze,this.length=ae.length}},Ie(ki,tr),Mr.prototype={nodeName:"#text",nodeType:mt,splitText:function(ye){var K=this.data,ae=K.substring(ye);K=K.substring(0,ye),this.data=this.nodeValue=K,this.length=K.length;var ve=this.ownerDocument.createTextNode(ae);return this.parentNode&&this.parentNode.insertBefore(ve,this.nextSibling),ve}},Ie(Mr,ki),ri.prototype={nodeName:"#comment",nodeType:yt},Ie(ri,ki),Qi.prototype={nodeName:"#cdata-section",nodeType:$e},Ie(Qi,ki),Mn.prototype.nodeType=Z,Ie(Mn,tr),Qt.prototype.nodeType=We,Ie(Qt,tr),Rn.prototype.nodeType=Be,Ie(Rn,tr),rr.prototype.nodeType=jt,Ie(rr,tr),sr.prototype.nodeName="#document-fragment",sr.prototype.nodeType=xe,Ie(sr,tr),Dn.prototype.nodeType=ze,Ie(Dn,tr),it.prototype.serializeToString=function(ye,K,ae){return rt.call(ye,K,ae)},tr.prototype.toString=rt;try{if(Object.defineProperty){let ye=function(K){switch(K.nodeType){case Se:case xe:var ae=[];for(K=K.firstChild;K;)7!==K.nodeType&&8!==K.nodeType&&ae.push(ye(K)),K=K.nextSibling;return ae.join("");default:return K.nodeValue}};Object.defineProperty(Jt.prototype,"length",{get:function(){return qn(this),this.$$length}}),Object.defineProperty(tr.prototype,"textContent",{get:function(){return ye(this)},set:function(K){switch(this.nodeType){case Se:case xe:for(;this.firstChild;)this.removeChild(this.firstChild);(K||String(K))&&this.appendChild(this.ownerDocument.createTextNode(K));break;default:this.data=K,this.value=K,this.nodeValue=K}}}),$r=function(K,ae,ve){K["$$"+ae]=ve}}}catch{}at.DocumentType=Mn,at.DOMException=Bt,at.DOMImplementation=cr,at.Element=rs,at.Node=tr,at.NodeList=_n,at.XMLSerializer=it},4436:(Yt,at,W)=>{var E=W(9401).freeze;at.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),at.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),at.entityMap=at.HTML_ENTITIES},978:(Yt,at,W)=>{W(6853);at.DOMParser=W(1991).DOMParser},8702:(Yt,at,W)=>{var E=W(9401).NAMESPACE,k=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ee=new RegExp("[\\-\\.0-9"+k.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ue=new RegExp("^"+k.source+ee.source+"*(?::"+k.source+ee.source+"*)?$");function ut(H,he){this.message=H,this.locator=he,Error.captureStackTrace&&Error.captureStackTrace(this,ut)}function mt(){}function jt(H,he){return he.lineNumber=H.lineNumber,he.columnNumber=H.columnNumber,he}function Be(H,he,fe,Fe,Me,Ge){function ct($t,rn,Bt){fe.attributeNames.hasOwnProperty($t)&&Ge.fatalError("Attribute "+$t+" redefined"),fe.addValue($t,rn,Bt)}for(var St,Pt=++he,kt=0;;){var dt=H.charAt(Pt);switch(dt){case"=":if(1===kt)St=H.slice(he,Pt),kt=3;else{if(2!==kt)throw new Error("attribute equal must after attrName");kt=3}break;case"'":case'"':if(3===kt||1===kt){if(1===kt&&(Ge.warning('attribute value must after "="'),St=H.slice(he,Pt)),!((Pt=H.indexOf(dt,he=Pt+1))>0))throw new Error("attribute value no end '"+dt+"' match");ct(St,Tt=H.slice(he,Pt).replace(/&#?\w+;/g,Me),he-1),kt=5}else{if(4!=kt)throw new Error('attribute value must after "="');ct(St,Tt=H.slice(he,Pt).replace(/&#?\w+;/g,Me),he),Ge.warning('attribute "'+St+'" missed start quot('+dt+")!!"),he=Pt+1,kt=5}break;case"/":switch(kt){case 0:fe.setTagName(H.slice(he,Pt));case 5:case 6:case 7:kt=7,fe.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ge.error("unexpected end of input"),0==kt&&fe.setTagName(H.slice(he,Pt)),Pt;case">":switch(kt){case 0:fe.setTagName(H.slice(he,Pt));case 5:case 6:case 7:break;case 4:case 1:"/"===(Tt=H.slice(he,Pt)).slice(-1)&&(fe.closed=!0,Tt=Tt.slice(0,-1));case 2:2===kt&&(Tt=St),4==kt?(Ge.warning('attribute "'+Tt+'" missed quot(")!'),ct(St,Tt.replace(/&#?\w+;/g,Me),he)):((!E.isHTML(Fe[""])||!Tt.match(/^(?:disabled|checked|selected)$/i))&&Ge.warning('attribute "'+Tt+'" missed value!! "'+Tt+'" instead!!'),ct(Tt,Tt,he));break;case 3:throw new Error("attribute value missed!!")}return Pt;case"\x80":dt=" ";default:if(dt<=" ")switch(kt){case 0:fe.setTagName(H.slice(he,Pt)),kt=6;break;case 1:St=H.slice(he,Pt),kt=2;break;case 4:var Tt=H.slice(he,Pt).replace(/&#?\w+;/g,Me);Ge.warning('attribute "'+Tt+'" missed quot(")!!'),ct(St,Tt,he);case 5:kt=6}else switch(kt){case 2:(!E.isHTML(Fe[""])||!St.match(/^(?:disabled|checked|selected)$/i))&&Ge.warning('attribute "'+St+'" missed value!! "'+St+'" instead2!!'),ct(St,St,he),he=Pt,kt=1;break;case 5:Ge.warning('attribute space is required"'+St+'"!!');case 6:kt=1,he=Pt;break;case 3:kt=4,he=Pt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Pt++}}function ze(H,he,fe){for(var Fe=H.tagName,Me=null,dt=H.length;dt--;){var Ge=H[dt],ct=Ge.qName,St=Ge.value;if((Ht=ct.indexOf(":"))>0)var Tt=Ge.prefix=ct.slice(0,Ht),Pt=ct.slice(Ht+1),kt="xmlns"===Tt&&Pt;else Pt=ct,Tt=null,kt="xmlns"===ct&&"";Ge.localName=Pt,!1!==kt&&(null==Me&&(Me={},Z(fe,fe={})),fe[kt]=Me[kt]=St,Ge.uri=E.XMLNS,he.startPrefixMapping(kt,St))}for(dt=H.length;dt--;)(Tt=(Ge=H[dt]).prefix)&&("xml"===Tt&&(Ge.uri=E.XML),"xmlns"!==Tt&&(Ge.uri=fe[Tt||""]));var Ht;(Ht=Fe.indexOf(":"))>0?(Tt=H.prefix=Fe.slice(0,Ht),Pt=H.localName=Fe.slice(Ht+1)):(Tt=null,Pt=H.localName=Fe);var $t=H.uri=fe[Tt||""];if(he.startElement($t,Pt,Fe,H),!H.closed)return H.currentNSMap=fe,H.localNSMap=Me,!0;if(he.endElement($t,Pt,Fe),Me)for(Tt in Me)Object.prototype.hasOwnProperty.call(Me,Tt)&&he.endPrefixMapping(Tt)}function yt(H,he,fe,Fe,Me){if(/^(?:script|textarea)$/i.test(fe)){var Ge=H.indexOf("</"+fe+">",he),ct=H.substring(he+1,Ge);if(/[&<]/.test(ct))return/^script$/i.test(fe)?(Me.characters(ct,0,ct.length),Ge):(ct=ct.replace(/&#?\w+;/g,Fe),Me.characters(ct,0,ct.length),Ge)}return he+1}function le(H,he,fe,Fe){var Me=Fe[fe];return null==Me&&((Me=H.lastIndexOf("</"+fe+">"))<he&&(Me=H.lastIndexOf("</"+fe)),Fe[fe]=Me),Me<he}function Z(H,he){for(var fe in H)Object.prototype.hasOwnProperty.call(H,fe)&&(he[fe]=H[fe])}function xe(H,he,fe,Fe){if("-"===H.charAt(he+2))return"-"===H.charAt(he+3)?(Ge=H.indexOf("--\x3e",he+4))>he?(fe.comment(H,he+4,Ge-he-4),Ge+3):(Fe.error("Unclosed comment"),-1):-1;if("CDATA["==H.substr(he+3,6)){var Ge=H.indexOf("]]>",he+9);return fe.startCDATA(),fe.characters(H,he+9,Ge-he-9),fe.endCDATA(),Ge+3}var ct=function Et(H,he){var fe,Fe=[],Me=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Me.lastIndex=he,Me.exec(H);fe=Me.exec(H);)if(Fe.push(fe),fe[1])return Fe}(H,he),St=ct.length;if(St>1&&/!doctype/i.test(ct[0][0])){var Tt=ct[1][0],Pt=!1,kt=!1;St>3&&(/^public$/i.test(ct[2][0])?(Pt=ct[3][0],kt=St>4&&ct[4][0]):/^system$/i.test(ct[2][0])&&(kt=ct[3][0]));var dt=ct[St-1];return fe.startDTD(Tt,Pt,kt),fe.endDTD(),dt.index+dt[0].length}return-1}function We(H,he,fe){var Fe=H.indexOf("?>",he);if(Fe){var Me=H.substring(he,Fe).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Me?(fe.processingInstruction(Me[1],Me[2]),Fe+2):-1}return-1}function _t(){this.attributeNames={}}(ut.prototype=new Error).name=ut.name,mt.prototype={parse:function(H,he,fe){var Fe=this.domBuilder;Fe.startDocument(),Z(he,he={}),function $e(H,he,fe,Fe,Me){function ct(_r){var ci=_r.slice(1,-1);return ci in fe?fe[ci]:"#"===ci.charAt(0)?function Ge(_r){return _r>65535?(_r-=65536,String.fromCharCode(55296+(_r>>10),56320+(1023&_r))):String.fromCharCode(_r)}(parseInt(ci.substr(1).replace("x","0x"))):(Me.error("entity not found:"+_r),_r)}function St(_r){if(_r>Bt){var ci=H.substring(Bt,_r).replace(/&#?\w+;/g,ct);Ht&&Tt(Bt),Fe.characters(ci,0,_r-Bt),Bt=_r}}function Tt(_r,ci){for(;_r>=kt&&(ci=dt.exec(H));)kt=(Pt=ci.index)+ci[0].length,Ht.lineNumber++;Ht.columnNumber=_r-Pt+1}for(var Pt=0,kt=0,dt=/.*(?:\r\n?|\n)|.*$/g,Ht=Fe.locator,$t=[{currentNSMap:he}],rn={},Bt=0;;){try{var _n=H.indexOf("<",Bt);if(_n<0){if(!H.substr(Bt).match(/^\s*$/)){var Jt=Fe.doc,qn=Jt.createTextNode(H.substr(Bt));Jt.appendChild(qn),Fe.currentElement=qn}return}switch(_n>Bt&&St(_n),H.charAt(_n+1)){case"/":var yr=H.indexOf(">",_n+3),Qn=H.substring(_n+2,yr).replace(/[ \t\n\r]+$/g,""),wr=$t.pop();yr<0?(Qn=H.substring(_n+2).replace(/[\s<].*/,""),Me.error("end tag name: "+Qn+" is not complete:"+wr.tagName),yr=_n+1+Qn.length):Qn.match(/\s</)&&(Qn=Qn.replace(/[\s<].*/,""),Me.error("end tag name: "+Qn+" maybe not complete"),yr=_n+1+Qn.length);var vr=wr.localNSMap,Ci=wr.tagName==Qn;if(Ci||wr.tagName&&wr.tagName.toLowerCase()==Qn.toLowerCase()){if(Fe.endElement(wr.uri,wr.localName,Qn),vr)for(var tr in vr)Object.prototype.hasOwnProperty.call(vr,tr)&&Fe.endPrefixMapping(tr);Ci||Me.fatalError("end tag name: "+Qn+" is not match the current start tagName:"+wr.tagName)}else $t.push(wr);yr++;break;case"?":Ht&&Tt(_n),yr=We(H,_n,Fe);break;case"!":Ht&&Tt(_n),yr=xe(H,_n,Fe,Me);break;default:Ht&&Tt(_n);var Nr=new _t,ti=$t[$t.length-1].currentNSMap,en=(yr=Be(H,_n,Nr,ti,ct,Me),Nr.length);if(!Nr.closed&&le(H,yr,Nr.tagName,rn)&&(Nr.closed=!0,fe.nbsp||Me.warning("unclosed xml attribute")),Ht&&en){for(var pr=jt(Ht,{}),Or=0;Or<en;Or++){var ni=Nr[Or];Tt(ni.offset),ni.locator=jt(Ht,{})}Fe.locator=pr,ze(Nr,Fe,ti)&&$t.push(Nr),Fe.locator=Ht}else ze(Nr,Fe,ti)&&$t.push(Nr);E.isHTML(Nr.uri)&&!Nr.closed?yr=yt(H,yr,Nr.tagName,ct,Fe):yr++}}catch(_r){if(_r instanceof ut)throw _r;Me.error("element parse error: "+_r),yr=-1}yr>Bt?Bt=yr:St(Math.max(_n,Bt)+1)}}(H,he,fe,Fe,this.errorHandler),Fe.endDocument()}},_t.prototype={setTagName:function(H){if(!Ue.test(H))throw new Error("invalid tagName:"+H);this.tagName=H},addValue:function(H,he,fe){if(!Ue.test(H))throw new Error("invalid attribute:"+H);this.attributeNames[H]=this.length,this[this.length++]={qName:H,value:he,offset:fe}},length:0,getLocalName:function(H){return this[H].localName},getLocator:function(H){return this[H].locator},getQName:function(H){return this[H].qName},getURI:function(H){return this[H].uri},getValue:function(H){return this[H].value}},at.XMLReader=mt,at.ParseError=ut},5867:(Yt,at,W)=>{"use strict";W.d(at,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=W(9681);(0,E.registerVersion)("firebase","9.14.0","app")},127:(Yt,at,W)=>{"use strict";W.d(at,{Z:()=>E.Z});var E=W(3942);E.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(Yt,at,W)=>{"use strict";W.r(at);var E=W(5861),k=W(3942),ee=W(2090),Ue=W(9681),Pe=W(1877),Le=W(655),se=W(4859);const $e=function ut(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},jt=function mt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new Pe.Yd("@firebase/auth");function le(C,...y){yt.logLevel<=Pe.in.ERROR&&yt.error(`Auth (${Ue.SDK_VERSION}): ${C}`,...y)}function Z(C,...y){throw Et(C,...y)}function xe(C,...y){return Et(C,...y)}function We(C,y,T){const P=Object.assign(Object.assign({},jt()),{[y]:T});return new ee.LL("auth","Firebase",P).create(y,{appName:C.name})}function _t(C,y,T){if(!(y instanceof T))throw T.name!==y.constructor.name&&Z(C,"argument-error"),We(C,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Et(C,...y){if("string"!=typeof C){const T=y[0],P=[...y.slice(1)];return P[0]&&(P[0].appName=C.name),C._errorFactory.create(T,...P)}return Be.create(C,...y)}function H(C,y,...T){if(!C)throw Et(y,...T)}function he(C){const y="INTERNAL ASSERTION FAILED: "+C;throw le(y),new Error(y)}function fe(C,y){C||he(y)}const Fe=new Map;function Me(C){fe(C instanceof Function,"Expected a class definition");let y=Fe.get(C);return y?(fe(y instanceof C,"Instance stored in cache mismatched with class"),y):(y=new C,Fe.set(C,y),y)}function St(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Tt(){return"http:"===Pt()||"https:"===Pt()}function Pt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Ht{constructor(y,T){this.shortDelay=y,this.longDelay=T,fe(T>y,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function kt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Tt()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $t(C,y){fe(C.emulator,"Emulator should always be set here");const{url:T}=C.emulator;return y?`${T}${y.startsWith("/")?y.slice(1):y}`:T}class rn{static initialize(y,T,P){this.fetchImpl=y,T&&(this.headersImpl=T),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_n=new Ht(3e4,6e4);function Jt(C,y){return C.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:C.tenantId}):y}function qn(C,y,T,P){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,E.Z)(function*(C,y,T,P,de={}){return wr(C,de,(0,E.Z)(function*(){let De={},gt={};P&&("GET"===y?gt=P:De={body:JSON.stringify(P)});const zt=(0,ee.xO)(Object.assign({key:C.config.apiKey},gt)).slice(1),On=yield C._getAdditionalHeaders();return On["Content-Type"]="application/json",C.languageCode&&(On["X-Firebase-Locale"]=C.languageCode),rn.fetch()(tr(C,C.config.apiHost,T,zt),Object.assign({method:y,headers:On,referrerPolicy:"no-referrer"},De))}))})).apply(this,arguments)}function wr(C,y,T){return vr.apply(this,arguments)}function vr(){return(vr=(0,E.Z)(function*(C,y,T){C._canInitEmulator=!1;const P=Object.assign(Object.assign({},Bt),y);try{const de=new Nr(C),De=yield Promise.race([T(),de.promise]);de.clearNetworkTimeout();const gt=yield De.json();if("needConfirmation"in gt)throw ti(C,"account-exists-with-different-credential",gt);if(De.ok&&!("errorMessage"in gt))return gt;{const zt=De.ok?gt.errorMessage:gt.error.message,[On,lr]=zt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===On)throw ti(C,"credential-already-in-use",gt);if("EMAIL_EXISTS"===On)throw ti(C,"email-already-in-use",gt);if("USER_DISABLED"===On)throw ti(C,"user-disabled",gt);const Rr=P[On]||On.toLowerCase().replace(/[_\s]+/g,"-");if(lr)throw We(C,Rr,lr);Z(C,Rr)}}catch(de){if(de instanceof ee.ZR)throw de;Z(C,"network-request-failed")}})).apply(this,arguments)}function Ci(C,y,T,P){return cr.apply(this,arguments)}function cr(){return(cr=(0,E.Z)(function*(C,y,T,P,de={}){const De=yield qn(C,y,T,P,de);return"mfaPendingCredential"in De&&Z(C,"multi-factor-auth-required",{_serverResponse:De}),De})).apply(this,arguments)}function tr(C,y,T,P){const de=`${y}${T}?${P}`;return C.config.emulator?$t(C.config,de):`${C.config.apiScheme}://${de}`}class Nr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((T,P)=>{this.timer=setTimeout(()=>P(xe(this.auth,"network-request-failed")),_n.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ti(C,y,T){const P={appName:C.name};T.email&&(P.email=T.email),T.phoneNumber&&(P.phoneNumber=T.phoneNumber);const de=xe(C,y,P);return de.customData._tokenResponse=T,de}function en(){return(en=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function pr(C,y){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function ni(C,y){return _r.apply(this,arguments)}function _r(){return(_r=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function ci(C){if(C)try{const y=new Date(Number(C));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function si(){return(si=(0,E.Z)(function*(C,y=!1){const T=(0,ee.m9)(C),P=yield T.getIdToken(y),de=Zn(P);H(de&&de.exp&&de.auth_time&&de.iat,T.auth,"internal-error");const De="object"==typeof de.firebase?de.firebase:void 0,gt=De?.sign_in_provider;return{claims:de,token:P,authTime:ci(nr(de.auth_time)),issuedAtTime:ci(nr(de.iat)),expirationTime:ci(nr(de.exp)),signInProvider:gt||null,signInSecondFactor:De?.sign_in_second_factor||null}})).apply(this,arguments)}function nr(C){return 1e3*Number(C)}function Zn(C){var y;const[T,P,de]=C.split(".");if(void 0===T||void 0===P||void 0===de)return le("JWT malformed, contained fewer than 3 sections"),null;try{const De=(0,ee.tV)(P);return De?JSON.parse(De):(le("Failed to decode base64 JWT payload"),null)}catch(De){return le("Caught error parsing JWT payload as JSON",null===(y=De)||void 0===y?void 0:y.toString()),null}}function vi(C,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,E.Z)(function*(C,y,T=!1){if(T)return y;try{return yield y}catch(P){throw P instanceof ee.ZR&&sn(P)&&C.auth.currentUser===C&&(yield C.auth.signOut()),P}})).apply(this,arguments)}function sn({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class or{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var T;if(y){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const de=(null!==(T=this.user.stsTokenManager.expirationTime)&&void 0!==T?T:0)-Date.now()-3e5;return Math.max(0,de)}}schedule(y=!1){var T=this;if(!this.isRunning)return;const P=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield T.iteration()}),P)}iteration(){var y=this;return(0,E.Z)(function*(){var T;try{yield y.user.getIdToken(!0)}catch(P){return void("auth/network-request-failed"===(null===(T=P)||void 0===T?void 0:T.code)&&y.schedule(!0))}y.schedule()})()}}class rs{constructor(y,T){this.createdAt=y,this.lastLoginAt=T,this._initializeTime()}_initializeTime(){this.lastSignInTime=ci(this.lastLoginAt),this.creationTime=ci(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Un(C){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(C){var y;const T=C.auth,P=yield C.getIdToken(),de=yield vi(C,ni(T,{idToken:P}));H(de?.users.length,T,"internal-error");const De=de.users[0];C._notifyReloadListener(De);const gt=null!==(y=De.providerUserInfo)&&void 0!==y&&y.length?Mn(De.providerUserInfo):[],zt=Qi(C.providerData,gt),Rr=!!C.isAnonymous&&!(C.email&&De.passwordHash||zt?.length),Ar={uid:De.localId,displayName:De.displayName||null,photoURL:De.photoUrl||null,email:De.email||null,emailVerified:De.emailVerified||!1,phoneNumber:De.phoneNumber||null,tenantId:De.tenantId||null,providerData:zt,metadata:new rs(De.createdAt,De.lastLoginAt),isAnonymous:Rr};Object.assign(C,Ar)})).apply(this,arguments)}function ri(){return(ri=(0,E.Z)(function*(C){const y=(0,ee.m9)(C);yield Un(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Qi(C,y){return[...C.filter(P=>!y.some(de=>de.providerId===P.providerId)),...y]}function Mn(C){return C.map(y=>{var{providerId:T}=y,P=(0,Le._T)(y,["providerId"]);return{providerId:T,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}function Rn(){return(Rn=(0,E.Z)(function*(C,y){const T=yield wr(C,{},(0,E.Z)(function*(){const P=(0,ee.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:de,apiKey:De}=C.config,gt=tr(C,de,"/v1/token",`key=${De}`),zt=yield C._getAdditionalHeaders();return zt["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(gt,{method:"POST",headers:zt,body:P})}));return{accessToken:T.access_token,expiresIn:T.expires_in,refreshToken:T.refresh_token}})).apply(this,arguments)}class rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){H(y.idToken,"internal-error"),H(typeof y.idToken<"u","internal-error"),H(typeof y.refreshToken<"u","internal-error");const T="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Yr(C){const y=Zn(C);return H(y,"internal-error"),H(typeof y.exp<"u","internal-error"),H(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,T)}getToken(y,T=!1){var P=this;return(0,E.Z)(function*(){return H(!P.accessToken||P.refreshToken,y,"user-token-expired"),T||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(y,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,T){var P=this;return(0,E.Z)(function*(){const{accessToken:de,refreshToken:De,expiresIn:gt}=yield function Qt(C,y){return Rn.apply(this,arguments)}(y,T);P.updateTokensAndExpiration(de,De,Number(gt))})()}updateTokensAndExpiration(y,T,P){this.refreshToken=T||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(y,T){const{refreshToken:P,accessToken:de,expirationTime:De}=T,gt=new rr;return P&&(H("string"==typeof P,"internal-error",{appName:y}),gt.refreshToken=P),de&&(H("string"==typeof de,"internal-error",{appName:y}),gt.accessToken=de),De&&(H("number"==typeof De,"internal-error",{appName:y}),gt.expirationTime=De),gt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new rr,this.toJSON())}_performRefresh(){return he("not implemented")}}function sr(C,y){H("string"==typeof C||typeof C>"u","internal-error",{appName:y})}class Dn{constructor(y){var{uid:T,auth:P,stsTokenManager:de}=y,De=(0,Le._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=T,this.auth=P,this.stsTokenManager=de,this.accessToken=de.accessToken,this.displayName=De.displayName||null,this.email=De.email||null,this.emailVerified=De.emailVerified||!1,this.phoneNumber=De.phoneNumber||null,this.photoURL=De.photoURL||null,this.isAnonymous=De.isAnonymous||!1,this.tenantId=De.tenantId||null,this.providerData=De.providerData?[...De.providerData]:[],this.metadata=new rs(De.createdAt||void 0,De.lastLoginAt||void 0)}getIdToken(y){var T=this;return(0,E.Z)(function*(){const P=yield vi(T,T.stsTokenManager.getToken(T.auth,y));return H(P,T.auth,"internal-error"),T.accessToken!==P&&(T.accessToken=P,yield T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)),P})()}getIdTokenResult(y){return function Wr(C){return si.apply(this,arguments)}(this,y)}reload(){return function Mr(C){return ri.apply(this,arguments)}(this)}_assign(y){this!==y&&(H(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(T=>Object.assign({},T)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Dn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,T=!1){var P=this;return(0,E.Z)(function*(){let de=!1;y.idToken&&y.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(y),de=!0),T&&(yield Un(P)),yield P.auth._persistUserIfCurrent(P),de&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var y=this;return(0,E.Z)(function*(){const T=yield y.getIdToken();return yield vi(y,function yr(C,y){return en.apply(this,arguments)}(y.auth,{idToken:T})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,T){var P,de,De,gt,zt,On,lr,Rr;const Ar=null!==(P=T.displayName)&&void 0!==P?P:void 0,Ki=null!==(de=T.email)&&void 0!==de?de:void 0,Fn=null!==(De=T.phoneNumber)&&void 0!==De?De:void 0,zc=null!==(gt=T.photoURL)&&void 0!==gt?gt:void 0,vl=null!==(zt=T.tenantId)&&void 0!==zt?zt:void 0,Cc=null!==(On=T._redirectEventId)&&void 0!==On?On:void 0,vd=null!==(lr=T.createdAt)&&void 0!==lr?lr:void 0,oh=null!==(Rr=T.lastLoginAt)&&void 0!==Rr?Rr:void 0,{uid:Kp,emailVerified:qo,isAnonymous:ah,providerData:yd,stsTokenManager:xc}=T;H(Kp&&xc,y,"internal-error");const Ic=rr.fromJSON(this.name,xc);H("string"==typeof Kp,y,"internal-error"),sr(Ar,y.name),sr(Ki,y.name),H("boolean"==typeof qo,y,"internal-error"),H("boolean"==typeof ah,y,"internal-error"),sr(Fn,y.name),sr(zc,y.name),sr(vl,y.name),sr(Cc,y.name),sr(vd,y.name),sr(oh,y.name);const qc=new Dn({uid:Kp,auth:y,email:Ki,emailVerified:qo,displayName:Ar,isAnonymous:ah,photoURL:zc,phoneNumber:Fn,tenantId:vl,stsTokenManager:Ic,createdAt:vd,lastLoginAt:oh});return yd&&Array.isArray(yd)&&(qc.providerData=yd.map(uh=>Object.assign({},uh))),Cc&&(qc._redirectEventId=Cc),qc}static _fromIdTokenResponse(y,T,P=!1){return(0,E.Z)(function*(){const de=new rr;de.updateFromServerResponse(T);const De=new Dn({uid:T.localId,auth:y,stsTokenManager:de,isAnonymous:P});return yield Un(De),De})()}}const rt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(T,P){var de=this;return(0,E.Z)(function*(){de.storage[T]=P})()}_get(T){var P=this;return(0,E.Z)(function*(){const de=P.storage[T];return void 0===de?null:de})()}_remove(T){var P=this;return(0,E.Z)(function*(){delete P.storage[T]})()}_addListener(T,P){}_removeListener(T,P){}}return C.type="NONE",C})();function ht(C,y,T){return`firebase:${C}:${y}:${T}`}class qt{constructor(y,T,P){this.persistence=y,this.auth=T,this.userKey=P;const{config:de,name:De}=this.auth;this.fullUserKey=ht(this.userKey,de.apiKey,De),this.fullPersistenceKey=ht("persistence",de.apiKey,De),this.boundEventHandler=T._onStorageEvent.bind(T),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const T=yield y.persistence._get(y.fullUserKey);return T?Dn._fromJSON(y.auth,T):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var T=this;return(0,E.Z)(function*(){if(T.persistence===y)return;const P=yield T.getCurrentUser();return yield T.removeCurrentUser(),T.persistence=y,P?T.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,T,P="authUser"){return(0,E.Z)(function*(){if(!T.length)return new qt(Me(rt),y,P);const de=(yield Promise.all(T.map(function(){var lr=(0,E.Z)(function*(Rr){if(yield Rr._isAvailable())return Rr});return function(Rr){return lr.apply(this,arguments)}}()))).filter(lr=>lr);let De=de[0]||Me(rt);const gt=ht(P,y.config.apiKey,y.name);let zt=null;for(const lr of T)try{const Rr=yield lr._get(gt);if(Rr){const Ar=Dn._fromJSON(y,Rr);lr!==De&&(zt=Ar),De=lr;break}}catch{}const On=de.filter(lr=>lr._shouldAllowMigration);return De._shouldAllowMigration&&On.length?(De=On[0],zt&&(yield De._set(gt,zt.toJSON())),yield Promise.all(T.map(function(){var lr=(0,E.Z)(function*(Rr){if(Rr!==De)try{yield Rr._remove(gt)}catch{}});return function(Rr){return lr.apply(this,arguments)}}())),new qt(De,y,P)):new qt(De,y,P)})()}}function bt(C){const y=C.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(ai(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Sn(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(K(y))return"Blackberry";if(ae(y))return"Webos";if(An(y))return"Safari";if((y.includes("chrome/")||$r(y))&&!y.includes("edge/"))return"Chrome";if(ye(y))return"Android";{const P=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function Sn(C=(0,ee.z$)()){return/firefox\//i.test(C)}function An(C=(0,ee.z$)()){const y=C.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function $r(C=(0,ee.z$)()){return/crios\//i.test(C)}function ai(C=(0,ee.z$)()){return/iemobile/i.test(C)}function ye(C=(0,ee.z$)()){return/android/i.test(C)}function K(C=(0,ee.z$)()){return/blackberry/i.test(C)}function ae(C=(0,ee.z$)()){return/webos/i.test(C)}function ve(C=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function Ln(C=(0,ee.z$)()){return ve(C)||ye(C)||ae(C)||K(C)||/windows phone/i.test(C)||ai(C)}function br(C,y=[]){let T;switch(C){case"Browser":T=bt((0,ee.z$)());break;case"Worker":T=`${bt((0,ee.z$)())}-${C}`;break;default:T=C}const P=y.length?y.join(","):"FirebaseCore-web";return`${T}/JsCore/${Ue.SDK_VERSION}/${P}`}class yi{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,T){const P=De=>new Promise((gt,zt)=>{try{gt(y(De))}catch(On){zt(On)}});P.onAbort=T,this.queue.push(P);const de=this.queue.length-1;return()=>{this.queue[de]=()=>Promise.resolve()}}runMiddleware(y){var T=this;return(0,E.Z)(function*(){var P;if(T.auth.currentUser===y)return;const de=[];try{for(const De of T.queue)yield De(y),De.onAbort&&de.push(De.onAbort)}catch(De){de.reverse();for(const gt of de)try{gt()}catch{}throw T.auth._errorFactory.create("login-blocked",{originalMessage:null===(P=De)||void 0===P?void 0:P.message})}})()}}class ar{constructor(y,T,P){this.app=y,this.heartbeatServiceProvider=T,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.beforeStateQueue=new yi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(y,T){var P=this;return T&&(this._popupRedirectResolver=Me(T)),this._initializationPromise=this.queue((0,E.Z)(function*(){var de,De;if(!P._deleted&&(P.persistenceManager=yield qt.create(P,y),!P._deleted)){if(null!==(de=P._popupRedirectResolver)&&void 0!==de&&de._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(T),P.lastNotifiedUid=(null===(De=P.currentUser)||void 0===De?void 0:De.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const T=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||T){if(y.currentUser&&T&&y.currentUser.uid===T.uid)return y._currentUser._assign(T),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(T,!0)}})()}initializeCurrentUser(y){var T=this;return(0,E.Z)(function*(){var P;const de=yield T.assertedPersistence.getCurrentUser();let De=de,gt=!1;if(y&&T.config.authDomain){yield T.getOrInitRedirectPersistenceManager();const zt=null===(P=T.redirectUser)||void 0===P?void 0:P._redirectEventId,On=De?._redirectEventId,lr=yield T.tryRedirectSignIn(y);(!zt||zt===On)&&lr?.user&&(De=lr.user,gt=!0)}if(!De)return T.directlySetCurrentUser(null);if(!De._redirectEventId){if(gt)try{yield T.beforeStateQueue.runMiddleware(De)}catch(zt){De=de,T._popupRedirectResolver._overrideRedirectResult(T,()=>Promise.reject(zt))}return De?T.reloadAndSetCurrentUserOrClear(De):T.directlySetCurrentUser(null)}return H(T._popupRedirectResolver,T,"argument-error"),yield T.getOrInitRedirectPersistenceManager(),T.redirectUser&&T.redirectUser._redirectEventId===De._redirectEventId?T.directlySetCurrentUser(De):T.reloadAndSetCurrentUserOrClear(De)})()}tryRedirectSignIn(y){var T=this;return(0,E.Z)(function*(){let P=null;try{P=yield T._popupRedirectResolver._completeRedirectFn(T,y,!0)}catch{yield T._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(y){var T=this;return(0,E.Z)(function*(){var P;try{yield Un(y)}catch(de){if("auth/network-request-failed"!==(null===(P=de)||void 0===P?void 0:P.code))return T.directlySetCurrentUser(null)}return T.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function dt(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var T=this;return(0,E.Z)(function*(){const P=y?(0,ee.m9)(y):null;return P&&H(P.auth.config.apiKey===T.config.apiKey,T,"invalid-user-token"),T._updateCurrentUser(P&&P._clone(T))})()}_updateCurrentUser(y,T=!1){var P=this;return(0,E.Z)(function*(){if(!P._deleted)return y&&H(P.tenantId===y.tenantId,P,"tenant-id-mismatch"),T||(yield P.beforeStateQueue.runMiddleware(y)),P.queue((0,E.Z)(function*(){yield P.directlySetCurrentUser(y),P.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var T=this;return this.queue((0,E.Z)(function*(){yield T.assertedPersistence.setPersistence(Me(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new ee.LL("auth","Firebase",y())}onAuthStateChanged(y,T,P){return this.registerStateListener(this.authStateSubscription,y,T,P)}beforeAuthStateChanged(y,T){return this.beforeStateQueue.pushCallback(y,T)}onIdTokenChanged(y,T,P){return this.registerStateListener(this.idTokenSubscription,y,T,P)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,T){var P=this;return(0,E.Z)(function*(){const de=yield P.getOrInitRedirectPersistenceManager(T);return null===y?de.removeCurrentUser():de.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var T=this;return(0,E.Z)(function*(){if(!T.redirectPersistenceManager){const P=y&&Me(y)||T._popupRedirectResolver;H(P,T,"argument-error"),T.redirectPersistenceManager=yield qt.create(T,[Me(P._redirectPersistence)],"redirectUser"),T.redirectUser=yield T.redirectPersistenceManager.getCurrentUser()}return T.redirectPersistenceManager})()}_redirectUserForId(y){var T=this;return(0,E.Z)(function*(){var P,de;return T._isInitialized&&(yield T.queue((0,E.Z)(function*(){}))),(null===(P=T._currentUser)||void 0===P?void 0:P._redirectEventId)===y?T._currentUser:(null===(de=T.redirectUser)||void 0===de?void 0:de._redirectEventId)===y?T.redirectUser:null})()}_persistUserIfCurrent(y){var T=this;return(0,E.Z)(function*(){if(y===T.currentUser)return T.queue((0,E.Z)(function*(){return T.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,T;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(T=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==T?T:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,T,P,de){if(this._deleted)return()=>{};const De="function"==typeof T?T:T.next.bind(T),gt=this._isInitialized?Promise.resolve():this._initializationPromise;return H(gt,this,"internal-error"),gt.then(()=>De(this.currentUser)),"function"==typeof T?y.addObserver(T,P,de):y.addObserver(T)}directlySetCurrentUser(y){var T=this;return(0,E.Z)(function*(){T.currentUser&&T.currentUser!==y&&T._currentUser._stopProactiveRefresh(),y&&T.isProactiveRefreshEnabled&&y._startProactiveRefresh(),T.currentUser=y,y?yield T.assertedPersistence.setCurrentUser(y):yield T.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=br(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var T;const P={"X-Client-Version":y.clientVersion};y.app.options.appId&&(P["X-Firebase-gmpid"]=y.app.options.appId);const de=yield null===(T=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getHeartbeatsHeader();return de&&(P["X-Firebase-Client"]=de),P})()}}function zr(C){return(0,ee.m9)(C)}class Xi{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,ee.ne)(T=>this.observer=T)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(C){const y=C.indexOf(":");return y<0?"":C.substr(0,y+1)}function bi(C){if(!C)return null;const y=Number(C);return isNaN(y)?null:y}class Pi{constructor(y,T){this.providerId=y,this.signInMethod=T}toJSON(){return he("not implemented")}_getIdTokenResponse(y){return he("not implemented")}_linkToIdToken(y,T){return he("not implemented")}_getReauthenticationResolver(y){return he("not implemented")}}function Bi(C,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:resetPassword",Jt(C,y))})).apply(this,arguments)}function di(C,y){return _o.apply(this,arguments)}function _o(){return(_o=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function _s(C,y){return js.apply(this,arguments)}function js(){return(js=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:update",Jt(C,y))})).apply(this,arguments)}function Us(){return(Us=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithPassword",Jt(C,y))})).apply(this,arguments)}function Ws(C,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:sendOobCode",Jt(C,y))})).apply(this,arguments)}function Si(C,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function qr(C,y){return bs.apply(this,arguments)}function bs(){return(bs=(0,E.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function Ao(C,y){return ko.apply(this,arguments)}function ko(){return(ko=(0,E.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function Pa(C,y){return ns.apply(this,arguments)}function ns(){return(ns=(0,E.Z)(function*(C,y){return Ws(C,y)})).apply(this,arguments)}function xs(){return(xs=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithEmailLink",Jt(C,y))})).apply(this,arguments)}function Qo(){return(Qo=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithEmailLink",Jt(C,y))})).apply(this,arguments)}class Oa extends Pi{constructor(y,T,P,de=null){super("password",P),this._email=y,this._password=T,this._tenantId=de}static _fromEmailAndPassword(y,T){return new Oa(y,T,"password")}static _fromEmailAndCode(y,T,P=null){return new Oa(y,T,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y;if(T?.email&&T?.password){if("password"===T.signInMethod)return this._fromEmailAndPassword(T.email,T.password);if("emailLink"===T.signInMethod)return this._fromEmailAndCode(T.email,T.password,T.tenantId)}return null}_getIdTokenResponse(y){var T=this;return(0,E.Z)(function*(){switch(T.signInMethod){case"password":return function co(C,y){return Us.apply(this,arguments)}(y,{returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function lu(C,y){return xs.apply(this,arguments)}(y,{email:T._email,oobCode:T._password});default:Z(y,"internal-error")}})()}_linkToIdToken(y,T){var P=this;return(0,E.Z)(function*(){switch(P.signInMethod){case"password":return di(y,{idToken:T,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function qa(C,y){return Qo.apply(this,arguments)}(y,{idToken:T,email:P._email,oobCode:P._password});default:Z(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function hi(C,y){return wt.apply(this,arguments)}function wt(){return(wt=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithIdp",Jt(C,y))})).apply(this,arguments)}class Mt extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const T=new Mt(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(T.idToken=y.idToken),y.accessToken&&(T.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(T.nonce=y.nonce),y.pendingToken&&(T.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(T.accessToken=y.oauthToken,T.secret=y.oauthTokenSecret):Z("argument-error"),T}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:P,signInMethod:de}=T,De=(0,Le._T)(T,["providerId","signInMethod"]);if(!P||!de)return null;const gt=new Mt(P,de);return gt.idToken=De.idToken||void 0,gt.accessToken=De.accessToken||void 0,gt.secret=De.secret,gt.nonce=De.nonce,gt.pendingToken=De.pendingToken||null,gt}_getIdTokenResponse(y){return hi(y,this.buildRequest())}_linkToIdToken(y,T){const P=this.buildRequest();return P.idToken=T,hi(y,P)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,hi(y,T)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const T={};this.idToken&&(T.id_token=this.idToken),this.accessToken&&(T.access_token=this.accessToken),this.secret&&(T.oauth_token_secret=this.secret),T.providerId=this.providerId,this.nonce&&!this.pendingToken&&(T.nonce=this.nonce),y.postBody=(0,ee.xO)(T)}return y}}function an(C,y){return wn.apply(this,arguments)}function wn(){return(wn=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:sendVerificationCode",Jt(C,y))})).apply(this,arguments)}function Tr(){return(Tr=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithPhoneNumber",Jt(C,y))})).apply(this,arguments)}function Xr(){return(Xr=(0,E.Z)(function*(C,y){const T=yield Ci(C,"POST","/v1/accounts:signInWithPhoneNumber",Jt(C,y));if(T.temporaryProof)throw ti(C,"account-exists-with-different-credential",T);return T})).apply(this,arguments)}const Rs={USER_NOT_FOUND:"user-not-found"};function Vo(){return(Vo=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithPhoneNumber",Jt(C,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Rs)})).apply(this,arguments)}class zi extends Pi{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,T){return new zi({verificationId:y,verificationCode:T})}static _fromTokenResponse(y,T){return new zi({phoneNumber:y,temporaryProof:T})}_getIdTokenResponse(y){return function kn(C,y){return Tr.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,T){return function oi(C,y){return Xr.apply(this,arguments)}(y,Object.assign({idToken:T},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Wi(C,y){return Vo.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:T,verificationId:P,verificationCode:de}=this.params;return y&&T?{temporaryProof:y,phoneNumber:T}:{sessionInfo:P,code:de}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:T,verificationCode:P,phoneNumber:de,temporaryProof:De}=y;return P||T||de||De?new zi({verificationId:T,verificationCode:P,phoneNumber:de,temporaryProof:De}):null}}class bo{constructor(y){var T,P,de,De,gt,zt;const On=(0,ee.zd)((0,ee.pd)(y)),lr=null!==(T=On.apiKey)&&void 0!==T?T:null,Rr=null!==(P=On.oobCode)&&void 0!==P?P:null,Ar=function zs(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(de=On.mode)&&void 0!==de?de:null);H(lr&&Rr&&Ar,"argument-error"),this.apiKey=lr,this.operation=Ar,this.code=Rr,this.continueUrl=null!==(De=On.continueUrl)&&void 0!==De?De:null,this.languageCode=null!==(gt=On.languageCode)&&void 0!==gt?gt:null,this.tenantId=null!==(zt=On.tenantId)&&void 0!==zt?zt:null}static parseLink(y){const T=function Bu(C){const y=(0,ee.zd)((0,ee.pd)(C)).link,T=y?(0,ee.zd)((0,ee.pd)(y)).deep_link_id:null,P=(0,ee.zd)((0,ee.pd)(C)).deep_link_id;return(P?(0,ee.zd)((0,ee.pd)(P)).link:null)||P||T||y||C}(y);try{return new bo(T)}catch{return null}}}let to=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(T,P){return Oa._fromEmailAndPassword(T,P)}static credentialWithLink(T,P){const de=bo.parseLink(P);return H(de,"argument-error"),Oa._fromEmailAndCode(T,de.code,de.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class ho{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class fo extends ho{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class To extends fo{static credentialFromJSON(y){const T="string"==typeof y?JSON.parse(y):y;return H("providerId"in T&&"signInMethod"in T,"argument-error"),Mt._fromParams(T)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return H(y.idToken||y.accessToken,"argument-error"),Mt._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return To.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return To.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:P,oauthTokenSecret:de,pendingToken:De,nonce:gt,providerId:zt}=y;if(!P&&!de&&!T&&!De||!zt)return null;try{return new To(zt)._credential({idToken:T,accessToken:P,nonce:gt,pendingToken:De})}catch{return null}}}let Na=(()=>{class C extends fo{constructor(){super("facebook.com")}static credential(T){return Mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return C.credentialFromTaggedObject(T)}static credentialFromError(T){return C.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return C.credential(T.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Bs=(()=>{class C extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(T,P){return Mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:T,accessToken:P})}static credentialFromResult(T){return C.credentialFromTaggedObject(T)}static credentialFromError(T){return C.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthIdToken:P,oauthAccessToken:de}=T;if(!P&&!de)return null;try{return C.credential(P,de)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Ka=(()=>{class C extends fo{constructor(){super("github.com")}static credential(T){return Mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return C.credentialFromTaggedObject(T)}static credentialFromError(T){return C.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return C.credential(T.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class po extends Pi{constructor(y,T){super(y,y),this.pendingToken=T}_getIdTokenResponse(y){return hi(y,this.buildRequest())}_linkToIdToken(y,T){const P=this.buildRequest();return P.idToken=T,hi(y,P)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,hi(y,T)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:P,signInMethod:de,pendingToken:De}=T;return P&&de&&De&&P===de?new po(P,De):null}static _create(y,T){return new po(y,T)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class go extends ho{constructor(y){H(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return go.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return go.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const T=po.fromJSON(y);return H(T,"argument-error"),T}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:T,providerId:P}=y;if(!T||!P)return null;try{return po._create(P,T)}catch{return null}}}let Ks=(()=>{class C extends fo{constructor(){super("twitter.com")}static credential(T,P){return Mt._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:T,oauthTokenSecret:P})}static credentialFromResult(T){return C.credentialFromTaggedObject(T)}static credentialFromError(T){return C.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthAccessToken:P,oauthTokenSecret:de}=T;if(!P||!de)return null;try{return C.credential(P,de)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function ca(C,y){return da.apply(this,arguments)}function da(){return(da=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signUp",Jt(C,y))})).apply(this,arguments)}class ms{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,T,P,de=!1){return(0,E.Z)(function*(){const De=yield Dn._fromIdTokenResponse(y,P,de),gt=Xo(P);return new ms({user:De,providerId:gt,_tokenResponse:P,operationType:T})})()}static _forOperation(y,T,P){return(0,E.Z)(function*(){yield y._updateTokensIfNecessary(P,!0);const de=Xo(P);return new ms({user:y,providerId:de,_tokenResponse:P,operationType:T})})()}}function Xo(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function xi(){return(xi=(0,E.Z)(function*(C){var y;const T=zr(C);if(yield T._initializationPromise,null!==(y=T.currentUser)&&void 0!==y&&y.isAnonymous)return new ms({user:T.currentUser,providerId:null,operationType:"signIn"});const P=yield ca(T,{returnSecureToken:!0}),de=yield ms._fromIdTokenResponse(T,"signIn",P,!0);return yield T._updateCurrentUser(de.user),de})).apply(this,arguments)}class La extends ee.ZR{constructor(y,T,P,de){var De;super(T.code,T.message),this.operationType=P,this.user=de,Object.setPrototypeOf(this,La.prototype),this.customData={appName:y.name,tenantId:null!==(De=y.tenantId)&&void 0!==De?De:void 0,_serverResponse:T.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(y,T,P,de){return new La(y,T,P,de)}}function Sa(C,y,T,P){return("reauthenticate"===y?T._getReauthenticationResolver(C):T._getIdTokenResponse(C)).catch(De=>{throw"auth/multi-factor-auth-required"===De.code?La._fromErrorAndOperation(C,De,y,P):De})}function Vs(C){return new Set(C.map(({providerId:y})=>y).filter(y=>!!y))}function Eo(){return(Eo=(0,E.Z)(function*(C,y){const T=(0,ee.m9)(C);yield Br(!0,T,y);const{providerUserInfo:P}=yield pr(T.auth,{idToken:yield T.getIdToken(),deleteProvider:[y]}),de=Vs(P||[]);return T.providerData=T.providerData.filter(De=>de.has(De.providerId)),de.has("phone")||(T.phoneNumber=null),yield T.auth._persistUserIfCurrent(T),T})).apply(this,arguments)}function Mo(C,y){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,E.Z)(function*(C,y,T=!1){const P=yield vi(C,y._linkToIdToken(C.auth,yield C.getIdToken()),T);return ms._forOperation(C,"link",P)})).apply(this,arguments)}function Br(C,y,T){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,E.Z)(function*(C,y,T){yield Un(y);const de=!1===C?"provider-already-linked":"no-such-provider";H(Vs(y.providerData).has(T)===C,y.auth,de)})).apply(this,arguments)}function Po(C,y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,E.Z)(function*(C,y,T=!1){var P;const{auth:de}=C,De="reauthenticate";try{const gt=yield vi(C,Sa(de,De,y,C),T);H(gt.idToken,de,"internal-error");const zt=Zn(gt.idToken);H(zt,de,"internal-error");const{sub:On}=zt;return H(C.uid===On,de,"user-mismatch"),ms._forOperation(C,De,gt)}catch(gt){throw"auth/user-not-found"===(null===(P=gt)||void 0===P?void 0:P.code)&&Z(de,"user-mismatch"),gt}})).apply(this,arguments)}function no(C,y){return is.apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(C,y,T=!1){const P="signIn",de=yield Sa(C,P,y),De=yield ms._fromIdTokenResponse(C,P,de);return T||(yield C._updateCurrentUser(De.user)),De})).apply(this,arguments)}function fr(C,y){return ur.apply(this,arguments)}function ur(){return(ur=(0,E.Z)(function*(C,y){return no(zr(C),y)})).apply(this,arguments)}function cu(C,y){return wa.apply(this,arguments)}function wa(){return(wa=(0,E.Z)(function*(C,y){const T=(0,ee.m9)(C);return yield Br(!1,T,y.providerId),Mo(T,y)})).apply(this,arguments)}function fa(C,y){return So.apply(this,arguments)}function So(){return(So=(0,E.Z)(function*(C,y){return Po((0,ee.m9)(C),y)})).apply(this,arguments)}function Au(C,y){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,E.Z)(function*(C,y){return Ci(C,"POST","/v1/accounts:signInWithCustomToken",Jt(C,y))})).apply(this,arguments)}function ga(){return(ga=(0,E.Z)(function*(C,y){const T=zr(C),P=yield Au(T,{token:y,returnSecureToken:!0}),de=yield ms._fromIdTokenResponse(T,"signIn",P);return yield T._updateCurrentUser(de.user),de})).apply(this,arguments)}class hn{constructor(y,T){this.factorId=y,this.uid=T.mfaEnrollmentId,this.enrollmentTime=new Date(T.enrolledAt).toUTCString(),this.displayName=T.displayName}static _fromServerResponse(y,T){return"phoneInfo"in T?Jr._fromServerResponse(y,T):Z(y,"internal-error")}}class Jr extends hn{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,T){return new Jr(T)}}function ea(C,y,T){var P;H((null===(P=T.url)||void 0===P?void 0:P.length)>0,C,"invalid-continue-uri"),H(typeof T.dynamicLinkDomain>"u"||T.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),y.continueUrl=T.url,y.dynamicLinkDomain=T.dynamicLinkDomain,y.canHandleCodeInApp=T.handleCodeInApp,T.iOS&&(H(T.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),y.iOSBundleId=T.iOS.bundleId),T.android&&(H(T.android.packageName.length>0,C,"missing-android-pkg-name"),y.androidInstallApp=T.android.installApp,y.androidMinimumVersionCode=T.android.minimumVersion,y.androidPackageName=T.android.packageName)}function ds(){return(ds=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C),de={requestType:"PASSWORD_RESET",email:y};T&&ea(P,de,T),yield qr(P,de)})).apply(this,arguments)}function Q(){return(Q=(0,E.Z)(function*(C,y,T){yield Bi((0,ee.m9)(C),{oobCode:y,newPassword:T})})).apply(this,arguments)}function ke(){return(ke=(0,E.Z)(function*(C,y){yield _s((0,ee.m9)(C),{oobCode:y})})).apply(this,arguments)}function Ut(C,y){return re.apply(this,arguments)}function re(){return(re=(0,E.Z)(function*(C,y){const T=(0,ee.m9)(C),P=yield Bi(T,{oobCode:y}),de=P.requestType;switch(H(de,T,"internal-error"),de){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(P.newEmail,T,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(P.mfaInfo,T,"internal-error");default:H(P.email,T,"internal-error")}let De=null;return P.mfaInfo&&(De=hn._fromServerResponse(zr(T),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:De},operation:de}})).apply(this,arguments)}function Oe(){return(Oe=(0,E.Z)(function*(C,y){const{data:T}=yield Ut((0,ee.m9)(C),y);return T.email})).apply(this,arguments)}function ot(){return(ot=(0,E.Z)(function*(C,y,T){const P=zr(C),de=yield ca(P,{returnSecureToken:!0,email:y,password:T}),De=yield ms._fromIdTokenResponse(P,"signIn",de);return yield P._updateCurrentUser(De.user),De})).apply(this,arguments)}function Hn(){return(Hn=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C),de={requestType:"EMAIL_SIGNIN",email:y};H(T.handleCodeInApp,P,"argument-error"),T&&ea(P,de,T),yield Ao(P,de)})).apply(this,arguments)}function Gr(){return(Gr=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C),de=to.credentialWithLink(y,T||St());return H(de._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),fr(P,de)})).apply(this,arguments)}function Is(C,y){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:createAuthUri",Jt(C,y))})).apply(this,arguments)}function Hi(){return(Hi=(0,E.Z)(function*(C,y){const P={identifier:y,continueUri:Tt()?St():"http://localhost"},{signinMethods:de}=yield Is((0,ee.m9)(C),P);return de||[]})).apply(this,arguments)}function wi(){return(wi=(0,E.Z)(function*(C,y){const T=(0,ee.m9)(C),de={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};y&&ea(T.auth,de,y);const{email:De}=yield Si(T.auth,de);De!==C.email&&(yield C.reload())})).apply(this,arguments)}function mi(){return(mi=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C),De={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:y};T&&ea(P.auth,De,T);const{email:gt}=yield Pa(P.auth,De);gt!==C.email&&(yield C.reload())})).apply(this,arguments)}function hs(C,y){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,E.Z)(function*(C,y){return qn(C,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Oo(){return(Oo=(0,E.Z)(function*(C,{displayName:y,photoURL:T}){if(void 0===y&&void 0===T)return;const P=(0,ee.m9)(C),De={idToken:yield P.getIdToken(),displayName:y,photoUrl:T,returnSecureToken:!0},gt=yield vi(P,hs(P.auth,De));P.displayName=gt.displayName||null,P.photoURL=gt.photoUrl||null;const zt=P.providerData.find(({providerId:On})=>"password"===On);zt&&(zt.displayName=P.displayName,zt.photoURL=P.photoURL),yield P._updateTokensIfNecessary(gt)})).apply(this,arguments)}function z(C,y,T){return we.apply(this,arguments)}function we(){return(we=(0,E.Z)(function*(C,y,T){const{auth:P}=C,De={idToken:yield C.getIdToken(),returnSecureToken:!0};y&&(De.email=y),T&&(De.password=T);const gt=yield vi(C,di(P,De));yield C._updateTokensIfNecessary(gt,!0)})).apply(this,arguments)}class Ot{constructor(y,T,P={}){this.isNewUser=y,this.providerId=T,this.profile=P}}class Kt extends Ot{constructor(y,T,P,de){super(y,T,P),this.username=de}}class Bn extends Ot{constructor(y,T){super(y,"facebook.com",T)}}class Cr extends Kt{constructor(y,T){super(y,"github.com",T,"string"==typeof T?.login?T?.login:null)}}class Ii extends Ot{constructor(y,T){super(y,"google.com",T)}}class Di extends Kt{constructor(y,T,P){super(y,"twitter.com",T,P)}}function fi(C){const{user:y,_tokenResponse:T}=C;return y.isAnonymous&&!T?{providerId:null,isNewUser:!1,profile:null}:function et(C){var y,T;if(!C)return null;const{providerId:P}=C,de=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},De=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!P&&C?.idToken){const gt=null===(T=null===(y=Zn(C.idToken))||void 0===y?void 0:y.firebase)||void 0===T?void 0:T.sign_in_provider;if(gt)return new Ot(De,"anonymous"!==gt&&"custom"!==gt?gt:null)}if(!P)return null;switch(P){case"facebook.com":return new Bn(De,de);case"github.com":return new Cr(De,de);case"google.com":return new Ii(De,de);case"twitter.com":return new Di(De,de,C.screenName||null);case"custom":case"anonymous":return new Ot(De,null);default:return new Ot(De,P,de)}}(T)}class na{constructor(y,T,P){this.type=y,this.credential=T,this.auth=P}static _fromIdtoken(y,T){return new na("enroll",y,T)}static _fromMfaPendingCredential(y){return new na("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var T,P;if(y?.multiFactorSession){if(null!==(T=y.multiFactorSession)&&void 0!==T&&T.pendingCredential)return na._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(P=y.multiFactorSession)&&void 0!==P&&P.idToken)return na._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Co{constructor(y,T,P){this.session=y,this.hints=T,this.signInResolver=P}static _fromError(y,T){const P=zr(y),de=T.customData._serverResponse,De=(de.mfaInfo||[]).map(zt=>hn._fromServerResponse(P,zt));H(de.mfaPendingCredential,P,"internal-error");const gt=na._fromMfaPendingCredential(de.mfaPendingCredential);return new Co(gt,De,function(){var zt=(0,E.Z)(function*(On){const lr=yield On._process(P,gt);delete de.mfaInfo,delete de.mfaPendingCredential;const Rr=Object.assign(Object.assign({},de),{idToken:lr.idToken,refreshToken:lr.refreshToken});switch(T.operationType){case"signIn":const Ar=yield ms._fromIdTokenResponse(P,T.operationType,Rr);return yield P._updateCurrentUser(Ar.user),Ar;case"reauthenticate":return H(T.user,P,"internal-error"),ms._forOperation(T.user,T.operationType,Rr);default:Z(P,"internal-error")}});return function(On){return zt.apply(this,arguments)}}())}resolveSignIn(y){var T=this;return(0,E.Z)(function*(){return T.signInResolver(y)})()}}function Vu(C,y){return qn(C,"POST","/v2/accounts/mfaEnrollment:start",Jt(C,y))}class Tl{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(T=>{T.mfaInfo&&(this.enrolledFactors=T.mfaInfo.map(P=>hn._fromServerResponse(y.auth,P)))})}static _fromUser(y){return new Tl(y)}getSession(){var y=this;return(0,E.Z)(function*(){return na._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,T){var P=this;return(0,E.Z)(function*(){const de=y,De=yield P.getSession(),gt=yield vi(P.user,de._process(P.user.auth,De,T));return yield P.user._updateTokensIfNecessary(gt),P.user.reload()})()}unenroll(y){var T=this;return(0,E.Z)(function*(){var P;const de="string"==typeof y?y:y.uid,De=yield T.user.getIdToken(),gt=yield vi(T.user,function $o(C,y){return qn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(C,y))}(T.user.auth,{idToken:De,mfaEnrollmentId:de}));T.enrolledFactors=T.enrolledFactors.filter(({uid:zt})=>zt!==de),yield T.user._updateTokensIfNecessary(gt);try{yield T.user.reload()}catch(zt){if("auth/user-token-expired"!==(null===(P=zt)||void 0===P?void 0:P.code))throw zt}})()}}const ul=new WeakMap,Hu="__sak";class fc{constructor(y,T){this.storageRetriever=y,this.type=T}_isAvailable(){try{return this.storage?(this.storage.setItem(Hu,"1"),this.storage.removeItem(Hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,T){return this.storage.setItem(y,JSON.stringify(T)),Promise.resolve()}_get(y){const T=this.storage.getItem(y);return Promise.resolve(T?JSON.parse(T):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const gr=(()=>{class C extends fc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(T,P)=>this.onStorageEvent(T,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mu(){const C=(0,ee.z$)();return An(C)||ve(C)}()&&function Kn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ln(),this._shouldAllowMigration=!0}forAllChangedKeys(T){for(const P of Object.keys(this.listeners)){const de=this.storage.getItem(P),De=this.localCache[P];de!==De&&T(P,De,de)}}onStorageEvent(T,P=!1){if(!T.key)return void this.forAllChangedKeys((zt,On,lr)=>{this.notifyListeners(zt,lr)});const de=T.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const zt=this.storage.getItem(de);if(T.newValue!==zt)null!==T.newValue?this.storage.setItem(de,T.newValue):this.storage.removeItem(de);else if(this.localCache[de]===T.newValue&&!P)return}const De=()=>{const zt=this.storage.getItem(de);!P&&this.localCache[de]===zt||this.notifyListeners(de,zt)},gt=this.storage.getItem(de);!function dn(){return(0,ee.w1)()&&10===document.documentMode}()||gt===T.newValue||T.newValue===T.oldValue?De():setTimeout(De,10)}notifyListeners(T,P){this.localCache[T]=P;const de=this.listeners[T];if(de)for(const De of Array.from(de))De(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((T,P,de)=>{this.onStorageEvent(new StorageEvent("storage",{key:T,oldValue:P,newValue:de}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(T,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[T]||(this.listeners[T]=new Set,this.localCache[T]=this.storage.getItem(T)),this.listeners[T].add(P)}_removeListener(T,P){this.listeners[T]&&(this.listeners[T].delete(P),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(T,P){var de=()=>super._set,De=this;return(0,E.Z)(function*(){yield de().call(De,T,P),De.localCache[T]=JSON.stringify(P)})()}_get(T){var P=()=>super._get,de=this;return(0,E.Z)(function*(){const De=yield P().call(de,T);return de.localCache[T]=JSON.stringify(De),De})()}_remove(T){var P=()=>super._remove,de=this;return(0,E.Z)(function*(){yield P().call(de,T),delete de.localCache[T]})()}}return C.type="LOCAL",C})(),oo=(()=>{class C extends fc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(T,P){}_removeListener(T,P){}}return C.type="SESSION",C})();let $u=(()=>{class C{constructor(T){this.eventTarget=T,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(T){const P=this.receivers.find(De=>De.isListeningto(T));if(P)return P;const de=new C(T);return this.receivers.push(de),de}isListeningto(T){return this.eventTarget===T}handleEvent(T){var P=this;return(0,E.Z)(function*(){const de=T,{eventId:De,eventType:gt,data:zt}=de.data,On=P.handlersMap[gt];if(!On?.size)return;de.ports[0].postMessage({status:"ack",eventId:De,eventType:gt});const lr=Array.from(On).map(function(){var Ar=(0,E.Z)(function*(Ki){return Ki(de.origin,zt)});return function(Ki){return Ar.apply(this,arguments)}}()),Rr=yield function ja(C){return Promise.all(C.map(function(){var y=(0,E.Z)(function*(T){try{return{fulfilled:!0,value:yield T}}catch(P){return{fulfilled:!1,reason:P}}});return function(T){return y.apply(this,arguments)}}()))}(lr);de.ports[0].postMessage({status:"done",eventId:De,eventType:gt,response:Rr})})()}_subscribe(T,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[T]||(this.handlersMap[T]=new Set),this.handlersMap[T].add(P)}_unsubscribe(T,P){this.handlersMap[T]&&P&&this.handlersMap[T].delete(P),(!P||0===this.handlersMap[T].size)&&delete this.handlersMap[T],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function En(C="",y=10){let T="";for(let P=0;P<y;P++)T+=Math.floor(10*Math.random());return C+T}class Es{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,T,P=50){var de=this;return(0,E.Z)(function*(){const De=typeof MessageChannel<"u"?new MessageChannel:null;if(!De)throw new Error("connection_unavailable");let gt,zt;return new Promise((On,lr)=>{const Rr=En("",20);De.port1.start();const Ar=setTimeout(()=>{lr(new Error("unsupported_event"))},P);zt={messageChannel:De,onMessage(Ki){const Fn=Ki;if(Fn.data.eventId===Rr)switch(Fn.data.status){case"ack":clearTimeout(Ar),gt=setTimeout(()=>{lr(new Error("timeout"))},3e3);break;case"done":clearTimeout(gt),On(Fn.data.response);break;default:clearTimeout(Ar),clearTimeout(gt),lr(new Error("invalid_response"))}}},de.handlers.add(zt),De.port1.addEventListener("message",zt.onMessage),de.target.postMessage({eventType:y,eventId:Rr,data:T},[De.port2])}).finally(()=>{zt&&de.removeMessageHandler(zt)})})()}}function vs(){return window}function Jn(){return typeof vs().WorkerGlobalScope<"u"&&"function"==typeof vs().importScripts}function hu(){return(hu=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ln="firebaseLocalStorageDb",Qa="firebaseLocalStorage",pc="fbase_key";class fu{constructor(y){this.request=y}toPromise(){return new Promise((y,T)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{T(this.request.error)})})}}function El(C,y){return C.transaction([Qa],y?"readwrite":"readonly").objectStore(Qa)}function Ds(){const C=indexedDB.open(ln,1);return new Promise((y,T)=>{C.addEventListener("error",()=>{T(C.error)}),C.addEventListener("upgradeneeded",()=>{const P=C.result;try{P.createObjectStore(Qa,{keyPath:pc})}catch(de){T(de)}}),C.addEventListener("success",(0,E.Z)(function*(){const P=C.result;P.objectStoreNames.contains(Qa)?y(P):(P.close(),yield function Sl(){const C=indexedDB.deleteDatabase(ln);return new fu(C).toPromise()}(),y(yield Ds()))}))})}function Ca(C,y,T){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,E.Z)(function*(C,y,T){const P=El(C,!0).put({[pc]:y,value:T});return new fu(P).toPromise()})).apply(this,arguments)}function pu(){return(pu=(0,E.Z)(function*(C,y){const T=El(C,!1).get(y),P=yield new fu(T).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function Ja(C,y){const T=El(C,!0).delete(y);return new fu(T).toPromise()}const ts=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var T=this;return(0,E.Z)(function*(){return T.db||(T.db=yield Ds()),T.db})()}_withRetries(T){var P=this;return(0,E.Z)(function*(){let de=0;for(;;)try{const De=yield P._openDb();return yield T(De)}catch(De){if(de++>3)throw De;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var T=this;return(0,E.Z)(function*(){return Jn()?T.initializeReceiver():T.initializeSender()})()}initializeReceiver(){var T=this;return(0,E.Z)(function*(){T.receiver=$u._getInstance(function Gt(){return Jn()?self:null}()),T.receiver._subscribe("keyChanged",function(){var P=(0,E.Z)(function*(de,De){return{keyProcessed:(yield T._poll()).includes(De.key)}});return function(de,De){return P.apply(this,arguments)}}()),T.receiver._subscribe("ping",function(){var P=(0,E.Z)(function*(de,De){return["keyChanged"]});return function(de,De){return P.apply(this,arguments)}}())})()}initializeSender(){var T=this;return(0,E.Z)(function*(){var P,de;if(T.activeServiceWorker=yield function dr(){return hu.apply(this,arguments)}(),!T.activeServiceWorker)return;T.sender=new Es(T.activeServiceWorker);const De=yield T.sender._send("ping",{},800);!De||(null===(P=De[0])||void 0===P?void 0:P.fulfilled)&&(null===(de=De[0])||void 0===de?void 0:de.value.includes("keyChanged"))&&(T.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(T){var P=this;return(0,E.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function $n(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:T},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const T=yield Ds();return yield Ca(T,Hu,"1"),yield Ja(T,Hu),!0}catch{}return!1})()}_withPendingWrite(T){var P=this;return(0,E.Z)(function*(){P.pendingWrites++;try{yield T()}finally{P.pendingWrites--}})()}_set(T,P){var de=this;return(0,E.Z)(function*(){return de._withPendingWrite((0,E.Z)(function*(){return yield de._withRetries(De=>Ca(De,T,P)),de.localCache[T]=P,de.notifyServiceWorker(T)}))})()}_get(T){var P=this;return(0,E.Z)(function*(){const de=yield P._withRetries(De=>function wl(C,y){return pu.apply(this,arguments)}(De,T));return P.localCache[T]=de,de})()}_remove(T){var P=this;return(0,E.Z)(function*(){return P._withPendingWrite((0,E.Z)(function*(){return yield P._withRetries(de=>Ja(de,T)),delete P.localCache[T],P.notifyServiceWorker(T)}))})()}_poll(){var T=this;return(0,E.Z)(function*(){const P=yield T._withRetries(gt=>{const zt=El(gt,!1).getAll();return new fu(zt).toPromise()});if(!P)return[];if(0!==T.pendingWrites)return[];const de=[],De=new Set;for(const{fbase_key:gt,value:zt}of P)De.add(gt),JSON.stringify(T.localCache[gt])!==JSON.stringify(zt)&&(T.notifyListeners(gt,zt),de.push(gt));for(const gt of Object.keys(T.localCache))T.localCache[gt]&&!De.has(gt)&&(T.notifyListeners(gt,null),de.push(gt));return de})()}notifyListeners(T,P){this.localCache[T]=P;const de=this.listeners[T];if(de)for(const De of Array.from(de))De(P)}startPolling(){var T=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return T._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(T,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[T]||(this.listeners[T]=new Set,this._get(T)),this.listeners[T].add(P)}_removeListener(T,P){this.listeners[T]&&(this.listeners[T].delete(P),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function Er(C,y){return qn(C,"POST","/v2/accounts/mfaSignIn:start",Jt(C,y))}function Ua(){return(Ua=(0,E.Z)(function*(C){return(yield qn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pn(C){return new Promise((y,T)=>{const P=document.createElement("script");P.setAttribute("src",C),P.onload=y,P.onerror=de=>{const De=xe("internal-error");De.customData=de,T(De)},P.type="text/javascript",P.charset="UTF-8",function Ai(){var C,y;return null!==(y=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==y?y:document}().appendChild(P)})}function ps(C){return`__${C}${Math.floor(1e6*Math.random())}`}const mu=1e12;class Li{constructor(y){this.auth=y,this.counter=mu,this._widgets=new Map}render(y,T){const P=this.counter;return this._widgets.set(P,new rd(y,this.auth.name,T||{})),this.counter++,P}reset(y){var T;const P=y||mu;null===(T=this._widgets.get(P))||void 0===T||T.delete(),this._widgets.delete(P)}getResponse(y){var T;return(null===(T=this._widgets.get(y||mu))||void 0===T?void 0:T.getResponse())||""}execute(y){var T=this;return(0,E.Z)(function*(){var P;return null===(P=T._widgets.get(y||mu))||void 0===P||P.execute(),""})()}}class rd{constructor(y,T,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const de="string"==typeof y?document.getElementById(y):y;H(de,"argument-error",{appName:T}),this.container=de,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gc(C){const y=[],T="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<C;P++)y.push(T.charAt(Math.floor(Math.random()*T.length)));return y.join("")}(50);const{callback:y,"expired-callback":T}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,T)try{T()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const va=ps("rcb"),Go=new Ht(3e4,6e4);class ll{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=vs().grecaptcha)||void 0===y||!y.render)}load(y,T=""){return H(function Mh(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(T),y,"argument-error"),this.shouldResolveImmediately(T)?Promise.resolve(vs().grecaptcha):new Promise((P,de)=>{const De=vs().setTimeout(()=>{de(xe(y,"network-request-failed"))},Go.get());vs()[va]=()=>{vs().clearTimeout(De),delete vs()[va];const zt=vs().grecaptcha;if(!zt)return void de(xe(y,"internal-error"));const On=zt.render;zt.render=(lr,Rr)=>{const Ar=On(lr,Rr);return this.counter++,Ar},this.hostLanguage=T,P(zt)},Pn(`https://www.google.com/recaptcha/api.js??${(0,ee.xO)({onload:va,render:"explicit",hl:T})}`).catch(()=>{clearTimeout(De),de(xe(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var T;return!(null===(T=vs().grecaptcha)||void 0===T||!T.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wu{load(y){return(0,E.Z)(function*(){return new Li(y)})()}clearedOneInstance(){}}const Wo="recaptcha",ys={theme:"light",type:"image"};class At{constructor(y,T=Object.assign({},ys),P){this.parameters=T,this.type=Wo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zr(P),this.isInvisible="invisible"===this.parameters.size,H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const de="string"==typeof y?document.getElementById(y):y;H(de,this.auth,"argument-error"),this.container=de,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wu:new ll,this.validateStartingState()}verify(){var y=this;return(0,E.Z)(function*(){y.assertNotDestroyed();const T=yield y.render(),P=y.getAssertedRecaptcha();return P.getResponse(T)||new Promise(De=>{const gt=zt=>{!zt||(y.tokenChangeListeners.delete(gt),De(zt))};y.tokenChangeListeners.add(gt),y.isInvisible&&P.execute(T)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return T=>{if(this.tokenChangeListeners.forEach(P=>P(T)),"function"==typeof y)y(T);else if("string"==typeof y){const P=vs()[y];"function"==typeof P&&P(T)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,E.Z)(function*(){if(yield y.init(),!y.widgetId){let T=y.container;if(!y.isInvisible){const P=document.createElement("div");T.appendChild(P),T=P}y.widgetId=y.getAssertedRecaptcha().render(T,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,E.Z)(function*(){H(Tt()&&!Jn(),y.auth,"internal-error"),yield function xl(){let C=null;return new Promise(y=>{"complete"!==document.readyState?(C=()=>y(),window.addEventListener("load",C)):y()}).catch(y=>{throw C&&window.removeEventListener("load",C),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const T=yield function Fr(C){return Ua.apply(this,arguments)}(y.auth);H(T,y.auth,"internal-error"),y.parameters.sitekey=T})()}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fi{constructor(y,T){this.verificationId=y,this.onConfirmation=T}confirm(y){const T=zi._fromVerification(this.verificationId,y);return this.onConfirmation(T)}}function eu(){return(eu=(0,E.Z)(function*(C,y,T){const P=zr(C),de=yield ru(P,y,(0,ee.m9)(T));return new Fi(de,De=>fr(P,De))})).apply(this,arguments)}function tu(){return(tu=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C);yield Br(!1,P,"phone");const de=yield ru(P.auth,y,(0,ee.m9)(T));return new Fi(de,De=>cu(P,De))})).apply(this,arguments)}function nu(){return(nu=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C),de=yield ru(P.auth,y,(0,ee.m9)(T));return new Fi(de,De=>fa(P,De))})).apply(this,arguments)}function ru(C,y,T){return mc.apply(this,arguments)}function mc(){return(mc=(0,E.Z)(function*(C,y,T){var P;const de=yield T.verify();try{let De;if(H("string"==typeof de,C,"argument-error"),H(T.type===Wo,C,"argument-error"),De="string"==typeof y?{phoneNumber:y}:y,"session"in De){const gt=De.session;if("phoneNumber"in De)return H("enroll"===gt.type,C,"internal-error"),(yield Vu(C,{idToken:gt.credential,phoneEnrollmentInfo:{phoneNumber:De.phoneNumber,recaptchaToken:de}})).phoneSessionInfo.sessionInfo;{H("signin"===gt.type,C,"internal-error");const zt=(null===(P=De.multiFactorHint)||void 0===P?void 0:P.uid)||De.multiFactorUid;return H(zt,C,"missing-multi-factor-info"),(yield Er(C,{mfaPendingCredential:gt.credential,mfaEnrollmentId:zt,phoneSignInInfo:{recaptchaToken:de}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:gt}=yield an(C,{phoneNumber:De.phoneNumber,recaptchaToken:de});return gt}}finally{T._reset()}})).apply(this,arguments)}function O(){return(O=(0,E.Z)(function*(C,y){yield Mo((0,ee.m9)(C),y)})).apply(this,arguments)}let D=(()=>{class C{constructor(T){this.providerId=C.PROVIDER_ID,this.auth=zr(T)}verifyPhoneNumber(T,P){return ru(this.auth,T,(0,ee.m9)(P))}static credential(T,P){return zi._fromVerification(T,P)}static credentialFromResult(T){return C.credentialFromTaggedObject(T)}static credentialFromError(T){return C.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{phoneNumber:P,temporaryProof:de}=T;return P&&de?zi._fromTokenResponse(P,de):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function U(C,y){return y?Me(y):(H(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class X extends Pi{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return hi(y,this._buildIdpRequest())}_linkToIdToken(y,T){return hi(y,this._buildIdpRequest(T))}_getReauthenticationResolver(y){return hi(y,this._buildIdpRequest())}_buildIdpRequest(y){const T={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(T.idToken=y),T}}function _e(C){return no(C.auth,new X(C),C.bypassAuthState)}function Xe(C){const{auth:y,user:T}=C;return H(T,y,"internal-error"),Po(T,new X(C),C.bypassAuthState)}function Qe(C){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,E.Z)(function*(C){const{auth:y,user:T}=C;return H(T,y,"internal-error"),Mo(T,new X(C),C.bypassAuthState)})).apply(this,arguments)}class bn{constructor(y,T,P,de,De=!1){this.auth=y,this.resolver=P,this.user=de,this.bypassAuthState=De,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(T)?T:[T]}execute(){var y=this;return new Promise(function(){var T=(0,E.Z)(function*(P,de){y.pendingPromise={resolve:P,reject:de};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(De){y.reject(De)}});return function(P,de){return T.apply(this,arguments)}}())}onAuthEvent(y){var T=this;return(0,E.Z)(function*(){const{urlResponse:P,sessionId:de,postBody:De,tenantId:gt,error:zt,type:On}=y;if(zt)return void T.reject(zt);const lr={auth:T.auth,requestUri:P,sessionId:de,tenantId:gt||void 0,postBody:De||void 0,user:T.user,bypassAuthState:T.bypassAuthState};try{T.resolve(yield T.getIdpTask(On)(lr))}catch(Rr){T.reject(Rr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return _e;case"linkViaPopup":case"linkViaRedirect":return Qe;case"reauthViaPopup":case"reauthViaRedirect":return Xe;default:Z(this.auth,"internal-error")}}resolve(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){fe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vr=new Ht(2e3,1e4);function ji(){return(ji=(0,E.Z)(function*(C,y,T){const P=zr(C);_t(C,y,ho);const de=U(P,T);return new ia(P,"signInViaPopup",y,de).executeNotNull()})).apply(this,arguments)}function gn(){return(gn=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C);_t(P.auth,y,ho);const de=U(P.auth,T);return new ia(P.auth,"reauthViaPopup",y,de,P).executeNotNull()})).apply(this,arguments)}function Ei(){return(Ei=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C);_t(P.auth,y,ho);const de=U(P.auth,T);return new ia(P.auth,"linkViaPopup",y,de,P).executeNotNull()})).apply(this,arguments)}let ia=(()=>{class C extends bn{constructor(T,P,de,De,gt){super(T,P,De,gt),this.provider=de,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var T=this;return(0,E.Z)(function*(){const P=yield T.execute();return H(P,T.auth,"internal-error"),P})()}onExecution(){var T=this;return(0,E.Z)(function*(){fe(1===T.filter.length,"Popup operations only handle one event");const P=En();T.authWindow=yield T.resolver._openPopup(T.auth,T.provider,T.filter[0],P),T.authWindow.associatedEvent=P,T.resolver._originValidation(T.auth).catch(de=>{T.reject(de)}),T.resolver._isIframeWebStorageSupported(T.auth,de=>{de||T.reject(xe(T.auth,"web-storage-unsupported"))}),T.pollUserCancellation()})()}get eventId(){var T;return(null===(T=this.authWindow)||void 0===T?void 0:T.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const T=()=>{var P,de;this.pollId=null!==(de=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==de&&de.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(T,Vr.get())};T()}}return C.currentPopupAction=null,C})();const Va=new Map;class vo extends bn{constructor(y,T,P=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],T,void 0,P),this.eventId=null}execute(){var y=()=>super.execute,T=this;return(0,E.Z)(function*(){let P=Va.get(T.auth._key());if(!P){try{const De=(yield function cl(C,y){return Io.apply(this,arguments)}(T.resolver,T.auth))?yield y().call(T):null;P=()=>Promise.resolve(De)}catch(de){P=()=>Promise.reject(de)}Va.set(T.auth._key(),P)}return T.bypassAuthState||Va.set(T.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(y){var T=()=>super.onAuthEvent,P=this;return(0,E.Z)(function*(){if("signInViaRedirect"===y.type)return T().call(P,y);if("unknown"!==y.type){if(y.eventId){const de=yield P.auth._redirectUserForId(y.eventId);if(de)return P.user=de,T().call(P,y);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Io(){return(Io=(0,E.Z)(function*(C,y){const T=zu(y),P=yu(C);if(!(yield P._isAvailable()))return!1;const de="true"===(yield P._get(T));return yield P._remove(T),de})).apply(this,arguments)}function ya(C,y){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(C,y){return yu(C)._set(zu(y),"true")})).apply(this,arguments)}function iu(C,y){Va.set(C._key(),y)}function yu(C){return Me(C._redirectPersistence)}function zu(C){return ht("pendingRedirect",C.config.apiKey,C.name)}function G(){return(G=(0,E.Z)(function*(C,y,T){const P=zr(C);_t(C,y,ho);const de=U(P,T);return yield ya(de,P),de._openRedirect(P,y,"signInViaRedirect")})).apply(this,arguments)}function tt(){return(tt=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C);_t(P.auth,y,ho);const de=U(P.auth,T);yield ya(de,P.auth);const De=yield Ir(P);return de._openRedirect(P.auth,y,"reauthViaRedirect",De)})).apply(this,arguments)}function vn(){return(vn=(0,E.Z)(function*(C,y,T){const P=(0,ee.m9)(C);_t(P.auth,y,ho);const de=U(P.auth,T);yield Br(!1,P,y.providerId),yield ya(de,P.auth);const De=yield Ir(P);return de._openRedirect(P.auth,y,"linkViaRedirect",De)})).apply(this,arguments)}function xr(){return(xr=(0,E.Z)(function*(C,y){return yield zr(C)._initializationPromise,Pr(C,y,!1)})).apply(this,arguments)}function Pr(C,y){return ii.apply(this,arguments)}function ii(){return(ii=(0,E.Z)(function*(C,y,T=!1){const P=zr(C),de=U(P,y),gt=yield new vo(P,de,T).execute();return gt&&!T&&(delete gt.user._redirectEventId,yield P._persistUserIfCurrent(gt.user),yield P._setRedirectUser(null,y)),gt})).apply(this,arguments)}function Ir(C){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,E.Z)(function*(C){const y=En(`${C.uid}:::`);return C._redirectEventId=y,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),y})).apply(this,arguments)}class Il{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let T=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(y,P)&&(T=!0,this.sendToConsumer(y,P),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Gl(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(C);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,T||(this.queuedRedirectEvent=y,T=!0)),T}sendToConsumer(y,T){var P;if(y.error&&!As(y)){const de=(null===(P=y.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";T.onError(xe(this.auth,de))}else T.onAuthEvent(y)}isEventForConsumer(y,T){const P=null===T.eventId||!!y.eventId&&y.eventId===T.eventId;return T.filter.includes(y.type)&&P}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dl(y))}saveEventToCache(y){this.cachedEventUids.add(dl(y)),this.lastProcessedEventTime=Date.now()}}function dl(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(y=>y).join("-")}function As({type:C,error:y}){return"unknown"===C&&"auth/no-auth-event"===y?.code}function Gi(C){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,E.Z)(function*(C,y={}){return qn(C,"GET","/v1/projects",y)})).apply(this,arguments)}const Pu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ha=/^https?/;function Bc(){return(Bc=(0,E.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:y}=yield Gi(C);for(const T of y)try{if(Ph(T))return}catch{}Z(C,"unauthorized-domain")})).apply(this,arguments)}function Ph(C){const y=St(),{protocol:T,hostname:P}=new URL(y);if(C.startsWith("chrome-extension://")){const gt=new URL(C);return""===gt.hostname&&""===P?"chrome-extension:"===T&&C.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===T&&gt.hostname===P}if(!Ha.test(T))return!1;if(Pu.test(C))return P===C;const de=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+de+"|"+de+")$","i").test(P)}const Gd=new Ht(3e4,6e4);function Mf(){const C=vs().___jsl;if(C?.H)for(const y of Object.keys(C.H))if(C.H[y].r=C.H[y].r||[],C.H[y].L=C.H[y].L||[],C.H[y].r=[...C.H[y].L],C.CP)for(let T=0;T<C.CP.length;T++)C.CP[T]=null}let os=null;function id(C){return os=os||function Al(C){return new Promise((y,T)=>{var P,de,De;function gt(){Mf(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Mf(),T(xe(C,"network-request-failed"))},timeout:Gd.get()})}if(null!==(de=null===(P=vs().gapi)||void 0===P?void 0:P.iframes)&&void 0!==de&&de.Iframe)y(gapi.iframes.getContext());else{if(null===(De=vs().gapi)||void 0===De||!De.load){const zt=ps("iframefcb");return vs()[zt]=()=>{gapi.load?gt():T(xe(C,"network-request-failed"))},Pn(`https://apis.google.com/js/api.js?onload=${zt}`).catch(On=>T(On))}gt()}}).catch(y=>{throw os=null,y})}(C),os}const $a=new Ht(5e3,15e3),sd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oh(C){const y=C.config;H(y.authDomain,C,"auth-domain-config-required");const T=y.emulator?$t(y,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,P={apiKey:y.apiKey,appName:C.name,v:Ue.SDK_VERSION},de=Wd.get(C.config.apiHost);de&&(P.eid=de);const De=C._getFrameworks();return De.length&&(P.fw=De.join(",")),`${T}?${(0,ee.xO)(P).slice(1)}`}function Ou(){return Ou=(0,E.Z)(function*(C){const y=yield id(C),T=vs().gapi;return H(T,C,"internal-error"),y.open({where:document.body,url:Oh(C),messageHandlersFilter:T.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sd,dontclear:!0},P=>new Promise(function(){var de=(0,E.Z)(function*(De,gt){yield P.restyle({setHideOnLeave:!1});const zt=xe(C,"network-request-failed"),On=vs().setTimeout(()=>{gt(zt)},$a.get());function lr(){vs().clearTimeout(On),De(P)}P.ping(lr).then(lr,()=>{gt(zt)})});return function(De,gt){return de.apply(this,arguments)}}()))}),Ou.apply(this,arguments)}const vc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ad{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hl(C,y,T,P,de,De){H(C.config.authDomain,C,"auth-domain-config-required"),H(C.config.apiKey,C,"invalid-api-key");const gt={apiKey:C.config.apiKey,appName:C.name,authType:T,redirectUrl:P,v:Ue.SDK_VERSION,eventId:de};if(y instanceof ho){y.setDefaultLanguage(C.languageCode),gt.providerId=y.providerId||"",(0,ee.xb)(y.getCustomParameters())||(gt.customParameters=JSON.stringify(y.getCustomParameters()));for(const[On,lr]of Object.entries(De||{}))gt[On]=lr}if(y instanceof fo){const On=y.getScopes().filter(lr=>""!==lr);On.length>0&&(gt.scopes=On.join(","))}C.tenantId&&(gt.tid=C.tenantId);const zt=gt;for(const On of Object.keys(zt))void 0===zt[On]&&delete zt[On];return`${function Ku({config:C}){return C.emulator?$t(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,ee.xO)(zt).slice(1)}`}const Da="webStorageSupport";class _u extends class jp{constructor(y){this.factorId=y}_process(y,T,P){switch(T.type){case"enroll":return this._finalizeEnroll(y,T.credential,P);case"signin":return this._finalizeSignIn(y,T.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new _u(y)}_finalizeEnroll(y,T,P){return function ku(C,y){return qn(C,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(C,y))}(y,{idToken:T,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,T){return function gu(C,y){return qn(C,"POST","/v2/accounts/mfaSignIn:finalize",Jt(C,y))}(y,{mfaPendingCredential:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _c=(()=>{class C{constructor(){}static assertion(T){return _u._fromCredential(T)}}return C.FACTOR_ID="phone",C})();var ld="@firebase/auth",Of="0.20.11";class Zu{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var T=this;return(0,E.Z)(function*(){return T.assertAuthConfigured(),yield T.auth._initializationPromise,T.auth.currentUser?{accessToken:yield T.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const T=this.auth.onIdTokenChanged(P=>{var de;y((null===(de=P)||void 0===de?void 0:de.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,T),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const T=this.internalListeners.get(y);!T||(this.internalListeners.delete(y),T(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ru(){return window}function bu(){return(bu=(0,E.Z)(function*(C,y,T){var P;const{BuildInfo:de}=Ru();fe(y.sessionId,"AuthEvent did not contain a session ID");const De=yield Kd(y.sessionId),gt={};return ve()?gt.ibi=de.packageName:ye()?gt.apn=de.packageName:Z(C,"operation-not-supported-in-this-environment"),de.displayName&&(gt.appDisplayName=de.displayName),gt.sessionId=De,hl(C,T,y.type,void 0,null!==(P=y.eventId)&&void 0!==P?P:void 0,gt)})).apply(this,arguments)}function zl(){return(zl=(0,E.Z)(function*(C){const{BuildInfo:y}=Ru(),T={};ve()?T.iosBundleId=y.packageName:ye()?T.androidPackageName=y.packageName:Z(C,"operation-not-supported-in-this-environment"),yield Gi(C,T)})).apply(this,arguments)}function gl(){return(gl=(0,E.Z)(function*(C,y,T){const{cordova:P}=Ru();let de=()=>{};try{yield new Promise((De,gt)=>{let zt=null;function On(){var Ar;De();const Ki=null===(Ar=P.plugins.browsertab)||void 0===Ar?void 0:Ar.close;"function"==typeof Ki&&Ki(),"function"==typeof T?.close&&T.close()}function lr(){zt||(zt=window.setTimeout(()=>{gt(xe(C,"redirect-cancelled-by-user"))},2e3))}function Rr(){"visible"===document?.visibilityState&&lr()}y.addPassiveListener(On),document.addEventListener("resume",lr,!1),ye()&&document.addEventListener("visibilitychange",Rr,!1),de=()=>{y.removePassiveListener(On),document.removeEventListener("resume",lr,!1),document.removeEventListener("visibilitychange",Rr,!1),zt&&window.clearTimeout(zt)}})}finally{de()}})).apply(this,arguments)}function Kd(C){return ks.apply(this,arguments)}function ks(){return(ks=(0,E.Z)(function*(C){const y=Zd(C),T=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(T)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Zd(C){if(fe(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const y=new ArrayBuffer(C.length),T=new Uint8Array(y);for(let P=0;P<C.length;P++)T[P]=C.charCodeAt(P);return T}(0,ee.Pz)("authIdTokenMaxAge"),function Up(C){(0,Ue._registerComponent)(new se.wA("auth",(y,{options:T})=>{const P=y.getProvider("app").getImmediate(),de=y.getProvider("heartbeat"),{apiKey:De,authDomain:gt}=P.options;return((zt,On)=>{H(De&&!De.includes(":"),"invalid-api-key",{appName:zt.name}),H(!gt?.includes(":"),"argument-error",{appName:zt.name});const lr={apiKey:De,authDomain:gt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:br(C)},Rr=new ar(zt,On,lr);return function ct(C,y){const T=y?.persistence||[],P=(Array.isArray(T)?T:[T]).map(Me);y?.errorMap&&C._updateErrorMap(y.errorMap),C._initializeWithPersistence(P,y?.popupRedirectResolver)}(Rr,T),Rr})(P,de)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,T,P)=>{y.getProvider("auth-internal").initialize()})),(0,Ue._registerComponent)(new se.wA("auth-internal",y=>{const T=zr(y.getProvider("auth").getImmediate());return new Zu(T)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ue.registerVersion)(ld,Of,function Rf(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Ue.registerVersion)(ld,Of,"esm2017")}("Browser");class Fh extends Il{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(T=>T(y)),super.onEvent(y)}initialized(){var y=this;return(0,E.Z)(function*(){yield y.initPromise})()}}function Uh(C){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,E.Z)(function*(C){const y=yield dd()._get(ql(C));return y&&(yield dd()._remove(ql(C))),y})).apply(this,arguments)}function Tu(){const C=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<20;T++){const P=Math.floor(Math.random()*y.length);C.push(y.charAt(P))}return C.join("")}function dd(){return Me(gr)}function ql(C){return ht("authEvent",C.config.apiKey,C.name)}function Wc(C){if(!C?.includes("?"))return{};const[y,...T]=C.split("?");return(0,ee.zd)(T.join("?"))}function jf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xe("no-auth-event")}}function Yd(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function bc(C=(0,ee.z$)()){return!("file:"!==Yd()&&"ionic:"!==Yd()&&"capacitor:"!==Yd()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function hd(){try{const C=self.localStorage,y=En();if(C)return C.setItem(y,"1"),C.removeItem(y),!function Gp(C=(0,ee.z$)()){return function Xd(){return(0,ee.w1)()&&11===document?.documentMode}()||function Tc(C=(0,ee.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,ee.hl)()}catch{return Kr()&&(0,ee.hl)()}return!1}function Kr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Jd(){return(function Qd(){return"http:"===Yd()||"https:"===Yd()}()||(0,ee.ru)()||bc())&&!function Nu(){return(0,ee.b$)()||(0,ee.UG)()}()&&hd()&&!Kr()}function Yu(){return bc()&&typeof document<"u"}function Zl(){return(Zl=(0,E.Z)(function*(){return!!Yu()&&new Promise(C=>{const y=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),C(!0)})})})).apply(this,arguments)}const Aa={LOCAL:"local",NONE:"none",SESSION:"session"},Yl=H,ml="persistence";function Sc(C){return wc.apply(this,arguments)}function wc(){return(wc=(0,E.Z)(function*(C){yield C._initializationPromise;const y=fd(),T=ht(ml,C.config.apiKey,C.name);y&&y.setItem(T,C._getPersistence())})).apply(this,arguments)}function fd(){var C;try{return(null===(C=function Ec(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const th=H;class sa{constructor(){this.browserResolver=Me(class Vc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oo,this._completeRedirectFn=Pr,this._overrideRedirectResult=iu}_openPopup(y,T,P,de){var De=this;return(0,E.Z)(function*(){var gt;fe(null===(gt=De.eventManagers[y._key()])||void 0===gt?void 0:gt.manager,"_initialize() not called before _openPopup()");const zt=hl(y,T,P,St(),de);return function Wl(C,y,T,P=500,de=600){const De=Math.max((window.screen.availHeight-de)/2,0).toString(),gt=Math.max((window.screen.availWidth-P)/2,0).toString();let zt="";const On=Object.assign(Object.assign({},vc),{width:P.toString(),height:de.toString(),top:De,left:gt}),lr=(0,ee.z$)().toLowerCase();T&&(zt=$r(lr)?"_blank":T),Sn(lr)&&(y=y||"http://localhost",On.scrollbars="yes");const Rr=Object.entries(On).reduce((Ki,[Fn,zc])=>`${Ki}${Fn}=${zc},`,"");if(function xt(C=(0,ee.z$)()){var y;return ve(C)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(lr)&&"_self"!==zt)return function zd(C,y){const T=document.createElement("a");T.href=C,T.target=y;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),T.dispatchEvent(P)}(y||"",zt),new ad(null);const Ar=window.open(y||"",zt,Rr);H(Ar,C,"popup-blocked");try{Ar.focus()}catch{}return new ad(Ar)}(y,zt,En())})()}_openRedirect(y,T,P,de){var De=this;return(0,E.Z)(function*(){return yield De._originValidation(y),function Ss(C){vs().location.href=C}(hl(y,T,P,St(),de)),new Promise(()=>{})})()}_initialize(y){const T=y._key();if(this.eventManagers[T]){const{manager:de,promise:De}=this.eventManagers[T];return de?Promise.resolve(de):(fe(De,"If manager is not set, promise should be"),De)}const P=this.initAndGetManager(y);return this.eventManagers[T]={promise:P},P.catch(()=>{delete this.eventManagers[T]}),P}initAndGetManager(y){var T=this;return(0,E.Z)(function*(){const P=yield function Lp(C){return Ou.apply(this,arguments)}(y),de=new Il(y);return P.register("authEvent",De=>(H(De?.authEvent,y,"invalid-auth-event"),{status:de.onEvent(De.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),T.eventManagers[y._key()]={manager:de},T.iframes[y._key()]=P,de})()}_isIframeWebStorageSupported(y,T){this.iframes[y._key()].send(Da,{type:Da},de=>{var De;const gt=null===(De=de?.[0])||void 0===De?void 0:De[Da];void 0!==gt&&T(!!gt),Z(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function $d(C){return Bc.apply(this,arguments)}(y)),this.originValidationPromises[T]}get _shouldInitProactively(){return Ln()||An()||ve()}}),this.cordovaResolver=Me(class yo{constructor(){this._redirectPersistence=oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pr,this._overrideRedirectResult=iu}_initialize(y){var T=this;return(0,E.Z)(function*(){const P=y._key();let de=T.eventManagers.get(P);return de||(de=new Fh(y),T.eventManagers.set(P,de),T.attachCallbackListeners(y,de)),de})()}_openPopup(y){Z(y,"operation-not-supported-in-this-environment")}_openRedirect(y,T,P,de){var De=this;return(0,E.Z)(function*(){!function Vp(C){var y,T,P,de,De,gt,zt,On,lr,Rr;const Ar=Ru();H("function"==typeof(null===(y=Ar?.universalLinks)||void 0===y?void 0:y.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof(null===(T=Ar?.BuildInfo)||void 0===T?void 0:T.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H("function"==typeof(null===(De=null===(de=null===(P=Ar?.cordova)||void 0===P?void 0:P.plugins)||void 0===de?void 0:de.browsertab)||void 0===De?void 0:De.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(On=null===(zt=null===(gt=Ar?.cordova)||void 0===gt?void 0:gt.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===On?void 0:On.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H("function"==typeof(null===(Rr=null===(lr=Ar?.cordova)||void 0===lr?void 0:lr.InAppBrowser)||void 0===Rr?void 0:Rr.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const gt=yield De._initialize(y);yield gt.initialized(),gt.resetRedirect(),function Hd(){Va.clear()}(),yield De._originValidation(y);const zt=function jh(C,y,T=null){return{type:y,eventId:T,urlResponse:null,sessionId:Tu(),postBody:null,tenantId:C.tenantId,error:xe(C,"no-auth-event")}}(y,P,de);yield function $c(C,y){return dd()._set(ql(C),y)}(y,zt);const On=yield function pl(C,y,T){return bu.apply(this,arguments)}(y,zt,T),lr=yield function Nf(C){const{cordova:y}=Ru();return new Promise(T=>{y.plugins.browsertab.isAvailable(P=>{let de=null;P?y.plugins.browsertab.openUrl(C):de=y.InAppBrowser.open(C,function Ze(C=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),T(de)})})}(On);return function cd(C,y,T){return gl.apply(this,arguments)}(y,gt,lr)})()}_isIframeWebStorageSupported(y,T){throw new Error("Method not implemented.")}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function qd(C){return zl.apply(this,arguments)}(y)),this.originValidationPromises[T]}attachCallbackListeners(y,T){const{universalLinks:P,handleOpenURL:de,BuildInfo:De}=Ru(),gt=setTimeout((0,E.Z)(function*(){yield Uh(y),T.onEvent(jf())}),500),zt=function(){var Rr=(0,E.Z)(function*(Ar){clearTimeout(gt);const Ki=yield Uh(y);let Fn=null;Ki&&Ar?.url&&(Fn=function Gc(C,y){var T,P;const de=function Ms(C){const y=Wc(C),T=y.link?decodeURIComponent(y.link):void 0,P=Wc(T).link,de=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return Wc(de).link||de||P||T||C}(y);if(de.includes("/__/auth/callback")){const De=Wc(de),gt=De.firebaseError?function Ff(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(De.firebaseError)):null,zt=null===(P=null===(T=gt?.code)||void 0===T?void 0:T.split("auth/"))||void 0===P?void 0:P[1],On=zt?xe(zt):null;return On?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:On,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:de,postBody:null}}return null}(Ki,Ar.url)),T.onEvent(Fn||jf())});return function(Ki){return Rr.apply(this,arguments)}}();typeof P<"u"&&"function"==typeof P.subscribe&&P.subscribe(null,zt);const On=de,lr=`${De.packageName.toLowerCase()}://`;Ru().handleOpenURL=function(){var Rr=(0,E.Z)(function*(Ar){if(Ar.toLowerCase().startsWith(lr)&&zt({url:Ar}),"function"==typeof On)try{On(Ar)}catch(Ki){console.error(Ki)}});return function(Ar){return Rr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=oo,this._completeRedirectFn=Pr,this._overrideRedirectResult=iu}_initialize(y){var T=this;return(0,E.Z)(function*(){return yield T.selectUnderlyingResolver(),T.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,T,P,de){var De=this;return(0,E.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openPopup(y,T,P,de)})()}_openRedirect(y,T,P,de){var De=this;return(0,E.Z)(function*(){return yield De.selectUnderlyingResolver(),De.assertedUnderlyingResolver._openRedirect(y,T,P,de)})()}_isIframeWebStorageSupported(y,T){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,T)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return Yu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return th(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,E.Z)(function*(){if(y.underlyingResolver)return;const T=yield function eh(){return Zl.apply(this,arguments)}();y.underlyingResolver=T?y.cordovaResolver:y.browserResolver})()}}function Hh(C){return C.unwrap()}function oa(C){return rh(C)}function rh(C){const{_tokenResponse:y}=C instanceof ee.ZR?C.customData:C;if(!y)return null;if(!(C instanceof ee.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return D.credentialFromResult(C);const T=y.providerId;if(!T||"password"===T)return null;let P;switch(T){case"google.com":P=Bs;break;case"facebook.com":P=Na;break;case"github.com":P=Ka;break;case"twitter.com":P=Ks;break;default:const{oauthIdToken:de,oauthAccessToken:De,oauthTokenSecret:gt,pendingToken:zt,nonce:On}=y;return De||gt||de||zt?zt?T.startsWith("saml.")?po._create(T,zt):Mt._fromParams({providerId:T,signInMethod:T,pendingToken:zt,idToken:de,accessToken:De}):new To(T).credential({idToken:de,accessToken:De,rawNonce:On}):null}return C instanceof ee.ZR?P.credentialFromError(C):P.credentialFromResult(C)}function ao(C,y){return y.catch(T=>{throw T instanceof ee.ZR&&function nh(C,y){var T,P;const de=null===(T=y.customData)||void 0===T?void 0:T._tokenResponse;if("auth/multi-factor-auth-required"===(null===(P=y)||void 0===P?void 0:P.code))y.resolver=new Uf(C,function fs(C,y){var T;const P=(0,ee.m9)(C),de=y;return H(y.customData.operationType,P,"argument-error"),H(null===(T=de.customData._serverResponse)||void 0===T?void 0:T.mfaPendingCredential,P,"argument-error"),Co._fromError(P,de)}(C,y));else if(de){const De=rh(y),gt=y;De&&(gt.credential=De,gt.tenantId=de.tenantId||void 0,gt.email=de.email||void 0,gt.phoneNumber=de.phoneNumber||void 0)}}(C,T),T}).then(T=>{const de=T.user;return{operationType:T.operationType,credential:oa(T),additionalUserInfo:fi(T),user:Eu.getOrCreate(de)}})}function Lu(C,y){return gd.apply(this,arguments)}function gd(){return(gd=(0,E.Z)(function*(C,y){const T=yield y;return{verificationId:T.verificationId,confirm:P=>ao(C,T.confirm(P))}})).apply(this,arguments)}class Uf{constructor(y,T){this.resolver=T,this.auth=function pd(C){return C.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return ao(Hh(this.auth),this.resolver.resolveSignIn(y))}}class Eu{constructor(y){this._delegate=y,this.multiFactor=function Hl(C){const y=(0,ee.m9)(C);return ul.has(y)||ul.set(y,Tl._fromUser(y)),ul.get(y)}(y)}static getOrCreate(y){return Eu.USER_MAP.has(y)||Eu.USER_MAP.set(y,new Eu(y)),Eu.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var T=this;return(0,E.Z)(function*(){return ao(T.auth,cu(T._delegate,y))})()}linkWithPhoneNumber(y,T){var P=this;return(0,E.Z)(function*(){return Lu(P.auth,function ss(C,y,T){return tu.apply(this,arguments)}(P._delegate,y,T))})()}linkWithPopup(y){var T=this;return(0,E.Z)(function*(){return ao(T.auth,function xa(C,y,T){return Ei.apply(this,arguments)}(T._delegate,y,sa))})()}linkWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield Sc(zr(T.auth)),function Ct(C,y,T){return function Vt(C,y,T){return vn.apply(this,arguments)}(C,y,T)}(T._delegate,y,sa)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var T=this;return(0,E.Z)(function*(){return ao(T.auth,fa(T._delegate,y))})()}reauthenticateWithPhoneNumber(y,T){return Lu(this.auth,function vu(C,y,T){return nu.apply(this,arguments)}(this._delegate,y,T))}reauthenticateWithPopup(y){return ao(this.auth,function Ui(C,y,T){return gn.apply(this,arguments)}(this._delegate,y,sa))}reauthenticateWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield Sc(zr(T.auth)),function te(C,y,T){return function be(C,y,T){return tt.apply(this,arguments)}(C,y,T)}(T._delegate,y,sa)})()}sendEmailVerification(y){return function Ns(C,y){return wi.apply(this,arguments)}(this._delegate,y)}unlink(y){var T=this;return(0,E.Z)(function*(){return yield function ui(C,y){return Eo.apply(this,arguments)}(T._delegate,y),T})()}updateEmail(y){return function B(C,y){return z((0,ee.m9)(C),y,null)}(this._delegate,y)}updatePassword(y){return function ge(C,y){return z((0,ee.m9)(C),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function M(C,y){return O.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Dr(C,y){return Oo.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,T){return function ro(C,y,T){return mi.apply(this,arguments)}(this._delegate,y,T)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eu.USER_MAP=new WeakMap;const Ql=H;let $h=(()=>{class C{constructor(T,P){if(this.app=T,P.isInitialized())return this._delegate=P.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=T.options;Ql(de,"invalid-api-key",{appName:T.name}),Ql(de,"invalid-api-key",{appName:T.name});const De=typeof window<"u"?sa:void 0;this._delegate=P.initialize({options:{persistence:Bf(de,T.name),popupRedirectResolver:De}}),this._delegate._updateErrorMap($e),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(T){this._delegate.languageCode=T}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(T){this._delegate.tenantId=T}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(T,P){!function Mi(C,y,T){const P=zr(C);H(P._canInitEmulator,P,"emulator-config-failed"),H(/^https?:\/\//.test(y),P,"invalid-emulator-scheme");const de=!!T?.disableWarnings,De=Ni(y),{host:gt,port:zt}=function _i(C){const y=Ni(C),T=/(\/\/)?([^?#/]+)/.exec(C.substr(y.length));if(!T)return{host:"",port:null};const P=T[2].split("@").pop()||"",de=/^(\[[^\]]+\])(:|$)/.exec(P);if(de){const De=de[1];return{host:De,port:bi(P.substr(De.length+1))}}{const[De,gt]=P.split(":");return{host:De,port:bi(gt)}}}(y);P.config.emulator={url:`${De}//${gt}${null===zt?"":`:${zt}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:gt,port:zt,protocol:De.replace(":",""),options:Object.freeze({disableWarnings:de})}),de||function gs(){function C(){const y=document.createElement("p"),T=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",T.position="fixed",T.width="100%",T.backgroundColor="#ffffff",T.border=".1em solid #000000",T.color="#b50000",T.bottom="0px",T.left="0px",T.margin="0px",T.zIndex="10000",T.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,T,P)}applyActionCode(T){return function q(C,y){return ke.apply(this,arguments)}(this._delegate,T)}checkActionCode(T){return Ut(this._delegate,T)}confirmPasswordReset(T,P){return function ie(C,y,T){return Q.apply(this,arguments)}(this._delegate,T,P)}createUserWithEmailAndPassword(T,P){var de=this;return(0,E.Z)(function*(){return ao(de._delegate,function Je(C,y,T){return ot.apply(this,arguments)}(de._delegate,T,P))})()}fetchProvidersForEmail(T){return this.fetchSignInMethodsForEmail(T)}fetchSignInMethodsForEmail(T){return function Oi(C,y){return Hi.apply(this,arguments)}(this._delegate,T)}isSignInWithEmailLink(T){return function Tn(C,y){return"EMAIL_SIGNIN"===bo.parseLink(y)?.operation}(0,T)}getRedirectResult(){var T=this;return(0,E.Z)(function*(){Ql(Jd(),T._delegate,"operation-not-supported-in-this-environment");const P=yield function Wn(C,y){return xr.apply(this,arguments)}(T._delegate,sa);return P?ao(T._delegate,Promise.resolve(P)):{credential:null,user:null}})()}addFrameworkForLogging(T){!function $p(C,y){zr(C)._logFramework(y)}(this._delegate,T)}onAuthStateChanged(T,P,de){const{next:De,error:gt,complete:zt}=md(T,P,de);return this._delegate.onAuthStateChanged(De,gt,zt)}onIdTokenChanged(T,P,de){const{next:De,error:gt,complete:zt}=md(T,P,de);return this._delegate.onIdTokenChanged(De,gt,zt)}sendSignInLinkToEmail(T,P){return function fn(C,y,T){return Hn.apply(this,arguments)}(this._delegate,T,P)}sendPasswordResetEmail(T,P){return function ta(C,y,T){return ds.apply(this,arguments)}(this._delegate,T,P||void 0)}setPersistence(T){var P=this;return(0,E.Z)(function*(){let de;switch(function Wp(C,y){Yl(Object.values(Aa).includes(y),C,"invalid-persistence-type"),(0,ee.b$)()?Yl(y!==Aa.SESSION,C,"unsupported-persistence-type"):(0,ee.UG)()?Yl(y===Aa.NONE,C,"unsupported-persistence-type"):Kr()?Yl(y===Aa.NONE||y===Aa.LOCAL&&(0,ee.hl)(),C,"unsupported-persistence-type"):Yl(y===Aa.NONE||hd(),C,"unsupported-persistence-type")}(P._delegate,T),T){case Aa.SESSION:de=oo;break;case Aa.LOCAL:de=(yield Me(ts)._isAvailable())?ts:gr;break;case Aa.NONE:de=rt;break;default:return Z("argument-error",{appName:P._delegate.name})}return P._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(T){return this.signInWithCredential(T)}signInAnonymously(){return ao(this._delegate,function ha(C){return xi.apply(this,arguments)}(this._delegate))}signInWithCredential(T){return ao(this._delegate,fr(this._delegate,T))}signInWithCustomToken(T){return ao(this._delegate,function pa(C,y){return ga.apply(this,arguments)}(this._delegate,T))}signInWithEmailAndPassword(T,P){return ao(this._delegate,function Nt(C,y,T){return fr((0,ee.m9)(C),to.credential(y,T))}(this._delegate,T,P))}signInWithEmailLink(T,P){return ao(this._delegate,function mr(C,y,T){return Gr.apply(this,arguments)}(this._delegate,T,P))}signInWithPhoneNumber(T,P){return Lu(this._delegate,function $l(C,y,T){return eu.apply(this,arguments)}(this._delegate,T,P))}signInWithPopup(T){var P=this;return(0,E.Z)(function*(){return Ql(Jd(),P._delegate,"operation-not-supported-in-this-environment"),ao(P._delegate,function Gn(C,y,T){return ji.apply(this,arguments)}(P._delegate,T,sa))})()}signInWithRedirect(T){var P=this;return(0,E.Z)(function*(){return Ql(Jd(),P._delegate,"operation-not-supported-in-this-environment"),yield Sc(P._delegate),function $i(C,y,T){return function qu(C,y,T){return G.apply(this,arguments)}(C,y,T)}(P._delegate,T,sa)})()}updateCurrentUser(T){return this._delegate.updateCurrentUser(T)}verifyPasswordResetCode(T){return function J(C,y){return Oe.apply(this,arguments)}(this._delegate,T)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Aa,C})();function md(C,y,T){let P=C;"function"!=typeof C&&({next:P,error:y,complete:T}=C);const de=P;return{next:gt=>de(gt&&Eu.getOrCreate(gt)),error:y,complete:T}}function Bf(C,y){const T=function zp(C,y){const T=fd();if(!T)return[];const P=ht(ml,C,y);switch(T.getItem(P)){case Aa.NONE:return[rt];case Aa.LOCAL:return[ts,oo];case Aa.SESSION:return[oo];default:return[]}}(C,y);if(typeof self<"u"&&!T.includes(ts)&&T.push(ts),typeof window<"u")for(const P of[gr,oo])T.includes(P)||T.push(P);return T.includes(rt)||T.push(rt),T}class ih{constructor(){this.providerId="phone",this._delegate=new D(Hh(k.Z.auth()))}static credential(y,T){return D.credential(y,T)}verifyPhoneNumber(y,T){return this._delegate.verifyPhoneNumber(y,T)}unwrap(){return this._delegate}}ih.PHONE_SIGN_IN_METHOD=D.PHONE_SIGN_IN_METHOD,ih.PROVIDER_ID=D.PROVIDER_ID;const Ml=H;class Gh{constructor(y,T,P=k.Z.app()){var de;Ml(null===(de=P.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:P.name}),this._delegate=new At(y,T,P.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qp(C){C.INTERNAL.registerComponent(new se.wA("auth-compat",y=>{const T=y.getProvider("app-compat").getImmediate(),P=y.getProvider("auth");return new $h(T,P)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:to,FacebookAuthProvider:Na,GithubAuthProvider:Ka,GoogleAuthProvider:Bs,OAuthProvider:To,SAMLAuthProvider:go,PhoneAuthProvider:ih,PhoneMultiFactorGenerator:_c,RecaptchaVerifier:Gh,TwitterAuthProvider:Ks,Auth:$h,AuthCredential:Pi,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.24")}(k.Z)},1421:(Yt,at,W)=>{var ee,E=typeof global<"u"?global:typeof window<"u"?window:{},k=W(5893);typeof document<"u"?ee=document:(ee=E["__GLOBAL_DOCUMENT_CACHE@4"])||(ee=E["__GLOBAL_DOCUMENT_CACHE@4"]=k),Yt.exports=ee},9226:Yt=>{var at;at=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt.exports=at},2703:Yt=>{Yt.exports=function W(E){if(!E)return!1;var k=at.call(E);return"[object Function]"===k||"function"==typeof E&&"[object RegExp]"!==k||typeof window<"u"&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)};var at=Object.prototype.toString},1234:(Yt,at)=>{function W(Le){if(Le&&"object"==typeof Le){var se=Le.which||Le.keyCode||Le.charCode;se&&(Le=se)}if("number"==typeof Le)return Ue[Le];var Ae,Ke=String(Le);return(Ae=E[Ke.toLowerCase()])?Ae:(Ae=k[Ke.toLowerCase()])||(1===Ke.length?Ke.charCodeAt(0):void 0)}W.isEventKey=function(se,Ke){if(se&&"object"==typeof se){var Ae=se.which||se.keyCode||se.charCode;if(null==Ae)return!1;if("string"==typeof Ke){var Ie;if(Ie=E[Ke.toLowerCase()])return Ie===Ae;if(Ie=k[Ke.toLowerCase()])return Ie===Ae}else if("number"==typeof Ke)return Ke===Ae;return!1}};var E=(at=Yt.exports=W).code=at.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},k=at.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ee=97;ee<123;ee++)E[String.fromCharCode(ee)]=ee-32;for(var ee=48;ee<58;ee++)E[ee-48]=ee;for(ee=1;ee<13;ee++)E["f"+ee]=ee+111;for(ee=0;ee<10;ee++)E["numpad "+ee]=ee+96;var Ue=at.names=at.title={};for(ee in E)Ue[E[ee]]=ee;for(var Pe in k)E[Pe]=k[Pe]},7459:(Yt,at,W)=>{var E=W(3357).getUint64;Yt.exports=function(ee){var Ue=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),Pe={version:ee[0],flags:new Uint8Array(ee.subarray(1,4)),references:[],referenceId:Ue.getUint32(4),timescale:Ue.getUint32(8)},Le=12;0===Pe.version?(Pe.earliestPresentationTime=Ue.getUint32(Le),Pe.firstOffset=Ue.getUint32(Le+4),Le+=8):(Pe.earliestPresentationTime=E(ee.subarray(Le)),Pe.firstOffset=E(ee.subarray(Le+8)),Le+=16);var se=Ue.getUint16(Le+=2);for(Le+=2;se>0;Le+=12,se--)Pe.references.push({referenceType:(128&ee[Le])>>>7,referencedSize:2147483647&Ue.getUint32(Le),subsegmentDuration:Ue.getUint32(Le+4),startsWithSap:!!(128&ee[Le+8]),sapType:(112&ee[Le+8])>>>4,sapDeltaTime:268435455&Ue.getUint32(Le+8)});return Pe}},6277:Yt=>{var W,E,k,ee,Ue,Pe,Le;Ue=function(se,Ke){return W(ee(se,Ke))},Pe=function(se,Ke){return E(k(se),Ke)},Le=function(se,Ke,Ae){return k(Ae?se:se-Ke)},Yt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:W=function(se){return 9e4*se},secondsToAudioTs:E=function(se,Ke){return se*Ke},videoTsToSeconds:k=function(se){return se/9e4},audioTsToSeconds:ee=function(se,Ke){return se/Ke},audioTsToVideoTs:Ue,videoTsToAudioTs:Pe,metadataTsToSeconds:Le}},3357:Yt=>{var at=Math.pow(2,32);Yt.exports={getUint64:function(E){var ee,k=new DataView(E.buffer,E.byteOffset,E.byteLength);return k.getBigUint64?(ee=k.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(ee):ee:k.getUint32(0)*at+k.getUint32(4)},MAX_UINT32:at}},1135:(Yt,at,W)=>{"use strict";W.d(at,{X:()=>k});var E=W(7579);class k extends E.x{constructor(Ue){super(),this._value=Ue}get value(){return this.getValue()}_subscribe(Ue){const Pe=super._subscribe(Ue);return!Pe.closed&&Ue.next(this._value),Pe}getValue(){const{hasError:Ue,thrownError:Pe,_value:Le}=this;if(Ue)throw Pe;return this._throwIfClosed(),Le}next(Ue){super.next(this._value=Ue)}}},9751:(Yt,at,W)=>{"use strict";W.d(at,{y:()=>Ke});var E=W(930),k=W(727),ee=W(8822),Ue=W(9635),Pe=W(2416),Le=W(576),se=W(2806);let Ke=(()=>{class Se{constructor(mt){mt&&(this._subscribe=mt)}lift(mt){const $e=new Se;return $e.source=this,$e.operator=mt,$e}subscribe(mt,$e,jt){const Be=function Re(Se){return Se&&Se instanceof E.Lv||function Ie(Se){return Se&&(0,Le.m)(Se.next)&&(0,Le.m)(Se.error)&&(0,Le.m)(Se.complete)}(Se)&&(0,k.Nn)(Se)}(mt)?mt:new E.Hp(mt,$e,jt);return(0,se.x)(()=>{const{operator:ze,source:yt}=this;Be.add(ze?ze.call(Be,yt):yt?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(mt){try{return this._subscribe(mt)}catch($e){mt.error($e)}}forEach(mt,$e){return new($e=Ae($e))((jt,Be)=>{const ze=new E.Hp({next:yt=>{try{mt(yt)}catch(le){Be(le),ze.unsubscribe()}},error:Be,complete:jt});this.subscribe(ze)})}_subscribe(mt){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(mt)}[ee.L](){return this}pipe(...mt){return(0,Ue.U)(mt)(this)}toPromise(mt){return new(mt=Ae(mt))(($e,jt)=>{let Be;this.subscribe(ze=>Be=ze,ze=>jt(ze),()=>$e(Be))})}}return Se.create=ut=>new Se(ut),Se})();function Ae(Se){var ut;return null!==(ut=Se??Pe.v.Promise)&&void 0!==ut?ut:Promise}},7579:(Yt,at,W)=>{"use strict";W.d(at,{x:()=>se});var E=W(9751),k=W(727);const Ue=(0,W(3888).d)(Ae=>function(){Ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=W(8737),Le=W(2806);let se=(()=>{class Ae extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Re){const Se=new Ke(this,this);return Se.operator=Re,Se}_throwIfClosed(){if(this.closed)throw new Ue}next(Re){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Se of this.currentObservers)Se.next(Re)}})}error(Re){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Re;const{observers:Se}=this;for(;Se.length;)Se.shift().error(Re)}})}complete(){(0,Le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Re}=this;for(;Re.length;)Re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Re;return(null===(Re=this.observers)||void 0===Re?void 0:Re.length)>0}_trySubscribe(Re){return this._throwIfClosed(),super._trySubscribe(Re)}_subscribe(Re){return this._throwIfClosed(),this._checkFinalizedStatuses(Re),this._innerSubscribe(Re)}_innerSubscribe(Re){const{hasError:Se,isStopped:ut,observers:mt}=this;return Se||ut?k.Lc:(this.currentObservers=null,mt.push(Re),new k.w0(()=>{this.currentObservers=null,(0,Pe.P)(mt,Re)}))}_checkFinalizedStatuses(Re){const{hasError:Se,thrownError:ut,isStopped:mt}=this;Se?Re.error(ut):mt&&Re.complete()}asObservable(){const Re=new E.y;return Re.source=this,Re}}return Ae.create=(Ie,Re)=>new Ke(Ie,Re),Ae})();class Ke extends se{constructor(Ie,Re){super(),this.destination=Ie,this.source=Re}next(Ie){var Re,Se;null===(Se=null===(Re=this.destination)||void 0===Re?void 0:Re.next)||void 0===Se||Se.call(Re,Ie)}error(Ie){var Re,Se;null===(Se=null===(Re=this.destination)||void 0===Re?void 0:Re.error)||void 0===Se||Se.call(Re,Ie)}complete(){var Ie,Re;null===(Re=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===Re||Re.call(Ie)}_subscribe(Ie){var Re,Se;return null!==(Se=null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(Ie))&&void 0!==Se?Se:k.Lc}}},930:(Yt,at,W)=>{"use strict";W.d(at,{Hp:()=>jt,Lv:()=>Se});var E=W(576),k=W(727),ee=W(2416),Ue=W(7849),Pe=W(5032);const Le=Ae("C",void 0,void 0);function Ae(Z,xe,We){return{kind:Z,value:xe,error:We}}var Ie=W(3410),Re=W(2806);class Se extends k.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,k.Nn)(xe)&&xe.add(this)):this.destination=le}static create(xe,We,_t){return new jt(xe,We,_t)}next(xe){this.isStopped?yt(function Ke(Z){return Ae("N",Z,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?yt(function se(Z){return Ae("E",void 0,Z)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?yt(Le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ut=Function.prototype.bind;function mt(Z,xe){return ut.call(Z,xe)}class $e{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:We}=this;if(We.next)try{We.next(xe)}catch(_t){Be(_t)}}error(xe){const{partialObserver:We}=this;if(We.error)try{We.error(xe)}catch(_t){Be(_t)}else Be(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(We){Be(We)}}}class jt extends Se{constructor(xe,We,_t){let Et;if(super(),(0,E.m)(xe)||!xe)Et={next:xe??void 0,error:We??void 0,complete:_t??void 0};else{let H;this&&ee.v.useDeprecatedNextContext?(H=Object.create(xe),H.unsubscribe=()=>this.unsubscribe(),Et={next:xe.next&&mt(xe.next,H),error:xe.error&&mt(xe.error,H),complete:xe.complete&&mt(xe.complete,H)}):Et=xe}this.destination=new $e(Et)}}function Be(Z){ee.v.useDeprecatedSynchronousErrorHandling?(0,Re.O)(Z):(0,Ue.h)(Z)}function yt(Z,xe){const{onStoppedNotification:We}=ee.v;We&&Ie.z.setTimeout(()=>We(Z,xe))}const le={closed:!0,next:Pe.Z,error:function ze(Z){throw Z},complete:Pe.Z}},727:(Yt,at,W)=>{"use strict";W.d(at,{Lc:()=>Le,w0:()=>Pe,Nn:()=>se});var E=W(576);const ee=(0,W(3888).d)(Ae=>function(Re){Ae(this),this.message=Re?`${Re.length} errors occurred during unsubscription:\n${Re.map((Se,ut)=>`${ut+1}) ${Se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Re});var Ue=W(8737);class Pe{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:Re}=this;if(Re)if(this._parentage=null,Array.isArray(Re))for(const mt of Re)mt.remove(this);else Re.remove(this);const{initialTeardown:Se}=this;if((0,E.m)(Se))try{Se()}catch(mt){Ie=mt instanceof ee?mt.errors:[mt]}const{_finalizers:ut}=this;if(ut){this._finalizers=null;for(const mt of ut)try{Ke(mt)}catch($e){Ie=Ie??[],$e instanceof ee?Ie=[...Ie,...$e.errors]:Ie.push($e)}}if(Ie)throw new ee(Ie)}}add(Ie){var Re;if(Ie&&Ie!==this)if(this.closed)Ke(Ie);else{if(Ie instanceof Pe){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(Re=this._finalizers)&&void 0!==Re?Re:[]).push(Ie)}}_hasParent(Ie){const{_parentage:Re}=this;return Re===Ie||Array.isArray(Re)&&Re.includes(Ie)}_addParent(Ie){const{_parentage:Re}=this;this._parentage=Array.isArray(Re)?(Re.push(Ie),Re):Re?[Re,Ie]:Ie}_removeParent(Ie){const{_parentage:Re}=this;Re===Ie?this._parentage=null:Array.isArray(Re)&&(0,Ue.P)(Re,Ie)}remove(Ie){const{_finalizers:Re}=this;Re&&(0,Ue.P)(Re,Ie),Ie instanceof Pe&&Ie._removeParent(this)}}Pe.EMPTY=(()=>{const Ae=new Pe;return Ae.closed=!0,Ae})();const Le=Pe.EMPTY;function se(Ae){return Ae instanceof Pe||Ae&&"closed"in Ae&&(0,E.m)(Ae.remove)&&(0,E.m)(Ae.add)&&(0,E.m)(Ae.unsubscribe)}function Ke(Ae){(0,E.m)(Ae)?Ae():Ae.unsubscribe()}},2416:(Yt,at,W)=>{"use strict";W.d(at,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Yt,at,W)=>{"use strict";W.d(at,{a:()=>Ie});var E=W(9751),k=W(4742),ee=W(8996),Ue=W(4671),Pe=W(3268),Le=W(3269),se=W(1810),Ke=W(5403),Ae=W(9672);function Ie(...ut){const mt=(0,Le.yG)(ut),$e=(0,Le.jO)(ut),{args:jt,keys:Be}=(0,k.D)(ut);if(0===jt.length)return(0,ee.D)([],mt);const ze=new E.y(function Re(ut,mt,$e=Ue.y){return jt=>{Se(mt,()=>{const{length:Be}=ut,ze=new Array(Be);let yt=Be,le=Be;for(let Z=0;Z<Be;Z++)Se(mt,()=>{const xe=(0,ee.D)(ut[Z],mt);let We=!1;xe.subscribe((0,Ke.x)(jt,_t=>{ze[Z]=_t,We||(We=!0,le--),le||jt.next($e(ze.slice()))},()=>{--yt||jt.complete()}))},jt)},jt)}}(jt,mt,Be?yt=>(0,se.n)(Be,yt):Ue.y));return $e?ze.pipe((0,Pe.Z)($e)):ze}function Se(ut,mt,$e){ut?(0,Ae.f)($e,ut,mt):mt()}},7272:(Yt,at,W)=>{"use strict";W.d(at,{z:()=>Pe});var E=W(8189),ee=W(3269),Ue=W(8996);function Pe(...Le){return function k(){return(0,E.J)(1)}()((0,Ue.D)(Le,(0,ee.yG)(Le)))}},515:(Yt,at,W)=>{"use strict";W.d(at,{E:()=>k});const k=new(W(9751).y)(Pe=>Pe.complete())},4128:(Yt,at,W)=>{"use strict";W.d(at,{D:()=>Ke});var E=W(9751),k=W(4742),ee=W(8421),Ue=W(3269),Pe=W(5403),Le=W(3268),se=W(1810);function Ke(...Ae){const Ie=(0,Ue.jO)(Ae),{args:Re,keys:Se}=(0,k.D)(Ae),ut=new E.y(mt=>{const{length:$e}=Re;if(!$e)return void mt.complete();const jt=new Array($e);let Be=$e,ze=$e;for(let yt=0;yt<$e;yt++){let le=!1;(0,ee.Xf)(Re[yt]).subscribe((0,Pe.x)(mt,Z=>{le||(le=!0,ze--),jt[yt]=Z},()=>Be--,void 0,()=>{(!Be||!le)&&(ze||mt.next(Se?(0,se.n)(Se,jt):jt),mt.complete())}))}});return Ie?ut.pipe((0,Le.Z)(Ie)):ut}},8996:(Yt,at,W)=>{"use strict";W.d(at,{D:()=>xe});var E=W(8421),k=W(5363),ee=W(9468),Le=W(9751),Ke=W(2202),Ae=W(576),Ie=W(9672);function Se(We,_t){if(!We)throw new Error("Iterable cannot be null");return new Le.y(Et=>{(0,Ie.f)(Et,_t,()=>{const H=We[Symbol.asyncIterator]();(0,Ie.f)(Et,_t,()=>{H.next().then(he=>{he.done?Et.complete():Et.next(he.value)})},0,!0)})})}var ut=W(3670),mt=W(8239),$e=W(1144),jt=W(6495),Be=W(2206),ze=W(4532),yt=W(4049);function xe(We,_t){return _t?function Z(We,_t){if(null!=We){if((0,ut.c)(We))return function Ue(We,_t){return(0,E.Xf)(We).pipe((0,ee.R)(_t),(0,k.Q)(_t))}(We,_t);if((0,$e.z)(We))return function se(We,_t){return new Le.y(Et=>{let H=0;return _t.schedule(function(){H===We.length?Et.complete():(Et.next(We[H++]),Et.closed||this.schedule())})})}(We,_t);if((0,mt.t)(We))return function Pe(We,_t){return(0,E.Xf)(We).pipe((0,ee.R)(_t),(0,k.Q)(_t))}(We,_t);if((0,Be.D)(We))return Se(We,_t);if((0,jt.T)(We))return function Re(We,_t){return new Le.y(Et=>{let H;return(0,Ie.f)(Et,_t,()=>{H=We[Ke.h](),(0,Ie.f)(Et,_t,()=>{let he,fe;try{({value:he,done:fe}=H.next())}catch(Fe){return void Et.error(Fe)}fe?Et.complete():Et.next(he)},0,!0)}),()=>(0,Ae.m)(H?.return)&&H.return()})}(We,_t);if((0,yt.L)(We))return function le(We,_t){return Se((0,yt.Q)(We),_t)}(We,_t)}throw(0,ze.z)(We)}(We,_t):(0,E.Xf)(We)}},8421:(Yt,at,W)=>{"use strict";W.d(at,{Xf:()=>ut});var E=W(655),k=W(1144),ee=W(8239),Ue=W(9751),Pe=W(3670),Le=W(2206),se=W(4532),Ke=W(6495),Ae=W(4049),Ie=W(576),Re=W(7849),Se=W(8822);function ut(Z){if(Z instanceof Ue.y)return Z;if(null!=Z){if((0,Pe.c)(Z))return function mt(Z){return new Ue.y(xe=>{const We=Z[Se.L]();if((0,Ie.m)(We.subscribe))return We.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Z);if((0,k.z)(Z))return function $e(Z){return new Ue.y(xe=>{for(let We=0;We<Z.length&&!xe.closed;We++)xe.next(Z[We]);xe.complete()})}(Z);if((0,ee.t)(Z))return function jt(Z){return new Ue.y(xe=>{Z.then(We=>{xe.closed||(xe.next(We),xe.complete())},We=>xe.error(We)).then(null,Re.h)})}(Z);if((0,Le.D)(Z))return ze(Z);if((0,Ke.T)(Z))return function Be(Z){return new Ue.y(xe=>{for(const We of Z)if(xe.next(We),xe.closed)return;xe.complete()})}(Z);if((0,Ae.L)(Z))return function yt(Z){return ze((0,Ae.Q)(Z))}(Z)}throw(0,se.z)(Z)}function ze(Z){return new Ue.y(xe=>{(function le(Z,xe){var We,_t,Et,H;return(0,E.mG)(this,void 0,void 0,function*(){try{for(We=(0,E.KL)(Z);!(_t=yield We.next()).done;)if(xe.next(_t.value),xe.closed)return}catch(he){Et={error:he}}finally{try{_t&&!_t.done&&(H=We.return)&&(yield H.call(We))}finally{if(Et)throw Et.error}}xe.complete()})})(Z,xe).catch(We=>xe.error(We))})}},6451:(Yt,at,W)=>{"use strict";W.d(at,{T:()=>Le});var E=W(8189),k=W(8421),ee=W(515),Ue=W(3269),Pe=W(8996);function Le(...se){const Ke=(0,Ue.yG)(se),Ae=(0,Ue._6)(se,1/0),Ie=se;return Ie.length?1===Ie.length?(0,k.Xf)(Ie[0]):(0,E.J)(Ae)((0,Pe.D)(Ie,Ke)):ee.E}},9646:(Yt,at,W)=>{"use strict";W.d(at,{of:()=>ee});var E=W(3269),k=W(8996);function ee(...Ue){const Pe=(0,E.yG)(Ue);return(0,k.D)(Ue,Pe)}},5403:(Yt,at,W)=>{"use strict";W.d(at,{x:()=>k});var E=W(930);function k(Ue,Pe,Le,se,Ke){return new ee(Ue,Pe,Le,se,Ke)}class ee extends E.Lv{constructor(Pe,Le,se,Ke,Ae,Ie){super(Pe),this.onFinalize=Ae,this.shouldUnsubscribe=Ie,this._next=Le?function(Re){try{Le(Re)}catch(Se){Pe.error(Se)}}:super._next,this._error=Ke?function(Re){try{Ke(Re)}catch(Se){Pe.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(Re){Pe.error(Re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Le}=this;super.unsubscribe(),!Le&&(null===(Pe=this.onFinalize)||void 0===Pe||Pe.call(this))}}}},6590:(Yt,at,W)=>{"use strict";W.d(at,{d:()=>ee});var E=W(4482),k=W(5403);function ee(Ue){return(0,E.e)((Pe,Le)=>{let se=!1;Pe.subscribe((0,k.x)(Le,Ke=>{se=!0,Le.next(Ke)},()=>{se||Le.next(Ue),Le.complete()}))})}},9300:(Yt,at,W)=>{"use strict";W.d(at,{h:()=>ee});var E=W(4482),k=W(5403);function ee(Ue,Pe){return(0,E.e)((Le,se)=>{let Ke=0;Le.subscribe((0,k.x)(se,Ae=>Ue.call(Pe,Ae,Ke++)&&se.next(Ae)))})}},590:(Yt,at,W)=>{"use strict";W.d(at,{P:()=>se});var E=W(6805),k=W(9300),ee=W(5698),Ue=W(6590),Pe=W(8068),Le=W(4671);function se(Ke,Ae){const Ie=arguments.length>=2;return Re=>Re.pipe(Ke?(0,k.h)((Se,ut)=>Ke(Se,ut,Re)):Le.y,(0,ee.q)(1),Ie?(0,Ue.d)(Ae):(0,Pe.T)(()=>new E.K))}},4004:(Yt,at,W)=>{"use strict";W.d(at,{U:()=>ee});var E=W(4482),k=W(5403);function ee(Ue,Pe){return(0,E.e)((Le,se)=>{let Ke=0;Le.subscribe((0,k.x)(se,Ae=>{se.next(Ue.call(Pe,Ae,Ke++))}))})}},9718:(Yt,at,W)=>{"use strict";W.d(at,{h:()=>k});var E=W(4004);function k(ee){return(0,E.U)(()=>ee)}},8189:(Yt,at,W)=>{"use strict";W.d(at,{J:()=>ee});var E=W(5577),k=W(4671);function ee(Ue=1/0){return(0,E.z)(k.y,Ue)}},5577:(Yt,at,W)=>{"use strict";W.d(at,{z:()=>Ke});var E=W(4004),k=W(8421),ee=W(4482),Ue=W(9672),Pe=W(5403),se=W(576);function Ke(Ae,Ie,Re=1/0){return(0,se.m)(Ie)?Ke((Se,ut)=>(0,E.U)((mt,$e)=>Ie(Se,mt,ut,$e))((0,k.Xf)(Ae(Se,ut))),Re):("number"==typeof Ie&&(Re=Ie),(0,ee.e)((Se,ut)=>function Le(Ae,Ie,Re,Se,ut,mt,$e,jt){const Be=[];let ze=0,yt=0,le=!1;const Z=()=>{le&&!Be.length&&!ze&&Ie.complete()},xe=_t=>ze<Se?We(_t):Be.push(_t),We=_t=>{mt&&Ie.next(_t),ze++;let Et=!1;(0,k.Xf)(Re(_t,yt++)).subscribe((0,Pe.x)(Ie,H=>{ut?.(H),mt?xe(H):Ie.next(H)},()=>{Et=!0},void 0,()=>{if(Et)try{for(ze--;Be.length&&ze<Se;){const H=Be.shift();$e?(0,Ue.f)(Ie,$e,()=>We(H)):We(H)}Z()}catch(H){Ie.error(H)}}))};return Ae.subscribe((0,Pe.x)(Ie,xe,()=>{le=!0,Z()})),()=>{jt?.()}}(Se,ut,Ae,Re)))}},5363:(Yt,at,W)=>{"use strict";W.d(at,{Q:()=>Ue});var E=W(9672),k=W(4482),ee=W(5403);function Ue(Pe,Le=0){return(0,k.e)((se,Ke)=>{se.subscribe((0,ee.x)(Ke,Ae=>(0,E.f)(Ke,Pe,()=>Ke.next(Ae),Le),()=>(0,E.f)(Ke,Pe,()=>Ke.complete(),Le),Ae=>(0,E.f)(Ke,Pe,()=>Ke.error(Ae),Le)))})}},5026:(Yt,at,W)=>{"use strict";W.d(at,{R:()=>Ue});var E=W(4482),k=W(5403);function ee(Pe,Le,se,Ke,Ae){return(Ie,Re)=>{let Se=se,ut=Le,mt=0;Ie.subscribe((0,k.x)(Re,$e=>{const jt=mt++;ut=Se?Pe(ut,$e,jt):(Se=!0,$e),Ke&&Re.next(ut)},Ae&&(()=>{Se&&Re.next(ut),Re.complete()})))}}function Ue(Pe,Le){return(0,E.e)(ee(Pe,Le,arguments.length>=2,!0))}},3099:(Yt,at,W)=>{"use strict";W.d(at,{B:()=>Pe});var E=W(8421),k=W(7579),ee=W(930),Ue=W(4482);function Pe(se={}){const{connector:Ke=(()=>new k.x),resetOnError:Ae=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:Re=!0}=se;return Se=>{let ut,mt,$e,jt=0,Be=!1,ze=!1;const yt=()=>{mt?.unsubscribe(),mt=void 0},le=()=>{yt(),ut=$e=void 0,Be=ze=!1},Z=()=>{const xe=ut;le(),xe?.unsubscribe()};return(0,Ue.e)((xe,We)=>{jt++,!ze&&!Be&&yt();const _t=$e=$e??Ke();We.add(()=>{jt--,0===jt&&!ze&&!Be&&(mt=Le(Z,Re))}),_t.subscribe(We),!ut&&jt>0&&(ut=new ee.Hp({next:Et=>_t.next(Et),error:Et=>{ze=!0,yt(),mt=Le(le,Ae,Et),_t.error(Et)},complete:()=>{Be=!0,yt(),mt=Le(le,Ie),_t.complete()}}),(0,E.Xf)(xe).subscribe(ut))})(Se)}}function Le(se,Ke,...Ae){if(!0===Ke)return void se();if(!1===Ke)return;const Ie=new ee.Hp({next:()=>{Ie.unsubscribe(),se()}});return Ke(...Ae).subscribe(Ie)}},8675:(Yt,at,W)=>{"use strict";W.d(at,{O:()=>Ue});var E=W(7272),k=W(3269),ee=W(4482);function Ue(...Pe){const Le=(0,k.yG)(Pe);return(0,ee.e)((se,Ke)=>{(Le?(0,E.z)(Pe,se,Le):(0,E.z)(Pe,se)).subscribe(Ke)})}},9468:(Yt,at,W)=>{"use strict";W.d(at,{R:()=>k});var E=W(4482);function k(ee,Ue=0){return(0,E.e)((Pe,Le)=>{Le.add(ee.schedule(()=>Pe.subscribe(Le),Ue))})}},3900:(Yt,at,W)=>{"use strict";W.d(at,{w:()=>Ue});var E=W(8421),k=W(4482),ee=W(5403);function Ue(Pe,Le){return(0,k.e)((se,Ke)=>{let Ae=null,Ie=0,Re=!1;const Se=()=>Re&&!Ae&&Ke.complete();se.subscribe((0,ee.x)(Ke,ut=>{Ae?.unsubscribe();let mt=0;const $e=Ie++;(0,E.Xf)(Pe(ut,$e)).subscribe(Ae=(0,ee.x)(Ke,jt=>Ke.next(Le?Le(ut,jt,$e,mt++):jt),()=>{Ae=null,Se()}))},()=>{Re=!0,Se()}))})}},5698:(Yt,at,W)=>{"use strict";W.d(at,{q:()=>Ue});var E=W(515),k=W(4482),ee=W(5403);function Ue(Pe){return Pe<=0?()=>E.E:(0,k.e)((Le,se)=>{let Ke=0;Le.subscribe((0,ee.x)(se,Ae=>{++Ke<=Pe&&(se.next(Ae),Pe<=Ke&&se.complete())}))})}},8505:(Yt,at,W)=>{"use strict";W.d(at,{b:()=>Pe});var E=W(576),k=W(4482),ee=W(5403),Ue=W(4671);function Pe(Le,se,Ke){const Ae=(0,E.m)(Le)||se||Ke?{next:Le,error:se,complete:Ke}:Le;return Ae?(0,k.e)((Ie,Re)=>{var Se;null===(Se=Ae.subscribe)||void 0===Se||Se.call(Ae);let ut=!0;Ie.subscribe((0,ee.x)(Re,mt=>{var $e;null===($e=Ae.next)||void 0===$e||$e.call(Ae,mt),Re.next(mt)},()=>{var mt;ut=!1,null===(mt=Ae.complete)||void 0===mt||mt.call(Ae),Re.complete()},mt=>{var $e;ut=!1,null===($e=Ae.error)||void 0===$e||$e.call(Ae,mt),Re.error(mt)},()=>{var mt,$e;ut&&(null===(mt=Ae.unsubscribe)||void 0===mt||mt.call(Ae)),null===($e=Ae.finalize)||void 0===$e||$e.call(Ae)}))}):Ue.y}},8068:(Yt,at,W)=>{"use strict";W.d(at,{T:()=>Ue});var E=W(6805),k=W(4482),ee=W(5403);function Ue(Le=Pe){return(0,k.e)((se,Ke)=>{let Ae=!1;se.subscribe((0,ee.x)(Ke,Ie=>{Ae=!0,Ke.next(Ie)},()=>Ae?Ke.complete():Ke.error(Le())))})}function Pe(){return new E.K}},4408:(Yt,at,W)=>{"use strict";W.d(at,{o:()=>Pe});var E=W(727);class k extends E.w0{constructor(se,Ke){super()}schedule(se,Ke=0){return this}}const ee={setInterval(Le,se,...Ke){const{delegate:Ae}=ee;return Ae?.setInterval?Ae.setInterval(Le,se,...Ke):setInterval(Le,se,...Ke)},clearInterval(Le){const{delegate:se}=ee;return(se?.clearInterval||clearInterval)(Le)},delegate:void 0};var Ue=W(8737);class Pe extends k{constructor(se,Ke){super(se,Ke),this.scheduler=se,this.work=Ke,this.pending=!1}schedule(se,Ke=0){var Ae;if(this.closed)return this;this.state=se;const Ie=this.id,Re=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(Re,Ie,Ke)),this.pending=!0,this.delay=Ke,this.id=null!==(Ae=this.id)&&void 0!==Ae?Ae:this.requestAsyncId(Re,this.id,Ke),this}requestAsyncId(se,Ke,Ae=0){return ee.setInterval(se.flush.bind(se,this),Ae)}recycleAsyncId(se,Ke,Ae=0){if(null!=Ae&&this.delay===Ae&&!1===this.pending)return Ke;null!=Ke&&ee.clearInterval(Ke)}execute(se,Ke){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(se,Ke);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,Ke){let Ie,Ae=!1;try{this.work(se)}catch(Re){Ae=!0,Ie=Re||new Error("Scheduled action threw falsy error")}if(Ae)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:se,scheduler:Ke}=this,{actions:Ae}=Ke;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ue.P)(Ae,this),null!=se&&(this.id=this.recycleAsyncId(Ke,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Yt,at,W)=>{"use strict";W.d(at,{v:()=>ee});var E=W(6063);class k{constructor(Pe,Le=k.now){this.schedulerActionCtor=Pe,this.now=Le}schedule(Pe,Le=0,se){return new this.schedulerActionCtor(this,Pe).schedule(se,Le)}}k.now=E.l.now;class ee extends k{constructor(Pe,Le=k.now){super(Pe,Le),this.actions=[],this._active=!1}flush(Pe){const{actions:Le}=this;if(this._active)return void Le.push(Pe);let se;this._active=!0;do{if(se=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Le.shift());if(this._active=!1,se){for(;Pe=Le.shift();)Pe.unsubscribe();throw se}}}},4986:(Yt,at,W)=>{"use strict";W.d(at,{P:()=>Ue,z:()=>ee});var E=W(4408);const ee=new(W(7565).v)(E.o),Ue=ee},6063:(Yt,at,W)=>{"use strict";W.d(at,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(Yt,at,W)=>{"use strict";W.d(at,{z:()=>E});const E={setTimeout(k,ee,...Ue){const{delegate:Pe}=E;return Pe?.setTimeout?Pe.setTimeout(k,ee,...Ue):setTimeout(k,ee,...Ue)},clearTimeout(k){const{delegate:ee}=E;return(ee?.clearTimeout||clearTimeout)(k)},delegate:void 0}},2202:(Yt,at,W)=>{"use strict";W.d(at,{h:()=>k});const k=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Yt,at,W)=>{"use strict";W.d(at,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Yt,at,W)=>{"use strict";W.d(at,{K:()=>k});const k=(0,W(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Yt,at,W)=>{"use strict";W.d(at,{_6:()=>Le,jO:()=>Ue,yG:()=>Pe});var E=W(576),k=W(3532);function ee(se){return se[se.length-1]}function Ue(se){return(0,E.m)(ee(se))?se.pop():void 0}function Pe(se){return(0,k.K)(ee(se))?se.pop():void 0}function Le(se,Ke){return"number"==typeof ee(se)?se.pop():Ke}},4742:(Yt,at,W)=>{"use strict";W.d(at,{D:()=>Pe});const{isArray:E}=Array,{getPrototypeOf:k,prototype:ee,keys:Ue}=Object;function Pe(se){if(1===se.length){const Ke=se[0];if(E(Ke))return{args:Ke,keys:null};if(function Le(se){return se&&"object"==typeof se&&k(se)===ee}(Ke)){const Ae=Ue(Ke);return{args:Ae.map(Ie=>Ke[Ie]),keys:Ae}}}return{args:se,keys:null}}},8737:(Yt,at,W)=>{"use strict";function E(k,ee){if(k){const Ue=k.indexOf(ee);0<=Ue&&k.splice(Ue,1)}}W.d(at,{P:()=>E})},3888:(Yt,at,W)=>{"use strict";function E(k){const Ue=k(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Ue.prototype=Object.create(Error.prototype),Ue.prototype.constructor=Ue,Ue}W.d(at,{d:()=>E})},1810:(Yt,at,W)=>{"use strict";function E(k,ee){return k.reduce((Ue,Pe,Le)=>(Ue[Pe]=ee[Le],Ue),{})}W.d(at,{n:()=>E})},2806:(Yt,at,W)=>{"use strict";W.d(at,{O:()=>Ue,x:()=>ee});var E=W(2416);let k=null;function ee(Pe){if(E.v.useDeprecatedSynchronousErrorHandling){const Le=!k;if(Le&&(k={errorThrown:!1,error:null}),Pe(),Le){const{errorThrown:se,error:Ke}=k;if(k=null,se)throw Ke}}else Pe()}function Ue(Pe){E.v.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=Pe)}},9672:(Yt,at,W)=>{"use strict";function E(k,ee,Ue,Pe=0,Le=!1){const se=ee.schedule(function(){Ue(),Le?k.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(k.add(se),!Le)return se}W.d(at,{f:()=>E})},4671:(Yt,at,W)=>{"use strict";function E(k){return k}W.d(at,{y:()=>E})},1144:(Yt,at,W)=>{"use strict";W.d(at,{z:()=>E});const E=k=>k&&"number"==typeof k.length&&"function"!=typeof k},2206:(Yt,at,W)=>{"use strict";W.d(at,{D:()=>k});var E=W(576);function k(ee){return Symbol.asyncIterator&&(0,E.m)(ee?.[Symbol.asyncIterator])}},576:(Yt,at,W)=>{"use strict";function E(k){return"function"==typeof k}W.d(at,{m:()=>E})},3670:(Yt,at,W)=>{"use strict";W.d(at,{c:()=>ee});var E=W(8822),k=W(576);function ee(Ue){return(0,k.m)(Ue[E.L])}},6495:(Yt,at,W)=>{"use strict";W.d(at,{T:()=>ee});var E=W(2202),k=W(576);function ee(Ue){return(0,k.m)(Ue?.[E.h])}},8239:(Yt,at,W)=>{"use strict";W.d(at,{t:()=>k});var E=W(576);function k(ee){return(0,E.m)(ee?.then)}},4049:(Yt,at,W)=>{"use strict";W.d(at,{L:()=>Ue,Q:()=>ee});var E=W(655),k=W(576);function ee(Pe){return(0,E.FC)(this,arguments,function*(){const se=Pe.getReader();try{for(;;){const{value:Ke,done:Ae}=yield(0,E.qq)(se.read());if(Ae)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Ke)}}finally{se.releaseLock()}})}function Ue(Pe){return(0,k.m)(Pe?.getReader)}},3532:(Yt,at,W)=>{"use strict";W.d(at,{K:()=>k});var E=W(576);function k(ee){return ee&&(0,E.m)(ee.schedule)}},4482:(Yt,at,W)=>{"use strict";W.d(at,{A:()=>k,e:()=>ee});var E=W(576);function k(Ue){return(0,E.m)(Ue?.lift)}function ee(Ue){return Pe=>{if(k(Pe))return Pe.lift(function(Le){try{return Ue(Le,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Yt,at,W)=>{"use strict";W.d(at,{Z:()=>Ue});var E=W(4004);const{isArray:k}=Array;function Ue(Pe){return(0,E.U)(Le=>function ee(Pe,Le){return k(Le)?Pe(...Le):Pe(Le)}(Pe,Le))}},5032:(Yt,at,W)=>{"use strict";function E(){}W.d(at,{Z:()=>E})},9635:(Yt,at,W)=>{"use strict";W.d(at,{U:()=>ee,z:()=>k});var E=W(4671);function k(...Ue){return ee(Ue)}function ee(Ue){return 0===Ue.length?E.y:1===Ue.length?Ue[0]:function(Le){return Ue.reduce((se,Ke)=>Ke(se),Le)}}},7849:(Yt,at,W)=>{"use strict";W.d(at,{h:()=>ee});var E=W(2416),k=W(3410);function ee(Ue){k.z.setTimeout(()=>{const{onUnhandledError:Pe}=E.v;if(!Pe)throw Ue;Pe(Ue)})}},4532:(Yt,at,W)=>{"use strict";function E(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(at,{z:()=>E})},8099:Yt=>{Yt.exports=function at(W,E){var k,ee=null;try{k=JSON.parse(W,E)}catch(Ue){ee=Ue}return[ee,k]}},3871:function(Yt){var W,E,k,ee,Ue;W=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,E=/^(?=([^\/?#]*))\1([^]*)$/,k=/(?:\/|^)\.(?=\/)/g,ee=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Yt.exports=Ue={buildAbsoluteURL:function(Pe,Le,se){if(se=se||{},Pe=Pe.trim(),!(Le=Le.trim())){if(!se.alwaysNormalize)return Pe;var Ke=Ue.parseURL(Pe);if(!Ke)throw new Error("Error trying to parse base URL.");return Ke.path=Ue.normalizePath(Ke.path),Ue.buildURLFromParts(Ke)}var Ae=Ue.parseURL(Le);if(!Ae)throw new Error("Error trying to parse relative URL.");if(Ae.scheme)return se.alwaysNormalize?(Ae.path=Ue.normalizePath(Ae.path),Ue.buildURLFromParts(Ae)):Le;var Ie=Ue.parseURL(Pe);if(!Ie)throw new Error("Error trying to parse base URL.");if(!Ie.netLoc&&Ie.path&&"/"!==Ie.path[0]){var Re=E.exec(Ie.path);Ie.netLoc=Re[1],Ie.path=Re[2]}Ie.netLoc&&!Ie.path&&(Ie.path="/");var Se={scheme:Ie.scheme,netLoc:Ae.netLoc,path:null,params:Ae.params,query:Ae.query,fragment:Ae.fragment};if(!Ae.netLoc&&(Se.netLoc=Ie.netLoc,"/"!==Ae.path[0]))if(Ae.path){var ut=Ie.path,mt=ut.substring(0,ut.lastIndexOf("/")+1)+Ae.path;Se.path=Ue.normalizePath(mt)}else Se.path=Ie.path,Ae.params||(Se.params=Ie.params,Ae.query||(Se.query=Ie.query));return null===Se.path&&(Se.path=se.alwaysNormalize?Ue.normalizePath(Ae.path):Ae.path),Ue.buildURLFromParts(Se)},parseURL:function(Pe){var Le=W.exec(Pe);return Le?{scheme:Le[1]||"",netLoc:Le[2]||"",path:Le[3]||"",params:Le[4]||"",query:Le[5]||"",fragment:Le[6]||""}:null},normalizePath:function(Pe){for(Pe=Pe.split("").reverse().join("").replace(k,"");Pe.length!==(Pe=Pe.replace(ee,"")).length;);return Pe.split("").reverse().join("")},buildURLFromParts:function(Pe){return Pe.scheme+Pe.netLoc+Pe.path+Pe.params+Pe.query+Pe.fragment}}},3629:(Yt,at,W)=>{var E=W(9226),k=Yt.exports={WebVTT:W(8318),VTTCue:W(5713),VTTRegion:W(3872)};E.vttjs=k,E.WebVTT=k.WebVTT;var ee=k.VTTCue,Ue=k.VTTRegion,Pe=E.VTTCue,Le=E.VTTRegion;k.shim=function(){E.VTTCue=ee,E.VTTRegion=Ue},k.restore=function(){E.VTTCue=Pe,E.VTTRegion=Le},E.VTTCue||k.shim()},8318:(Yt,at,W)=>{var E=W(1421),k=Object.create||function(){function H(){}return function(he){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return H.prototype=he,new H}}();function ee(H,he){this.name="ParsingError",this.code=H.code,this.message=he||H.message}function Ue(H){function he(Fe,Me,Ge,ct){return 3600*(0|Fe)+60*(0|Me)+(0|Ge)+(0|ct)/1e3}var fe=H.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return fe?fe[3]?he(fe[1],fe[2],fe[3].replace(":",""),fe[4]):fe[1]>59?he(fe[1],fe[2],0,fe[4]):he(0,fe[1],fe[2],fe[4]):null}function Pe(){this.values=k(null)}function Le(H,he,fe,Fe){var Me=Fe?H.split(Fe):[H];for(var Ge in Me)if("string"==typeof Me[Ge]){var ct=Me[Ge].split(fe);2===ct.length&&he(ct[0].trim(),ct[1].trim())}}function se(H,he,fe){var Fe=H;function Me(){var St=Ue(H);if(null===St)throw new ee(ee.Errors.BadTimeStamp,"Malformed timestamp: "+Fe);return H=H.replace(/^[^\sa-zA-Z-]+/,""),St}function ct(){H=H.replace(/^\s+/,"")}if(ct(),he.startTime=Me(),ct(),"--\x3e"!==H.substr(0,3))throw new ee(ee.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Fe);H=H.substr(3),ct(),he.endTime=Me(),ct(),function Ge(St,Tt){var Pt=new Pe;Le(St,function(kt,dt){switch(kt){case"region":for(var Ht=fe.length-1;Ht>=0;Ht--)if(fe[Ht].id===dt){Pt.set(kt,fe[Ht].region);break}break;case"vertical":Pt.alt(kt,dt,["rl","lr"]);break;case"line":var $t=dt.split(","),rn=$t[0];Pt.integer(kt,rn),Pt.percent(kt,rn)&&Pt.set("snapToLines",!1),Pt.alt(kt,rn,["auto"]),2===$t.length&&Pt.alt("lineAlign",$t[1],["start","center","end"]);break;case"position":$t=dt.split(","),Pt.percent(kt,$t[0]),2===$t.length&&Pt.alt("positionAlign",$t[1],["start","center","end"]);break;case"size":Pt.percent(kt,dt);break;case"align":Pt.alt(kt,dt,["start","center","end","left","right"])}},/:/,/\s/),Tt.region=Pt.get("region",null),Tt.vertical=Pt.get("vertical","");try{Tt.line=Pt.get("line","auto")}catch{}Tt.lineAlign=Pt.get("lineAlign","start"),Tt.snapToLines=Pt.get("snapToLines",!0),Tt.size=Pt.get("size",100);try{Tt.align=Pt.get("align","center")}catch{Tt.align=Pt.get("align","middle")}try{Tt.position=Pt.get("position","auto")}catch{Tt.position=Pt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Tt.align)}Tt.positionAlign=Pt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Tt.align)}(H,he)}(ee.prototype=k(Error.prototype)).constructor=ee,ee.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Pe.prototype={set:function(H,he){!this.get(H)&&""!==he&&(this.values[H]=he)},get:function(H,he,fe){return fe?this.has(H)?this.values[H]:he[fe]:this.has(H)?this.values[H]:he},has:function(H){return H in this.values},alt:function(H,he,fe){for(var Fe=0;Fe<fe.length;++Fe)if(he===fe[Fe]){this.set(H,he);break}},integer:function(H,he){/^-?\d+$/.test(he)&&this.set(H,parseInt(he,10))},percent:function(H,he){return!!(he.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(he=parseFloat(he),he>=0&&he<=100))&&(this.set(H,he),!0)}};var Ke=E.createElement&&E.createElement("textarea"),Ae={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ie={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Re={v:"title",lang:"lang"},Se={rt:"ruby"};function ut(H,he){function fe(){if(!he)return null;var Bt=he.match(/^([^<]*)(<[^>]*>?)?/);return function rn(_n){return he=he.substr(_n.length),_n}(Bt[1]?Bt[1]:Bt[2])}function Fe(rn){return Ke.innerHTML=rn,rn=Ke.textContent,Ke.textContent="",rn}function Ge(rn,Bt){var _n=Ae[rn];if(!_n)return null;var Jt=H.document.createElement(_n),qn=Re[rn];return qn&&Bt&&(Jt[qn]=Bt.trim()),Jt}for(var Tt,ct=H.document.createElement("div"),St=ct,Pt=[];null!==(Tt=fe());)if("<"!==Tt[0])St.appendChild(H.document.createTextNode(Fe(Tt)));else{if("/"===Tt[1]){Pt.length&&Pt[Pt.length-1]===Tt.substr(2).replace(">","")&&(Pt.pop(),St=St.parentNode);continue}var dt,kt=Ue(Tt.substr(1,Tt.length-2));if(kt){dt=H.document.createProcessingInstruction("timestamp",kt),St.appendChild(dt);continue}var Ht=Tt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Ht||!(dt=Ge(Ht[1],Ht[3]))||Se[(Bt=dt).localName]&&Se[Bt.localName]!==St.localName)continue;if(Ht[2]){var $t=Ht[2].split(".");$t.forEach(function(rn){var Bt=/^bg_/.test(rn),_n=Bt?rn.slice(3):rn;Ie.hasOwnProperty(_n)&&(dt.style[Bt?"background-color":"color"]=Ie[_n])}),dt.className=$t.join(" ")}Pt.push(Ht[1]),St.appendChild(dt),St=dt}var Bt;return ct}var mt=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function $e(H){for(var he=0;he<mt.length;he++){var fe=mt[he];if(H>=fe[0]&&H<=fe[1])return!0}return!1}function jt(H){var he=[],fe="";if(!H||!H.childNodes)return"ltr";function Me(St,Tt){for(var Pt=Tt.childNodes.length-1;Pt>=0;Pt--)St.push(Tt.childNodes[Pt])}function Ge(St){if(!St||!St.length)return null;var Tt=St.pop(),Pt=Tt.textContent||Tt.innerText;if(Pt){var kt=Pt.match(/^.*(\n|\r)/);return kt?(St.length=0,kt[0]):Pt}return"ruby"===Tt.tagName?Ge(St):Tt.childNodes?(Me(St,Tt),Ge(St)):void 0}for(Me(he,H);fe=Ge(he);)for(var ct=0;ct<fe.length;ct++)if($e(fe.charCodeAt(ct)))return"rtl";return"ltr"}function ze(){}function yt(H,he,fe){ze.call(this),this.cue=he,this.cueDiv=ut(H,he.text);var Fe={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Fe,this.cueDiv),this.div=H.document.createElement("div"),Fe={direction:jt(this.cueDiv),writingMode:""===he.vertical?"horizontal-tb":"lr"===he.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===he.align?"center":he.align,font:fe.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Fe),this.div.appendChild(this.cueDiv);var Me=0;switch(he.positionAlign){case"start":Me=he.position;break;case"center":Me=he.position-he.size/2;break;case"end":Me=he.position-he.size}this.applyStyles(""===he.vertical?{left:this.formatStyle(Me,"%"),width:this.formatStyle(he.size,"%")}:{top:this.formatStyle(Me,"%"),height:this.formatStyle(he.size,"%")}),this.move=function(Ge){this.applyStyles({top:this.formatStyle(Ge.top,"px"),bottom:this.formatStyle(Ge.bottom,"px"),left:this.formatStyle(Ge.left,"px"),right:this.formatStyle(Ge.right,"px"),height:this.formatStyle(Ge.height,"px"),width:this.formatStyle(Ge.width,"px")})}}function le(H){var he,fe,Fe,Me;if(H.div){fe=H.div.offsetHeight,Fe=H.div.offsetWidth,Me=H.div.offsetTop;var Ge=(Ge=H.div.childNodes)&&(Ge=Ge[0])&&Ge.getClientRects&&Ge.getClientRects();H=H.div.getBoundingClientRect(),he=Ge?Math.max(Ge[0]&&Ge[0].height||0,H.height/Ge.length):0}this.left=H.left,this.right=H.right,this.top=H.top||Me,this.height=H.height||fe,this.bottom=H.bottom||Me+(H.height||fe),this.width=H.width||Fe,this.lineHeight=void 0!==he?he:H.lineHeight}function Z(H,he,fe,Fe){var Ge=new le(he),ct=he.cue,St=function Be(H){if("number"==typeof H.line&&(H.snapToLines||H.line>=0&&H.line<=100))return H.line;if(!H.track||!H.track.textTrackList||!H.track.textTrackList.mediaElement)return-1;for(var he=H.track,fe=he.textTrackList,Fe=0,Me=0;Me<fe.length&&fe[Me]!==he;Me++)"showing"===fe[Me].mode&&Fe++;return-1*++Fe}(ct),Tt=[];if(ct.snapToLines){var Pt;switch(ct.vertical){case"":Tt=["+y","-y"],Pt="height";break;case"rl":Tt=["+x","-x"],Pt="width";break;case"lr":Tt=["-x","+x"],Pt="width"}var kt=Ge.lineHeight,dt=kt*Math.round(St),Ht=fe[Pt]+kt,$t=Tt[0];Math.abs(dt)>Ht&&(dt=dt<0?-1:1,dt*=Math.ceil(Ht/kt)*kt),St<0&&(dt+=""===ct.vertical?fe.height:fe.width,Tt=Tt.reverse()),Ge.move($t,dt)}else{var rn=Ge.lineHeight/fe.height*100;switch(ct.lineAlign){case"center":St-=rn/2;break;case"end":St-=rn}switch(ct.vertical){case"":he.applyStyles({top:he.formatStyle(St,"%")});break;case"rl":he.applyStyles({left:he.formatStyle(St,"%")});break;case"lr":he.applyStyles({right:he.formatStyle(St,"%")})}Tt=["+y","-x","+x","-y"],Ge=new le(he)}var Bt=function Me(_n,Jt){for(var qn,Qn=new le(_n),wr=1,vr=0;vr<Jt.length;vr++){for(;_n.overlapsOppositeAxis(fe,Jt[vr])||_n.within(fe)&&_n.overlapsAny(Fe);)_n.move(Jt[vr]);if(_n.within(fe))return _n;var Ci=_n.intersectPercentage(fe);wr>Ci&&(qn=new le(_n),wr=Ci),_n=new le(Qn)}return qn||Qn}(Ge,Tt);he.move(Bt.toCSSCompatValues(fe))}function xe(){}ze.prototype.applyStyles=function(H,he){for(var fe in he=he||this.div,H)H.hasOwnProperty(fe)&&(he.style[fe]=H[fe])},ze.prototype.formatStyle=function(H,he){return 0===H?0:H+he},(yt.prototype=k(ze.prototype)).constructor=yt,le.prototype.move=function(H,he){switch(he=void 0!==he?he:this.lineHeight,H){case"+x":this.left+=he,this.right+=he;break;case"-x":this.left-=he,this.right-=he;break;case"+y":this.top+=he,this.bottom+=he;break;case"-y":this.top-=he,this.bottom-=he}},le.prototype.overlaps=function(H){return this.left<H.right&&this.right>H.left&&this.top<H.bottom&&this.bottom>H.top},le.prototype.overlapsAny=function(H){for(var he=0;he<H.length;he++)if(this.overlaps(H[he]))return!0;return!1},le.prototype.within=function(H){return this.top>=H.top&&this.bottom<=H.bottom&&this.left>=H.left&&this.right<=H.right},le.prototype.overlapsOppositeAxis=function(H,he){switch(he){case"+x":return this.left<H.left;case"-x":return this.right>H.right;case"+y":return this.top<H.top;case"-y":return this.bottom>H.bottom}},le.prototype.intersectPercentage=function(H){return Math.max(0,Math.min(this.right,H.right)-Math.max(this.left,H.left))*Math.max(0,Math.min(this.bottom,H.bottom)-Math.max(this.top,H.top))/(this.height*this.width)},le.prototype.toCSSCompatValues=function(H){return{top:this.top-H.top,bottom:H.bottom-this.bottom,left:this.left-H.left,right:H.right-this.right,height:this.height,width:this.width}},le.getSimpleBoxPosition=function(H){var he=H.div?H.div.offsetHeight:H.tagName?H.offsetHeight:0,fe=H.div?H.div.offsetWidth:H.tagName?H.offsetWidth:0,Fe=H.div?H.div.offsetTop:H.tagName?H.offsetTop:0;return{left:(H=H.div?H.div.getBoundingClientRect():H.tagName?H.getBoundingClientRect():H).left,right:H.right,top:H.top||Fe,height:H.height||he,bottom:H.bottom||Fe+(H.height||he),width:H.width||fe}},xe.StringDecoder=function(){return{decode:function(H){if(!H)return"";if("string"!=typeof H)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(H))}}},xe.convertCueToDOMTree=function(H,he){return H&&he?ut(H,he):null},xe.processCues=function(H,he,fe){if(!H||!he||!fe)return null;for(;fe.firstChild;)fe.removeChild(fe.firstChild);var Fe=H.document.createElement("div");if(Fe.style.position="absolute",Fe.style.left="0",Fe.style.right="0",Fe.style.top="0",Fe.style.bottom="0",Fe.style.margin="1.5%",fe.appendChild(Fe),function Me(kt){for(var dt=0;dt<kt.length;dt++)if(kt[dt].hasBeenReset||!kt[dt].displayState)return!0;return!1}(he)){var ct=[],St=le.getSimpleBoxPosition(Fe),Pt={font:Math.round(.05*St.height*100)/100+"px sans-serif"};!function(){for(var kt,dt,Ht=0;Ht<he.length;Ht++)kt=new yt(H,dt=he[Ht],Pt),Fe.appendChild(kt.div),Z(0,kt,St,ct),dt.displayState=kt.div,ct.push(le.getSimpleBoxPosition(kt))}()}else for(var Ge=0;Ge<he.length;Ge++)Fe.appendChild(he[Ge].displayState)},(xe.Parser=function(H,he,fe){fe||(fe=he,he={}),he||(he={}),this.window=H,this.vttjs=he,this.state="INITIAL",this.buffer="",this.decoder=fe||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(H){if(!(H instanceof ee))throw H;this.onparsingerror&&this.onparsingerror(H)},parse:function(H){var kt,he=this;function fe(){for(var kt=he.buffer,dt=0;dt<kt.length&&"\r"!==kt[dt]&&"\n"!==kt[dt];)++dt;var Ht=kt.substr(0,dt);return"\r"===kt[dt]&&++dt,"\n"===kt[dt]&&++dt,he.buffer=kt.substr(dt),Ht}H&&(he.buffer+=he.decoder.decode(H,{stream:!0}));try{var ct;if("INITIAL"===he.state){if(!/\r\n|\n/.test(he.buffer))return this;var St=(ct=fe()).match(/^WEBVTT([ \t].*)?$/);if(!St||!St[0])throw new ee(ee.Errors.BadSignature);he.state="HEADER"}for(var Tt=!1;he.buffer;){if(!/\r\n|\n/.test(he.buffer))return this;switch(Tt?Tt=!1:ct=fe(),he.state){case"HEADER":/:/.test(ct)?(kt=ct).match(/X-TIMESTAMP-MAP/)?Le(kt,function(dt,Ht){"X-TIMESTAMP-MAP"===dt&&function Me(kt){var dt=new Pe;Le(kt,function(Ht,$t){switch(Ht){case"MPEGT":dt.integer(Ht+"S",$t);break;case"LOCA":dt.set(Ht+"L",Ue($t))}},/[^\d]:/,/,/),he.ontimestampmap&&he.ontimestampmap({MPEGTS:dt.get("MPEGTS"),LOCAL:dt.get("LOCAL")})}(Ht)},/=/):Le(kt,function(dt,Ht){"Region"===dt&&function Fe(kt){var dt=new Pe;if(Le(kt,function($t,rn){switch($t){case"id":dt.set($t,rn);break;case"width":dt.percent($t,rn);break;case"lines":dt.integer($t,rn);break;case"regionanchor":case"viewportanchor":var Bt=rn.split(",");if(2!==Bt.length)break;var _n=new Pe;if(_n.percent("x",Bt[0]),_n.percent("y",Bt[1]),!_n.has("x")||!_n.has("y"))break;dt.set($t+"X",_n.get("x")),dt.set($t+"Y",_n.get("y"));break;case"scroll":dt.alt($t,rn,["up"])}},/=/,/\s/),dt.has("id")){var Ht=new(he.vttjs.VTTRegion||he.window.VTTRegion);Ht.width=dt.get("width",100),Ht.lines=dt.get("lines",3),Ht.regionAnchorX=dt.get("regionanchorX",0),Ht.regionAnchorY=dt.get("regionanchorY",100),Ht.viewportAnchorX=dt.get("viewportanchorX",0),Ht.viewportAnchorY=dt.get("viewportanchorY",100),Ht.scroll=dt.get("scroll",""),he.onregion&&he.onregion(Ht),he.regionList.push({id:dt.get("id"),region:Ht})}}(Ht)},/:/):ct||(he.state="ID");continue;case"NOTE":ct||(he.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ct)){he.state="NOTE";break}if(!ct)continue;he.cue=new(he.vttjs.VTTCue||he.window.VTTCue)(0,0,"");try{he.cue.align="center"}catch{he.cue.align="middle"}if(he.state="CUE",-1===ct.indexOf("--\x3e")){he.cue.id=ct;continue}case"CUE":try{se(ct,he.cue,he.regionList)}catch(kt){he.reportOrThrowError(kt),he.cue=null,he.state="BADCUE";continue}he.state="CUETEXT";continue;case"CUETEXT":var Pt=-1!==ct.indexOf("--\x3e");if(!ct||Pt&&(Tt=!0)){he.oncue&&he.oncue(he.cue),he.cue=null,he.state="ID";continue}he.cue.text&&(he.cue.text+="\n"),he.cue.text+=ct.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":ct||(he.state="ID");continue}}}catch(kt){he.reportOrThrowError(kt),"CUETEXT"===he.state&&he.cue&&he.oncue&&he.oncue(he.cue),he.cue=null,he.state="INITIAL"===he.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var H=this;try{if(H.buffer+=H.decoder.decode(),(H.cue||"HEADER"===H.state)&&(H.buffer+="\n\n",H.parse()),"INITIAL"===H.state)throw new ee(ee.Errors.BadSignature)}catch(he){H.reportOrThrowError(he)}return H.onflush&&H.onflush(),this}},Yt.exports=xe},5713:Yt=>{var W={"":1,lr:1,rl:1},E={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ee(Pe){return"string"==typeof Pe&&!!E[Pe.toLowerCase()]&&Pe.toLowerCase()}function Ue(Pe,Le,se){this.hasBeenReset=!1;var Ke="",Ae=!1,Ie=Pe,Re=Le,Se=se,ut=null,mt="",$e=!0,jt="auto",Be="start",ze="auto",yt="auto",le=100,Z="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Ke},set:function(xe){Ke=""+xe}},pauseOnExit:{enumerable:!0,get:function(){return Ae},set:function(xe){Ae=!!xe}},startTime:{enumerable:!0,get:function(){return Ie},set:function(xe){if("number"!=typeof xe)throw new TypeError("Start time must be set to a number.");Ie=xe,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Re},set:function(xe){if("number"!=typeof xe)throw new TypeError("End time must be set to a number.");Re=xe,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Se},set:function(xe){Se=""+xe,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return ut},set:function(xe){ut=xe,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return mt},set:function(xe){var We=function k(Pe){return"string"==typeof Pe&&!!W[Pe.toLowerCase()]&&Pe.toLowerCase()}(xe);if(!1===We)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");mt=We,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return $e},set:function(xe){$e=!!xe,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return jt},set:function(xe){if("number"!=typeof xe&&"auto"!==xe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");jt=xe,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Be},set:function(xe){var We=ee(xe);We?(Be=We,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return ze},set:function(xe){if(xe<0||xe>100)throw new Error("Position must be between 0 and 100.");ze=xe,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return yt},set:function(xe){var We=ee(xe);We?(yt=We,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return le},set:function(xe){if(xe<0||xe>100)throw new Error("Size must be between 0 and 100.");le=xe,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Z},set:function(xe){var We=ee(xe);if(!We)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Z=We,this.hasBeenReset=!0}}}),this.displayState=void 0}Ue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Yt.exports=Ue},3872:Yt=>{var at={"":!0,up:!0};function E(ee){return"number"==typeof ee&&ee>=0&&ee<=100}Yt.exports=function k(){var ee=100,Ue=3,Pe=0,Le=100,se=0,Ke=100,Ae="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return ee},set:function(Ie){if(!E(Ie))throw new Error("Width must be between 0 and 100.");ee=Ie}},lines:{enumerable:!0,get:function(){return Ue},set:function(Ie){if("number"!=typeof Ie)throw new TypeError("Lines must be set to a number.");Ue=Ie}},regionAnchorY:{enumerable:!0,get:function(){return Le},set:function(Ie){if(!E(Ie))throw new Error("RegionAnchorX must be between 0 and 100.");Le=Ie}},regionAnchorX:{enumerable:!0,get:function(){return Pe},set:function(Ie){if(!E(Ie))throw new Error("RegionAnchorY must be between 0 and 100.");Pe=Ie}},viewportAnchorY:{enumerable:!0,get:function(){return Ke},set:function(Ie){if(!E(Ie))throw new Error("ViewportAnchorY must be between 0 and 100.");Ke=Ie}},viewportAnchorX:{enumerable:!0,get:function(){return se},set:function(Ie){if(!E(Ie))throw new Error("ViewportAnchorX must be between 0 and 100.");se=Ie}},scroll:{enumerable:!0,get:function(){return Ae},set:function(Ie){var Re=function W(ee){return"string"==typeof ee&&!!at[ee.toLowerCase()]&&ee.toLowerCase()}(Ie);!1===Re?console.warn("Scroll: an invalid or illegal string was specified."):Ae=Re}}})}},655:(Yt,at,W)=>{"use strict";function Ue(fe,Fe){var Me={};for(var Ge in fe)Object.prototype.hasOwnProperty.call(fe,Ge)&&Fe.indexOf(Ge)<0&&(Me[Ge]=fe[Ge]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var ct=0;for(Ge=Object.getOwnPropertySymbols(fe);ct<Ge.length;ct++)Fe.indexOf(Ge[ct])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ge[ct])&&(Me[Ge[ct]]=fe[Ge[ct]])}return Me}function Ke(fe,Fe,Me,Ge){return new(Me||(Me=Promise))(function(St,Tt){function Pt(Ht){try{dt(Ge.next(Ht))}catch($t){Tt($t)}}function kt(Ht){try{dt(Ge.throw(Ht))}catch($t){Tt($t)}}function dt(Ht){Ht.done?St(Ht.value):function ct(St){return St instanceof Me?St:new Me(function(Tt){Tt(St)})}(Ht.value).then(Pt,kt)}dt((Ge=Ge.apply(fe,Fe||[])).next())})}function Be(fe){return this instanceof Be?(this.v=fe,this):new Be(fe)}function ze(fe,Fe,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,Ge=Me.apply(fe,Fe||[]),St=[];return ct={},Tt("next"),Tt("throw"),Tt("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function Tt(rn){Ge[rn]&&(ct[rn]=function(Bt){return new Promise(function(_n,Jt){St.push([rn,Bt,_n,Jt])>1||Pt(rn,Bt)})})}function Pt(rn,Bt){try{!function kt(rn){rn.value instanceof Be?Promise.resolve(rn.value.v).then(dt,Ht):$t(St[0][2],rn)}(Ge[rn](Bt))}catch(_n){$t(St[0][3],_n)}}function dt(rn){Pt("next",rn)}function Ht(rn){Pt("throw",rn)}function $t(rn,Bt){rn(Bt),St.shift(),St.length&&Pt(St[0][0],St[0][1])}}function le(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,Fe=fe[Symbol.asyncIterator];return Fe?Fe.call(fe):(fe=function Se(fe){var Fe="function"==typeof Symbol&&Symbol.iterator,Me=Fe&&fe[Fe],Ge=0;if(Me)return Me.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&Ge>=fe.length&&(fe=void 0),{value:fe&&fe[Ge++],done:!fe}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Me={},Ge("next"),Ge("throw"),Ge("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function Ge(St){Me[St]=fe[St]&&function(Tt){return new Promise(function(Pt,kt){!function ct(St,Tt,Pt,kt){Promise.resolve(kt).then(function(dt){St({value:dt,done:Pt})},Tt)}(Pt,kt,(Tt=fe[St](Tt)).done,Tt.value)})}}}W.d(at,{FC:()=>ze,KL:()=>le,_T:()=>Ue,mG:()=>Ke,qq:()=>Be})},5893:()=>{},434:Yt=>{function at(){return Yt.exports=at=Object.assign?Object.assign.bind():function(W){for(var E=1;E<arguments.length;E++){var k=arguments[E];for(var ee in k)Object.prototype.hasOwnProperty.call(k,ee)&&(W[ee]=k[ee])}return W},Yt.exports.__esModule=!0,Yt.exports.default=Yt.exports,at.apply(this,arguments)}Yt.exports=at,Yt.exports.__esModule=!0,Yt.exports.default=Yt.exports},6895:(Yt,at,W)=>{"use strict";W.d(at,{Do:()=>le,EM:()=>La,HT:()=>Pe,JF:()=>Mo,K0:()=>se,Mx:()=>Yo,O5:()=>Si,Ov:()=>wn,PM:()=>ms,S$:()=>Be,V_:()=>Ie,Ye:()=>Z,Zx:()=>fo,b0:()=>yt,bD:()=>qs,ez:()=>po,mk:()=>di,q:()=>ee,sg:()=>Us,uU:()=>Wi,w_:()=>Le});var E=W(4650);let k=null;function ee(){return k}function Pe(B){k||(k=B)}class Le{}const se=new E.OlP("DocumentToken");let Ke=(()=>{class B{historyGo(z){throw new Error("Not implemented")}}return B.\u0275fac=function(z){return new(z||B)},B.\u0275prov=E.Yz7({token:B,factory:function(){return function Ae(){return(0,E.LFG)(Re)}()},providedIn:"platform"}),B})();const Ie=new E.OlP("Location Initialized");let Re=(()=>{class B extends Ke{constructor(z){super(),this._doc=z,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(z){const we=ee().getGlobalEventTarget(this._doc,"window");return we.addEventListener("popstate",z,!1),()=>we.removeEventListener("popstate",z)}onHashChange(z){const we=ee().getGlobalEventTarget(this._doc,"window");return we.addEventListener("hashchange",z,!1),()=>we.removeEventListener("hashchange",z)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(z){this.location.pathname=z}pushState(z,we,et){Se()?this._history.pushState(z,we,et):this.location.hash=et}replaceState(z,we,et){Se()?this._history.replaceState(z,we,et):this.location.hash=et}forward(){this._history.forward()}back(){this._history.back()}historyGo(z=0){this._history.go(z)}getState(){return this._history.state}}return B.\u0275fac=function(z){return new(z||B)(E.LFG(se))},B.\u0275prov=E.Yz7({token:B,factory:function(){return function ut(){return new Re((0,E.LFG)(se))}()},providedIn:"platform"}),B})();function Se(){return!!window.history.pushState}function mt(B,ge){if(0==B.length)return ge;if(0==ge.length)return B;let z=0;return B.endsWith("/")&&z++,ge.startsWith("/")&&z++,2==z?B+ge.substring(1):1==z?B+ge:B+"/"+ge}function $e(B){const ge=B.match(/#|\?|$/),z=ge&&ge.index||B.length;return B.slice(0,z-("/"===B[z-1]?1:0))+B.slice(z)}function jt(B){return B&&"?"!==B[0]?"?"+B:B}let Be=(()=>{class B{historyGo(z){throw new Error("Not implemented")}}return B.\u0275fac=function(z){return new(z||B)},B.\u0275prov=E.Yz7({token:B,factory:function(){return(0,E.f3M)(yt)},providedIn:"root"}),B})();const ze=new E.OlP("appBaseHref");let yt=(()=>{class B extends Be{constructor(z,we){super(),this._platformLocation=z,this._removeListenerFns=[],this._baseHref=we??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}prepareExternalUrl(z){return mt(this._baseHref,z)}path(z=!1){const we=this._platformLocation.pathname+jt(this._platformLocation.search),et=this._platformLocation.hash;return et&&z?`${we}${et}`:we}pushState(z,we,et,Ot){const Kt=this.prepareExternalUrl(et+jt(Ot));this._platformLocation.pushState(z,we,Kt)}replaceState(z,we,et,Ot){const Kt=this.prepareExternalUrl(et+jt(Ot));this._platformLocation.replaceState(z,we,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return B.\u0275fac=function(z){return new(z||B)(E.LFG(Ke),E.LFG(ze,8))},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),le=(()=>{class B extends Be{constructor(z,we){super(),this._platformLocation=z,this._baseHref="",this._removeListenerFns=[],null!=we&&(this._baseHref=we)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(z){this._removeListenerFns.push(this._platformLocation.onPopState(z),this._platformLocation.onHashChange(z))}getBaseHref(){return this._baseHref}path(z=!1){let we=this._platformLocation.hash;return null==we&&(we="#"),we.length>0?we.substring(1):we}prepareExternalUrl(z){const we=mt(this._baseHref,z);return we.length>0?"#"+we:we}pushState(z,we,et,Ot){let Kt=this.prepareExternalUrl(et+jt(Ot));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.pushState(z,we,Kt)}replaceState(z,we,et,Ot){let Kt=this.prepareExternalUrl(et+jt(Ot));0==Kt.length&&(Kt=this._platformLocation.pathname),this._platformLocation.replaceState(z,we,Kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(z=0){this._platformLocation.historyGo?.(z)}}return B.\u0275fac=function(z){return new(z||B)(E.LFG(Ke),E.LFG(ze,8))},B.\u0275prov=E.Yz7({token:B,factory:B.\u0275fac}),B})(),Z=(()=>{class B{constructor(z){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=z;const we=this._locationStrategy.getBaseHref();this._baseHref=$e(_t(we)),this._locationStrategy.onPopState(et=>{this._subject.emit({url:this.path(!0),pop:!0,state:et.state,type:et.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(z=!1){return this.normalize(this._locationStrategy.path(z))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(z,we=""){return this.path()==this.normalize(z+jt(we))}normalize(z){return B.stripTrailingSlash(function We(B,ge){return B&&ge.startsWith(B)?ge.substring(B.length):ge}(this._baseHref,_t(z)))}prepareExternalUrl(z){return z&&"/"!==z[0]&&(z="/"+z),this._locationStrategy.prepareExternalUrl(z)}go(z,we="",et=null){this._locationStrategy.pushState(et,"",z,we),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+jt(we)),et)}replaceState(z,we="",et=null){this._locationStrategy.replaceState(et,"",z,we),this._notifyUrlChangeListeners(this.prepareExternalUrl(z+jt(we)),et)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(z=0){this._locationStrategy.historyGo?.(z)}onUrlChange(z){return this._urlChangeListeners.push(z),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(we=>{this._notifyUrlChangeListeners(we.url,we.state)})),()=>{const we=this._urlChangeListeners.indexOf(z);this._urlChangeListeners.splice(we,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(z="",we){this._urlChangeListeners.forEach(et=>et(z,we))}subscribe(z,we,et){return this._subject.subscribe({next:z,error:we,complete:et})}}return B.normalizeQueryParams=jt,B.joinWithSlash=mt,B.stripTrailingSlash=$e,B.\u0275fac=function(z){return new(z||B)(E.LFG(Be))},B.\u0275prov=E.Yz7({token:B,factory:function(){return function xe(){return new Z((0,E.LFG)(Be))}()},providedIn:"root"}),B})();function _t(B){return B.replace(/\/index.html$/,"")}var H=(()=>((H=H||{})[H.Decimal=0]="Decimal",H[H.Percent=1]="Percent",H[H.Currency=2]="Currency",H[H.Scientific=3]="Scientific",H))(),fe=(()=>((fe=fe||{})[fe.Format=0]="Format",fe[fe.Standalone=1]="Standalone",fe))(),Fe=(()=>((Fe=Fe||{})[Fe.Narrow=0]="Narrow",Fe[Fe.Abbreviated=1]="Abbreviated",Fe[Fe.Wide=2]="Wide",Fe[Fe.Short=3]="Short",Fe))(),Me=(()=>((Me=Me||{})[Me.Short=0]="Short",Me[Me.Medium=1]="Medium",Me[Me.Long=2]="Long",Me[Me.Full=3]="Full",Me))(),Ge=(()=>((Ge=Ge||{})[Ge.Decimal=0]="Decimal",Ge[Ge.Group=1]="Group",Ge[Ge.List=2]="List",Ge[Ge.PercentSign=3]="PercentSign",Ge[Ge.PlusSign=4]="PlusSign",Ge[Ge.MinusSign=5]="MinusSign",Ge[Ge.Exponential=6]="Exponential",Ge[Ge.SuperscriptingExponent=7]="SuperscriptingExponent",Ge[Ge.PerMille=8]="PerMille",Ge[Ge.Infinity=9]="Infinity",Ge[Ge.NaN=10]="NaN",Ge[Ge.TimeSeparator=11]="TimeSeparator",Ge[Ge.CurrencyDecimal=12]="CurrencyDecimal",Ge[Ge.CurrencyGroup=13]="CurrencyGroup",Ge))();function rn(B,ge){return en((0,E.cg1)(B)[E.wAp.DateFormat],ge)}function Bt(B,ge){return en((0,E.cg1)(B)[E.wAp.TimeFormat],ge)}function _n(B,ge){return en((0,E.cg1)(B)[E.wAp.DateTimeFormat],ge)}function Jt(B,ge){const z=(0,E.cg1)(B),we=z[E.wAp.NumberSymbols][ge];if(typeof we>"u"){if(ge===Ge.CurrencyDecimal)return z[E.wAp.NumberSymbols][Ge.Decimal];if(ge===Ge.CurrencyGroup)return z[E.wAp.NumberSymbols][Ge.Group]}return we}function tr(B){if(!B[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function en(B,ge){for(let z=ge;z>-1;z--)if(typeof B[z]<"u")return B[z];throw new Error("Locale data API: locale data undefined")}function pr(B){const[ge,z]=B.split(":");return{hours:+ge,minutes:+z}}const ci=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zr={},Wr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var si=(()=>((si=si||{})[si.Short=0]="Short",si[si.ShortGMT=1]="ShortGMT",si[si.Long=2]="Long",si[si.Extended=3]="Extended",si))(),nr=(()=>((nr=nr||{})[nr.FullYear=0]="FullYear",nr[nr.Month=1]="Month",nr[nr.Date=2]="Date",nr[nr.Hours=3]="Hours",nr[nr.Minutes=4]="Minutes",nr[nr.Seconds=5]="Seconds",nr[nr.FractionalSeconds=6]="FractionalSeconds",nr[nr.Day=7]="Day",nr))(),Zn=(()=>((Zn=Zn||{})[Zn.DayPeriods=0]="DayPeriods",Zn[Zn.Days=1]="Days",Zn[Zn.Months=2]="Months",Zn[Zn.Eras=3]="Eras",Zn))();function Yr(B,ge,z,we){let et=function Sn(B){if($r(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[et,Ot=1,Kt=1]=B.split("-").map(Bn=>+Bn);return vi(et,Ot-1,Kt)}const z=parseFloat(B);if(!isNaN(B-z))return new Date(z);let we;if(we=B.match(ci))return function An(B){const ge=new Date(0);let z=0,we=0;const et=B[8]?ge.setUTCFullYear:ge.setFullYear,Ot=B[8]?ge.setUTCHours:ge.setHours;B[9]&&(z=Number(B[9]+B[10]),we=Number(B[9]+B[11])),et.call(ge,Number(B[1]),Number(B[2])-1,Number(B[3]));const Kt=Number(B[4]||0)-z,Bn=Number(B[5]||0)-we,Cr=Number(B[6]||0),Ii=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return Ot.call(ge,Kt,Bn,Cr,Ii),ge}(we)}const ge=new Date(B);if(!$r(ge))throw new Error(`Unable to convert "${B}" into a date`);return ge}(B);ge=Qr(z,ge)||ge;let Bn,Kt=[];for(;ge;){if(Bn=Wr.exec(ge),!Bn){Kt.push(ge);break}{Kt=Kt.concat(Bn.slice(1));const Di=Kt.pop();if(!Di)break;ge=Di}}let Cr=et.getTimezoneOffset();we&&(Cr=ht(we,Cr),et=function bt(B,ge,z){const we=z?-1:1,et=B.getTimezoneOffset();return function qt(B,ge){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+ge),B}(B,we*(ht(ge,et)-et))}(et,we,!0));let Ii="";return Kt.forEach(Di=>{const fi=function rt(B){if(it[B])return it[B];let ge;switch(B){case"G":case"GG":case"GGG":ge=Mr(Zn.Eras,Fe.Abbreviated);break;case"GGGG":ge=Mr(Zn.Eras,Fe.Wide);break;case"GGGGG":ge=Mr(Zn.Eras,Fe.Narrow);break;case"y":ge=Un(nr.FullYear,1,0,!1,!0);break;case"yy":ge=Un(nr.FullYear,2,0,!0,!0);break;case"yyy":ge=Un(nr.FullYear,3,0,!1,!0);break;case"yyyy":ge=Un(nr.FullYear,4,0,!1,!0);break;case"Y":ge=Dn(1);break;case"YY":ge=Dn(2,!0);break;case"YYY":ge=Dn(3);break;case"YYYY":ge=Dn(4);break;case"M":case"L":ge=Un(nr.Month,1,1);break;case"MM":case"LL":ge=Un(nr.Month,2,1);break;case"MMM":ge=Mr(Zn.Months,Fe.Abbreviated);break;case"MMMM":ge=Mr(Zn.Months,Fe.Wide);break;case"MMMMM":ge=Mr(Zn.Months,Fe.Narrow);break;case"LLL":ge=Mr(Zn.Months,Fe.Abbreviated,fe.Standalone);break;case"LLLL":ge=Mr(Zn.Months,Fe.Wide,fe.Standalone);break;case"LLLLL":ge=Mr(Zn.Months,Fe.Narrow,fe.Standalone);break;case"w":ge=sr(1);break;case"ww":ge=sr(2);break;case"W":ge=sr(1,!0);break;case"d":ge=Un(nr.Date,1);break;case"dd":ge=Un(nr.Date,2);break;case"c":case"cc":ge=Un(nr.Day,1);break;case"ccc":ge=Mr(Zn.Days,Fe.Abbreviated,fe.Standalone);break;case"cccc":ge=Mr(Zn.Days,Fe.Wide,fe.Standalone);break;case"ccccc":ge=Mr(Zn.Days,Fe.Narrow,fe.Standalone);break;case"cccccc":ge=Mr(Zn.Days,Fe.Short,fe.Standalone);break;case"E":case"EE":case"EEE":ge=Mr(Zn.Days,Fe.Abbreviated);break;case"EEEE":ge=Mr(Zn.Days,Fe.Wide);break;case"EEEEE":ge=Mr(Zn.Days,Fe.Narrow);break;case"EEEEEE":ge=Mr(Zn.Days,Fe.Short);break;case"a":case"aa":case"aaa":ge=Mr(Zn.DayPeriods,Fe.Abbreviated);break;case"aaaa":ge=Mr(Zn.DayPeriods,Fe.Wide);break;case"aaaaa":ge=Mr(Zn.DayPeriods,Fe.Narrow);break;case"b":case"bb":case"bbb":ge=Mr(Zn.DayPeriods,Fe.Abbreviated,fe.Standalone,!0);break;case"bbbb":ge=Mr(Zn.DayPeriods,Fe.Wide,fe.Standalone,!0);break;case"bbbbb":ge=Mr(Zn.DayPeriods,Fe.Narrow,fe.Standalone,!0);break;case"B":case"BB":case"BBB":ge=Mr(Zn.DayPeriods,Fe.Abbreviated,fe.Format,!0);break;case"BBBB":ge=Mr(Zn.DayPeriods,Fe.Wide,fe.Format,!0);break;case"BBBBB":ge=Mr(Zn.DayPeriods,Fe.Narrow,fe.Format,!0);break;case"h":ge=Un(nr.Hours,1,-12);break;case"hh":ge=Un(nr.Hours,2,-12);break;case"H":ge=Un(nr.Hours,1);break;case"HH":ge=Un(nr.Hours,2);break;case"m":ge=Un(nr.Minutes,1);break;case"mm":ge=Un(nr.Minutes,2);break;case"s":ge=Un(nr.Seconds,1);break;case"ss":ge=Un(nr.Seconds,2);break;case"S":ge=Un(nr.FractionalSeconds,1);break;case"SS":ge=Un(nr.FractionalSeconds,2);break;case"SSS":ge=Un(nr.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ge=Qi(si.Short);break;case"ZZZZZ":ge=Qi(si.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ge=Qi(si.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ge=Qi(si.Long);break;default:return null}return it[B]=ge,ge}(Di);Ii+=fi?fi(et,z,Cr):"''"===Di?"'":Di.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Ii}function vi(B,ge,z){const we=new Date(0);return we.setFullYear(B,ge,z),we.setHours(0,0,0),we}function Qr(B,ge){const z=function St(B){return(0,E.cg1)(B)[E.wAp.LocaleId]}(B);if(Zr[z]=Zr[z]||{},Zr[z][ge])return Zr[z][ge];let we="";switch(ge){case"shortDate":we=rn(B,Me.Short);break;case"mediumDate":we=rn(B,Me.Medium);break;case"longDate":we=rn(B,Me.Long);break;case"fullDate":we=rn(B,Me.Full);break;case"shortTime":we=Bt(B,Me.Short);break;case"mediumTime":we=Bt(B,Me.Medium);break;case"longTime":we=Bt(B,Me.Long);break;case"fullTime":we=Bt(B,Me.Full);break;case"short":const et=Qr(B,"shortTime"),Ot=Qr(B,"shortDate");we=sn(_n(B,Me.Short),[et,Ot]);break;case"medium":const Kt=Qr(B,"mediumTime"),Bn=Qr(B,"mediumDate");we=sn(_n(B,Me.Medium),[Kt,Bn]);break;case"long":const Cr=Qr(B,"longTime"),Ii=Qr(B,"longDate");we=sn(_n(B,Me.Long),[Cr,Ii]);break;case"full":const Di=Qr(B,"fullTime"),fi=Qr(B,"fullDate");we=sn(_n(B,Me.Full),[Di,fi])}return we&&(Zr[z][ge]=we),we}function sn(B,ge){return ge&&(B=B.replace(/\{([^}]+)}/g,function(z,we){return null!=ge&&we in ge?ge[we]:z})),B}function or(B,ge,z="-",we,et){let Ot="";(B<0||et&&B<=0)&&(et?B=1-B:(B=-B,Ot=z));let Kt=String(B);for(;Kt.length<ge;)Kt="0"+Kt;return we&&(Kt=Kt.slice(Kt.length-ge)),Ot+Kt}function Un(B,ge,z=0,we=!1,et=!1){return function(Ot,Kt){let Bn=function ki(B,ge){switch(B){case nr.FullYear:return ge.getFullYear();case nr.Month:return ge.getMonth();case nr.Date:return ge.getDate();case nr.Hours:return ge.getHours();case nr.Minutes:return ge.getMinutes();case nr.Seconds:return ge.getSeconds();case nr.FractionalSeconds:return ge.getMilliseconds();case nr.Day:return ge.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,Ot);if((z>0||Bn>-z)&&(Bn+=z),B===nr.Hours)0===Bn&&-12===z&&(Bn=12);else if(B===nr.FractionalSeconds)return function rs(B,ge){return or(B,3).substring(0,ge)}(Bn,ge);const Cr=Jt(Kt,Ge.MinusSign);return or(Bn,ge,Cr,we,et)}}function Mr(B,ge,z=fe.Format,we=!1){return function(et,Ot){return function ri(B,ge,z,we,et,Ot){switch(z){case Zn.Months:return function kt(B,ge,z){const we=(0,E.cg1)(B),Ot=en([we[E.wAp.MonthsFormat],we[E.wAp.MonthsStandalone]],ge);return en(Ot,z)}(ge,et,we)[B.getMonth()];case Zn.Days:return function Pt(B,ge,z){const we=(0,E.cg1)(B),Ot=en([we[E.wAp.DaysFormat],we[E.wAp.DaysStandalone]],ge);return en(Ot,z)}(ge,et,we)[B.getDay()];case Zn.DayPeriods:const Kt=B.getHours(),Bn=B.getMinutes();if(Ot){const Ii=function Nr(B){const ge=(0,E.cg1)(B);return tr(ge),(ge[E.wAp.ExtraData][2]||[]).map(we=>"string"==typeof we?pr(we):[pr(we[0]),pr(we[1])])}(ge),Di=function ti(B,ge,z){const we=(0,E.cg1)(B);tr(we);const Ot=en([we[E.wAp.ExtraData][0],we[E.wAp.ExtraData][1]],ge)||[];return en(Ot,z)||[]}(ge,et,we),fi=Ii.findIndex(io=>{if(Array.isArray(io)){const[li,es]=io,Fa=Kt>=li.hours&&Bn>=li.minutes,mo=Kt<es.hours||Kt===es.hours&&Bn<es.minutes;if(li.hours<es.hours){if(Fa&&mo)return!0}else if(Fa||mo)return!0}else if(io.hours===Kt&&io.minutes===Bn)return!0;return!1});if(-1!==fi)return Di[fi]}return function Tt(B,ge,z){const we=(0,E.cg1)(B),Ot=en([we[E.wAp.DayPeriodsFormat],we[E.wAp.DayPeriodsStandalone]],ge);return en(Ot,z)}(ge,et,we)[Kt<12?0:1];case Zn.Eras:return function dt(B,ge){return en((0,E.cg1)(B)[E.wAp.Eras],ge)}(ge,we)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${z}`)}}(et,Ot,B,ge,z,we)}}function Qi(B){return function(ge,z,we){const et=-1*we,Ot=Jt(z,Ge.MinusSign),Kt=et>0?Math.floor(et/60):Math.ceil(et/60);switch(B){case si.Short:return(et>=0?"+":"")+or(Kt,2,Ot)+or(Math.abs(et%60),2,Ot);case si.ShortGMT:return"GMT"+(et>=0?"+":"")+or(Kt,1,Ot);case si.Long:return"GMT"+(et>=0?"+":"")+or(Kt,2,Ot)+":"+or(Math.abs(et%60),2,Ot);case si.Extended:return 0===we?"Z":(et>=0?"+":"")+or(Kt,2,Ot)+":"+or(Math.abs(et%60),2,Ot);default:throw new Error(`Unknown zone width "${B}"`)}}}function rr(B){return vi(B.getFullYear(),B.getMonth(),B.getDate()+(4-B.getDay()))}function sr(B,ge=!1){return function(z,we){let et;if(ge){const Ot=new Date(z.getFullYear(),z.getMonth(),1).getDay()-1,Kt=z.getDate();et=1+Math.floor((Kt+Ot)/7)}else{const Ot=rr(z),Kt=function Rn(B){const ge=vi(B,0,1).getDay();return vi(B,0,1+(ge<=4?4:11)-ge)}(Ot.getFullYear()),Bn=Ot.getTime()-Kt.getTime();et=1+Math.round(Bn/6048e5)}return or(et,B,Jt(we,Ge.MinusSign))}}function Dn(B,ge=!1){return function(z,we){return or(rr(z).getFullYear(),B,Jt(we,Ge.MinusSign),ge)}}const it={};function ht(B,ge){B=B.replace(/:/g,"");const z=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(z)?ge:z}function $r(B){return B instanceof Date&&!isNaN(B.valueOf())}const ai=/^(\d+)?\.((\d+)(-(\d+))?)?$/,K=".";function _i(B){const ge=parseInt(B);if(isNaN(ge))throw new Error("Invalid integer literal when parsing "+B);return ge}function Yo(B,ge){ge=encodeURIComponent(ge);for(const z of B.split(";")){const we=z.indexOf("="),[et,Ot]=-1==we?[z,""]:[z.slice(0,we),z.slice(we+1)];if(et.trim()===ge)return decodeURIComponent(Ot)}return null}let di=(()=>{class B{constructor(z,we,et,Ot){this._iterableDiffers=z,this._keyValueDiffers=we,this._ngEl=et,this._renderer=Ot,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(z){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof z?z.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(z){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof z?z.split(/\s+/):z,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const z=this._iterableDiffer.diff(this._rawClass);z&&this._applyIterableChanges(z)}else if(this._keyValueDiffer){const z=this._keyValueDiffer.diff(this._rawClass);z&&this._applyKeyValueChanges(z)}}_applyKeyValueChanges(z){z.forEachAddedItem(we=>this._toggleClass(we.key,we.currentValue)),z.forEachChangedItem(we=>this._toggleClass(we.key,we.currentValue)),z.forEachRemovedItem(we=>{we.previousValue&&this._toggleClass(we.key,!1)})}_applyIterableChanges(z){z.forEachAddedItem(we=>{if("string"!=typeof we.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(we.item)}`);this._toggleClass(we.item,!0)}),z.forEachRemovedItem(we=>this._toggleClass(we.item,!1))}_applyClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(we=>this._toggleClass(we,!0)):Object.keys(z).forEach(we=>this._toggleClass(we,!!z[we])))}_removeClasses(z){z&&(Array.isArray(z)||z instanceof Set?z.forEach(we=>this._toggleClass(we,!1)):Object.keys(z).forEach(we=>this._toggleClass(we,!1)))}_toggleClass(z,we){(z=z.trim())&&z.split(/\s+/g).forEach(et=>{we?this._renderer.addClass(this._ngEl.nativeElement,et):this._renderer.removeClass(this._ngEl.nativeElement,et)})}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),B})();class co{constructor(ge,z,we,et){this.$implicit=ge,this.ngForOf=z,this.index=we,this.count=et}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Us=(()=>{class B{constructor(z,we,et){this._viewContainer=z,this._template=we,this._differs=et,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(z){this._ngForOf=z,this._ngForOfDirty=!0}set ngForTrackBy(z){this._trackByFn=z}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(z){z&&(this._template=z)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const z=this._ngForOf;!this._differ&&z&&(this._differ=this._differs.find(z).create(this.ngForTrackBy))}if(this._differ){const z=this._differ.diff(this._ngForOf);z&&this._applyChanges(z)}}_applyChanges(z){const we=this._viewContainer;z.forEachOperation((et,Ot,Kt)=>{if(null==et.previousIndex)we.createEmbeddedView(this._template,new co(et.item,this._ngForOf,-1,-1),null===Kt?void 0:Kt);else if(null==Kt)we.remove(null===Ot?void 0:Ot);else if(null!==Ot){const Bn=we.get(Ot);we.move(Bn,Kt),Ws(Bn,et)}});for(let et=0,Ot=we.length;et<Ot;et++){const Bn=we.get(et).context;Bn.index=et,Bn.count=Ot,Bn.ngForOf=this._ngForOf}z.forEachIdentityChange(et=>{Ws(we.get(et.currentIndex),et)})}static ngTemplateContextGuard(z,we){return!0}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),B})();function Ws(B,ge){B.context.$implicit=ge.item}let Si=(()=>{class B{constructor(z,we){this._viewContainer=z,this._context=new Bo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=we}set ngIf(z){this._context.$implicit=this._context.ngIf=z,this._updateView()}set ngIfThen(z){qr("ngIfThen",z),this._thenTemplateRef=z,this._thenViewRef=null,this._updateView()}set ngIfElse(z){qr("ngIfElse",z),this._elseTemplateRef=z,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(z,we){return!0}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.s_b),E.Y36(E.Rgc))},B.\u0275dir=E.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),B})();class Bo{constructor(){this.$implicit=null,this.ngIf=null}}function qr(B,ge){if(ge&&!ge.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,E.AaK)(ge)}'.`)}function hi(B,ge){return new E.vHH(2100,!1)}class wt{createSubscription(ge,z){return ge.subscribe({next:z,error:we=>{throw we}})}dispose(ge){ge.unsubscribe()}}class ft{createSubscription(ge,z){return ge.then(z,we=>{throw we})}dispose(ge){}}const Mt=new ft,an=new wt;let wn=(()=>{class B{constructor(z){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=z}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(z){return this._obj?z!==this._obj?(this._dispose(),this.transform(z)):this._latestValue:(z&&this._subscribe(z),this._latestValue)}_subscribe(z){this._obj=z,this._strategy=this._selectStrategy(z),this._subscription=this._strategy.createSubscription(z,we=>this._updateLatestValue(z,we))}_selectStrategy(z){if((0,E.QGY)(z))return Mt;if((0,E.F4k)(z))return an;throw hi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(z,we){z===this._obj&&(this._latestValue=we,this._ref.markForCheck())}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.sBO,16))},B.\u0275pipe=E.Yjl({name:"async",type:B,pure:!1,standalone:!0}),B})();const Rs=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Wi=(()=>{class B{constructor(z,we){this.locale=z,this.defaultTimezone=we}transform(z,we="mediumDate",et,Ot){if(null==z||""===z||z!=z)return null;try{return Yr(z,we,Ot||this.locale,et??this.defaultTimezone??void 0)}catch(Kt){throw hi()}}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.soG,16),E.Y36(Rs,24))},B.\u0275pipe=E.Yjl({name:"date",type:B,pure:!0,standalone:!0}),B})(),fo=(()=>{class B{constructor(z){this._locale=z}transform(z,we,et){if(!function Na(B){return!(null==B||""===B||B!=B)}(z))return null;et=et||this._locale;try{return function yi(B,ge,z){return function Kn(B,ge,z,we,et,Ot,Kt=!1){let Bn="",Cr=!1;if(isFinite(B)){let Ii=function Mi(B){let we,et,Ot,Kt,Bn,ge=Math.abs(B)+"",z=0;for((et=ge.indexOf(K))>-1&&(ge=ge.replace(K,"")),(Ot=ge.search(/e/i))>0?(et<0&&(et=Ot),et+=+ge.slice(Ot+1),ge=ge.substring(0,Ot)):et<0&&(et=ge.length),Ot=0;"0"===ge.charAt(Ot);Ot++);if(Ot===(Bn=ge.length))we=[0],et=1;else{for(Bn--;"0"===ge.charAt(Bn);)Bn--;for(et-=Ot,we=[],Kt=0;Ot<=Bn;Ot++,Kt++)we[Kt]=Number(ge.charAt(Ot))}return et>22&&(we=we.splice(0,21),z=et-1,et=1),{digits:we,exponent:z,integerLen:et}}(B);Kt&&(Ii=function Xi(B){if(0===B.digits[0])return B;const ge=B.digits.length-B.integerLen;return B.exponent?B.exponent+=2:(0===ge?B.digits.push(0,0):1===ge&&B.digits.push(0),B.integerLen+=2),B}(Ii));let Di=ge.minInt,fi=ge.minFrac,io=ge.maxFrac;if(Ot){const wo=Ot.match(ai);if(null===wo)throw new Error(`${Ot} is not a valid digit info`);const ma=wo[1],Ho=wo[3],na=wo[5];null!=ma&&(Di=_i(ma)),null!=Ho&&(fi=_i(Ho)),null!=na?io=_i(na):null!=Ho&&fi>io&&(io=fi)}!function Ni(B,ge,z){if(ge>z)throw new Error(`The minimum number of digits after fraction (${ge}) is higher than the maximum (${z}).`);let we=B.digits,et=we.length-B.integerLen;const Ot=Math.min(Math.max(ge,et),z);let Kt=Ot+B.integerLen,Bn=we[Kt];if(Kt>0){we.splice(Math.max(B.integerLen,Kt));for(let fi=Kt;fi<we.length;fi++)we[fi]=0}else{et=Math.max(0,et),B.integerLen=1,we.length=Math.max(1,Kt=Ot+1),we[0]=0;for(let fi=1;fi<Kt;fi++)we[fi]=0}if(Bn>=5)if(Kt-1<0){for(let fi=0;fi>Kt;fi--)we.unshift(0),B.integerLen++;we.unshift(1),B.integerLen++}else we[Kt-1]++;for(;et<Math.max(0,Ot);et++)we.push(0);let Cr=0!==Ot;const Ii=ge+B.integerLen,Di=we.reduceRight(function(fi,io,li,es){return es[li]=(io+=fi)<10?io:io-10,Cr&&(0===es[li]&&li>=Ii?es.pop():Cr=!1),io>=10?1:0},0);Di&&(we.unshift(Di),B.integerLen++)}(Ii,fi,io);let li=Ii.digits,es=Ii.integerLen;const Fa=Ii.exponent;let mo=[];for(Cr=li.every(wo=>!wo);es<Di;es++)li.unshift(0);for(;es<0;es++)li.unshift(0);es>0?mo=li.splice(es,li.length):(mo=li,li=[0]);const Ro=[];for(li.length>=ge.lgSize&&Ro.unshift(li.splice(-ge.lgSize,li.length).join(""));li.length>ge.gSize;)Ro.unshift(li.splice(-ge.gSize,li.length).join(""));li.length&&Ro.unshift(li.join("")),Bn=Ro.join(Jt(z,we)),mo.length&&(Bn+=Jt(z,et)+mo.join("")),Fa&&(Bn+=Jt(z,Ge.Exponential)+"+"+Fa)}else Bn=Jt(z,Ge.Infinity);return Bn=B<0&&!Cr?ge.negPre+Bn+ge.negSuf:ge.posPre+Bn+ge.posSuf,Bn}(B,function zr(B,ge="-"){const z={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},we=B.split(";"),et=we[0],Ot=we[1],Kt=-1!==et.indexOf(K)?et.split(K):[et.substring(0,et.lastIndexOf("0")+1),et.substring(et.lastIndexOf("0")+1)],Bn=Kt[0],Cr=Kt[1]||"";z.posPre=Bn.substring(0,Bn.indexOf("#"));for(let Di=0;Di<Cr.length;Di++){const fi=Cr.charAt(Di);"0"===fi?z.minFrac=z.maxFrac=Di+1:"#"===fi?z.maxFrac=Di+1:z.posSuf+=fi}const Ii=Bn.split(",");if(z.gSize=Ii[1]?Ii[1].length:0,z.lgSize=Ii[2]||Ii[1]?(Ii[2]||Ii[1]).length:0,Ot){const Di=et.length-z.posPre.length-z.posSuf.length,fi=Ot.indexOf("#");z.negPre=Ot.substring(0,fi).replace(/'/g,""),z.negSuf=Ot.slice(fi+Di).replace(/'/g,"")}else z.negPre=ge+z.posPre,z.negSuf=z.posSuf;return z}(function qn(B,ge){return(0,E.cg1)(B)[E.wAp.NumberFormats][ge]}(ge,H.Percent),Jt(ge,Ge.MinusSign)),ge,Ge.Group,Ge.Decimal,z,!0).replace(new RegExp("%","g"),Jt(ge,Ge.PercentSign))}(function Bs(B){if("string"==typeof B&&!isNaN(Number(B)-parseFloat(B)))return Number(B);if("number"!=typeof B)throw new Error(`${B} is not a number`);return B}(z),et,we)}catch(Ot){throw hi()}}}return B.\u0275fac=function(z){return new(z||B)(E.Y36(E.soG,16))},B.\u0275pipe=E.Yjl({name:"percent",type:B,pure:!0,standalone:!0}),B})();let po=(()=>{class B{}return B.\u0275fac=function(z){return new(z||B)},B.\u0275mod=E.oAB({type:B}),B.\u0275inj=E.cJS({}),B})();const qs="browser";function ms(B){return"server"===B}let La=(()=>{class B{}return B.\u0275prov=(0,E.Yz7)({token:B,providedIn:"root",factory:()=>new Sa((0,E.LFG)(se),window)}),B})();class Sa{constructor(ge,z){this.document=ge,this.window=z,this.offset=()=>[0,0]}setOffset(ge){this.offset=Array.isArray(ge)?()=>ge:ge}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ge){this.supportsScrolling()&&this.window.scrollTo(ge[0],ge[1])}scrollToAnchor(ge){if(!this.supportsScrolling())return;const z=function ui(B,ge){const z=B.getElementById(ge)||B.getElementsByName(ge)[0];if(z)return z;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const we=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let et=we.currentNode;for(;et;){const Ot=et.shadowRoot;if(Ot){const Kt=Ot.getElementById(ge)||Ot.querySelector(`[name="${ge}"]`);if(Kt)return Kt}et=we.nextNode()}}return null}(this.document,ge);z&&(this.scrollToElement(z),z.focus())}setHistoryScrollRestoration(ge){if(this.supportScrollRestoration()){const z=this.window.history;z&&z.scrollRestoration&&(z.scrollRestoration=ge)}}scrollToElement(ge){const z=ge.getBoundingClientRect(),we=z.left+this.window.pageXOffset,et=z.top+this.window.pageYOffset,Ot=this.offset();this.window.scrollTo(we-Ot[0],et-Ot[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ge=Vs(this.window.history)||Vs(Object.getPrototypeOf(this.window.history));return!(!ge||!ge.writable&&!ge.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Vs(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Mo{}},4650:(Yt,at,W)=>{"use strict";W.d(at,{$8M:()=>gu,$Z:()=>Sg,AFp:()=>fT,ALo:()=>Ob,AaK:()=>Ke,AsE:()=>wv,BQk:()=>un,CHM:()=>ea,CRH:()=>$b,CZH:()=>_0,CqO:()=>Yn,D6c:()=>OS,DdM:()=>Cb,EJc:()=>KE,EiD:()=>dd,EpF:()=>In,F$t:()=>Rd,F4k:()=>kr,FYo:()=>de,FiY:()=>Wn,G48:()=>gS,Gf:()=>Vb,GfV:()=>On,Gpc:()=>Re,Hsn:()=>xu,JOm:()=>Nl,JVY:()=>Of,KtG:()=>ta,L6k:()=>Zu,LAX:()=>Up,LFG:()=>$i,LSH:()=>yo,Lbi:()=>WE,Lck:()=>bl,MAs:()=>je,MMx:()=>Qy,NdJ:()=>Hr,O4$:()=>Bn,OlP:()=>Li,Oqu:()=>Tf,PXZ:()=>lS,Q6J:()=>Ve,QGY:()=>mn,QP$:()=>$r,Qsj:()=>De,R0b:()=>Vd,RDi:()=>Oh,Rgc:()=>W_,SBq:()=>y,Sil:()=>YE,Suo:()=>Hb,TTD:()=>fo,TgZ:()=>yn,VKq:()=>xb,W1O:()=>qb,WLB:()=>Ib,X6Q:()=>pS,XFs:()=>en,Xpm:()=>Qt,Xts:()=>Nu,Y36:()=>ff,YKP:()=>za,YNc:()=>Y,Yjl:()=>qt,Yz7:()=>Bt,Z0I:()=>Qn,ZZ4:()=>ob,_Bn:()=>Nn,_UZ:()=>Xt,_Vd:()=>sh,_c5:()=>MS,_uU:()=>Uy,aQg:()=>ab,c2e:()=>zE,cJS:()=>Jt,cg1:()=>Pv,dDg:()=>sS,dqk:()=>Yr,eBb:()=>Rf,eFA:()=>xT,ekj:()=>Ev,eoX:()=>ST,f3M:()=>G,g9A:()=>gT,h0i:()=>Ur,hGG:()=>PS,hij:()=>wh,iGM:()=>Bb,ifc:()=>Zn,ip1:()=>hT,jDz:()=>V_,kL8:()=>Mp,kcU:()=>Ii,lG2:()=>ht,lcZ:()=>Rb,lqb:()=>sa,lri:()=>TT,mCW:()=>kl,n5z:()=>Gu,oAB:()=>Dn,oxw:()=>Ma,pB0:()=>Lh,q3G:()=>Ms,q4F:()=>lr,qLn:()=>Qu,qOj:()=>pp,qZA:()=>Vn,qzn:()=>_c,rWj:()=>ET,sBO:()=>mS,sIi:()=>vp,s_b:()=>m0,soG:()=>b0,tb:()=>mT,tp0:()=>Pr,uIk:()=>Jg,vHH:()=>$e,vpe:()=>kf,wAp:()=>jr,xp6:()=>jm,ynx:()=>Cn,z2F:()=>T0,z3N:()=>_u,zSh:()=>Sc,zs3:()=>Qc});var E=W(7579),k=W(727),ee=W(9751),Ue=W(6451),Pe=W(3099);function Le(r){for(let i in r)if(r[i]===Le)return i;throw Error("Could not find renamed property on target object.")}function se(r,i){for(const c in i)i.hasOwnProperty(c)&&!r.hasOwnProperty(c)&&(r[c]=i[c])}function Ke(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ke).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const c=i.indexOf("\n");return-1===c?i:i.substring(0,c)}function Ae(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const Ie=Le({__forward_ref__:Le});function Re(r){return r.__forward_ref__=Re,r.toString=function(){return Ke(this())},r}function Se(r){return ut(r)?r():r}function ut(r){return"function"==typeof r&&r.hasOwnProperty(Ie)&&r.__forward_ref__===Re}class $e extends Error{constructor(i,c){super(function jt(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,c)),this.code=i}}function Be(r){return"string"==typeof r?r:null==r?"":String(r)}function xe(r,i){throw new $e(-201,!1)}function kt(r,i){null==r&&function dt(r,i,c,f){throw new Error(`ASSERTION ERROR: ${r}`+(null==f?"":` [Expected=> ${c} ${f} ${i} <=Actual]`))}(i,r,null,"!=")}function Bt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Jt(r){return{providers:r.providers||[],imports:r.imports||[]}}function qn(r){return wr(r,tr)||wr(r,ti)}function Qn(r){return null!==qn(r)}function wr(r,i){return r.hasOwnProperty(i)?r[i]:null}function cr(r){return r&&(r.hasOwnProperty(Nr)||r.hasOwnProperty(yr))?r[Nr]:null}const tr=Le({\u0275prov:Le}),Nr=Le({\u0275inj:Le}),ti=Le({ngInjectableDef:Le}),yr=Le({ngInjectorDef:Le});var en=(()=>((en=en||{})[en.Default=0]="Default",en[en.Host=1]="Host",en[en.Self=2]="Self",en[en.SkipSelf=4]="SkipSelf",en[en.Optional=8]="Optional",en))();let pr;function ni(r){const i=pr;return pr=r,i}function _r(r,i,c){const f=qn(r);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:c&en.Optional?null:void 0!==i?i:void xe(Ke(r))}function Zr(r){return{toString:r}.toString()}var Wr=(()=>((Wr=Wr||{})[Wr.OnPush=0]="OnPush",Wr[Wr.Default=1]="Default",Wr))(),Zn=(()=>{return(r=Zn||(Zn={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Zn;var r})();const Yr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),sn={},or=[],rs=Le({\u0275cmp:Le}),Un=Le({\u0275dir:Le}),ki=Le({\u0275pipe:Le}),Mr=Le({\u0275mod:Le}),ri=Le({\u0275fac:Le}),Qi=Le({__NG_ELEMENT_ID__:Le});let Mn=0;function Qt(r){return Zr(()=>{const c=!0===r.standalone,f={},m={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Wr.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||or,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Zn.Emulated,id:"c"+Mn++,styles:r.styles||or,_:null,setInput:null,schemas:r.schemas||null,tView:null},b=r.dependencies,I=r.features;return m.inputs=rt(r.inputs,f),m.outputs=rt(r.outputs),I&&I.forEach(R=>R(m)),m.directiveDefs=b?()=>("function"==typeof b?b():b).map(rr).filter(sr):null,m.pipeDefs=b?()=>("function"==typeof b?b():b).map(An).filter(sr):null,m})}function rr(r){return bt(r)||Sn(r)}function sr(r){return null!==r}function Dn(r){return Zr(()=>({type:r.type,bootstrap:r.bootstrap||or,declarations:r.declarations||or,imports:r.imports||or,exports:r.exports||or,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function rt(r,i){if(null==r)return sn;const c={};for(const f in r)if(r.hasOwnProperty(f)){let m=r[f],b=m;Array.isArray(m)&&(b=m[1],m=m[0]),c[m]=f,i&&(i[m]=b)}return c}const ht=Qt;function qt(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function bt(r){return r[rs]||null}function Sn(r){return r[Un]||null}function An(r){return r[ki]||null}function $r(r){const i=bt(r)||Sn(r)||An(r);return null!==i&&i.standalone}function ai(r,i){const c=r[Mr]||null;if(!c&&!0===i)throw new Error(`Type ${Ke(r)} does not have '\u0275mod' property.`);return c}function qr(r){return Array.isArray(r)&&"object"==typeof r[1]}function bs(r){return Array.isArray(r)&&!0===r[1]}function Ao(r){return 0!=(8&r.flags)}function ko(r){return 2==(2&r.flags)}function Pa(r){return 1==(1&r.flags)}function ns(r){return null!==r.template}function lu(r){return 0!=(256&r[2])}function to(r,i){return r.hasOwnProperty(ri)?r[ri]:null}class ho{constructor(i,c,f){this.previousValue=i,this.currentValue=c,this.firstChange=f}isFirstChange(){return this.firstChange}}function fo(){return To}function To(r){return r.type.prototype.ngOnChanges&&(r.setInput=Bs),Na}function Na(){const r=Za(this),i=r?.current;if(i){const c=r.previous;if(c===sn)r.previous=i;else for(let f in i)c[f]=i[f];r.current=null,this.ngOnChanges(i)}}function Bs(r,i,c,f){const m=Za(r)||function po(r,i){return r[Ka]=i}(r,{previous:sn,current:null}),b=m.current||(m.current={}),I=m.previous,R=this.declaredInputs[c],$=I[R];b[R]=new ho($&&$.currentValue,i,I===sn),r[f]=i}fo.ngInherit=!0;const Ka="__ngSimpleChanges__";function Za(r){return r[Ka]||null}function xi(r){for(;Array.isArray(r);)r=r[0];return r}function Vs(r,i){return xi(i[r])}function ui(r,i){return xi(i[r.index])}function Mo(r,i){return r.data[i]}function Ji(r,i){return r[i]}function Br(r,i){const c=i[r];return qr(c)?c:c[0]}function Po(r){return 64==(64&r[2])}function no(r,i){return null==i?null:r[i]}function is(r){r[18]=0}function fr(r,i){r[5]+=i;let c=r,f=r[3];for(;null!==f&&(1===i&&1===c[5]||-1===i&&0===c[5]);)f[5]+=i,c=f,f=f[3]}const ur={lFrame:Dr(null),bindingsEnabled:!0};function Ti(){return ur.bindingsEnabled}function hn(){return ur.lFrame.lView}function Jr(){return ur.lFrame.tView}function ea(r){return ur.lFrame.contextLView=r,r[8]}function ta(r){return ur.lFrame.contextLView=null,r}function ds(){let r=ie();for(;null!==r&&64===r.type;)r=r.parent;return r}function ie(){return ur.lFrame.currentTNode}function q(r,i){const c=ur.lFrame;c.currentTNode=r,c.isParent=i}function ke(){return ur.lFrame.isParent}function Ut(){ur.lFrame.isParent=!1}function ot(){const r=ur.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function Hn(){return ur.lFrame.bindingIndex++}function Tn(r){const i=ur.lFrame,c=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,c}function Is(r,i){const c=ur.lFrame;c.bindingIndex=c.bindingRootIndex=r,Oi(i)}function Oi(r){ur.lFrame.currentDirectiveIndex=r}function Ns(){return ur.lFrame.currentQueryIndex}function wi(r){ur.lFrame.currentQueryIndex=r}function ro(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function mi(r,i,c){if(c&en.SkipSelf){let m=i,b=r;for(;!(m=m.parent,null!==m||c&en.Host||(m=ro(b),null===m||(b=b[15],10&m.type))););if(null===m)return!1;i=m,r=b}const f=ur.lFrame=Ts();return f.currentTNode=i,f.lView=r,!0}function hs(r){const i=Ts(),c=r[1];ur.lFrame=i,i.currentTNode=c.firstChild,i.lView=r,i.tView=c,i.contextLView=r,i.bindingIndex=c.bindingStartIndex,i.inI18n=!1}function Ts(){const r=ur.lFrame,i=null===r?null:r.child;return null===i?Dr(r):i}function Dr(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Oo(){const r=ur.lFrame;return ur.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const B=Oo;function ge(){const r=Oo();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function et(){return ur.lFrame.selectedIndex}function Ot(r){ur.lFrame.selectedIndex=r}function Kt(){const r=ur.lFrame;return Mo(r.tView,r.selectedIndex)}function Bn(){ur.lFrame.currentNamespace="svg"}function Ii(){!function Di(){ur.lFrame.currentNamespace=null}()}function li(r,i){for(let c=i.directiveStart,f=i.directiveEnd;c<f;c++){const b=r.data[c].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:R,ngAfterViewInit:$,ngAfterViewChecked:ce,ngOnDestroy:Ce}=b;I&&(r.contentHooks||(r.contentHooks=[])).push(-c,I),R&&((r.contentHooks||(r.contentHooks=[])).push(c,R),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(c,R)),$&&(r.viewHooks||(r.viewHooks=[])).push(-c,$),ce&&((r.viewHooks||(r.viewHooks=[])).push(c,ce),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(c,ce)),null!=Ce&&(r.destroyHooks||(r.destroyHooks=[])).push(c,Ce)}}function es(r,i,c){Ro(r,i,3,c)}function Fa(r,i,c,f){(3&r[2])===c&&Ro(r,i,c,f)}function mo(r,i){let c=r[2];(3&c)===i&&(c&=2047,c+=1,r[2]=c)}function Ro(r,i,c,f){const b=f??-1,I=i.length-1;let R=0;for(let $=void 0!==f?65535&r[18]:0;$<I;$++)if("number"==typeof i[$+1]){if(R=i[$],null!=f&&R>=f)break}else i[$]<0&&(r[18]+=65536),(R<b||-1==b)&&(wo(r,c,i,$),r[18]=(4294901760&r[18])+$+2),$++}function wo(r,i,c,f){const m=c[f]<0,b=c[f+1],R=r[m?-c[f]:c[f]];if(m){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{b.call(R)}finally{}}}else try{b.call(R)}finally{}}class Ho{constructor(i,c,f){this.factory=i,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=f}}function Hl(r,i,c){let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const b=c[f++],I=c[f++],R=c[f++];r.setAttribute(i,I,R,b)}else{const b=m,I=c[++f];fc(b)?r.setProperty(i,b,I):r.setAttribute(i,b,I),f++}}return f}function Hu(r){return 3===r||4===r||6===r}function fc(r){return 64===r.charCodeAt(0)}function Mu(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let c=-1;for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?c=m:0===c||du(r,c,m,null,-1===c||2===c?i[++f]:null)}}return r}function du(r,i,c,f,m){let b=0,I=r.length;if(-1===i)I=-1;else for(;b<r.length;){const R=r[b++];if("number"==typeof R){if(R===i){I=-1;break}if(R>i){I=b-1;break}}}for(;b<r.length;){const R=r[b];if("number"==typeof R)break;if(R===c){if(null===f)return void(null!==m&&(r[b+1]=m));if(f===r[b+1])return void(r[b+2]=m)}b++,null!==f&&b++,null!==m&&b++}-1!==I&&(r.splice(I,0,i),b=I+1),r.splice(b++,0,c),null!==f&&r.splice(b++,0,f),null!==m&&r.splice(b++,0,m)}function Uc(r){return-1!==r}function so(r){return 32767&r}function No(r,i){let c=function gr(r){return r>>16}(r),f=i;for(;c>0;)f=f[15],c--;return f}let oo=!0;function ja(r){const i=oo;return oo=r,i}let vs=0;const Ss={};function dr(r,i){const c=$n(r,i);if(-1!==c)return c;const f=i[1];f.firstCreatePass&&(r.injectorIndex=i.length,hu(f.data,r),hu(i,null),hu(f.blueprint,null));const m=Gt(r,i),b=r.injectorIndex;if(Uc(m)){const I=so(m),R=No(m,i),$=R[1].data;for(let ce=0;ce<8;ce++)i[b+ce]=R[I+ce]|$[I+ce]}return i[b+8]=m,b}function hu(r,i){r.push(0,0,0,0,0,0,0,0,i)}function $n(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function Gt(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let c=0,f=null,m=i;for(;null!==m;){if(f=Er(m),null===f)return-1;if(c++,m=m[15],-1!==f.injectorIndex)return f.injectorIndex|c<<16}return-1}function ln(r,i,c){!function Jn(r,i,c){let f;"string"==typeof c?f=c.charCodeAt(0)||0:c.hasOwnProperty(Qi)&&(f=c[Qi]),null==f&&(f=c[Qi]=vs++);const m=255&f;i.data[r+(m>>5)]|=1<<m}(r,i,c)}function Qa(r,i,c){if(c&en.Optional||void 0!==r)return r;xe()}function pc(r,i,c,f){if(c&en.Optional&&void 0===f&&(f=null),0==(c&(en.Self|en.Host))){const m=r[9],b=ni(void 0);try{return m?m.get(i,f,c&en.Optional):_r(i,f,c&en.Optional)}finally{ni(b)}}return Qa(f,0,c)}function fu(r,i,c,f=en.Default,m){if(null!==r){if(1024&i[2]){const I=function ts(r,i,c,f,m){let b=r,I=i;for(;null!==b&&null!==I&&1024&I[2]&&!(256&I[2]);){const R=El(b,I,c,f|en.Self,Ss);if(R!==Ss)return R;let $=b.parent;if(!$){const ce=I[21];if(ce){const Ce=ce.get(c,Ss,f);if(Ce!==Ss)return Ce}$=Er(I),I=I[15]}b=$}return m}(r,i,c,f,Ss);if(I!==Ss)return I}const b=El(r,i,c,f,Ss);if(b!==Ss)return b}return pc(i,c,f,m)}function El(r,i,c,f,m){const b=function Xa(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Qi)?r[Qi]:void 0;return"number"==typeof i?i>=0?255&i:Lr:i}(c);if("function"==typeof b){if(!mi(i,r,f))return f&en.Host?Qa(m,0,f):pc(i,c,f,m);try{const I=b(f);if(null!=I||f&en.Optional)return I;xe()}finally{B()}}else if("number"==typeof b){let I=null,R=$n(r,i),$=-1,ce=f&en.Host?i[16][6]:null;for((-1===R||f&en.SkipSelf)&&($=-1===R?Gt(r,i):i[R+8],-1!==$&&pu(f,!1)?(I=i[1],R=so($),i=No($,i)):R=-1);-1!==R;){const Ce=i[1];if(wl(b,R,Ce.data)){const Ye=Sl(R,i,c,I,f,ce);if(Ye!==Ss)return Ye}$=i[R+8],-1!==$&&pu(f,i[1].data[R+8]===ce)&&wl(b,R,i)?(I=Ce,R=so($),i=No($,i)):R=-1}}return m}function Sl(r,i,c,f,m,b){const I=i[1],R=I.data[r+8],Ce=Ds(R,I,c,null==f?ko(R)&&oo:f!=I&&0!=(3&R.type),m&en.Host&&b===R);return null!==Ce?Ca(i,I,Ce,R):Ss}function Ds(r,i,c,f,m){const b=r.providerIndexes,I=i.data,R=1048575&b,$=r.directiveStart,Ce=b>>20,vt=m?R+Ce:r.directiveEnd;for(let Ft=f?R:R+Ce;Ft<vt;Ft++){const pn=I[Ft];if(Ft<$&&c===pn||Ft>=$&&pn.type===c)return Ft}if(m){const Ft=I[$];if(Ft&&ns(Ft)&&Ft.type===c)return $}return null}function Ca(r,i,c,f){let m=r[c];const b=i.data;if(function na(r){return r instanceof Ho}(m)){const I=m;I.resolving&&function yt(r,i){const c=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new $e(-200,`Circular dependency in DI detected for ${r}${c}`)}(function ze(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Be(r)}(b[c]));const R=ja(I.canSeeViewProviders);I.resolving=!0;const $=I.injectImpl?ni(I.injectImpl):null;mi(r,f,en.Default);try{m=r[c]=I.factory(void 0,b,r,f),i.firstCreatePass&&c>=f.directiveStart&&function io(r,i,c){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:b}=i.type.prototype;if(f){const I=To(i);(c.preOrderHooks||(c.preOrderHooks=[])).push(r,I),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(r,I)}m&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-r,m),b&&((c.preOrderHooks||(c.preOrderHooks=[])).push(r,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(r,b))}(c,b[c],i)}finally{null!==$&&ni($),ja(R),I.resolving=!1,B()}}return m}function wl(r,i,c){return!!(c[i+(r>>5)]&1<<r)}function pu(r,i){return!(r&en.Self||r&en.Host&&i)}class Ja{constructor(i,c){this._tNode=i,this._lView=c}get(i,c,f){return fu(this._tNode,this._lView,i,f,c)}}function Lr(){return new Ja(ds(),hn())}function Gu(r){return Zr(()=>{const i=r.prototype.constructor,c=i[ri]||Cl(i),f=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==f;){const b=m[ri]||Cl(m);if(b&&b!==c)return b;m=Object.getPrototypeOf(m)}return b=>new b})}function Cl(r){return ut(r)?()=>{const i=Cl(Se(r));return i&&i()}:to(r)}function Er(r){const i=r[1],c=i.type;return 2===c?i.declTNode:1===c?r[6]:null}function gu(r){return function Ls(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const c=r.attrs;if(c){const f=c.length;let m=0;for(;m<f;){const b=c[m];if(Hu(b))break;if(0===b)m+=2;else if("number"==typeof b)for(m++;m<f&&"string"==typeof c[m];)m++;else{if(b===i)return c[m+1];m+=2}}}return null}(ds(),r)}const Ua="__parameters__";function Ba(r,i,c){return Zr(()=>{const f=function ps(r){return function(...c){if(r){const f=r(...c);for(const m in f)this[m]=f[m]}}}(i);function m(...b){if(this instanceof m)return f.apply(this,b),this;const I=new m(...b);return R.annotation=I,R;function R($,ce,Ce){const Ye=$.hasOwnProperty(Ua)?$[Ua]:Object.defineProperty($,Ua,{value:[]})[Ua];for(;Ye.length<=Ce;)Ye.push(null);return(Ye[Ce]=Ye[Ce]||[]).push(I),$}}return c&&(m.prototype=Object.create(c.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}class Li{constructor(i,c){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Bt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ss(r,i){void 0===i&&(i=r);for(let c=0;c<r.length;c++){let f=r[c];Array.isArray(f)?(i===r&&(i=r.slice(0,c)),ss(f,i)):i!==r&&i.push(f)}return i}function tu(r,i){r.forEach(c=>Array.isArray(c)?tu(c,i):i(c))}function vu(r,i,c){i>=r.length?r.push(c):r.splice(i,0,c)}function nu(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function ru(r,i){const c=[];for(let f=0;f<r;f++)c.push(i);return c}function _e(r,i,c){let f=Qe(r,i);return f>=0?r[1|f]=c:(f=~f,function O(r,i,c,f){let m=r.length;if(m==i)r.push(c,f);else if(1===m)r.push(f,r[0]),r[0]=c;else{for(m--,r.push(r[m-1],r[m]);m>i;)r[m]=r[m-2],m--;r[i]=c,r[i+1]=f}}(r,f,i,c)),f}function Xe(r,i){const c=Qe(r,i);if(c>=0)return r[1|c]}function Qe(r,i){return function bn(r,i,c){let f=0,m=r.length>>c;for(;m!==f;){const b=f+(m-f>>1),I=r[b<<c];if(i===I)return b<<c;I>i?m=b:f=b+1}return~(m<<c)}(r,i,1)}const Va={},vo="__NG_DI_FLAG__",cl="ngTempTokenPath",ya=/\n/gm,Hd="__source";let iu;function yu(r){const i=iu;return iu=r,i}function zu(r,i=en.Default){if(void 0===iu)throw new $e(-203,!1);return null===iu?_r(r,void 0,i):iu.get(r,i&en.Optional?null:void 0,i)}function $i(r,i=en.Default){return(function Or(){return pr}()||zu)(Se(r),i)}function G(r,i=en.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),$i(r,i)}function te(r){const i=[];for(let c=0;c<r.length;c++){const f=Se(r[c]);if(Array.isArray(f)){if(0===f.length)throw new $e(900,!1);let m,b=en.Default;for(let I=0;I<f.length;I++){const R=f[I],$=tt(R);"number"==typeof $?-1===$?m=R.token:b|=$:m=R}i.push($i(m,b))}else i.push($i(f))}return i}function be(r,i){return r[vo]=i,r.prototype[vo]=i,r}function tt(r){return r[vo]}const Wn=be(Ba("Optional"),8),Pr=be(Ba("SkipSelf"),4);let Wd,Ou;function Oh(r){Wd=r}function od(r){return function vc(){if(void 0===Ou&&(Ou=null,Yr.trustedTypes))try{Ou=Yr.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return Ou}()?.createHTML(r)||r}class hl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ku extends hl{getTypeName(){return"HTML"}}class Da extends hl{getTypeName(){return"Style"}}class Vc extends hl{getTypeName(){return"Script"}}class ud extends hl{getTypeName(){return"URL"}}class jp extends hl{getTypeName(){return"ResourceURL"}}function _u(r){return r instanceof hl?r.changingThisBreaksApplicationSecurity:r}function _c(r,i){const c=function ld(r){return r instanceof hl&&r.getTypeName()||null}(r);if(null!=c&&c!==i){if("ResourceURL"===c&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===i}function Of(r){return new Ku(r)}function Zu(r){return new Da(r)}function Rf(r){return new Vc(r)}function Up(r){return new ud(r)}function Lh(r){return new jp(r)}class Bp{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const c=(new window.DOMParser).parseFromString(od(i),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(i):(c.removeChild(c.firstChild),c)}catch{return null}}}class hm{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const f=this.inertDocument.createElement("body");c.appendChild(f)}}getInertBodyElement(i){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=od(i),c;const f=this.inertDocument.createElement("body");return f.innerHTML=od(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(i){const c=i.attributes;for(let m=c.length-1;0<m;m--){const I=c.item(m).name;("xmlns:ns1"===I||0===I.indexOf("ns1:"))&&i.removeAttribute(I)}let f=i.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const Ru=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function kl(r){return(r=String(r)).match(Ru)?r:"unsafe:"+r}function pl(r){const i={};for(const c of r.split(","))i[c]=!0;return i}function bu(...r){const i={};for(const c of r)for(const f in c)c.hasOwnProperty(f)&&(i[f]=!0);return i}const qd=pl("area,br,col,hr,img,wbr"),zl=pl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nf=pl("rp,rt"),Kd=bu(qd,bu(zl,pl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bu(Nf,pl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bu(Nf,zl)),ks=pl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fh=bu(ks,pl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jh=pl("script,style,template");class $c{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let c=i.firstChild,f=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?f=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,f&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let m=this.checkClobberedElement(c,c.nextSibling);if(m){c=m;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(i){const c=i.nodeName.toLowerCase();if(!Kd.hasOwnProperty(c))return this.sanitizedSomething=!0,!jh.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const f=i.attributes;for(let m=0;m<f.length;m++){const b=f.item(m),I=b.name,R=I.toLowerCase();if(!Fh.hasOwnProperty(R)){this.sanitizedSomething=!0;continue}let $=b.value;ks[R]&&($=kl($)),this.buf.push(" ",I,'="',Gc($),'"')}return this.buf.push(">"),!0}endElement(i){const c=i.nodeName.toLowerCase();Kd.hasOwnProperty(c)&&!qd.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(i){this.buf.push(Gc(i))}checkClobberedElement(i,c){if(c&&(i.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return c}}const Uh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bh=/([^\#-~ |!])/g;function Gc(r){return r.replace(/&/g,"&amp;").replace(Uh,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Bh,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tu;function dd(r,i){let c=null;try{Tu=Tu||function Hc(r){const i=new hm(r);return function fl(){try{return!!(new window.DOMParser).parseFromString(od(""),"text/html")}catch{return!1}}()?new Bp(i):i}(r);let f=i?String(i):"";c=Tu.getInertBodyElement(f);let m=5,b=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=b,b=c.innerHTML,c=Tu.getInertBodyElement(f)}while(f!==b);return od((new $c).sanitizeChildren(ql(c)||c))}finally{if(c){const f=ql(c)||c;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function ql(r){return"content"in r&&function Ff(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Ms=(()=>((Ms=Ms||{})[Ms.NONE=0]="NONE",Ms[Ms.HTML=1]="HTML",Ms[Ms.STYLE=2]="STYLE",Ms[Ms.SCRIPT=3]="SCRIPT",Ms[Ms.URL=4]="URL",Ms[Ms.RESOURCE_URL=5]="RESOURCE_URL",Ms))();function yo(r){const i=function bc(){const r=hn();return r&&r[12]}();return i?i.sanitize(Ms.URL,r)||"":_c(r,"URL")?_u(r):kl(Be(r))}const Nu=new Li("ENVIRONMENT_INITIALIZER"),Xd=new Li("INJECTOR",-1),Tc=new Li("INJECTOR_DEF_TYPES");class Gp{get(i,c=Va){if(c===Va){const f=new Error(`NullInjectorError: No provider for ${Ke(i)}!`);throw f.name="NullInjectorError",f}return c}}function hd(...r){return{\u0275providers:Kr(0,r)}}function Kr(r,...i){const c=[],f=new Set;let m;return tu(i,b=>{const I=b;Yu(I,c,[],f)&&(m||(m=[]),m.push(I))}),void 0!==m&&Jd(m,c),c}function Jd(r,i){for(let c=0;c<r.length;c++){const{providers:m}=r[c];tu(m,b=>{i.push(b)})}}function Yu(r,i,c,f){if(!(r=Se(r)))return!1;let m=null,b=cr(r);const I=!b&&bt(r);if(b||I){if(I&&!I.standalone)return!1;m=r}else{const $=r.ngModule;if(b=cr($),!b)return!1;m=$}const R=f.has(m);if(I){if(R)return!1;if(f.add(m),I.dependencies){const $="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const ce of $)Yu(ce,i,c,f)}}else{if(!b)return!1;{if(null!=b.imports&&!R){let ce;f.add(m);try{tu(b.imports,Ce=>{Yu(Ce,i,c,f)&&(ce||(ce=[]),ce.push(Ce))})}finally{}void 0!==ce&&Jd(ce,i)}if(!R){const ce=to(m)||(()=>new m);i.push({provide:m,useFactory:ce,deps:or},{provide:Tc,useValue:m,multi:!0},{provide:Nu,useValue:()=>$i(m),multi:!0})}const $=b.providers;null==$||R||tu($,Ce=>{i.push(Ce)})}}return m!==r&&void 0!==r.providers}const Zl=Le({provide:String,useValue:Le});function Ec(r){return null!==r&&"object"==typeof r&&Zl in r}function ml(r){return"function"==typeof r}const Sc=new Li("Set Injector scope."),wc={},zp={};let fd;function th(){return void 0===fd&&(fd=new Gp),fd}class sa{}class Hh extends sa{constructor(i,c,f,m){super(),this.parent=c,this.source=f,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ql(i,I=>this.processProvider(I)),this.records.set(Xd,ao(void 0,this)),m.has("environment")&&this.records.set(sa,ao(void 0,this));const b=this.records.get(Sc);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(Tc.multi,or,en.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const c=yu(this),f=ni(void 0);try{return i()}finally{yu(c),ni(f)}}get(i,c=Va,f=en.Default){this.assertNotDestroyed();const m=yu(this),b=ni(void 0);try{if(!(f&en.SkipSelf)){let R=this.records.get(i);if(void 0===R){const $=function Uf(r){return"function"==typeof r||"object"==typeof r&&r instanceof Li}(i)&&qn(i);R=$&&this.injectableDefInScope($)?ao(pd(i),wc):null,this.records.set(i,R)}if(null!=R)return this.hydrate(i,R)}return(f&en.Self?th():this.parent).get(i,c=f&en.Optional&&c===Va?null:c)}catch(I){if("NullInjectorError"===I.name){if((I[cl]=I[cl]||[]).unshift(Ke(i)),m)throw I;return function Ct(r,i,c,f){const m=r[cl];throw i[Hd]&&m.unshift(i[Hd]),r.message=function Vt(r,i,c,f=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let m=Ke(i);if(Array.isArray(i))m=i.map(Ke).join(" -> ");else if("object"==typeof i){let b=[];for(let I in i)if(i.hasOwnProperty(I)){let R=i[I];b.push(I+":"+("string"==typeof R?JSON.stringify(R):Ke(R)))}m=`{${b.join(", ")}}`}return`${c}${f?"("+f+")":""}[${m}]: ${r.replace(ya,"\n  ")}`}("\n"+r.message,m,c,f),r.ngTokenPath=m,r[cl]=null,r}(I,i,"R3InjectorError",this.source)}throw I}finally{ni(b),yu(m)}}resolveInjectorInitializers(){const i=yu(this),c=ni(void 0);try{const f=this.get(Nu.multi,or,en.Self);for(const m of f)m()}finally{yu(i),ni(c)}}toString(){const i=[],c=this.records;for(const f of c.keys())i.push(Ke(f));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processProvider(i){let c=ml(i=Se(i))?i:Se(i&&i.provide);const f=function nh(r){return Ec(r)?ao(void 0,r.useValue):ao(rh(r),wc)}(i);if(ml(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=ao(void 0,wc,!0),m.factory=()=>te(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,f)}hydrate(i,c){return c.value===wc&&(c.value=zp,c.value=c.factory()),"object"==typeof c.value&&c.value&&function gd(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(i){if(!i.providedIn)return!1;const c=Se(i.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function pd(r){const i=qn(r),c=null!==i?i.factory:to(r);if(null!==c)return c;if(r instanceof Li)throw new $e(204,!1);if(r instanceof Function)return function oa(r){const i=r.length;if(i>0)throw ru(i,"?"),new $e(204,!1);const c=function vr(r){const i=r&&(r[tr]||r[ti]);if(i){const c=function Ci(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),i}return null}(r);return null!==c?()=>c.factory(r):()=>new r}(r);throw new $e(204,!1)}function rh(r,i,c){let f;if(ml(r)){const m=Se(r);return to(m)||pd(m)}if(Ec(r))f=()=>Se(r.useValue);else if(function Yl(r){return!(!r||!r.useFactory)}(r))f=()=>r.useFactory(...te(r.deps||[]));else if(function Aa(r){return!(!r||!r.useExisting)}(r))f=()=>$i(Se(r.useExisting));else{const m=Se(r&&(r.useClass||r.provide));if(!function Lu(r){return!!r.deps}(r))return to(m)||pd(m);f=()=>new m(...te(r.deps))}return f}function ao(r,i,c=!1){return{factory:r,value:i,multi:c?[]:void 0}}function Eu(r){return!!r.\u0275providers}function Ql(r,i){for(const c of r)Array.isArray(c)?Ql(c,i):Eu(c)?Ql(c.\u0275providers,i):i(c)}class md{}class Gh{resolveComponentFactory(i){throw function Bf(r){const i=Error(`No component factory found for ${Ke(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let sh=(()=>{class r{}return r.NULL=new Gh,r})();function qp(){return C(ds(),hn())}function C(r,i){return new y(ui(r,i))}let y=(()=>{class r{constructor(c){this.nativeElement=c}}return r.__NG_ELEMENT_ID__=qp,r})();function T(r){return r instanceof y?r.nativeElement:r}class de{}let De=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function gt(){const r=hn(),c=Br(ds().index,r);return(qr(c)?c:r)[11]}(),r})(),zt=(()=>{class r{}return r.\u0275prov=Bt({token:r,providedIn:"root",factory:()=>null}),r})();class On{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const lr=new On("14.2.8"),Rr={};function Zp(r){return r.ngOriginalError}class Qu{constructor(){this._console=console}handleError(i){const c=this._findOriginalError(i);this._console.error("ERROR",i),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(i){let c=i&&Zp(i);for(;c&&Zp(c);)c=Zp(c);return c||null}}const Zs=new Map;let Ol=0;const Kc="__ngContext__";function Fo(r,i){qr(i)?(r[Kc]=i[20],function _d(r){Zs.set(r[20],r)}(i)):r[Kc]=i}function Dc(r){return r instanceof Function?r():r}var Nl=(()=>((Nl=Nl||{})[Nl.Important=1]="Important",Nl[Nl.DashCase=2]="DashCase",Nl))();function ch(r,i){return undefined(r,i)}function Ac(r){const i=r[3];return bs(i)?i[3]:i}function qf(r){return ym(r[13])}function wu(r){return ym(r[4])}function ym(r){for(;null!==r&&!bs(r);)r=r[4];return r}function kc(r,i,c,f,m){if(null!=f){let b,I=!1;bs(f)?b=f:qr(f)&&(I=!0,f=f[0]);const R=xi(f);0===r&&null!==c?null==m?Sm(i,c,R):gh(i,c,R,m||null,!0):1===r&&null!==c?gh(i,c,R,m||null,!0):2===r?function Im(r,i,c){const f=ef(r,i);f&&function Td(r,i,c,f){r.removeChild(i,c,f)}(r,f,i,c)}(i,R,I):3===r&&i.destroyNode(R),null!=b&&function ag(r,i,c,f,m){const b=c[7];b!==xi(c)&&kc(i,r,f,b,m);for(let R=10;R<c.length;R++){const $=c[R];Pc($[1],$,r,i,f,b)}}(i,r,b,c,m)}}function ng(r,i,c){return r.createElement(i,c)}function ph(r,i){const c=r[9],f=c.indexOf(i),m=i[3];512&i[2]&&(i[2]&=-513,fr(m,-1)),c.splice(f,1)}function Tm(r,i){if(r.length<=10)return;const c=10+i,f=r[c];if(f){const m=f[17];null!==m&&m!==r&&ph(m,f),i>0&&(r[c-1][4]=f[4]);const b=nu(r,10+i);!function hh(r,i){Pc(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(f[1],f);const I=b[19];null!==I&&I.detachView(b[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}function Zv(r,i){if(!(128&i[2])){const c=i[11];c.destroyNode&&Pc(r,i,c,3,null,null),function bm(r){let i=r[13];if(!i)return Kf(r[1],r);for(;i;){let c=null;if(qr(i))c=i[13];else{const f=i[10];f&&(c=f)}if(!c){for(;i&&!i[4]&&i!==r;)qr(i)&&Kf(i[1],i),i=i[3];null===i&&(i=r),qr(i)&&Kf(i[1],i),c=i&&i[4]}i=c}}(i)}}function Kf(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function Yv(r,i){let c;if(null!=r&&null!=(c=r.destroyHooks))for(let f=0;f<c.length;f+=2){const m=i[c[f]];if(!(m instanceof Ho)){const b=c[f+1];if(Array.isArray(b))for(let I=0;I<b.length;I+=2){const R=m[b[I]],$=b[I+1];try{$.call(R)}finally{}}else try{b.call(m)}finally{}}}}(r,i),function Zf(r,i){const c=r.cleanup,f=i[7];let m=-1;if(null!==c)for(let b=0;b<c.length-1;b+=2)if("string"==typeof c[b]){const I=c[b+1],R="function"==typeof I?I(i):xi(i[I]),$=f[m=c[b+2]],ce=c[b+3];"boolean"==typeof ce?R.removeEventListener(c[b],$,ce):ce>=0?f[m=ce]():f[m=-ce].unsubscribe(),b+=2}else{const I=f[m=c[b+1]];c[b].call(I)}if(null!==f){for(let b=m+1;b<f.length;b++)(0,f[b])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const c=i[17];if(null!==c&&bs(i[3])){c!==i[3]&&ph(c,i);const f=i[19];null!==f&&f.detachView(r)}!function Gv(r){Zs.delete(r[20])}(i)}}function ig(r,i,c){return function Em(r,i,c){let f=i;for(;null!==f&&40&f.type;)f=(i=f).parent;if(null===f)return c[0];if(2&f.flags){const m=r.data[f.directiveStart].encapsulation;if(m===Zn.None||m===Zn.Emulated)return null}return ui(f,c)}(r,i.parent,c)}function gh(r,i,c,f,m){r.insertBefore(i,c,f,m)}function Sm(r,i,c){r.appendChild(i,c)}function Yc(r,i,c,f,m){null!==f?gh(r,i,c,f,m):Sm(r,i,c)}function ef(r,i){return r.parentNode(i)}function wm(r,i,c){return Cm(r,i,c)}let Cm=function Xv(r,i,c){return 40&r.type?ui(r,c):null};function sg(r,i,c,f){const m=ig(r,f,i),b=i[11],R=wm(f.parent||i[6],f,i);if(null!=m)if(Array.isArray(c))for(let $=0;$<c.length;$++)Yc(b,m,c[$],R,!1);else Yc(b,m,c,R,!1)}function og(r,i){if(null!==i){const c=i.type;if(3&c)return ui(i,r);if(4&c)return xm(-1,r[i.index]);if(8&c){const f=i.child;if(null!==f)return og(r,f);{const m=r[i.index];return bs(m)?xm(-1,m):xi(m)}}if(32&c)return ch(i,r)()||xi(r[i.index]);{const f=Jv(r,i);return null!==f?Array.isArray(f)?f[0]:og(Ac(r[16]),f):og(r,i.next)}}return null}function Jv(r,i){return null!==i?r[16][6].projection[i.projection]:null}function xm(r,i){const c=10+r+1;if(c<i.length){const f=i[c],m=f[1].firstChild;if(null!==m)return og(f,m)}return i[7]}function Dm(r,i,c,f,m,b,I){for(;null!=c;){const R=f[c.index],$=c.type;if(I&&0===i&&(R&&Fo(xi(R),f),c.flags|=4),64!=(64&c.flags))if(8&$)Dm(r,i,c.child,f,m,b,!1),kc(i,r,m,R,b);else if(32&$){const ce=ch(c,f);let Ce;for(;Ce=ce();)kc(i,r,m,Ce,b);kc(i,r,m,R,b)}else 16&$?Am(r,i,f,c,m,b):kc(i,r,m,R,b);c=I?c.projectionNext:c.next}}function Pc(r,i,c,f,m,b){Dm(c,f,r.firstChild,i,m,b,!1)}function Am(r,i,c,f,m,b){const I=c[16],$=I[6].projection[f.projection];if(Array.isArray($))for(let ce=0;ce<$.length;ce++)kc(i,r,m,$[ce],b);else Dm(r,i,$,I[3],m,b,!0)}function tf(r,i,c){r.setAttribute(i,"style",c)}function nf(r,i,c){""===c?r.removeAttribute(i,"class"):r.setAttribute(i,"class",c)}function lg(r,i,c){let f=r.length;for(;;){const m=r.indexOf(i,c);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const b=i.length;if(m+b===f||r.charCodeAt(m+b)<=32)return m}c=m+1}}const Mm="ng-template";function Pm(r,i,c){let f=0;for(;f<r.length;){let m=r[f++];if(c&&"class"===m){if(m=r[f],-1!==lg(m.toLowerCase(),i,0))return!0}else if(1===m){for(;f<r.length&&"string"==typeof(m=r[f++]);)if(m.toLowerCase()===i)return!0;return!1}}return!1}function _a(r){return 4===r.type&&r.value!==Mm}function ey(r,i,c){return i===(4!==r.type||c?r.value:Mm)}function cg(r,i,c){let f=4;const m=r.attrs||[],b=function s_(r){for(let i=0;i<r.length;i++)if(Hu(r[i]))return i;return r.length}(m);let I=!1;for(let R=0;R<i.length;R++){const $=i[R];if("number"!=typeof $){if(!I)if(4&f){if(f=2|1&f,""!==$&&!ey(r,$,c)||""===$&&1===i.length){if(ec(f))return!1;I=!0}}else{const ce=8&f?$:i[++R];if(8&f&&null!==r.attrs){if(!Pm(r.attrs,ce,c)){if(ec(f))return!1;I=!0}continue}const Ye=Om(8&f?"class":$,m,_a(r),c);if(-1===Ye){if(ec(f))return!1;I=!0;continue}if(""!==ce){let vt;vt=Ye>b?"":m[Ye+1].toLowerCase();const Ft=8&f?vt:null;if(Ft&&-1!==lg(Ft,ce,0)||2&f&&ce!==vt){if(ec(f))return!1;I=!0}}}}else{if(!I&&!ec(f)&&!ec($))return!1;if(I&&ec($))continue;I=!1,f=$|1&f}}return ec(f)||I}function ec(r){return 0==(1&r)}function Om(r,i,c,f){if(null===i)return-1;let m=0;if(f||!c){let b=!1;for(;m<i.length;){const I=i[m];if(I===r)return m;if(3===I||6===I)b=!0;else{if(1===I||2===I){let R=i[++m];for(;"string"==typeof R;)R=i[++m];continue}if(4===I)break;if(0===I){m+=4;continue}}m+=b?1:2}return-1}return function rf(r,i){let c=r.indexOf(4);if(c>-1)for(c++;c<r.length;){const f=r[c];if("number"==typeof f)return-1;if(f===i)return c;c++}return-1}(i,r)}function Rm(r,i,c=!1){for(let f=0;f<i.length;f++)if(cg(r,i[f],c))return!0;return!1}function sf(r,i){e:for(let c=0;c<i.length;c++){const f=i[c];if(r.length===f.length){for(let m=0;m<r.length;m++)if(r[m]!==f[m])continue e;return!0}}return!1}function dg(r,i){return r?":not("+i.trim()+")":i}function hg(r){let i=r[0],c=1,f=2,m="",b=!1;for(;c<r.length;){let I=r[c];if("string"==typeof I)if(2&f){const R=r[++c];m+="["+I+(R.length>0?'="'+R+'"':"")+"]"}else 8&f?m+="."+I:4&f&&(m+=" "+I);else""!==m&&!ec(I)&&(i+=dg(b,m),m=""),f=I,b=b||!ec(f);c++}return""!==m&&(i+=dg(b,m)),i}const pi={};function jm(r){fg(Jr(),hn(),et()+r,!1)}function fg(r,i,c,f){if(!f)if(3==(3&i[2])){const b=r.preOrderCheckHooks;null!==b&&es(i,b,c)}else{const b=r.preOrderHooks;null!==b&&Fa(i,b,0,c)}Ot(c)}function uf(r,i=null,c=null,f){const m=Xf(r,i,c,f);return m.resolveInjectorInitializers(),m}function Xf(r,i=null,c=null,f,m=new Set){const b=[c||or,hd(r)];return f=f||("object"==typeof r?void 0:Ke(r)),new Hh(b,i||th(),f||null,m)}let Qc=(()=>{class r{static create(c,f){if(Array.isArray(c))return uf({name:""},f,c,"");{const m=c.name??"";return uf({name:m},c.parent,c.providers,m)}}}return r.THROW_IF_NOT_FOUND=Va,r.NULL=new Gp,r.\u0275prov=Bt({token:r,providedIn:"any",factory:()=>$i(Xd)}),r.__NG_ELEMENT_ID__=-1,r})();function ff(r,i=en.Default){const c=hn();return null===c?$i(r,i):fu(ds(),c,Se(r),i)}function Sg(){throw new Error("invalid")}function Oc(r,i){return r<<17|i<<2}function el(r){return r>>17&32767}function Cd(r){return 2|r}function tc(r){return(131068&r)>>2}function Cg(r,i){return-131069&r|i<<2}function xd(r){return 1|r}function ip(r,i){const c=r.contentQueries;if(null!==c)for(let f=0;f<c.length;f+=2){const m=c[f],b=c[f+1];if(-1!==b){const I=r.data[b];wi(m),I.contentQueries(2,i[b],b)}}}function Ag(r,i,c,f,m,b,I,R,$,ce,Ce){const Ye=i.blueprint.slice();return Ye[0]=m,Ye[2]=76|f,(null!==Ce||r&&1024&r[2])&&(Ye[2]|=1024),is(Ye),Ye[3]=Ye[15]=r,Ye[8]=c,Ye[10]=I||r&&r[10],Ye[11]=R||r&&r[11],Ye[12]=$||r&&r[12]||null,Ye[9]=ce||r&&r[9]||null,Ye[6]=b,Ye[20]=function Xp(){return Ol++}(),Ye[21]=Ce,Ye[16]=2==i.type?r[16]:Ye,Ye}function kd(r,i,c,f,m){let b=r.data[i];if(null===b)b=function kg(r,i,c,f,m){const b=ie(),I=ke(),$=r.data[i]=function _y(r,i,c,f,m,b){return{type:c,index:f,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?b:b&&b.parent,c,i,f,m);return null===r.firstChild&&(r.firstChild=$),null!==b&&(I?null==b.child&&null!==$.parent&&(b.child=$):null===b.next&&(b.next=$)),$}(r,i,c,f,m),function mr(){return ur.lFrame.inI18n}()&&(b.flags|=64);else if(64&b.type){b.type=c,b.value=f,b.attrs=m;const I=function Q(){const r=ur.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();b.injectorIndex=null===I?-1:I.injectorIndex}return q(b,!0),b}function Md(r,i,c,f){if(0===c)return-1;const m=i.length;for(let b=0;b<c;b++)i.push(f),r.blueprint.push(f),r.data.push(null);return m}function Mg(r,i,c){hs(i);try{const f=r.viewQuery;null!==f&&cp(1,f,c);const m=r.template;null!==m&&jl(r,i,m,1,c),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&ip(r,i),r.staticViewQueries&&cp(2,r.viewQuery,c);const b=r.components;null!==b&&function ev(r,i){for(let c=0;c<i.length;c++)dv(r,i[c])}(i,b)}catch(f){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),f}finally{i[2]&=-5,ge()}}function Pg(r,i,c,f){const m=i[2];if(128!=(128&m)){hs(i);try{is(i),function fn(r){return ur.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==c&&jl(r,i,c,2,f);const I=3==(3&m);if(I){const ce=r.preOrderCheckHooks;null!==ce&&es(i,ce,null)}else{const ce=r.preOrderHooks;null!==ce&&Fa(i,ce,0,null),mo(i,0)}if(function cv(r){for(let i=qf(r);null!==i;i=wu(i)){if(!i[2])continue;const c=i[9];for(let f=0;f<c.length;f++){const m=c[f],b=m[3];0==(512&m[2])&&fr(b,1),m[2]|=512}}}(i),function wy(r){for(let i=qf(r);null!==i;i=wu(i))for(let c=10;c<i.length;c++){const f=i[c],m=f[1];Po(f)&&Pg(m,f,m.template,f[8])}}(i),null!==r.contentQueries&&ip(r,i),I){const ce=r.contentCheckHooks;null!==ce&&es(i,ce)}else{const ce=r.contentHooks;null!==ce&&Fa(i,ce,1),mo(i,1)}!function vf(r,i){const c=r.hostBindingOpCodes;if(null!==c)try{for(let f=0;f<c.length;f++){const m=c[f];if(m<0)Ot(~m);else{const b=m,I=c[++f],R=c[++f];Is(I,b),R(2,i[b])}}}finally{Ot(-1)}}(r,i);const R=r.components;null!==R&&function p_(r,i){for(let c=0;c<i.length;c++)__(r,i[c])}(i,R);const $=r.viewQuery;if(null!==$&&cp(2,$,f),I){const ce=r.viewCheckHooks;null!==ce&&es(i,ce)}else{const ce=r.viewHooks;null!==ce&&Fa(i,ce,2),mo(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,fr(i[3],-1))}finally{ge()}}}function jl(r,i,c,f,m){const b=et(),I=2&f;try{Ot(-1),I&&i.length>22&&fg(r,i,22,!1),c(f,m)}finally{Ot(b)}}function vy(r,i,c){if(Ao(i)){const m=i.directiveEnd;for(let b=i.directiveStart;b<m;b++){const I=r.data[b];I.contentQueries&&I.contentQueries(1,c[b],b)}}}function sp(r,i,c){!Ti()||(function iv(r,i,c,f){const m=c.directiveStart,b=c.directiveEnd;r.firstCreatePass||dr(c,i),Fo(f,i);const I=c.initialInputs;for(let R=m;R<b;R++){const $=r.data[R],ce=ns($);ce&&Vg(i,c,$);const Ce=Ca(i,r,R,c);Fo(Ce,i),null!==I&&uv(0,R-m,Ce,$,0,I),ce&&(Br(c.index,i)[8]=Ce)}}(r,i,c,ui(c,i)),128==(128&c.flags)&&function v_(r,i,c){const f=c.directiveStart,m=c.directiveEnd,b=c.index,I=function Vi(){return ur.lFrame.currentDirectiveIndex}();try{Ot(b);for(let R=f;R<m;R++){const $=r.data[R],ce=i[R];Oi(R),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Ug($,ce)}}finally{Ot(-1),Oi(I)}}(r,i,c))}function tv(r,i,c=ui){const f=i.localNames;if(null!==f){let m=i.index+1;for(let b=0;b<f.length;b+=2){const I=f[b+1],R=-1===I?c(i,r):r[I];r[m++]=R}}}function Og(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=nv(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function nv(r,i,c,f,m,b,I,R,$,ce){const Ce=22+f,Ye=Ce+m,vt=function rv(r,i){const c=[];for(let f=0;f<i;f++)c.push(f<r?null:pi);return c}(Ce,Ye),Ft="function"==typeof ce?ce():ce;return vt[1]={type:r,blueprint:vt,template:c,queries:null,viewQuery:R,declTNode:i,data:vt.slice().fill(null,Ce),bindingStartIndex:Ce,expandoStartIndex:Ye,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:$,consts:Ft,incompleteFirstPass:!1}}function bh(r,i,c,f){const m=Gg(i);null===c?m.push(f):(m.push(c),r.firstCreatePass&&yf(r).push(f,m.length-1))}function Ng(r,i,c){for(let f in r)if(r.hasOwnProperty(f)){const m=r[f];(c=null===c?{}:c).hasOwnProperty(f)?c[f].push(i,m):c[f]=[i,m]}return c}function by(r,i){const f=i.directiveEnd,m=r.data,b=i.attrs,I=[];let R=null,$=null;for(let ce=i.directiveStart;ce<f;ce++){const Ce=m[ce],Ye=Ce.inputs,vt=null===b||_a(i)?null:Hg(Ye,b);I.push(vt),R=Ng(Ye,ce,R),$=Ng(Ce.outputs,ce,$)}null!==R&&(R.hasOwnProperty("class")&&(i.flags|=16),R.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=I,i.inputs=R,i.outputs=$}function Fg(r,i){const c=Br(i,r);16&c[2]||(c[2]|=32)}function jg(r,i,c,f){let m=!1;if(Ti()){const b=function y_(r,i,c){const f=r.directiveRegistry;let m=null;if(f)for(let b=0;b<f.length;b++){const I=f[b];Rm(c,I.selectors,!1)&&(m||(m=[]),ln(dr(c,i),r,I.type),ns(I)?(ap(r,c),m.unshift(I)):m.push(I))}return m}(r,i,c),I=null===f?null:{"":-1};if(null!==b){m=!0,ov(c,r.data.length,b.length);for(let Ce=0;Ce<b.length;Ce++){const Ye=b[Ce];Ye.providersResolver&&Ye.providersResolver(Ye)}let R=!1,$=!1,ce=Md(r,i,b.length,null);for(let Ce=0;Ce<b.length;Ce++){const Ye=b[Ce];c.mergedAttrs=Mu(c.mergedAttrs,Ye.hostAttrs),Bg(r,c,i,ce,Ye),sv(ce,Ye,I),null!==Ye.contentQueries&&(c.flags|=8),(null!==Ye.hostBindings||null!==Ye.hostAttrs||0!==Ye.hostVars)&&(c.flags|=128);const vt=Ye.type.prototype;!R&&(vt.ngOnChanges||vt.ngOnInit||vt.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(c.index),R=!0),!$&&(vt.ngOnChanges||vt.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(c.index),$=!0),ce++}by(r,c)}I&&function Ey(r,i,c){if(i){const f=r.localNames=[];for(let m=0;m<i.length;m+=2){const b=c[i[m+1]];if(null==b)throw new $e(-301,!1);f.push(i[m],b)}}}(c,f,I)}return c.mergedAttrs=Mu(c.mergedAttrs,c.attrs),m}function op(r,i,c,f,m,b){const I=b.hostBindings;if(I){let R=r.hostBindingOpCodes;null===R&&(R=r.hostBindingOpCodes=[]);const $=~i.index;(function m_(r){let i=r.length;for(;i>0;){const c=r[--i];if("number"==typeof c&&c<0)return c}return 0})(R)!=$&&R.push($),R.push(f,m,I)}}function Ug(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function ap(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function sv(r,i,c){if(c){if(i.exportAs)for(let f=0;f<i.exportAs.length;f++)c[i.exportAs[f]]=r;ns(i)&&(c[""]=r)}}function ov(r,i,c){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+c,r.providerIndexes=i}function Bg(r,i,c,f,m){r.data[f]=m;const b=m.factory||(m.factory=to(m.type)),I=new Ho(b,ns(m),ff);r.blueprint[f]=I,c[f]=I,op(r,i,0,f,Md(r,c,m.hostVars,pi),m)}function Vg(r,i,c){const f=ui(i,r),m=Og(c),b=r[10],I=lp(r,Ag(r,m,null,c.onPush?32:16,f,i,b,b.createRenderer(f,c),null,null,null));r[i.index]=I}function Ul(r,i,c,f,m,b){const I=ui(r,i);!function av(r,i,c,f,m,b,I){if(null==b)r.removeAttribute(i,m,c);else{const R=null==I?Be(b):I(b,f||"",m);r.setAttribute(i,m,R,c)}}(i[11],I,b,r.value,c,f,m)}function uv(r,i,c,f,m,b){const I=b[i];if(null!==I){const R=f.setInput;for(let $=0;$<I.length;){const ce=I[$++],Ce=I[$++],Ye=I[$++];null!==R?f.setInput(c,Ye,ce,Ce):c[Ce]=Ye}}}function Hg(r,i){let c=null,f=0;for(;f<i.length;){const m=i[f];if(0!==m)if(5!==m){if("number"==typeof m)break;r.hasOwnProperty(m)&&(null===c&&(c=[]),c.push(m,r[m],i[f+1])),f+=2}else f+=2;else f+=4}return c}function Sy(r,i,c,f){return new Array(r,!0,!1,i,null,0,f,c,null,null)}function __(r,i){const c=Br(i,r);if(Po(c)){const f=c[1];48&c[2]?Pg(f,c,f.template,c[8]):c[5]>0&&up(c)}}function up(r){for(let f=qf(r);null!==f;f=wu(f))for(let m=10;m<f.length;m++){const b=f[m];if(Po(b))if(512&b[2]){const I=b[1];Pg(I,b,I.template,b[8])}else b[5]>0&&up(b)}const c=r[1].components;if(null!==c)for(let f=0;f<c.length;f++){const m=Br(c[f],r);Po(m)&&m[5]>0&&up(m)}}function dv(r,i){const c=Br(i,r),f=c[1];(function Cy(r,i){for(let c=i.length;c<r.blueprint.length;c++)i.push(r.blueprint[c])})(f,c),Mg(f,c,c[8])}function lp(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function $g(r){for(;r;){r[2]|=32;const i=Ac(r);if(lu(r)&&!i)return r;r=i}return null}function Nc(r,i,c,f=!0){const m=i[10];m.begin&&m.begin();try{Pg(r,i,r.template,c)}catch(I){throw f&&uo(i,I),I}finally{m.end&&m.end()}}function cp(r,i,c){wi(0),i(r,c)}function Gg(r){return r[7]||(r[7]=[])}function yf(r){return r.cleanup||(r.cleanup=[])}function uo(r,i){const c=r[9],f=c?c.get(Qu,null):null;f&&f.handleError(i)}function Ga(r,i,c,f,m){for(let b=0;b<c.length;){const I=c[b++],R=c[b++],$=i[I],ce=r.data[I];null!==ce.setInput?ce.setInput($,m,f,R):$[R]=m}}function Wa(r,i,c){const f=Vs(i,r);!function Zc(r,i,c){r.setValue(i,c)}(r[11],f,c)}function dp(r,i,c){let f=c?r.styles:null,m=c?r.classes:null,b=0;if(null!==i)for(let I=0;I<i.length;I++){const R=i[I];"number"==typeof R?b=R:1==b?m=Ae(m,R):2==b&&(f=Ae(f,R+": "+i[++I]+";"))}c?r.styles=f:r.stylesWithoutHost=f,c?r.classes=m:r.classesWithoutHost=m}function hp(r,i,c,f,m=!1){for(;null!==c;){const b=i[c.index];if(null!==b&&f.push(xi(b)),bs(b))for(let R=10;R<b.length;R++){const $=b[R],ce=$[1].firstChild;null!==ce&&hp($[1],$,ce,f)}const I=c.type;if(8&I)hp(r,i,c.child,f);else if(32&I){const R=ch(c,i);let $;for(;$=R();)f.push($)}else if(16&I){const R=Jv(i,c);if(Array.isArray(R))f.push(...R);else{const $=Ac(i[16]);hp($[1],$,R,f,!0)}}c=m?c.projectionNext:c.next}return f}class Pd{constructor(i,c){this._lView=i,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,c=i[1];return hp(c,i,c.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(bs(i)){const c=i[8],f=c?c.indexOf(this):-1;f>-1&&(Tm(i,f),nu(c,f))}this._attachedToViewContainer=!1}Zv(this._lView[1],this._lView)}onDestroy(i){bh(this._lView[1],this._lView,null,i)}markForCheck(){$g(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Nc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fh(r,i){Pc(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new $e(902,!1);this._appRef=i}}class xy extends Pd{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Nc(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class fp extends sh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const c=bt(i);return new zg(c,this.ngModule)}}function fv(r){const i=[];for(let c in r)r.hasOwnProperty(c)&&i.push({propName:r[c],templateName:c});return i}class T_{constructor(i,c){this.injector=i,this.parentInjector=c}get(i,c,f){const m=this.injector.get(i,Rr,f);return m!==Rr||c===Rr?m:this.parentInjector.get(i,c,f)}}class zg extends md{constructor(i,c){super(),this.componentDef=i,this.ngModule=c,this.componentType=i.type,this.selector=function Lm(r){return r.map(hg).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return fv(this.componentDef.inputs)}get outputs(){return fv(this.componentDef.outputs)}create(i,c,f,m){let b=(m=m||this.ngModule)instanceof sa?m:m?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const I=b?new T_(i,b):i,R=I.get(de,null);if(null===R)throw new $e(407,!1);const $=I.get(zt,null),ce=R.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",Ye=f?function Rg(r,i,c){return r.selectRootElement(i,c===Zn.ShadowDom)}(ce,f,this.componentDef.encapsulation):ng(R.createRenderer(null,this.componentDef),Ce,function Wg(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Ce)),vt=this.componentDef.onPush?288:272,Ft=nv(0,null,null,1,0,null,null,null,null,null),pn=Ag(null,Ft,null,vt,null,null,R,ce,$,I,null);let jn,er;hs(pn);try{const Sr=function Ay(r,i,c,f,m,b){const I=c[1];c[22]=r;const $=kd(I,22,2,"#host",null),ce=$.mergedAttrs=i.hostAttrs;null!==ce&&(dp($,ce,!0),null!==r&&(Hl(m,r,ce),null!==$.classes&&nf(m,r,$.classes),null!==$.styles&&tf(m,r,$.styles)));const Ce=f.createRenderer(r,i),Ye=Ag(c,Og(i),null,i.onPush?32:16,c[22],$,f,Ce,b||null,null,null);return I.firstCreatePass&&(ln(dr($,c),I,i.type),ap(I,$),ov($,c.length,1)),lp(c,Ye),c[22]=Ye}(Ye,this.componentDef,pn,R,ce);if(Ye)if(f)Hl(ce,Ye,["ng-version",lr.full]);else{const{attrs:ei,classes:xn}=function Fm(r){const i=[],c=[];let f=1,m=2;for(;f<r.length;){let b=r[f];if("string"==typeof b)2===m?""!==b&&i.push(b,r[++f]):8===m&&c.push(b);else{if(!ec(m))break;m=b}f++}return{attrs:i,classes:c}}(this.componentDef.selectors[0]);ei&&Hl(ce,Ye,ei),xn&&xn.length>0&&nf(ce,Ye,xn.join(" "))}if(er=Mo(Ft,22),void 0!==c){const ei=er.projection=[];for(let xn=0;xn<this.ngContentSelectors.length;xn++){const gi=c[xn];ei.push(null!=gi?Array.from(gi):null)}}jn=function ky(r,i,c,f){const m=c[1],b=function au(r,i,c){const f=ds();r.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Bg(r,f,i,Md(r,i,1,null),c),by(r,f));const m=Ca(i,r,f.directiveStart,f);Fo(m,i);const b=ui(f,i);return b&&Fo(b,i),m}(m,c,i);if(r[8]=c[8]=b,null!==f)for(const R of f)R(b,i);if(i.contentQueries){const R=ds();i.contentQueries(1,b,R.directiveStart)}const I=ds();return!m.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(Ot(I.index),op(c[1],I,0,I.directiveStart,I.directiveEnd,i),Ug(i,b)),b}(Sr,this.componentDef,pn,[gv]),Mg(Ft,pn,null)}finally{ge()}return new Iy(this.componentType,jn,C(er,pn),pn,er)}}class Iy extends class $h{}{constructor(i,c,f,m,b){super(),this.location=f,this._rootLView=m,this._tNode=b,this.instance=c,this.hostView=this.changeDetectorRef=new xy(m),this.componentType=i}setInput(i,c){const f=this._tNode.inputs;let m;if(null!==f&&(m=f[i])){const b=this._rootLView;Ga(b[1],b,m,i,c),Fg(b,this._tNode.index)}}get injector(){return new Ja(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function gv(){const r=ds();li(hn()[1],r)}function pp(r){let i=function qg(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),c=!0;const f=[r];for(;i;){let m;if(ns(r))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new $e(903,!1);m=i.\u0275dir}if(m){if(c){f.push(m);const I=r;I.inputs=gp(r.inputs),I.declaredInputs=gp(r.declaredInputs),I.outputs=gp(r.outputs);const R=m.hostBindings;R&&as(r,R);const $=m.viewQuery,ce=m.contentQueries;if($&&Kg(r,$),ce&&Zg(r,ce),se(r.inputs,m.inputs),se(r.declaredInputs,m.declaredInputs),se(r.outputs,m.outputs),ns(m)&&m.data.animation){const Ce=r.data;Ce.animation=(Ce.animation||[]).concat(m.data.animation)}}const b=m.features;if(b)for(let I=0;I<b.length;I++){const R=b[I];R&&R.ngInherit&&R(r),R===pp&&(c=!1)}}i=Object.getPrototypeOf(i)}!function mv(r){let i=0,c=null;for(let f=r.length-1;f>=0;f--){const m=r[f];m.hostVars=i+=m.hostVars,m.hostAttrs=Mu(m.hostAttrs,c=Mu(c,m.hostAttrs))}}(f)}function gp(r){return r===sn?{}:r===or?[]:r}function Kg(r,i){const c=r.viewQuery;r.viewQuery=c?(f,m)=>{i(f,m),c(f,m)}:i}function Zg(r,i){const c=r.contentQueries;r.contentQueries=c?(f,m,b)=>{i(f,m,b),c(f,m,b)}:i}function as(r,i){const c=r.hostBindings;r.hostBindings=c?(f,m)=>{i(f,m),c(f,m)}:i}let mp=null;function Bl(){if(!mp){const r=Yr.Symbol;if(r&&r.iterator)mp=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<i.length;++c){const f=i[c];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(mp=f)}}}return mp}function vp(r){return!!Qg(r)&&(Array.isArray(r)||!(r instanceof Map)&&Bl()in r)}function Qg(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function nc(r,i,c){return r[i]=c}function Cu(r,i,c){return!Object.is(r[i],c)&&(r[i]=c,!0)}function Th(r,i,c,f){const m=Cu(r,i,c);return Cu(r,i+1,f)||m}function Jg(r,i,c,f){const m=hn();return Cu(m,Hn(),i)&&(Jr(),Ul(Kt(),m,r,i,c,f)),Jg}function _p(r,i,c,f,m,b){const R=Th(r,function Nt(){return ur.lFrame.bindingIndex}(),c,m);return Tn(2),R?i+Be(c)+f+Be(m)+b:pi}function Y(r,i,c,f,m,b,I,R){const $=hn(),ce=Jr(),Ce=r+22,Ye=ce.firstCreatePass?function ne(r,i,c,f,m,b,I,R,$){const ce=i.consts,Ce=kd(i,r,4,I||null,no(ce,R));jg(i,c,Ce,no(ce,$)),li(i,Ce);const Ye=Ce.tViews=nv(2,Ce,f,m,b,i.directiveRegistry,i.pipeRegistry,null,i.schemas,ce);return null!==i.queries&&(i.queries.template(i,Ce),Ye.queries=i.queries.embeddedTView(Ce)),Ce}(Ce,ce,$,i,c,f,m,b,I):ce.data[Ce];q(Ye,!1);const vt=$[11].createComment("");sg(ce,$,vt,Ye),Fo(vt,$),lp($,$[Ce]=Sy(vt,$,vt,Ye)),Pa(Ye)&&sp(ce,$,Ye),null!=I&&tv($,Ye,R)}function je(r){return Ji(function J(){return ur.lFrame.contextLView}(),22+r)}function Ve(r,i,c){const f=hn();return Cu(f,Hn(),i)&&function aa(r,i,c,f,m,b,I,R){const $=ui(i,c);let Ce,ce=i.inputs;!R&&null!=ce&&(Ce=ce[f])?(Ga(r,c,Ce,f,m),ko(i)&&Fg(c,i.index)):3&i.type&&(f=function Lg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(f),m=null!=I?I(m,i.value||"",f):m,b.setProperty($,f,m))}(Jr(),Kt(),f,r,i,f[11],c,!1),Ve}function qe(r,i,c,f,m){const I=m?"class":"style";Ga(r,c,i.inputs[I],I,f)}function yn(r,i,c,f){const m=hn(),b=Jr(),I=22+r,R=m[11],$=m[I]=ng(R,i,function fi(){return ur.lFrame.currentNamespace}()),ce=b.firstCreatePass?function Wt(r,i,c,f,m,b,I){const R=i.consts,ce=kd(i,r,2,m,no(R,b));return jg(i,c,ce,no(R,I)),null!==ce.attrs&&dp(ce,ce.attrs,!1),null!==ce.mergedAttrs&&dp(ce,ce.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,ce),ce}(I,b,m,0,i,c,f):b.data[I];q(ce,!0);const Ce=ce.mergedAttrs;null!==Ce&&Hl(R,$,Ce);const Ye=ce.classes;null!==Ye&&nf(R,$,Ye);const vt=ce.styles;return null!==vt&&tf(R,$,vt),64!=(64&ce.flags)&&sg(b,m,$,ce),0===function fa(){return ur.lFrame.elementDepthCount}()&&Fo($,m),function So(){ur.lFrame.elementDepthCount++}(),Pa(ce)&&(sp(b,m,ce),vy(b,ce,m)),null!==f&&tv(m,ce),yn}function Vn(){let r=ds();ke()?Ut():(r=r.parent,q(r,!1));const i=r;!function Au(){ur.lFrame.elementDepthCount--}();const c=Jr();return c.firstCreatePass&&(li(c,r),Ao(r)&&c.queries.elementEnd(r)),null!=i.classesWithoutHost&&function ku(r){return 0!=(16&r.flags)}(i)&&qe(c,i,hn(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function $o(r){return 0!=(32&r.flags)}(i)&&qe(c,i,hn(),i.stylesWithoutHost,!1),Vn}function Xt(r,i,c,f){return yn(r,i,c,f),Vn(),Xt}function Cn(r,i,c){const f=hn(),m=Jr(),b=r+22,I=m.firstCreatePass?function tn(r,i,c,f,m){const b=i.consts,I=no(b,f),R=kd(i,r,8,"ng-container",I);return null!==I&&dp(R,I,!0),jg(i,c,R,no(b,m)),null!==i.queries&&i.queries.elementStart(i,R),R}(b,m,f,i,c):m.data[b];q(I,!0);const R=f[b]=f[11].createComment("");return sg(m,f,R,I),Fo(R,f),Pa(I)&&(sp(m,f,I),vy(m,I,f)),null!=c&&tv(f,I),Cn}function un(){let r=ds();const i=Jr();return ke()?Ut():(r=r.parent,q(r,!1)),i.firstCreatePass&&(li(i,r),Ao(r)&&i.queries.elementEnd(r)),un}function In(){return hn()}function mn(r){return!!r&&"function"==typeof r.then}function kr(r){return!!r&&"function"==typeof r.subscribe}const Yn=kr;function Hr(r,i,c,f){const m=hn(),b=Jr(),I=ds();return function jo(r,i,c,f,m,b,I,R){const $=Pa(f),Ce=r.firstCreatePass&&yf(r),Ye=i[8],vt=Gg(i);let Ft=!0;if(3&f.type||R){const er=ui(f,i),Sr=R?R(er):er,ei=vt.length,xn=R?Js=>R(xi(Js[f.index])):f.index;let gi=null;if(!R&&$&&(gi=function Cs(r,i,c,f){const m=r.cleanup;if(null!=m)for(let b=0;b<m.length-1;b+=2){const I=m[b];if(I===c&&m[b+1]===f){const R=i[7],$=m[b+2];return R.length>$?R[$]:null}"string"==typeof I&&(b+=2)}return null}(r,i,m,f.index)),null!==gi)(gi.__ngLastListenerFn__||gi).__ngNextListenerFn__=b,gi.__ngLastListenerFn__=b,Ft=!1;else{b=Ys(f,i,Ye,b,!1);const Js=c.listen(Sr,m,b);vt.push(b,Js),Ce&&Ce.push(m,xn,ei,ei+1)}}else b=Ys(f,i,Ye,b,!1);const pn=f.outputs;let jn;if(Ft&&null!==pn&&(jn=pn[m])){const er=jn.length;if(er)for(let Sr=0;Sr<er;Sr+=2){const Ea=i[jn[Sr]][jn[Sr+1]].subscribe(b),Vv=vt.length;vt.push(b,Ea),Ce&&Ce.push(m,f.index,Vv,-(Vv+1))}}}(b,m,m[11],I,r,i,0,f),Hr}function Ko(r,i,c,f){try{return!1!==c(f)}catch(m){return uo(r,m),!1}}function Ys(r,i,c,f,m){return function b(I){if(I===Function)return f;$g(2&r.flags?Br(r.index,i):i);let $=Ko(i,0,f,I),ce=b.__ngNextListenerFn__;for(;ce;)$=Ko(i,0,ce,I)&&$,ce=ce.__ngNextListenerFn__;return m&&!1===$&&(I.preventDefault(),I.returnValue=!1),$}}function Ma(r=1){return function z(r){return(ur.lFrame.contextLView=function we(r,i){for(;r>0;)i=i[15],r--;return i}(r,ur.lFrame.contextLView))[8]}(r)}function Fs(r,i){let c=null;const f=function Nm(r){const i=r.attrs;if(null!=i){const c=i.indexOf(5);if(0==(1&c))return i[c+1]}return null}(r);for(let m=0;m<i.length;m++){const b=i[m];if("*"!==b){if(null===f?Rm(r,b,!0):sf(f,b))return m}else c=m}return c}function Rd(r){const i=hn()[16][6];if(!i.projection){const f=i.projection=ru(r?r.length:1,null),m=f.slice();let b=i.child;for(;null!==b;){const I=r?Fs(b,r):0;null!==I&&(m[I]?m[I].projectionNext=b:f[I]=b,m[I]=b),b=b.next}}}function xu(r,i=0,c){const f=hn(),m=Jr(),b=kd(m,22+r,16,null,c||null);null===b.projection&&(b.projection=i),Ut(),64!=(64&b.flags)&&function i_(r,i,c){Am(i[11],0,i,c,ig(r,c,i),wm(c.parent||i[6],c,i))}(m,f,b)}function bf(r,i,c,f,m){const b=r[c+1],I=null===i;let R=f?el(b):tc(b),$=!1;for(;0!==R&&(!1===$||I);){const Ce=r[R+1];ed(r[R],i)&&($=!0,r[R+1]=f?xd(Ce):Cd(Ce)),R=f?el(Ce):tc(Ce)}$&&(r[c+1]=f?Cd(b):xd(b))}function ed(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&Qe(r,i)>=0}function Ev(r,i){return function ac(r,i,c,f){const m=hn(),b=Jr(),I=Tn(2);b.firstUpdatePass&&function Vl(r,i,c,f){const m=r.data;if(null===m[c+1]){const b=m[et()],I=function Fy(r,i){return i>=r.expandoStartIndex}(r,c);(function Qs(r,i){return 0!=(r.flags&(i?16:32))})(b,f)&&null===i&&!I&&(i=!1),i=function Sv(r,i,c,f){const m=function Hi(r){const i=ur.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let b=f?i.residualClasses:i.residualStyles;if(null===m)0===(f?i.classBindings:i.styleBindings)&&(c=Cp(c=nm(null,r,i,c,f),i.attrs,f),b=null);else{const I=i.directiveStylingLast;if(-1===I||r[I]!==m)if(c=nm(m,r,i,c,f),null===b){let $=function jy(r,i,c){const f=c?i.classBindings:i.styleBindings;if(0!==tc(f))return r[el(f)]}(r,i,f);void 0!==$&&Array.isArray($)&&($=nm(null,r,i,$[1],f),$=Cp($,i.attrs,f),function D_(r,i,c,f){r[el(c?i.classBindings:i.styleBindings)]=f}(r,i,f,$))}else b=function A_(r,i,c){let f;const m=i.directiveEnd;for(let b=1+i.directiveStylingLast;b<m;b++)f=Cp(f,r[b].hostAttrs,c);return Cp(f,i.attrs,c)}(r,i,f)}return void 0!==b&&(f?i.residualClasses=b:i.residualStyles=b),c}(m,b,i,f),function Ry(r,i,c,f,m,b){let I=b?i.classBindings:i.styleBindings,R=el(I),$=tc(I);r[f]=c;let Ce,ce=!1;if(Array.isArray(c)){const Ye=c;Ce=Ye[1],(null===Ce||Qe(Ye,Ce)>0)&&(ce=!0)}else Ce=c;if(m)if(0!==$){const vt=el(r[R+1]);r[f+1]=Oc(vt,R),0!==vt&&(r[vt+1]=Cg(r[vt+1],f)),r[R+1]=function cy(r,i){return 131071&r|i<<17}(r[R+1],f)}else r[f+1]=Oc(R,0),0!==R&&(r[R+1]=Cg(r[R+1],f)),R=f;else r[f+1]=Oc($,0),0===R?R=f:r[$+1]=Cg(r[$+1],f),$=f;ce&&(r[f+1]=Cd(r[f+1])),bf(r,Ce,f,!0),bf(r,Ce,f,!1),function x_(r,i,c,f,m){const b=m?r.residualClasses:r.residualStyles;null!=b&&"string"==typeof i&&Qe(b,i)>=0&&(c[f+1]=xd(c[f+1]))}(i,Ce,r,f,b),I=Oc(R,$),b?i.classBindings=I:i.styleBindings=I}(m,b,i,c,I,f)}}(b,r,I,f),i!==pi&&Cu(m,I,i)&&function k_(r,i,c,f,m,b,I,R){if(!(3&i.type))return;const $=r.data,ce=$[R+1];_l(function dy(r){return 1==(1&r)}(ce)?xp($,i,c,m,tc(ce),I):void 0)||(_l(b)||function wg(r){return 2==(2&r)}(ce)&&(b=xp($,null,c,m,R,I)),function ug(r,i,c,f,m){if(i)m?r.addClass(c,f):r.removeClass(c,f);else{let b=-1===f.indexOf("-")?void 0:Nl.DashCase;null==m?r.removeStyle(c,f,b):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),b|=Nl.Important),r.setStyle(c,f,m,b))}}(f,I,Vs(et(),c),m,b))}(b,b.data[et()],m,m[11],r,m[I+1]=function lc(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=Ke(_u(r)))),r}(i,c),f,I)}(r,i,null,!0),Ev}function nm(r,i,c,f,m){let b=null;const I=c.directiveEnd;let R=c.directiveStylingLast;for(-1===R?R=c.directiveStart:R++;R<I&&(b=i[R],f=Cp(f,b.hostAttrs,m),b!==r);)R++;return null!==r&&(c.directiveStylingLast=R),f}function Cp(r,i,c){const f=c?1:2;let m=-1;if(null!==i)for(let b=0;b<i.length;b++){const I=i[b];"number"==typeof I?m=I:m===f&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),_e(r,I,!!c||i[++b]))}return void 0===r?null:r}function xp(r,i,c,f,m,b){const I=null===i;let R;for(;m>0;){const $=r[m],ce=Array.isArray($),Ce=ce?$[1]:$,Ye=null===Ce;let vt=c[m+1];vt===pi&&(vt=Ye?or:void 0);let Ft=Ye?Xe(vt,f):Ce===f?vt:void 0;if(ce&&!_l(Ft)&&(Ft=Xe($,f)),_l(Ft)&&(R=Ft,I))return R;const pn=r[m+1];m=I?el(pn):tc(pn)}if(null!==i){let $=b?i.residualClasses:i.residualStyles;null!=$&&(R=Xe($,f))}return R}function _l(r){return void 0!==r}function Uy(r,i=""){const c=hn(),f=Jr(),m=r+22,b=f.firstCreatePass?kd(f,m,1,i,null):f.data[m],I=c[m]=function dh(r,i){return r.createText(i)}(c[11],i);sg(f,c,I,b),q(b,!1)}function Tf(r){return wh("",r,""),Tf}function wh(r,i,c){const f=hn(),m=function Ps(r,i,c,f){return Cu(r,Hn(),c)?i+Be(c)+f:pi}(f,r,i,c);return m!==pi&&Wa(f,et(),m),wh}function wv(r,i,c,f,m){const b=hn(),I=_p(b,r,i,c,f,m);return I!==pi&&Wa(b,et(),I),wv}const al=void 0;var O_=["en",[["a","p"],["AM","PM"],al],[["AM","PM"],al,al],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],al,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],al,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",al,"{1} 'at' {0}",al],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function $y(r){const c=Math.floor(Math.abs(r)),f=r.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===f?1:5}];let Cf={};function Pv(r){const i=function am(r){return r.toLowerCase().replace(/_/g,"-")}(r);let c=Ov(i);if(c)return c;const f=i.split("-")[0];if(c=Ov(f),c)return c;if("en"===f)return O_;throw new $e(701,!1)}function Mp(r){return Pv(r)[jr.PluralCase]}function Ov(r){return r in Cf||(Cf[r]=Yr.ng&&Yr.ng.common&&Yr.ng.common.locales&&Yr.ng.common.locales[r]),Cf[r]}var jr=(()=>((jr=jr||{})[jr.LocaleId=0]="LocaleId",jr[jr.DayPeriodsFormat=1]="DayPeriodsFormat",jr[jr.DayPeriodsStandalone=2]="DayPeriodsStandalone",jr[jr.DaysFormat=3]="DaysFormat",jr[jr.DaysStandalone=4]="DaysStandalone",jr[jr.MonthsFormat=5]="MonthsFormat",jr[jr.MonthsStandalone=6]="MonthsStandalone",jr[jr.Eras=7]="Eras",jr[jr.FirstDayOfWeek=8]="FirstDayOfWeek",jr[jr.WeekendRange=9]="WeekendRange",jr[jr.DateFormat=10]="DateFormat",jr[jr.TimeFormat=11]="TimeFormat",jr[jr.DateTimeFormat=12]="DateTimeFormat",jr[jr.NumberSymbols=13]="NumberSymbols",jr[jr.NumberFormats=14]="NumberFormats",jr[jr.CurrencyCode=15]="CurrencyCode",jr[jr.CurrencySymbol=16]="CurrencySymbol",jr[jr.CurrencyName=17]="CurrencyName",jr[jr.Currencies=18]="Currencies",jr[jr.Directionality=19]="Directionality",jr[jr.PluralCase=20]="PluralCase",jr[jr.ExtraData=21]="ExtraData",jr))();const Ih="en-US";let Nv=Ih;function He(r,i,c,f,m){if(r=Se(r),Array.isArray(r))for(let b=0;b<r.length;b++)He(r[b],i,c,f,m);else{const b=Jr(),I=hn();let R=ml(r)?r:Se(r.provide),$=rh(r);const ce=ds(),Ce=1048575&ce.providerIndexes,Ye=ce.directiveStart,vt=ce.providerIndexes>>20;if(ml(r)||!r.multi){const Ft=new Ho($,m,ff),pn=lt(R,i,m?Ce:Ce+vt,Ye);-1===pn?(ln(dr(ce,I),b,R),nt(b,r,i.length),i.push(R),ce.directiveStart++,ce.directiveEnd++,m&&(ce.providerIndexes+=1048576),c.push(Ft),I.push(Ft)):(c[pn]=Ft,I[pn]=Ft)}else{const Ft=lt(R,i,Ce+vt,Ye),pn=lt(R,i,Ce,Ce+vt),jn=Ft>=0&&c[Ft],er=pn>=0&&c[pn];if(m&&!er||!m&&!jn){ln(dr(ce,I),b,R);const Sr=function hr(r,i,c,f,m){const b=new Ho(r,c,ff);return b.multi=[],b.index=i,b.componentProviders=0,pt(b,m,f&&!c),b}(m?cn:Dt,c.length,m,f,$);!m&&er&&(c[pn].providerFactory=Sr),nt(b,r,i.length,0),i.push(R),ce.directiveStart++,ce.directiveEnd++,m&&(ce.providerIndexes+=1048576),c.push(Sr),I.push(Sr)}else nt(b,r,Ft>-1?Ft:pn,pt(c[m?pn:Ft],$,!m&&f));!m&&f&&er&&c[pn].componentProviders++}}}function nt(r,i,c,f){const m=ml(i),b=function Wp(r){return!!r.useClass}(i);if(m||b){const $=(b?Se(i.useClass):i).prototype.ngOnDestroy;if($){const ce=r.destroyHooks||(r.destroyHooks=[]);if(!m&&i.multi){const Ce=ce.indexOf(c);-1===Ce?ce.push(c,[f,$]):ce[Ce+1].push(f,$)}else ce.push(c,$)}}}function pt(r,i,c){return c&&r.componentProviders++,r.multi.push(i)-1}function lt(r,i,c,f){for(let m=c;m<f;m++)if(i[m]===r)return m;return-1}function Dt(r,i,c,f){return zn(this.multi,[])}function cn(r,i,c,f){const m=this.multi;let b;if(this.providerFactory){const I=this.providerFactory.componentProviders,R=Ca(c,c[1],this.providerFactory.index,f);b=R.slice(0,I),zn(m,b);for(let $=I;$<R.length;$++)b.push(R[$])}else b=[],zn(m,b);return b}function zn(r,i){for(let c=0;c<r.length;c++)i.push((0,r[c])());return i}function Nn(r,i=[]){return c=>{c.providersResolver=(f,m)=>function pe(r,i,c){const f=Jr();if(f.firstCreatePass){const m=ns(r);He(c,f.data,f.blueprint,m,!0),He(i,f.data,f.blueprint,m,!1)}}(f,m?m(r):r,i)}}class Ur{}class za{}function bl(r,i){return new Zy(r,i??null)}class Zy extends Ur{constructor(i,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fp(this);const f=ai(i);this._bootstrapComponents=Dc(f.bootstrap),this._r3Injector=Xf(i,c,[{provide:Ur,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],Ke(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Yy extends za{constructor(i){super(),this.moduleType=i}create(i){return new Zy(this.moduleType,i)}}class p0 extends Ur{constructor(i,c,f){super(),this.componentFactoryResolver=new fp(this),this.instance=null;const m=new Hh([...i,{provide:Ur,useValue:this},{provide:sh,useValue:this.componentFactoryResolver}],c||th(),f,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function Qy(r,i,c=null){return new p0(r,i,c).injector}let B_=(()=>{class r{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const f=Kr(0,c.type),m=f.length>0?Qy([f],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,m)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Bt({token:r,providedIn:"environment",factory:()=>new r($i(sa))}),r})();function V_(r){r.getStandaloneInjector=i=>i.get(B_).getOrCreateStandaloneInjector(r)}function Cb(r,i,c){const f=ot()+r,m=hn();return m[f]===pi?nc(m,f,c?i.call(c):i()):function yp(r,i){return r[i]}(m,f)}function xb(r,i,c,f){return Db(hn(),ot(),r,i,c,f)}function Ib(r,i,c,f,m){return function Ab(r,i,c,f,m,b,I){const R=i+c;return Th(r,R,m,b)?nc(r,R+2,I?f.call(I,m,b):f(m,b)):$_(r,R+2)}(hn(),ot(),r,i,c,f,m)}function $_(r,i){const c=r[i];return c===pi?void 0:c}function Db(r,i,c,f,m,b){const I=i+c;return Cu(r,I,m)?nc(r,I+1,b?f.call(b,m):f(m)):$_(r,I+1)}function Ob(r,i){const c=Jr();let f;const m=r+22;c.firstCreatePass?(f=function oE(r,i){if(i)for(let c=i.length-1;c>=0;c--){const f=i[c];if(r===f.name)return f}}(i,c.pipeRegistry),c.data[m]=f,f.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(m,f.onDestroy)):f=c.data[m];const b=f.factory||(f.factory=to(f.type)),I=ni(ff);try{const R=ja(!1),$=b();return ja(R),function Te(r,i,c,f){c>=r.data.length&&(r.data[c]=null,r.blueprint[c]=null),i[c]=f}(c,hn(),m,$),$}finally{ni(I)}}function Rb(r,i,c){const f=r+22,m=hn(),b=Ji(m,f);return function G_(r,i){return r[1].data[i].pure}(m,f)?Db(m,ot(),i,b.transform,c,b):b.transform(c)}function F0(r){return i=>{setTimeout(r,void 0,i)}}const kf=class dE extends E.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,c,f){let m=i,b=c||(()=>null),I=f;if(i&&"object"==typeof i){const $=i;m=$.next?.bind($),b=$.error?.bind($),I=$.complete?.bind($)}this.__isAsync&&(b=F0(b),m&&(m=F0(m)),I&&(I=F0(I)));const R=super.subscribe({next:m,error:b,complete:I});return i instanceof k.w0&&i.add(R),R}};function hE(){return this._results[Bl()]()}class j0{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Bl(),f=j0.prototype;f[c]||(f[c]=hE)}get changes(){return this._changes||(this._changes=new kf)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,c){return this._results.reduce(i,c)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,c){const f=this;f.dirty=!1;const m=ss(i);(this._changesDetected=!function eu(r,i,c){if(r.length!==i.length)return!1;for(let f=0;f<r.length;f++){let m=r[f],b=i[f];if(c&&(m=c(m),b=c(b)),b!==m)return!1}return!0}(f._results,m,c))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let W_=(()=>{class r{}return r.__NG_ELEMENT_ID__=gE,r})();const fE=W_,pE=class extends fE{constructor(i,c,f){super(),this._declarationLView=i,this._declarationTContainer=c,this.elementRef=f}createEmbeddedView(i,c){const f=this._declarationTContainer.tViews,m=Ag(this._declarationLView,f,i,16,null,f.declTNode,null,null,null,null,c||null);m[17]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[19];return null!==I&&(m[19]=I.createEmbeddedView(f)),Mg(f,m,i),new Pd(m)}};function gE(){return g0(ds(),hn())}function g0(r,i){return 4&r.type?new pE(i,r,C(r,i)):null}let m0=(()=>{class r{}return r.__NG_ELEMENT_ID__=mE,r})();function mE(){return Fb(ds(),hn())}const vE=m0,Nb=class extends vE{constructor(i,c,f){super(),this._lContainer=i,this._hostTNode=c,this._hostLView=f}get element(){return C(this._hostTNode,this._hostLView)}get injector(){return new Ja(this._hostTNode,this._hostLView)}get parentInjector(){const i=Gt(this._hostTNode,this._hostLView);if(Uc(i)){const c=No(i,this._hostLView),f=so(i);return new Ja(c[1].data[f+8],c)}return new Ja(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const c=Lb(this._lContainer);return null!==c&&c[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,c,f){let m,b;"number"==typeof f?m=f:null!=f&&(m=f.index,b=f.injector);const I=i.createEmbeddedView(c||{},b);return this.insert(I,m),I}createComponent(i,c,f,m,b){const I=i&&!function Fi(r){return"function"==typeof r}(i);let R;if(I)R=c;else{const Ye=c||{};R=Ye.index,f=Ye.injector,m=Ye.projectableNodes,b=Ye.environmentInjector||Ye.ngModuleRef}const $=I?i:new zg(bt(i)),ce=f||this.parentInjector;if(!b&&null==$.ngModule){const vt=(I?ce:this.parentInjector).get(sa,null);vt&&(b=vt)}const Ce=$.create(ce,m,void 0,b);return this.insert(Ce.hostView,R),Ce}insert(i,c){const f=i._lView,m=f[1];if(function Ya(r){return bs(r[3])}(f)){const Ce=this.indexOf(i);if(-1!==Ce)this.detach(Ce);else{const Ye=f[3],vt=new Nb(Ye,Ye[6],Ye[3]);vt.detach(vt.indexOf(i))}}const b=this._adjustIndex(c),I=this._lContainer;!function Mc(r,i,c,f){const m=10+f,b=c.length;f>0&&(c[m-1][4]=i),f<b-10?(i[4]=c[m],vu(c,10+f,i)):(c.push(i),i[4]=null),i[3]=c;const I=i[17];null!==I&&c!==I&&function rg(r,i){const c=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===c?r[9]=[i]:c.push(i)}(I,i);const R=i[19];null!==R&&R.insertView(r),i[2]|=64}(m,f,I,b);const R=xm(b,I),$=f[11],ce=ef($,I[7]);return null!==ce&&function Kv(r,i,c,f,m,b){f[0]=m,f[6]=i,Pc(r,f,c,1,m,b)}(m,I[6],$,f,ce,R),i.attachToViewContainerRef(),vu(U0(I),b,i),i}move(i,c){return this.insert(i,c)}indexOf(i){const c=Lb(this._lContainer);return null!==c?c.indexOf(i):-1}remove(i){const c=this._adjustIndex(i,-1),f=Tm(this._lContainer,c);f&&(nu(U0(this._lContainer),c),Zv(f[1],f))}detach(i){const c=this._adjustIndex(i,-1),f=Tm(this._lContainer,c);return f&&null!=nu(U0(this._lContainer),c)?new Pd(f):null}_adjustIndex(i,c=0){return i??this.length+c}};function Lb(r){return r[8]}function U0(r){return r[8]||(r[8]=[])}function Fb(r,i){let c;const f=i[r.index];if(bs(f))c=f;else{let m;if(8&r.type)m=xi(f);else{const b=i[11];m=b.createComment("");const I=ui(r,i);gh(b,ef(b,I),m,function r_(r,i){return r.nextSibling(i)}(b,I),!1)}i[r.index]=c=Sy(f,i,m,r),lp(i,c)}return new Nb(c,r,i)}class B0{constructor(i){this.queryList=i,this.matches=null}clone(){return new B0(this.queryList)}setDirty(){this.queryList.setDirty()}}class V0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const c=i.queries;if(null!==c){const f=null!==i.contentQueries?i.contentQueries[0]:c.length,m=[];for(let b=0;b<f;b++){const I=c.getByIndex(b);m.push(this.queries[I.indexInDeclarationView].clone())}return new V0(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let c=0;c<this.queries.length;c++)null!==zb(i,c).matches&&this.queries[c].setDirty()}}class jb{constructor(i,c,f=null){this.predicate=i,this.flags=c,this.read=f}}class H0{constructor(i=[]){this.queries=i}elementStart(i,c){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(i,c)}elementEnd(i){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(i)}embeddedTView(i){let c=null;for(let f=0;f<this.length;f++){const m=null!==c?c.length:0,b=this.getByIndex(f).embeddedTView(i,m);b&&(b.indexInDeclarationView=f,null!==c?c.push(b):c=[b])}return null!==c?new H0(c):null}template(i,c){for(let f=0;f<this.queries.length;f++)this.queries[f].template(i,c)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class $0{constructor(i,c=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(i,c){this.isApplyingToNode(c)&&this.matchTNode(i,c)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,c){this.elementStart(i,c)}embeddedTView(i,c){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,c),new $0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let f=i.parent;for(;null!==f&&8&f.type&&f.index!==c;)f=f.parent;return c===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(i,c){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const b=f[m];this.matchTNodeWithReadOption(i,c,bE(c,b)),this.matchTNodeWithReadOption(i,c,Ds(c,i,b,!1,!1))}else f===W_?4&c.type&&this.matchTNodeWithReadOption(i,c,-1):this.matchTNodeWithReadOption(i,c,Ds(c,i,f,!1,!1))}matchTNodeWithReadOption(i,c,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===y||m===m0||m===W_&&4&c.type)this.addMatch(c.index,-2);else{const b=Ds(c,i,m,!1,!1);null!==b&&this.addMatch(c.index,b)}else this.addMatch(c.index,f)}}addMatch(i,c){null===this.matches?this.matches=[i,c]:this.matches.push(i,c)}}function bE(r,i){const c=r.localNames;if(null!==c)for(let f=0;f<c.length;f+=2)if(c[f]===i)return c[f+1];return null}function EE(r,i,c,f){return-1===c?function TE(r,i){return 11&r.type?C(r,i):4&r.type?g0(r,i):null}(i,r):-2===c?function SE(r,i,c){return c===y?C(i,r):c===W_?g0(i,r):c===m0?Fb(i,r):void 0}(r,i,f):Ca(r,r[1],c,i)}function Ub(r,i,c,f){const m=i[19].queries[f];if(null===m.matches){const b=r.data,I=c.matches,R=[];for(let $=0;$<I.length;$+=2){const ce=I[$];R.push(ce<0?null:EE(i,b[ce],I[$+1],c.metadata.read))}m.matches=R}return m.matches}function G0(r,i,c,f){const m=r.queries.getByIndex(c),b=m.matches;if(null!==b){const I=Ub(r,i,m,c);for(let R=0;R<b.length;R+=2){const $=b[R];if($>0)f.push(I[R/2]);else{const ce=b[R+1],Ce=i[-$];for(let Ye=10;Ye<Ce.length;Ye++){const vt=Ce[Ye];vt[17]===vt[3]&&G0(vt[1],vt,ce,f)}if(null!==Ce[9]){const Ye=Ce[9];for(let vt=0;vt<Ye.length;vt++){const Ft=Ye[vt];G0(Ft[1],Ft,ce,f)}}}}}return f}function Bb(r){const i=hn(),c=Jr(),f=Ns();wi(f+1);const m=zb(c,f);if(r.dirty&&function Jo(r){return 4==(4&r[2])}(i)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const b=m.crossesNgTemplate?G0(c,i,f,[]):Ub(c,i,m,f);r.reset(b,T),r.notifyOnChanges()}return!0}return!1}function Vb(r,i,c){const f=Jr();f.firstCreatePass&&(Wb(f,new jb(r,i,c),-1),2==(2&i)&&(f.staticViewQueries=!0)),Gb(f,hn(),i)}function Hb(r,i,c,f){const m=Jr();if(m.firstCreatePass){const b=ds();Wb(m,new jb(i,c,f),b.index),function CE(r,i){const c=r.contentQueries||(r.contentQueries=[]);i!==(c.length?c[c.length-1]:-1)&&c.push(r.queries.length-1,i)}(m,r),2==(2&c)&&(m.staticContentQueries=!0)}Gb(m,hn(),c)}function $b(){return function wE(r,i){return r[19].queries[i].queryList}(hn(),Ns())}function Gb(r,i,c){const f=new j0(4==(4&c));bh(r,i,f,f.destroy),null===i[19]&&(i[19]=new V0),i[19].queries.push(new B0(f))}function Wb(r,i,c){null===r.queries&&(r.queries=new H0),r.queries.track(new $0(i,c))}function zb(r,i){return r.queries.getByIndex(i)}function qb(r,i){return g0(r,i)}function y0(...r){}const hT=new Li("Application Initializer");let _0=(()=>{class r{constructor(c){this.appInits=c,this.resolve=y0,this.reject=y0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const c=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const b=this.appInits[m]();if(mn(b))c.push(b);else if(Yn(b)){const I=new Promise((R,$)=>{b.subscribe({complete:R,error:$})});c.push(I)}}Promise.all(c).then(()=>{f()}).catch(m=>{this.reject(m)}),0===c.length&&f(),this.initialized=!0}}return r.\u0275fac=function(c){return new(c||r)($i(hT,8))},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const fT=new Li("AppId",{providedIn:"root",factory:function pT(){return`${Z0()}${Z0()}${Z0()}`}});function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gT=new Li("Platform Initializer"),WE=new Li("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mT=new Li("appBootstrapListener");let zE=(()=>{class r{log(c){console.log(c)}warn(c){console.warn(c)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const b0=new Li("LocaleId",{providedIn:"root",factory:()=>G(b0,en.Optional|en.SkipSelf)||function qE(){return typeof $localize<"u"&&$localize.locale||Ih}()}),KE=new Li("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ZE{constructor(i,c){this.ngModuleFactory=i,this.componentFactories=c}}let YE=(()=>{class r{compileModuleSync(c){return new Yy(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const f=this.compileModuleSync(c),b=Dc(ai(c).declarations).reduce((I,R)=>{const $=bt(R);return $&&I.push(new zg($)),I},[]);return new ZE(f,b)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const JE=(()=>Promise.resolve(0))();function Y0(r){typeof Zone>"u"?JE.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Vd{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kf(!1),this.onMicrotaskEmpty=new kf(!1),this.onStable=new kf(!1),this.onError=new kf(!1),typeof Zone>"u")throw new $e(908,!1);Zone.assertZonePatched();const m=this;if(m._nesting=0,m._outer=m._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const b=Zone.AsyncStackTaggingZoneSpec;m._inner=m._inner.fork(new b("Angular"))}Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&c,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function eS(){let r=Yr.requestAnimationFrame,i=Yr.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c);const f=i[Zone.__symbol__("OriginalDelegate")];f&&(i=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function rS(r){const i=()=>{!function nS(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Yr,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,X0(r),r.isCheckStableRunning=!0,Q0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),X0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,f,m,b,I,R)=>{try{return _T(r),c.invokeTask(m,b,I,R)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||r.shouldCoalesceRunChangeDetection)&&i(),bT(r)}},onInvoke:(c,f,m,b,I,R,$)=>{try{return _T(r),c.invoke(m,b,I,R,$)}finally{r.shouldCoalesceRunChangeDetection&&i(),bT(r)}},onHasTask:(c,f,m,b)=>{c.hasTask(m,b),f===m&&("microTask"==b.change?(r._hasPendingMicrotasks=b.microTask,X0(r),Q0(r)):"macroTask"==b.change&&(r.hasPendingMacrotasks=b.macroTask))},onHandleError:(c,f,m,b)=>(c.handleError(m,b),r.runOutsideAngular(()=>r.onError.emit(b)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vd.isInAngularZone())throw new $e(909,!1)}static assertNotInAngularZone(){if(Vd.isInAngularZone())throw new $e(909,!1)}run(i,c,f){return this._inner.run(i,c,f)}runTask(i,c,f,m){const b=this._inner,I=b.scheduleEventTask("NgZoneEvent: "+m,i,tS,y0,y0);try{return b.runTask(I,c,f)}finally{b.cancelTask(I)}}runGuarded(i,c,f){return this._inner.runGuarded(i,c,f)}runOutsideAngular(i){return this._outer.run(i)}}const tS={};function Q0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function X0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function _T(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function bT(r){r._nesting--,Q0(r)}class iS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kf,this.onMicrotaskEmpty=new kf,this.onStable=new kf,this.onError=new kf}run(i,c,f){return i.apply(c,f)}runGuarded(i,c,f){return i.apply(c,f)}runOutsideAngular(i){return i()}runTask(i,c,f,m){return i.apply(c,f)}}const TT=new Li(""),ET=new Li("");let J0,sS=(()=>{class r{constructor(c,f,m){this._ngZone=c,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,J0||(function oS(r){J0=r}(m),m.addToWindow(f)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vd.assertNotInAngularZone(),Y0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Y0(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(c)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,f,m){let b=-1;f&&f>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==b),c(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:c,timeoutId:b,updateCb:m})}whenStable(c,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,f,m){return[]}}return r.\u0275fac=function(c){return new(c||r)($i(Vd),$i(ST),$i(ET))},r.\u0275prov=Bt({token:r,factory:r.\u0275fac}),r})(),ST=(()=>{class r{constructor(){this._applications=new Map}registerApplication(c,f){this._applications.set(c,f)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,f=!0){return J0?.findTestabilityInTree(this,c,f)??null}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),dm=null;const wT=new Li("AllowMultipleToken"),eb=new Li("PlatformDestroyListeners");class lS{constructor(i,c){this.name=i,this.token=c}}function xT(r,i,c=[]){const f=`Platform: ${i}`,m=new Li(f);return(b=[])=>{let I=tb();if(!I||I.injector.get(wT,!1)){const R=[...c,...b,{provide:m,useValue:!0}];r?r(R):function cS(r){if(dm&&!dm.get(wT,!1))throw new $e(400,!1);dm=r;const i=r.get(DT);(function CT(r){const i=r.get(gT,null);i&&i.forEach(c=>c())})(r)}(function IT(r=[],i){return Qc.create({name:i,providers:[{provide:Sc,useValue:"platform"},{provide:eb,useValue:new Set([()=>dm=null])},...r]})}(R,f))}return function hS(r){const i=tb();if(!i)throw new $e(401,!1);return i}()}}function tb(){return dm?.get(DT)??null}let DT=(()=>{class r{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,f){const m=function kT(r,i){let c;return c="noop"===r?new iS:("zone.js"===r?void 0:r)||new Vd(i),c}(f?.ngZone,function AT(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(f)),b=[{provide:Vd,useValue:m}];return m.run(()=>{const I=Qc.create({providers:b,parent:this.injector,name:c.moduleType.name}),R=c.create(I),$=R.injector.get(Qu,null);if(!$)throw new $e(402,!1);return m.runOutsideAngular(()=>{const ce=m.onError.subscribe({next:Ce=>{$.handleError(Ce)}});R.onDestroy(()=>{E0(this._modules,R),ce.unsubscribe()})}),function MT(r,i,c){try{const f=c();return mn(f)?f.catch(m=>{throw i.runOutsideAngular(()=>r.handleError(m)),m}):f}catch(f){throw i.runOutsideAngular(()=>r.handleError(f)),f}}($,m,()=>{const ce=R.injector.get(_0);return ce.runInitializers(),ce.donePromise.then(()=>(function Ah(r){kt(r,"Expected localeId to be defined"),"string"==typeof r&&(Nv=r.toLowerCase().replace(/_/g,"-"))}(R.injector.get(b0,Ih)||Ih),this._moduleDoBootstrap(R),R))})})}bootstrapModule(c,f=[]){const m=PT({},f);return function aS(r,i,c){const f=new Yy(c);return Promise.resolve(f)}(0,0,c).then(b=>this.bootstrapModuleFactory(b,m))}_moduleDoBootstrap(c){const f=c.injector.get(T0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!c.instance.ngDoBootstrap)throw new $e(403,!1);c.instance.ngDoBootstrap(f)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const c=this._injector.get(eb,null);c&&(c.forEach(f=>f()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(c){return new(c||r)($i(Qc))},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function PT(r,i){return Array.isArray(i)?i.reduce(PT,r):{...r,...i}}let T0=(()=>{class r{constructor(c,f,m){this._zone=c,this._injector=f,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new ee.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),I=new ee.y(R=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{Vd.assertNotInAngularZone(),Y0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const ce=this._zone.onUnstable.subscribe(()=>{Vd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{$.unsubscribe(),ce.unsubscribe()}});this.isStable=(0,Ue.T)(b,I.pipe((0,Pe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,f){const m=c instanceof md;if(!this._injector.get(_0).done)throw!m&&$r(c),new $e(405,false);let I;I=m?c:this._injector.get(sh).resolveComponentFactory(c),this.componentTypes.push(I.componentType);const R=function uS(r){return r.isBoundToModule}(I)?void 0:this._injector.get(Ur),ce=I.create(Qc.NULL,[],f||I.selector,R),Ce=ce.location.nativeElement,Ye=ce.injector.get(TT,null);return Ye?.registerApplication(Ce),ce.onDestroy(()=>{this.detachView(ce.hostView),E0(this.components,ce),Ye?.unregisterApplication(Ce)}),this._loadComponent(ce),ce}tick(){if(this._runningTick)throw new $e(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const f=c;this._views.push(f),f.attachToAppRef(this)}detachView(c){const f=c;E0(this._views,f),f.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(mT,[]).concat(this._bootstrapListeners).forEach(m=>m(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>E0(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new $e(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(c){return new(c||r)($i(Vd),$i(sa),$i(Qu))},r.\u0275prov=Bt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function E0(r,i){const c=r.indexOf(i);c>-1&&r.splice(c,1)}let RT=!0,NT=!1;function pS(){return NT=!0,RT}function gS(){if(NT)throw new Error("Cannot enable prod mode after platform setup.");RT=!1}let mS=(()=>{class r{}return r.__NG_ELEMENT_ID__=vS,r})();function vS(r){return function yS(r,i,c){if(ko(r)&&!c){const f=Br(r.index,i);return new Pd(f,f)}return 47&r.type?new Pd(i[16],i):null}(ds(),hn(),16==(16&r))}class UT{constructor(){}supports(i){return vp(i)}create(i){return new wS(i)}}const SS=(r,i)=>i;class wS{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||SS}forEachItem(i){let c;for(c=this._itHead;null!==c;c=c._next)i(c)}forEachOperation(i){let c=this._itHead,f=this._removalsHead,m=0,b=null;for(;c||f;){const I=!f||c&&c.currentIndex<VT(f,m,b)?c:f,R=VT(I,m,b),$=I.currentIndex;if(I===f)m--,f=f._nextRemoved;else if(c=c._next,null==I.previousIndex)m++;else{b||(b=[]);const ce=R-m,Ce=$-m;if(ce!=Ce){for(let vt=0;vt<ce;vt++){const Ft=vt<b.length?b[vt]:b[vt]=0,pn=Ft+vt;Ce<=pn&&pn<ce&&(b[vt]=Ft+1)}b[I.previousIndex]=Ce-ce}}R!==$&&i(I,R,$)}}forEachPreviousItem(i){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)i(c)}forEachAddedItem(i){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)i(c)}forEachMovedItem(i){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)i(c)}forEachRemovedItem(i){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)i(c)}forEachIdentityChange(i){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)i(c)}diff(i){if(null==i&&(i=[]),!vp(i))throw new $e(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,b,I,c=this._itHead,f=!1;if(Array.isArray(i)){this.length=i.length;for(let R=0;R<this.length;R++)b=i[R],I=this._trackByFn(R,b),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,b,I,R)),Object.is(c.item,b)||this._addIdentityChange(c,b)):(c=this._mismatch(c,b,I,R),f=!0),c=c._next}else m=0,function w_(r,i){if(Array.isArray(r))for(let c=0;c<r.length;c++)i(r[c]);else{const c=r[Bl()]();let f;for(;!(f=c.next()).done;)i(f.value)}}(i,R=>{I=this._trackByFn(m,R),null!==c&&Object.is(c.trackById,I)?(f&&(c=this._verifyReinsertion(c,R,I,m)),Object.is(c.item,R)||this._addIdentityChange(c,R)):(c=this._mismatch(c,R,I,m),f=!0),c=c._next,m++}),this.length=m;return this._truncate(c),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,c,f,m){let b;return null===i?b=this._itTail:(b=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(i.item,c)||this._addIdentityChange(i,c),this._reinsertAfter(i,b,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(i.item,c)||this._addIdentityChange(i,c),this._moveAfter(i,b,m)):i=this._addAfter(new CS(c,f),b,m),i}_verifyReinsertion(i,c,f,m){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==b?i=this._reinsertAfter(b,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const c=i._next;this._addToRemovals(this._unlink(i)),i=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,c,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,b=i._nextRemoved;return null===m?this._removalsHead=b:m._nextRemoved=b,null===b?this._removalsTail=m:b._prevRemoved=m,this._insertAfter(i,c,f),this._addToMoves(i,f),i}_moveAfter(i,c,f){return this._unlink(i),this._insertAfter(i,c,f),this._addToMoves(i,f),i}_addAfter(i,c,f){return this._insertAfter(i,c,f),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,c,f){const m=null===c?this._itHead:c._next;return i._next=m,i._prev=c,null===m?this._itTail=i:m._prev=i,null===c?this._itHead=i:c._next=i,null===this._linkedRecords&&(this._linkedRecords=new BT),this._linkedRecords.put(i),i.currentIndex=f,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const c=i._prev,f=i._next;return null===c?this._itHead=f:c._next=f,null===f?this._itTail=c:f._prev=c,i}_addToMoves(i,c){return i.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BT),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,c){return i.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class CS{constructor(i,c){this.item=i,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xS{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,c){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===c||c<=f.currentIndex)&&Object.is(f.trackById,i))return f;return null}remove(i){const c=i._prevDup,f=i._nextDup;return null===c?this._head=f:c._nextDup=f,null===f?this._tail=c:f._prevDup=c,null===this._head}}class BT{constructor(){this.map=new Map}put(i){const c=i.trackById;let f=this.map.get(c);f||(f=new xS,this.map.set(c,f)),f.add(i)}get(i,c){const m=this.map.get(i);return m?m.get(i,c):null}remove(i){const c=i.trackById;return this.map.get(c).remove(i)&&this.map.delete(c),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VT(r,i,c){const f=r.previousIndex;if(null===f)return f;let m=0;return c&&f<c.length&&(m=c[f]),f+i+m}class HT{constructor(){}supports(i){return i instanceof Map||Qg(i)}create(){return new IS}}class IS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let c;for(c=this._mapHead;null!==c;c=c._next)i(c)}forEachPreviousItem(i){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)i(c)}forEachChangedItem(i){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)i(c)}forEachAddedItem(i){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)i(c)}forEachRemovedItem(i){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)i(c)}diff(i){if(i){if(!(i instanceof Map||Qg(i)))throw new $e(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(i,(f,m)=>{if(c&&c.key===m)this._maybeAddToChanges(c,f),this._appendAfter=c,c=c._next;else{const b=this._getOrCreateRecordForKey(m,f);c=this._insertBeforeOrAppend(c,b)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let f=c;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,c){if(i){const f=i._prev;return c._next=i,c._prev=f,i._prev=c,f&&(f._next=c),i===this._mapHead&&(this._mapHead=c),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(i,c){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,c);const b=m._prev,I=m._next;return b&&(b._next=I),I&&(I._prev=b),m._next=null,m._prev=null,m}const f=new DS(i);return this._records.set(i,f),f.currentValue=c,this._addToAdditions(f),f}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,c){Object.is(c,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=c,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,c){i instanceof Map?i.forEach(c):Object.keys(i).forEach(f=>c(i[f],f))}}class DS{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $T(){return new ob([new UT])}let ob=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(null!=f){const m=f.factories.slice();c=c.concat(m)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||$T()),deps:[[r,new Pr,new Wn]]}}find(c){const f=this.factories.find(m=>m.supports(c));if(null!=f)return f;throw new $e(901,!1)}}return r.\u0275prov=Bt({token:r,providedIn:"root",factory:$T}),r})();function GT(){return new ab([new HT])}let ab=(()=>{class r{constructor(c){this.factories=c}static create(c,f){if(f){const m=f.factories.slice();c=c.concat(m)}return new r(c)}static extend(c){return{provide:r,useFactory:f=>r.create(c,f||GT()),deps:[[r,new Pr,new Wn]]}}find(c){const f=this.factories.find(m=>m.supports(c));if(f)return f;throw new $e(901,!1)}}return r.\u0275prov=Bt({token:r,providedIn:"root",factory:GT}),r})();const MS=xT(null,"core",[]);let PS=(()=>{class r{constructor(c){}}return r.\u0275fac=function(c){return new(c||r)($i(T0))},r.\u0275mod=Dn({type:r}),r.\u0275inj=Jt({}),r})();function OS(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(Yt,at,W)=>{"use strict";W.d(at,{Cf:()=>ze,F:()=>js,Fj:()=>mt,JJ:()=>en,JL:()=>pr,JU:()=>Ke,Kr:()=>ca,NI:()=>Ws,On:()=>qa,Q7:()=>Eo,UX:()=>Au,YN:()=>Ka,_Y:()=>Qo,c5:()=>fr,cw:()=>bt,kI:()=>Z,oH:()=>Rs,sg:()=>Vo,u5:()=>So});var E=W(4650),k=W(6895),ee=W(8996),Ue=W(4128),Pe=W(4004);let Le=(()=>{class ie{constructor(q,ke){this._renderer=q,this._elementRef=ke,this.onChange=Ut=>{},this.onTouched=()=>{}}setProperty(q,ke){this._renderer.setProperty(this._elementRef.nativeElement,q,ke)}registerOnTouched(q){this.onTouched=q}registerOnChange(q){this.onChange=q}setDisabledState(q){this.setProperty("disabled",q)}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(E.Qsj),E.Y36(E.SBq))},ie.\u0275dir=E.lG2({type:ie}),ie})(),se=(()=>{class ie extends Le{}return ie.\u0275fac=function(){let Q;return function(ke){return(Q||(Q=E.n5z(ie)))(ke||ie)}}(),ie.\u0275dir=E.lG2({type:ie,features:[E.qOj]}),ie})();const Ke=new E.OlP("NgValueAccessor"),Re={provide:Ke,useExisting:(0,E.Gpc)(()=>mt),multi:!0},ut=new E.OlP("CompositionEventMode");let mt=(()=>{class ie extends Le{constructor(q,ke,Ut){super(q,ke),this._compositionMode=Ut,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Se(){const ie=(0,k.q)()?(0,k.q)().getUserAgent():"";return/android (\d+)/.test(ie.toLowerCase())}())}writeValue(q){this.setProperty("value",q??"")}_handleInput(q){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(q)}_compositionStart(){this._composing=!0}_compositionEnd(q){this._composing=!1,this._compositionMode&&this.onChange(q)}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(ut,8))},ie.\u0275dir=E.lG2({type:ie,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(q,ke){1&q&&E.NdJ("input",function(re){return ke._handleInput(re.target.value)})("blur",function(){return ke.onTouched()})("compositionstart",function(){return ke._compositionStart()})("compositionend",function(re){return ke._compositionEnd(re.target.value)})},features:[E._Bn([Re]),E.qOj]}),ie})();function jt(ie){return null==ie||("string"==typeof ie||Array.isArray(ie))&&0===ie.length}function Be(ie){return null!=ie&&"number"==typeof ie.length}const ze=new E.OlP("NgValidators"),yt=new E.OlP("NgAsyncValidators"),le=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Z{static min(Q){return function xe(ie){return Q=>{if(jt(Q.value)||jt(ie))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q<ie?{min:{min:ie,actual:Q.value}}:null}}(Q)}static max(Q){return function We(ie){return Q=>{if(jt(Q.value)||jt(ie))return null;const q=parseFloat(Q.value);return!isNaN(q)&&q>ie?{max:{max:ie,actual:Q.value}}:null}}(Q)}static required(Q){return _t(Q)}static requiredTrue(Q){return function Et(ie){return!0===ie.value?null:{required:!0}}(Q)}static email(Q){return function H(ie){return jt(ie.value)||le.test(ie.value)?null:{email:!0}}(Q)}static minLength(Q){return function he(ie){return Q=>jt(Q.value)||!Be(Q.value)?null:Q.value.length<ie?{minlength:{requiredLength:ie,actualLength:Q.value.length}}:null}(Q)}static maxLength(Q){return function fe(ie){return Q=>Be(Q.value)&&Q.value.length>ie?{maxlength:{requiredLength:ie,actualLength:Q.value.length}}:null}(Q)}static pattern(Q){return Fe(Q)}static nullValidator(Q){return null}static compose(Q){return dt(Q)}static composeAsync(Q){return $t(Q)}}function _t(ie){return jt(ie.value)?{required:!0}:null}function Fe(ie){if(!ie)return Me;let Q,q;return"string"==typeof ie?(q="","^"!==ie.charAt(0)&&(q+="^"),q+=ie,"$"!==ie.charAt(ie.length-1)&&(q+="$"),Q=new RegExp(q)):(q=ie.toString(),Q=ie),ke=>{if(jt(ke.value))return null;const Ut=ke.value;return Q.test(Ut)?null:{pattern:{requiredPattern:q,actualValue:Ut}}}}function Me(ie){return null}function Ge(ie){return null!=ie}function ct(ie){return(0,E.QGY)(ie)?(0,ee.D)(ie):ie}function St(ie){let Q={};return ie.forEach(q=>{Q=null!=q?{...Q,...q}:Q}),0===Object.keys(Q).length?null:Q}function Tt(ie,Q){return Q.map(q=>q(ie))}function kt(ie){return ie.map(Q=>function Pt(ie){return!ie.validate}(Q)?Q:q=>Q.validate(q))}function dt(ie){if(!ie)return null;const Q=ie.filter(Ge);return 0==Q.length?null:function(q){return St(Tt(q,Q))}}function Ht(ie){return null!=ie?dt(kt(ie)):null}function $t(ie){if(!ie)return null;const Q=ie.filter(Ge);return 0==Q.length?null:function(q){const ke=Tt(q,Q).map(ct);return(0,Ue.D)(ke).pipe((0,Pe.U)(St))}}function rn(ie){return null!=ie?$t(kt(ie)):null}function Bt(ie,Q){return null===ie?[Q]:Array.isArray(ie)?[...ie,Q]:[ie,Q]}function _n(ie){return ie._rawValidators}function Jt(ie){return ie._rawAsyncValidators}function qn(ie){return ie?Array.isArray(ie)?ie:[ie]:[]}function Qn(ie,Q){return Array.isArray(ie)?ie.includes(Q):ie===Q}function wr(ie,Q){const q=qn(Q);return qn(ie).forEach(Ut=>{Qn(q,Ut)||q.push(Ut)}),q}function vr(ie,Q){return qn(Q).filter(q=>!Qn(ie,q))}class Ci{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Q){this._rawValidators=Q||[],this._composedValidatorFn=Ht(this._rawValidators)}_setAsyncValidators(Q){this._rawAsyncValidators=Q||[],this._composedAsyncValidatorFn=rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Q){this._onDestroyCallbacks.push(Q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Q=>Q()),this._onDestroyCallbacks=[]}reset(Q){this.control&&this.control.reset(Q)}hasError(Q,q){return!!this.control&&this.control.hasError(Q,q)}getError(Q,q){return this.control?this.control.getError(Q,q):null}}class cr extends Ci{get formDirective(){return null}get path(){return null}}class tr extends Ci{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Nr{constructor(Q){this._cd=Q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let en=(()=>{class ie extends Nr{constructor(q){super(q)}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(tr,2))},ie.\u0275dir=E.lG2({type:ie,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(q,ke){2&q&&E.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)},features:[E.qOj]}),ie})(),pr=(()=>{class ie extends Nr{constructor(q){super(q)}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(cr,10))},ie.\u0275dir=E.lG2({type:ie,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(q,ke){2&q&&E.ekj("ng-untouched",ke.isUntouched)("ng-touched",ke.isTouched)("ng-pristine",ke.isPristine)("ng-dirty",ke.isDirty)("ng-valid",ke.isValid)("ng-invalid",ke.isInvalid)("ng-pending",ke.isPending)("ng-submitted",ke.isSubmitted)},features:[E.qOj]}),ie})();const ri="VALID",Qi="INVALID",Mn="PENDING",Qt="DISABLED";function Rn(ie){return(it(ie)?ie.validators:ie)||null}function rr(ie){return Array.isArray(ie)?Ht(ie):ie||null}function sr(ie,Q){return(it(Q)?Q.asyncValidators:ie)||null}function Dn(ie){return Array.isArray(ie)?rn(ie):ie||null}function it(ie){return null!=ie&&!Array.isArray(ie)&&"object"==typeof ie}class qt{constructor(Q,q){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Q,this._rawAsyncValidators=q,this._composedValidatorFn=rr(this._rawValidators),this._composedAsyncValidatorFn=Dn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Q){this._rawValidators=this._composedValidatorFn=Q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Q){this._rawAsyncValidators=this._composedAsyncValidatorFn=Q}get parent(){return this._parent}get valid(){return this.status===ri}get invalid(){return this.status===Qi}get pending(){return this.status==Mn}get disabled(){return this.status===Qt}get enabled(){return this.status!==Qt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Q){this._rawValidators=Q,this._composedValidatorFn=rr(Q)}setAsyncValidators(Q){this._rawAsyncValidators=Q,this._composedAsyncValidatorFn=Dn(Q)}addValidators(Q){this.setValidators(wr(Q,this._rawValidators))}addAsyncValidators(Q){this.setAsyncValidators(wr(Q,this._rawAsyncValidators))}removeValidators(Q){this.setValidators(vr(Q,this._rawValidators))}removeAsyncValidators(Q){this.setAsyncValidators(vr(Q,this._rawAsyncValidators))}hasValidator(Q){return Qn(this._rawValidators,Q)}hasAsyncValidator(Q){return Qn(this._rawAsyncValidators,Q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Q={}){this.touched=!0,this._parent&&!Q.onlySelf&&this._parent.markAsTouched(Q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Q=>Q.markAllAsTouched())}markAsUntouched(Q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(q=>{q.markAsUntouched({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}markAsDirty(Q={}){this.pristine=!1,this._parent&&!Q.onlySelf&&this._parent.markAsDirty(Q)}markAsPristine(Q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(q=>{q.markAsPristine({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}markAsPending(Q={}){this.status=Mn,!1!==Q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Q.onlySelf&&this._parent.markAsPending(Q)}disable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=Qt,this.errors=null,this._forEachChild(ke=>{ke.disable({...Q,onlySelf:!0})}),this._updateValue(),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(ke=>ke(!0))}enable(Q={}){const q=this._parentMarkedDirty(Q.onlySelf);this.status=ri,this._forEachChild(ke=>{ke.enable({...Q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent}),this._updateAncestors({...Q,skipPristineCheck:q}),this._onDisabledChange.forEach(ke=>ke(!1))}_updateAncestors(Q){this._parent&&!Q.onlySelf&&(this._parent.updateValueAndValidity(Q),Q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Q){this._parent=Q}getRawValue(){return this.value}updateValueAndValidity(Q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ri||this.status===Mn)&&this._runAsyncValidator(Q.emitEvent)),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.updateValueAndValidity(Q)}_updateTreeValidity(Q={emitEvent:!0}){this._forEachChild(q=>q._updateTreeValidity(Q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qt:ri}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Q){if(this.asyncValidator){this.status=Mn,this._hasOwnPendingAsyncValidator=!0;const q=ct(this.asyncValidator(this));this._asyncValidationSubscription=q.subscribe(ke=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ke,{emitEvent:Q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Q,q={}){this.errors=Q,this._updateControlsErrors(!1!==q.emitEvent)}get(Q){let q=Q;return null==q||(Array.isArray(q)||(q=q.split(".")),0===q.length)?null:q.reduce((ke,Ut)=>ke&&ke._find(Ut),this)}getError(Q,q){const ke=q?this.get(q):this;return ke&&ke.errors?ke.errors[Q]:null}hasError(Q,q){return!!this.getError(Q,q)}get root(){let Q=this;for(;Q._parent;)Q=Q._parent;return Q}_updateControlsErrors(Q){this.status=this._calculateStatus(),Q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Q)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?Qt:this.errors?Qi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mn)?Mn:this._anyControlsHaveStatus(Qi)?Qi:ri}_anyControlsHaveStatus(Q){return this._anyControls(q=>q.status===Q)}_anyControlsDirty(){return this._anyControls(Q=>Q.dirty)}_anyControlsTouched(){return this._anyControls(Q=>Q.touched)}_updatePristine(Q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}_updateTouched(Q={}){this.touched=this._anyControlsTouched(),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}_registerOnCollectionChange(Q){this._onCollectionChange=Q}_setUpdateStrategy(Q){it(Q)&&null!=Q.updateOn&&(this._updateOn=Q.updateOn)}_parentMarkedDirty(Q){return!Q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Q){return null}}class bt extends qt{constructor(Q,q,ke){super(Rn(q),sr(ke,q)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(q),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Q,q){return this.controls[Q]?this.controls[Q]:(this.controls[Q]=q,q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange),q)}addControl(Q,q,ke={}){this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}removeControl(Q,q={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}setControl(Q,q,ke={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],q&&this.registerControl(Q,q),this.updateValueAndValidity({emitEvent:ke.emitEvent}),this._onCollectionChange()}contains(Q){return this.controls.hasOwnProperty(Q)&&this.controls[Q].enabled}setValue(Q,q={}){(function ht(ie,Q,q){ie._forEachChild((ke,Ut)=>{if(void 0===q[Ut])throw new E.vHH(1002,"")})})(this,0,Q),Object.keys(Q).forEach(ke=>{(function rt(ie,Q,q){const ke=ie.controls;if(!(Q?Object.keys(ke):ke).length)throw new E.vHH(1e3,"");if(!ke[q])throw new E.vHH(1001,"")})(this,!0,ke),this.controls[ke].setValue(Q[ke],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q)}patchValue(Q,q={}){null!=Q&&(Object.keys(Q).forEach(ke=>{const Ut=this.controls[ke];Ut&&Ut.patchValue(Q[ke],{onlySelf:!0,emitEvent:q.emitEvent})}),this.updateValueAndValidity(q))}reset(Q={},q={}){this._forEachChild((ke,Ut)=>{ke.reset(Q[Ut],{onlySelf:!0,emitEvent:q.emitEvent})}),this._updatePristine(q),this._updateTouched(q),this.updateValueAndValidity(q)}getRawValue(){return this._reduceChildren({},(Q,q,ke)=>(Q[ke]=q.getRawValue(),Q))}_syncPendingControls(){let Q=this._reduceChildren(!1,(q,ke)=>!!ke._syncPendingControls()||q);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){Object.keys(this.controls).forEach(q=>{const ke=this.controls[q];ke&&Q(ke,q)})}_setUpControls(){this._forEachChild(Q=>{Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Q){for(const[q,ke]of Object.entries(this.controls))if(this.contains(q)&&Q(ke))return!0;return!1}_reduceValue(){return this._reduceChildren({},(q,ke,Ut)=>((ke.enabled||this.disabled)&&(q[Ut]=ke.value),q))}_reduceChildren(Q,q){let ke=Q;return this._forEachChild((Ut,re)=>{ke=q(ke,Ut,re)}),ke}_allControlsDisabled(){for(const Q of Object.keys(this.controls))if(this.controls[Q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Q){return this.controls.hasOwnProperty(Q)?this.controls[Q]:null}}function K(ie,Q){xt(ie,Q),Q.valueAccessor.writeValue(ie.value),ie.disabled&&Q.valueAccessor.setDisabledState?.(!0),function Ln(ie,Q){Q.valueAccessor.registerOnChange(q=>{ie._pendingValue=q,ie._pendingChange=!0,ie._pendingDirty=!0,"change"===ie.updateOn&&br(ie,Q)})}(ie,Q),function yi(ie,Q){const q=(ke,Ut)=>{Q.valueAccessor.writeValue(ke),Ut&&Q.viewToModelUpdate(ke)};ie.registerOnChange(q),Q._registerOnDestroy(()=>{ie._unregisterOnChange(q)})}(ie,Q),function Kn(ie,Q){Q.valueAccessor.registerOnTouched(()=>{ie._pendingTouched=!0,"blur"===ie.updateOn&&ie._pendingChange&&br(ie,Q),"submit"!==ie.updateOn&&ie.markAsTouched()})}(ie,Q),function Ze(ie,Q){if(Q.valueAccessor.setDisabledState){const q=ke=>{Q.valueAccessor.setDisabledState(ke)};ie.registerOnDisabledChange(q),Q._registerOnDestroy(()=>{ie._unregisterOnDisabledChange(q)})}}(ie,Q)}function ae(ie,Q,q=!0){const ke=()=>{};Q.valueAccessor&&(Q.valueAccessor.registerOnChange(ke),Q.valueAccessor.registerOnTouched(ke)),dn(ie,Q),ie&&(Q._invokeOnDestroyCallbacks(),ie._registerOnCollectionChange(()=>{}))}function ve(ie,Q){ie.forEach(q=>{q.registerOnValidatorChange&&q.registerOnValidatorChange(Q)})}function xt(ie,Q){const q=_n(ie);null!==Q.validator?ie.setValidators(Bt(q,Q.validator)):"function"==typeof q&&ie.setValidators([q]);const ke=Jt(ie);null!==Q.asyncValidator?ie.setAsyncValidators(Bt(ke,Q.asyncValidator)):"function"==typeof ke&&ie.setAsyncValidators([ke]);const Ut=()=>ie.updateValueAndValidity();ve(Q._rawValidators,Ut),ve(Q._rawAsyncValidators,Ut)}function dn(ie,Q){let q=!1;if(null!==ie){if(null!==Q.validator){const Ut=_n(ie);if(Array.isArray(Ut)&&Ut.length>0){const re=Ut.filter(J=>J!==Q.validator);re.length!==Ut.length&&(q=!0,ie.setValidators(re))}}if(null!==Q.asyncValidator){const Ut=Jt(ie);if(Array.isArray(Ut)&&Ut.length>0){const re=Ut.filter(J=>J!==Q.asyncValidator);re.length!==Ut.length&&(q=!0,ie.setAsyncValidators(re))}}}const ke=()=>{};return ve(Q._rawValidators,ke),ve(Q._rawAsyncValidators,ke),q}function br(ie,Q){ie._pendingDirty&&ie.markAsDirty(),ie.setValue(ie._pendingValue,{emitModelToViewChange:!1}),Q.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1}function ar(ie,Q){xt(ie,Q)}function bi(ie,Q){if(!ie.hasOwnProperty("model"))return!1;const q=ie.model;return!!q.isFirstChange()||!Object.is(Q,q.currentValue)}function Pi(ie,Q){ie._syncPendingControls(),Q.forEach(q=>{const ke=q.control;"submit"===ke.updateOn&&ke._pendingChange&&(q.viewToModelUpdate(ke._pendingValue),ke._pendingChange=!1)})}function Bi(ie,Q){if(!Q)return null;let q,ke,Ut;return Array.isArray(Q),Q.forEach(re=>{re.constructor===mt?q=re:function gs(ie){return Object.getPrototypeOf(ie.constructor)===se}(re)?ke=re:Ut=re}),Ut||ke||q||null}const _o={provide:cr,useExisting:(0,E.Gpc)(()=>js)},_s=(()=>Promise.resolve())();let js=(()=>{class ie extends cr{constructor(q,ke){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new bt({},Ht(q),rn(ke))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(q){_s.then(()=>{const ke=this._findContainer(q.path);q.control=ke.registerControl(q.name,q.control),K(q.control,q),q.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(q)})}getControl(q){return this.form.get(q.path)}removeControl(q){_s.then(()=>{const ke=this._findContainer(q.path);ke&&ke.removeControl(q.name),this._directives.delete(q)})}addFormGroup(q){_s.then(()=>{const ke=this._findContainer(q.path),Ut=new bt({});ar(Ut,q),ke.registerControl(q.name,Ut),Ut.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(q){_s.then(()=>{const ke=this._findContainer(q.path);ke&&ke.removeControl(q.name)})}getFormGroup(q){return this.form.get(q.path)}updateModel(q,ke){_s.then(()=>{this.form.get(q.path).setValue(ke)})}setValue(q){this.control.setValue(q)}onSubmit(q){return this.submitted=!0,Pi(this.form,this._directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(q){return q.pop(),q.length?this.form.get(q):this.form}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(ze,10),E.Y36(yt,10))},ie.\u0275dir=E.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(q,ke){1&q&&E.NdJ("submit",function(re){return ke.onSubmit(re)})("reset",function(){return ke.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([_o]),E.qOj]}),ie})();function co(ie,Q){const q=ie.indexOf(Q);q>-1&&ie.splice(q,1)}function Us(ie){return"object"==typeof ie&&null!==ie&&2===Object.keys(ie).length&&"value"in ie&&"disabled"in ie}const Ws=class extends qt{constructor(Q=null,q,ke){super(Rn(q),sr(ke,q)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Q),this._setUpdateStrategy(q),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),it(q)&&(q.nonNullable||q.initialValueIsDefault)&&(this.defaultValue=Us(Q)?Q.value:Q)}setValue(Q,q={}){this.value=this._pendingValue=Q,this._onChange.length&&!1!==q.emitModelToViewChange&&this._onChange.forEach(ke=>ke(this.value,!1!==q.emitViewToModelChange)),this.updateValueAndValidity(q)}patchValue(Q,q={}){this.setValue(Q,q)}reset(Q=this.defaultValue,q={}){this._applyFormState(Q),this.markAsPristine(q),this.markAsUntouched(q),this.setValue(this.value,q),this._pendingChange=!1}_updateValue(){}_anyControls(Q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Q){this._onChange.push(Q)}_unregisterOnChange(Q){co(this._onChange,Q)}registerOnDisabledChange(Q){this._onDisabledChange.push(Q)}_unregisterOnDisabledChange(Q){co(this._onDisabledChange,Q)}_forEachChild(Q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Q){Us(Q)?(this.value=this._pendingValue=Q.value,Q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Q}},lu={provide:tr,useExisting:(0,E.Gpc)(()=>qa)},xs=(()=>Promise.resolve())();let qa=(()=>{class ie extends tr{constructor(q,ke,Ut,re,J){super(),this._changeDetectorRef=J,this.control=new Ws,this._registered=!1,this.update=new E.vpe,this._parent=q,this._setValidators(ke),this._setAsyncValidators(Ut),this.valueAccessor=Bi(0,re)}ngOnChanges(q){if(this._checkForErrors(),!this._registered||"name"in q){if(this._registered&&(this._checkName(),this.formDirective)){const ke=q.name.previousValue;this.formDirective.removeControl({name:ke,path:this._getPath(ke)})}this._setUpControl()}"isDisabled"in q&&this._updateDisabled(q),bi(q,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){K(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(q){xs.then(()=>{this.control.setValue(q,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(q){const ke=q.isDisabled.currentValue,Ut=0!==ke&&(0,E.D6c)(ke);xs.then(()=>{Ut&&!this.control.disabled?this.control.disable():!Ut&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(q){return this._parent?function ye(ie,Q){return[...Q.path,ie]}(q,this._parent):[q]}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(cr,9),E.Y36(ze,10),E.Y36(yt,10),E.Y36(Ke,10),E.Y36(E.sBO,8))},ie.\u0275dir=E.lG2({type:ie,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([lu]),E.qOj,E.TTD]}),ie})(),Qo=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275dir=E.lG2({type:ie,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ie})(),Mt=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=E.oAB({type:ie}),ie.\u0275inj=E.cJS({}),ie})();const oi=new E.OlP("NgModelWithFormControlWarning"),Xr={provide:tr,useExisting:(0,E.Gpc)(()=>Rs)};let Rs=(()=>{class ie extends tr{constructor(q,ke,Ut,re){super(),this._ngModelWarningConfig=re,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(q),this._setAsyncValidators(ke),this.valueAccessor=Bi(0,Ut)}set isDisabled(q){}ngOnChanges(q){if(this._isControlChanged(q)){const ke=q.form.previousValue;ke&&ae(ke,this,!1),K(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}bi(q,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ae(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(q){this.viewModel=q,this.update.emit(q)}_isControlChanged(q){return q.hasOwnProperty("form")}}return ie._ngModelWarningSentOnce=!1,ie.\u0275fac=function(q){return new(q||ie)(E.Y36(ze,10),E.Y36(yt,10),E.Y36(Ke,10),E.Y36(oi,8))},ie.\u0275dir=E.lG2({type:ie,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([Xr]),E.qOj,E.TTD]}),ie})();const Wi={provide:cr,useExisting:(0,E.Gpc)(()=>Vo)};let Vo=(()=>{class ie extends cr{constructor(q,ke){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(q),this._setAsyncValidators(ke)}ngOnChanges(q){this._checkFormPresent(),q.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(q){const ke=this.form.get(q.path);return K(ke,q),ke.updateValueAndValidity({emitEvent:!1}),this.directives.push(q),ke}getControl(q){return this.form.get(q.path)}removeControl(q){ae(q.control||null,q,!1),function Yo(ie,Q){const q=ie.indexOf(Q);q>-1&&ie.splice(q,1)}(this.directives,q)}addFormGroup(q){this._setUpFormContainer(q)}removeFormGroup(q){this._cleanUpFormContainer(q)}getFormGroup(q){return this.form.get(q.path)}addFormArray(q){this._setUpFormContainer(q)}removeFormArray(q){this._cleanUpFormContainer(q)}getFormArray(q){return this.form.get(q.path)}updateModel(q,ke){this.form.get(q.path).setValue(ke)}onSubmit(q){return this.submitted=!0,Pi(this.form,this.directives),this.ngSubmit.emit(q),"dialog"===q?.target?.method}onReset(){this.resetForm()}resetForm(q){this.form.reset(q),this.submitted=!1}_updateDomValue(){this.directives.forEach(q=>{const ke=q.control,Ut=this.form.get(q.path);ke!==Ut&&(ae(ke||null,q),(ie=>ie instanceof Ws)(Ut)&&(K(Ut,q),q.control=Ut))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(q){const ke=this.form.get(q.path);ar(ke,q),ke.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(q){if(this.form){const ke=this.form.get(q.path);ke&&function zr(ie,Q){return dn(ie,Q)}(ke,q)&&ke.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){xt(this.form,this),this._oldForm&&dn(this._oldForm,this)}_checkFormPresent(){}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(ze,10),E.Y36(yt,10))},ie.\u0275dir=E.lG2({type:ie,selectors:[["","formGroup",""]],hostBindings:function(q,ke){1&q&&E.NdJ("submit",function(re){return ke.onSubmit(re)})("reset",function(){return ke.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Wi]),E.qOj,E.TTD]}),ie})();const fo={provide:Ke,useExisting:(0,E.Gpc)(()=>Bs),multi:!0};function To(ie,Q){return null==ie?`${Q}`:(Q&&"object"==typeof Q&&(Q="Object"),`${ie}: ${Q}`.slice(0,50))}let Bs=(()=>{class ie extends se{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){this.value=q;const Ut=To(this._getOptionId(q),q);this.setProperty("value",Ut)}registerOnChange(q){this.onChange=ke=>{this.value=this._getOptionValue(ke),q(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(q){for(const ke of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ke),q))return ke;return null}_getOptionValue(q){const ke=function Na(ie){return ie.split(":")[0]}(q);return this._optionMap.has(ke)?this._optionMap.get(ke):q}}return ie.\u0275fac=function(){let Q;return function(ke){return(Q||(Q=E.n5z(ie)))(ke||ie)}}(),ie.\u0275dir=E.lG2({type:ie,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(q,ke){1&q&&E.NdJ("change",function(re){return ke.onChange(re.target.value)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([fo]),E.qOj]}),ie})(),Ka=(()=>{class ie{constructor(q,ke,Ut){this._element=q,this._renderer=ke,this._select=Ut,this._select&&(this.id=this._select._registerOption())}set ngValue(q){null!=this._select&&(this._select._optionMap.set(this.id,q),this._setElementValue(To(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._setElementValue(q),this._select&&this._select.writeValue(this._select.value)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Bs,9))},ie.\u0275dir=E.lG2({type:ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ie})();const Za={provide:Ke,useExisting:(0,E.Gpc)(()=>Ks),multi:!0};function po(ie,Q){return null==ie?`${Q}`:("string"==typeof Q&&(Q=`'${Q}'`),Q&&"object"==typeof Q&&(Q="Object"),`${ie}: ${Q}`.slice(0,50))}let Ks=(()=>{class ie extends se{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(q){this._compareWith=q}writeValue(q){let ke;if(this.value=q,Array.isArray(q)){const Ut=q.map(re=>this._getOptionId(re));ke=(re,J)=>{re._setSelected(Ut.indexOf(J.toString())>-1)}}else ke=(Ut,re)=>{Ut._setSelected(!1)};this._optionMap.forEach(ke)}registerOnChange(q){this.onChange=ke=>{const Ut=[],re=ke.selectedOptions;if(void 0!==re){const J=re;for(let Oe=0;Oe<J.length;Oe++){const ot=this._getOptionValue(J[Oe].value);Ut.push(ot)}}else{const J=ke.options;for(let Oe=0;Oe<J.length;Oe++){const Je=J[Oe];if(Je.selected){const ot=this._getOptionValue(Je.value);Ut.push(ot)}}}this.value=Ut,q(Ut)}}_registerOption(q){const ke=(this._idCounter++).toString();return this._optionMap.set(ke,q),ke}_getOptionId(q){for(const ke of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ke)._value,q))return ke;return null}_getOptionValue(q){const ke=function qs(ie){return ie.split(":")[0]}(q);return this._optionMap.has(ke)?this._optionMap.get(ke)._value:q}}return ie.\u0275fac=function(){let Q;return function(ke){return(Q||(Q=E.n5z(ie)))(ke||ie)}}(),ie.\u0275dir=E.lG2({type:ie,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(q,ke){1&q&&E.NdJ("change",function(re){return ke.onChange(re.target)})("blur",function(){return ke.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Za]),E.qOj]}),ie})(),ca=(()=>{class ie{constructor(q,ke,Ut){this._element=q,this._renderer=ke,this._select=Ut,this._select&&(this.id=this._select._registerOption(this))}set ngValue(q){null!=this._select&&(this._value=q,this._setElementValue(po(this.id,q)),this._select.writeValue(this._select.value))}set value(q){this._select?(this._value=q,this._setElementValue(po(this.id,q)),this._select.writeValue(this._select.value)):this._setElementValue(q)}_setElementValue(q){this._renderer.setProperty(this._element.nativeElement,"value",q)}_setSelected(q){this._renderer.setProperty(this._element.nativeElement,"selected",q)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ie.\u0275fac=function(q){return new(q||ie)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(Ks,9))},ie.\u0275dir=E.lG2({type:ie,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ie})(),Xo=(()=>{class ie{constructor(){this._validator=Me}ngOnChanges(q){if(this.inputName in q){const ke=this.normalizeInput(q[this.inputName].currentValue);this._enabled=this.enabled(ke),this._validator=this._enabled?this.createValidator(ke):Me,this._onChange&&this._onChange()}}validate(q){return this._validator(q)}registerOnValidatorChange(q){this._onChange=q}enabled(q){return null!=q}}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275dir=E.lG2({type:ie,features:[E.TTD]}),ie})();const Vs={provide:ze,useExisting:(0,E.Gpc)(()=>Eo),multi:!0};let Eo=(()=>{class ie extends Xo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=E.D6c,this.createValidator=q=>_t}enabled(q){return q}}return ie.\u0275fac=function(){let Q;return function(ke){return(Q||(Q=E.n5z(ie)))(ke||ie)}}(),ie.\u0275dir=E.lG2({type:ie,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(q,ke){2&q&&E.uIk("required",ke._enabled?"":null)},inputs:{required:"required"},features:[E._Bn([Vs]),E.qOj]}),ie})();const is={provide:ze,useExisting:(0,E.Gpc)(()=>fr),multi:!0};let fr=(()=>{class ie extends Xo{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=q=>q,this.createValidator=q=>Fe(q)}}return ie.\u0275fac=function(){let Q;return function(ke){return(Q||(Q=E.n5z(ie)))(ke||ie)}}(),ie.\u0275dir=E.lG2({type:ie,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(q,ke){2&q&&E.uIk("pattern",ke._enabled?ke.pattern:null)},inputs:{pattern:"pattern"},features:[E._Bn([is]),E.qOj]}),ie})(),fa=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=E.oAB({type:ie}),ie.\u0275inj=E.cJS({imports:[Mt]}),ie})(),So=(()=>{class ie{}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=E.oAB({type:ie}),ie.\u0275inj=E.cJS({imports:[fa]}),ie})(),Au=(()=>{class ie{static withConfig(q){return{ngModule:ie,providers:[{provide:oi,useValue:q.warnOnNgModelWithFormControl}]}}}return ie.\u0275fac=function(q){return new(q||ie)},ie.\u0275mod=E.oAB({type:ie}),ie.\u0275inj=E.cJS({imports:[fa]}),ie})()},1481:(Yt,at,W)=>{"use strict";W.d(at,{Dx:()=>Wr,H7:()=>An,b2:()=>Or,q6:()=>ti});var E=W(6895),k=W(4650);class ee extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ue extends ee{static makeCurrent(){(0,E.HT)(new Ue)}onAndCancel(ae,ve,Ze){return ae.addEventListener(ve,Ze,!1),()=>{ae.removeEventListener(ve,Ze,!1)}}dispatchEvent(ae,ve){ae.dispatchEvent(ve)}remove(ae){ae.parentNode&&ae.parentNode.removeChild(ae)}createElement(ae,ve){return(ve=ve||this.getDefaultDocument()).createElement(ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ae){return ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(ae){return ae instanceof DocumentFragment}getGlobalEventTarget(ae,ve){return"window"===ve?window:"document"===ve?ae:"body"===ve?ae.body:null}getBaseHref(ae){const ve=function Le(){return Pe=Pe||document.querySelector("base"),Pe?Pe.getAttribute("href"):null}();return null==ve?null:function Ke(K){se=se||document.createElement("a"),se.setAttribute("href",K);const ae=se.pathname;return"/"===ae.charAt(0)?ae:`/${ae}`}(ve)}resetBaseElement(){Pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ae){return(0,E.Mx)(document.cookie,ae)}}let se,Pe=null;const Ae=new k.OlP("TRANSITION_ID"),Re=[{provide:k.ip1,useFactory:function Ie(K,ae,ve){return()=>{ve.get(k.CZH).donePromise.then(()=>{const Ze=(0,E.q)(),xt=ae.querySelectorAll(`style[ng-transition="${K}"]`);for(let dn=0;dn<xt.length;dn++)Ze.remove(xt[dn])})}},deps:[Ae,E.K0,k.zs3],multi:!0}];let ut=(()=>{class K{build(){return new XMLHttpRequest}}return K.\u0275fac=function(ve){return new(ve||K)},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();const mt=new k.OlP("EventManagerPlugins");let $e=(()=>{class K{constructor(ve,Ze){this._zone=Ze,this._eventNameToPlugin=new Map,ve.forEach(xt=>xt.manager=this),this._plugins=ve.slice().reverse()}addEventListener(ve,Ze,xt){return this._findPluginFor(Ze).addEventListener(ve,Ze,xt)}addGlobalEventListener(ve,Ze,xt){return this._findPluginFor(Ze).addGlobalEventListener(ve,Ze,xt)}getZone(){return this._zone}_findPluginFor(ve){const Ze=this._eventNameToPlugin.get(ve);if(Ze)return Ze;const xt=this._plugins;for(let dn=0;dn<xt.length;dn++){const Ln=xt[dn];if(Ln.supports(ve))return this._eventNameToPlugin.set(ve,Ln),Ln}throw new Error(`No event manager plugin found for event ${ve}`)}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(mt),k.LFG(k.R0b))},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();class jt{constructor(ae){this._doc=ae}addGlobalEventListener(ae,ve,Ze){const xt=(0,E.q)().getGlobalEventTarget(this._doc,ae);if(!xt)throw new Error(`Unsupported event target ${xt} for event ${ve}`);return this.addEventListener(xt,ve,Ze)}}let Be=(()=>{class K{constructor(){this._stylesSet=new Set}addStyles(ve){const Ze=new Set;ve.forEach(xt=>{this._stylesSet.has(xt)||(this._stylesSet.add(xt),Ze.add(xt))}),this.onStylesAdded(Ze)}onStylesAdded(ve){}getAllStyles(){return Array.from(this._stylesSet)}}return K.\u0275fac=function(ve){return new(ve||K)},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})(),ze=(()=>{class K extends Be{constructor(ve){super(),this._doc=ve,this._hostNodes=new Map,this._hostNodes.set(ve.head,[])}_addStylesToHost(ve,Ze,xt){ve.forEach(dn=>{const Ln=this._doc.createElement("style");Ln.textContent=dn,xt.push(Ze.appendChild(Ln))})}addHost(ve){const Ze=[];this._addStylesToHost(this._stylesSet,ve,Ze),this._hostNodes.set(ve,Ze)}removeHost(ve){const Ze=this._hostNodes.get(ve);Ze&&Ze.forEach(yt),this._hostNodes.delete(ve)}onStylesAdded(ve){this._hostNodes.forEach((Ze,xt)=>{this._addStylesToHost(ve,xt,Ze)})}ngOnDestroy(){this._hostNodes.forEach(ve=>ve.forEach(yt))}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(E.K0))},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();function yt(K){(0,E.q)().remove(K)}const le={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Z=/%COMP%/g;function fe(K,ae,ve){for(let Ze=0;Ze<ae.length;Ze++){let xt=ae[Ze];Array.isArray(xt)?fe(K,xt,ve):(xt=xt.replace(Z,K),ve.push(xt))}return ve}function Fe(K){return ae=>{if("__ngUnwrap__"===ae)return K;!1===K(ae)&&(ae.preventDefault(),ae.returnValue=!1)}}let Ge=(()=>{class K{constructor(ve,Ze,xt){this.eventManager=ve,this.sharedStylesHost=Ze,this.appId=xt,this.rendererByCompId=new Map,this.defaultRenderer=new ct(ve)}createRenderer(ve,Ze){if(!ve||!Ze)return this.defaultRenderer;switch(Ze.encapsulation){case k.ifc.Emulated:{let xt=this.rendererByCompId.get(Ze.id);return xt||(xt=new kt(this.eventManager,this.sharedStylesHost,Ze,this.appId),this.rendererByCompId.set(Ze.id,xt)),xt.applyToHost(ve),xt}case 1:case k.ifc.ShadowDom:return new dt(this.eventManager,this.sharedStylesHost,ve,Ze);default:if(!this.rendererByCompId.has(Ze.id)){const xt=fe(Ze.id,Ze.styles,[]);this.sharedStylesHost.addStyles(xt),this.rendererByCompId.set(Ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG($e),k.LFG(ze),k.LFG(k.AFp))},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();class ct{constructor(ae){this.eventManager=ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ae,ve){return ve?document.createElementNS(le[ve]||ve,ae):document.createElement(ae)}createComment(ae){return document.createComment(ae)}createText(ae){return document.createTextNode(ae)}appendChild(ae,ve){(Pt(ae)?ae.content:ae).appendChild(ve)}insertBefore(ae,ve,Ze){ae&&(Pt(ae)?ae.content:ae).insertBefore(ve,Ze)}removeChild(ae,ve){ae&&ae.removeChild(ve)}selectRootElement(ae,ve){let Ze="string"==typeof ae?document.querySelector(ae):ae;if(!Ze)throw new Error(`The selector "${ae}" did not match any elements`);return ve||(Ze.textContent=""),Ze}parentNode(ae){return ae.parentNode}nextSibling(ae){return ae.nextSibling}setAttribute(ae,ve,Ze,xt){if(xt){ve=xt+":"+ve;const dn=le[xt];dn?ae.setAttributeNS(dn,ve,Ze):ae.setAttribute(ve,Ze)}else ae.setAttribute(ve,Ze)}removeAttribute(ae,ve,Ze){if(Ze){const xt=le[Ze];xt?ae.removeAttributeNS(xt,ve):ae.removeAttribute(`${Ze}:${ve}`)}else ae.removeAttribute(ve)}addClass(ae,ve){ae.classList.add(ve)}removeClass(ae,ve){ae.classList.remove(ve)}setStyle(ae,ve,Ze,xt){xt&(k.JOm.DashCase|k.JOm.Important)?ae.style.setProperty(ve,Ze,xt&k.JOm.Important?"important":""):ae.style[ve]=Ze}removeStyle(ae,ve,Ze){Ze&k.JOm.DashCase?ae.style.removeProperty(ve):ae.style[ve]=""}setProperty(ae,ve,Ze){ae[ve]=Ze}setValue(ae,ve){ae.nodeValue=ve}listen(ae,ve,Ze){return"string"==typeof ae?this.eventManager.addGlobalEventListener(ae,ve,Fe(Ze)):this.eventManager.addEventListener(ae,ve,Fe(Ze))}}function Pt(K){return"TEMPLATE"===K.tagName&&void 0!==K.content}class kt extends ct{constructor(ae,ve,Ze,xt){super(ae),this.component=Ze;const dn=fe(xt+"-"+Ze.id,Ze.styles,[]);ve.addStyles(dn),this.contentAttr=function H(K){return"_ngcontent-%COMP%".replace(Z,K)}(xt+"-"+Ze.id),this.hostAttr=function he(K){return"_nghost-%COMP%".replace(Z,K)}(xt+"-"+Ze.id)}applyToHost(ae){super.setAttribute(ae,this.hostAttr,"")}createElement(ae,ve){const Ze=super.createElement(ae,ve);return super.setAttribute(Ze,this.contentAttr,""),Ze}}class dt extends ct{constructor(ae,ve,Ze,xt){super(ae),this.sharedStylesHost=ve,this.hostEl=Ze,this.shadowRoot=Ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const dn=fe(xt.id,xt.styles,[]);for(let Ln=0;Ln<dn.length;Ln++){const Kn=document.createElement("style");Kn.textContent=dn[Ln],this.shadowRoot.appendChild(Kn)}}nodeOrShadowRoot(ae){return ae===this.hostEl?this.shadowRoot:ae}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ae,ve){return super.appendChild(this.nodeOrShadowRoot(ae),ve)}insertBefore(ae,ve,Ze){return super.insertBefore(this.nodeOrShadowRoot(ae),ve,Ze)}removeChild(ae,ve){return super.removeChild(this.nodeOrShadowRoot(ae),ve)}parentNode(ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ae)))}}let Ht=(()=>{class K extends jt{constructor(ve){super(ve)}supports(ve){return!0}addEventListener(ve,Ze,xt){return ve.addEventListener(Ze,xt,!1),()=>this.removeEventListener(ve,Ze,xt)}removeEventListener(ve,Ze,xt){return ve.removeEventListener(Ze,xt)}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(E.K0))},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();const $t=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bt={alt:K=>K.altKey,control:K=>K.ctrlKey,meta:K=>K.metaKey,shift:K=>K.shiftKey};let _n=(()=>{class K extends jt{constructor(ve){super(ve)}supports(ve){return null!=K.parseEventName(ve)}addEventListener(ve,Ze,xt){const dn=K.parseEventName(Ze),Ln=K.eventCallback(dn.fullKey,xt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(ve,dn.domEventName,Ln))}static parseEventName(ve){const Ze=ve.toLowerCase().split("."),xt=Ze.shift();if(0===Ze.length||"keydown"!==xt&&"keyup"!==xt)return null;const dn=K._normalizeKey(Ze.pop());let Ln="",Kn=Ze.indexOf("code");if(Kn>-1&&(Ze.splice(Kn,1),Ln="code."),$t.forEach(yi=>{const ar=Ze.indexOf(yi);ar>-1&&(Ze.splice(ar,1),Ln+=yi+".")}),Ln+=dn,0!=Ze.length||0===dn.length)return null;const br={};return br.domEventName=xt,br.fullKey=Ln,br}static matchEventFullKeyCode(ve,Ze){let xt=rn[ve.key]||ve.key,dn="";return Ze.indexOf("code.")>-1&&(xt=ve.code,dn="code."),!(null==xt||!xt)&&(xt=xt.toLowerCase()," "===xt?xt="space":"."===xt&&(xt="dot"),$t.forEach(Ln=>{Ln!==xt&&(0,Bt[Ln])(ve)&&(dn+=Ln+".")}),dn+=xt,dn===Ze)}static eventCallback(ve,Ze,xt){return dn=>{K.matchEventFullKeyCode(dn,ve)&&xt.runGuarded(()=>Ze(dn))}}static _normalizeKey(ve){return"esc"===ve?"escape":ve}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(E.K0))},K.\u0275prov=k.Yz7({token:K,factory:K.\u0275fac}),K})();const ti=(0,k.eFA)(k._c5,"browser",[{provide:k.Lbi,useValue:E.bD},{provide:k.g9A,useValue:function Ci(){Ue.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function tr(){return(0,k.RDi)(document),document},deps:[]}]),yr=new k.OlP(""),en=[{provide:k.rWj,useClass:class Se{addToWindow(ae){k.dqk.getAngularTestability=(Ze,xt=!0)=>{const dn=ae.findTestabilityInTree(Ze,xt);if(null==dn)throw new Error("Could not find testability for element.");return dn},k.dqk.getAllAngularTestabilities=()=>ae.getAllTestabilities(),k.dqk.getAllAngularRootElements=()=>ae.getAllRootElements(),k.dqk.frameworkStabilizers||(k.dqk.frameworkStabilizers=[]),k.dqk.frameworkStabilizers.push(Ze=>{const xt=k.dqk.getAllAngularTestabilities();let dn=xt.length,Ln=!1;const Kn=function(br){Ln=Ln||br,dn--,0==dn&&Ze(Ln)};xt.forEach(function(br){br.whenStable(Kn)})})}findTestabilityInTree(ae,ve,Ze){return null==ve?null:ae.getTestability(ve)??(Ze?(0,E.q)().isShadowRoot(ve)?this.findTestabilityInTree(ae,ve.host,!0):this.findTestabilityInTree(ae,ve.parentElement,!0):null)}},deps:[]},{provide:k.lri,useClass:k.dDg,deps:[k.R0b,k.eoX,k.rWj]},{provide:k.dDg,useClass:k.dDg,deps:[k.R0b,k.eoX,k.rWj]}],pr=[{provide:k.zSh,useValue:"root"},{provide:k.qLn,useFactory:function cr(){return new k.qLn},deps:[]},{provide:mt,useClass:Ht,multi:!0,deps:[E.K0,k.R0b,k.Lbi]},{provide:mt,useClass:_n,multi:!0,deps:[E.K0]},{provide:Ge,useClass:Ge,deps:[$e,ze,k.AFp]},{provide:k.FYo,useExisting:Ge},{provide:Be,useExisting:ze},{provide:ze,useClass:ze,deps:[E.K0]},{provide:$e,useClass:$e,deps:[mt,k.R0b]},{provide:E.JF,useClass:ut,deps:[]},[]];let Or=(()=>{class K{constructor(ve){}static withServerTransition(ve){return{ngModule:K,providers:[{provide:k.AFp,useValue:ve.appId},{provide:Ae,useExisting:k.AFp},Re]}}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(yr,12))},K.\u0275mod=k.oAB({type:K}),K.\u0275inj=k.cJS({providers:[...pr,...en],imports:[E.ez,k.hGG]}),K})(),Wr=(()=>{class K{constructor(ve){this._doc=ve}getTitle(){return this._doc.title}setTitle(ve){this._doc.title=ve||""}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(E.K0))},K.\u0275prov=k.Yz7({token:K,factory:function(ve){let Ze=null;return Ze=ve?new ve:function Zr(){return new Wr((0,k.LFG)(E.K0))}(),Ze},providedIn:"root"}),K})();typeof window<"u"&&window;let An=(()=>{class K{}return K.\u0275fac=function(ve){return new(ve||K)},K.\u0275prov=k.Yz7({token:K,factory:function(ve){let Ze=null;return Ze=ve?new(ve||K):k.LFG(ai),Ze},providedIn:"root"}),K})(),ai=(()=>{class K extends An{constructor(ve){super(),this._doc=ve}sanitize(ve,Ze){if(null==Ze)return null;switch(ve){case k.q3G.NONE:return Ze;case k.q3G.HTML:return(0,k.qzn)(Ze,"HTML")?(0,k.z3N)(Ze):(0,k.EiD)(this._doc,String(Ze)).toString();case k.q3G.STYLE:return(0,k.qzn)(Ze,"Style")?(0,k.z3N)(Ze):Ze;case k.q3G.SCRIPT:if((0,k.qzn)(Ze,"Script"))return(0,k.z3N)(Ze);throw new Error("unsafe value used in a script context");case k.q3G.URL:return(0,k.qzn)(Ze,"URL")?(0,k.z3N)(Ze):(0,k.mCW)(String(Ze));case k.q3G.RESOURCE_URL:if((0,k.qzn)(Ze,"ResourceURL"))return(0,k.z3N)(Ze);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ve} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ve){return(0,k.JVY)(ve)}bypassSecurityTrustStyle(ve){return(0,k.L6k)(ve)}bypassSecurityTrustScript(ve){return(0,k.eBb)(ve)}bypassSecurityTrustUrl(ve){return(0,k.LAX)(ve)}bypassSecurityTrustResourceUrl(ve){return(0,k.pB0)(ve)}}return K.\u0275fac=function(ve){return new(ve||K)(k.LFG(E.K0))},K.\u0275prov=k.Yz7({token:K,factory:function(ve){let Ze=null;return Ze=ve?new ve:function $r(K){return new ai(K.get(E.K0))}(k.LFG(k.zs3)),Ze},providedIn:"root"}),K})()},9062:(Yt,at,W)=>{"use strict";W.d(at,{gz:()=>zi,m2:()=>qr,F0:()=>Ds,Od:()=>Ja,yS:()=>pu,Bz:()=>Fi,lC:()=>ha});var E=W(4650),k=W(8996),ee=W(9646),Ue=W(1135),Pe=W(6805),Le=W(9841),se=W(7272),Ke=W(9751),Ae=W(8421);function Ie(M){return new Ke.y(O=>{(0,Ae.Xf)(M()).subscribe(O)})}var Re=W(9635),Se=W(576);function ut(M,O){const D=(0,Se.m)(M)?M:()=>M,U=X=>X.error(D());return new Ke.y(O?X=>O.schedule(U,0,X):U)}var mt=W(515),$e=W(727),jt=W(4482),Be=W(5403);function ze(){return(0,jt.e)((M,O)=>{let D=null;M._refCount++;const U=(0,Be.x)(O,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(D=null);const X=M._connection,_e=D;D=null,X&&(!_e||X===_e)&&X.unsubscribe(),O.unsubscribe()});M.subscribe(U),U.closed||(D=M.connect())})}class yt extends Ke.y{constructor(O,D){super(),this.source=O,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,jt.A)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new $e.w0;const D=this.getSubject();O.add(this.source.subscribe((0,Be.x)(D,void 0,()=>{this._teardown(),D.complete()},U=>{this._teardown(),D.error(U)},()=>this._teardown()))),O.closed&&(this._connection=null,O=$e.w0.EMPTY)}return O}refCount(){return ze()(this)}}var le=W(7579),Z=W(6895),xe=W(4004),We=W(3900),_t=W(5698),Et=W(8675),H=W(9300),he=W(5577),fe=W(590);function Fe(M,O){return(0,Se.m)(O)?(0,he.z)(M,O,1):(0,he.z)(M,1)}var Me=W(8505);function Ge(M){return(0,jt.e)((O,D)=>{let _e,U=null,X=!1;U=O.subscribe((0,Be.x)(D,void 0,void 0,Xe=>{_e=(0,Ae.Xf)(M(Xe,Ge(M)(O))),U?(U.unsubscribe(),U=null,_e.subscribe(D)):X=!0})),X&&(U.unsubscribe(),U=null,_e.subscribe(D))})}var ct=W(5026);function St(M){return M<=0?()=>mt.E:(0,jt.e)((O,D)=>{let U=[];O.subscribe((0,Be.x)(D,X=>{U.push(X),M<U.length&&U.shift()},()=>{for(const X of U)D.next(X);D.complete()},void 0,()=>{U=null}))})}var Tt=W(8068),Pt=W(6590),kt=W(4671);function dt(M,O){const D=arguments.length>=2;return U=>U.pipe(M?(0,H.h)((X,_e)=>M(X,_e,U)):kt.y,St(1),D?(0,Pt.d)(O):(0,Tt.T)(()=>new Pe.K))}var $t=W(9718);function rn(M){return(0,jt.e)((O,D)=>{try{O.subscribe(D)}finally{D.add(M)}})}var Bt=W(8189),_n=W(1481);const Jt="primary",qn=Symbol("RouteTitle");class Qn{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const D=this.params[O];return Array.isArray(D)?D[0]:D}return null}getAll(O){if(this.has(O)){const D=this.params[O];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function wr(M){return new Qn(M)}function vr(M,O,D){const U=D.path.split("/");if(U.length>M.length||"full"===D.pathMatch&&(O.hasChildren()||U.length<M.length))return null;const X={};for(let _e=0;_e<U.length;_e++){const Xe=U[_e],Qe=M[_e];if(Xe.startsWith(":"))X[Xe.substring(1)]=Qe;else if(Xe!==Qe.path)return null}return{consumed:M.slice(0,U.length),posParams:X}}function cr(M,O){const D=M?Object.keys(M):void 0,U=O?Object.keys(O):void 0;if(!D||!U||D.length!=U.length)return!1;let X;for(let _e=0;_e<D.length;_e++)if(X=D[_e],!tr(M[X],O[X]))return!1;return!0}function tr(M,O){if(Array.isArray(M)&&Array.isArray(O)){if(M.length!==O.length)return!1;const D=[...M].sort(),U=[...O].sort();return D.every((X,_e)=>U[_e]===X)}return M===O}function Nr(M){return Array.prototype.concat.apply([],M)}function ti(M){return M.length>0?M[M.length-1]:null}function en(M,O){for(const D in M)M.hasOwnProperty(D)&&O(M[D],D)}function pr(M){return(0,E.CqO)(M)?M:(0,E.QGY)(M)?(0,k.D)(Promise.resolve(M)):(0,ee.of)(M)}const _r={exact:function si(M,O,D){if(!Un(M.segments,O.segments)||!vi(M.segments,O.segments,D)||M.numberOfChildren!==O.numberOfChildren)return!1;for(const U in O.children)if(!M.children[U]||!si(M.children[U],O.children[U],D))return!1;return!0},subset:Zn},ci={exact:function Wr(M,O){return cr(M,O)},subset:function nr(M,O){return Object.keys(O).length<=Object.keys(M).length&&Object.keys(O).every(D=>tr(M[D],O[D]))},ignored:()=>!0};function Zr(M,O,D){return _r[D.paths](M.root,O.root,D.matrixParams)&&ci[D.queryParams](M.queryParams,O.queryParams)&&!("exact"===D.fragment&&M.fragment!==O.fragment)}function Zn(M,O,D){return Yr(M,O,O.segments,D)}function Yr(M,O,D,U){if(M.segments.length>D.length){const X=M.segments.slice(0,D.length);return!(!Un(X,D)||O.hasChildren()||!vi(X,D,U))}if(M.segments.length===D.length){if(!Un(M.segments,D)||!vi(M.segments,D,U))return!1;for(const X in O.children)if(!M.children[X]||!Zn(M.children[X],O.children[X],U))return!1;return!0}{const X=D.slice(0,M.segments.length),_e=D.slice(M.segments.length);return!!(Un(M.segments,X)&&vi(M.segments,X,U)&&M.children[Jt])&&Yr(M.children[Jt],O,_e,U)}}function vi(M,O,D){return O.every((U,X)=>ci[D](M[X].parameters,U.parameters))}class Qr{constructor(O,D,U){this.root=O,this.queryParams=D,this.fragment=U}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wr(this.queryParams)),this._queryParamMap}toString(){return Qi.serialize(this)}}class sn{constructor(O,D){this.segments=O,this.children=D,this.parent=null,en(D,(U,X)=>U.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mn(this)}}class or{constructor(O,D){this.path=O,this.parameters=D}get parameterMap(){return this._parameterMap||(this._parameterMap=wr(this.parameters)),this._parameterMap}toString(){return ht(this)}}function Un(M,O){return M.length===O.length&&M.every((D,U)=>D.path===O[U].path)}let Mr=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return new ri},providedIn:"root"}),M})();class ri{parse(O){const D=new ae(O);return new Qr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(O){const D=`/${Qt(O.root,!0)}`,U=function bt(M){const O=Object.keys(M).map(D=>{const U=M[D];return Array.isArray(U)?U.map(X=>`${rr(D)}=${rr(X)}`).join("&"):`${rr(D)}=${rr(U)}`}).filter(D=>!!D);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${D}${U}${"string"==typeof O.fragment?`#${function sr(M){return encodeURI(M)}(O.fragment)}`:""}`}}const Qi=new ri;function Mn(M){return M.segments.map(O=>ht(O)).join("/")}function Qt(M,O){if(!M.hasChildren())return Mn(M);if(O){const D=M.children[Jt]?Qt(M.children[Jt],!1):"",U=[];return en(M.children,(X,_e)=>{_e!==Jt&&U.push(`${_e}:${Qt(X,!1)}`)}),U.length>0?`${D}(${U.join("//")})`:D}{const D=function ki(M,O){let D=[];return en(M.children,(U,X)=>{X===Jt&&(D=D.concat(O(U,X)))}),en(M.children,(U,X)=>{X!==Jt&&(D=D.concat(O(U,X)))}),D}(M,(U,X)=>X===Jt?[Qt(M.children[Jt],!1)]:[`${X}:${Qt(U,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[Jt]?`${Mn(M)}/${D[0]}`:`${Mn(M)}/(${D.join("//")})`}}function Rn(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rr(M){return Rn(M).replace(/%3B/gi,";")}function Dn(M){return Rn(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function it(M){return decodeURIComponent(M)}function rt(M){return it(M.replace(/\+/g,"%20"))}function ht(M){return`${Dn(M.path)}${function qt(M){return Object.keys(M).map(O=>`;${Dn(O)}=${Dn(M[O])}`).join("")}(M.parameters)}`}const Sn=/^[^\/()?;=#]+/;function An(M){const O=M.match(Sn);return O?O[0]:""}const $r=/^[^=?&#]+/,ye=/^[^&#]+/;class ae{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let U={};return this.peekStartsWith("(")&&(U=this.parseParens(!1)),(O.length>0||Object.keys(D).length>0)&&(U[Jt]=new sn(O,D)),U}parseSegment(){const O=An(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(O),new or(it(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const D=An(this.remaining);if(!D)return;this.capture(D);let U="";if(this.consumeOptional("=")){const X=An(this.remaining);X&&(U=X,this.capture(U))}O[it(D)]=it(U)}parseQueryParam(O){const D=function ai(M){const O=M.match($r);return O?O[0]:""}(this.remaining);if(!D)return;this.capture(D);let U="";if(this.consumeOptional("=")){const Xe=function K(M){const O=M.match(ye);return O?O[0]:""}(this.remaining);Xe&&(U=Xe,this.capture(U))}const X=rt(D),_e=rt(U);if(O.hasOwnProperty(X)){let Xe=O[X];Array.isArray(Xe)||(Xe=[Xe],O[X]=Xe),Xe.push(_e)}else O[X]=_e}parseParens(O){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const U=An(this.remaining),X=this.remaining[U.length];if("/"!==X&&")"!==X&&";"!==X)throw new E.vHH(4010,!1);let _e;U.indexOf(":")>-1?(_e=U.slice(0,U.indexOf(":")),this.capture(_e),this.capture(":")):O&&(_e=Jt);const Xe=this.parseChildren();D[_e]=1===Object.keys(Xe).length?Xe[Jt]:new sn([],Xe),this.consumeOptional("//")}return D}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new E.vHH(4011,!1)}}function ve(M){return M.segments.length>0?new sn([],{[Jt]:M}):M}function Ze(M){const O={};for(const U of Object.keys(M.children)){const _e=Ze(M.children[U]);(_e.segments.length>0||_e.hasChildren())&&(O[U]=_e)}return function xt(M){if(1===M.numberOfChildren&&M.children[Jt]){const O=M.children[Jt];return new sn(M.segments.concat(O.segments),O.children)}return M}(new sn(M.segments,O))}function dn(M){return M instanceof Qr}function ar(M,O,D,U,X){if(0===D.length)return Mi(O.root,O.root,O.root,U,X);const _e=function bi(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new _i(!0,0,M);let O=0,D=!1;const U=M.reduce((X,_e,Xe)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const Qe={};return en(_e.outlets,(Rt,bn)=>{Qe[bn]="string"==typeof Rt?Rt.split("/"):Rt}),[...X,{outlets:Qe}]}if(_e.segmentPath)return[...X,_e.segmentPath]}return"string"!=typeof _e?[...X,_e]:0===Xe?(_e.split("/").forEach((Qe,Rt)=>{0==Rt&&"."===Qe||(0==Rt&&""===Qe?D=!0:".."===Qe?O++:""!=Qe&&X.push(Qe))}),X):[...X,_e]},[]);return new _i(D,O,U)}(D);return _e.toRoot()?Mi(O.root,O.root,new sn([],{}),U,X):function Xe(Rt){const bn=function Bi(M,O,D,U){if(M.isAbsolute)return new gs(O.root,!0,0);if(-1===U)return new gs(D,D===O.root,0);return function Yo(M,O,D){let U=M,X=O,_e=D;for(;_e>X;){if(_e-=X,U=U.parent,!U)throw new E.vHH(4005,!1);X=U.segments.length}return new gs(U,!1,X-_e)}(D,U+(zr(M.commands[0])?0:1),M.numberOfDoubleDots)}(_e,O,M.snapshot?._urlSegment,Rt),Vr=bn.processChildren?_s(bn.segmentGroup,bn.index,_e.commands):_o(bn.segmentGroup,bn.index,_e.commands);return Mi(O.root,bn.segmentGroup,Vr,U,X)}(M.snapshot?._lastPathIndex)}function zr(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Xi(M){return"object"==typeof M&&null!=M&&M.outlets}function Mi(M,O,D,U,X){let Xe,_e={};U&&en(U,(Rt,bn)=>{_e[bn]=Array.isArray(Rt)?Rt.map(Vr=>`${Vr}`):`${Rt}`}),Xe=M===O?D:Ni(M,O,D);const Qe=ve(Ze(Xe));return new Qr(Qe,_e,X)}function Ni(M,O,D){const U={};return en(M.children,(X,_e)=>{U[_e]=X===O?D:Ni(X,O,D)}),new sn(M.segments,U)}class _i{constructor(O,D,U){if(this.isAbsolute=O,this.numberOfDoubleDots=D,this.commands=U,O&&U.length>0&&zr(U[0]))throw new E.vHH(4003,!1);const X=U.find(Xi);if(X&&X!==ti(U))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gs{constructor(O,D,U){this.segmentGroup=O,this.processChildren=D,this.index=U}}function _o(M,O,D){if(M||(M=new sn([],{})),0===M.segments.length&&M.hasChildren())return _s(M,O,D);const U=function js(M,O,D){let U=0,X=O;const _e={match:!1,pathIndex:0,commandIndex:0};for(;X<M.segments.length;){if(U>=D.length)return _e;const Xe=M.segments[X],Qe=D[U];if(Xi(Qe))break;const Rt=`${Qe}`,bn=U<D.length-1?D[U+1]:null;if(X>0&&void 0===Rt)break;if(Rt&&bn&&"object"==typeof bn&&void 0===bn.outlets){if(!eo(Rt,bn,Xe))return _e;U+=2}else{if(!eo(Rt,{},Xe))return _e;U++}X++}return{match:!0,pathIndex:X,commandIndex:U}}(M,O,D),X=D.slice(U.commandIndex);if(U.match&&U.pathIndex<M.segments.length){const _e=new sn(M.segments.slice(0,U.pathIndex),{});return _e.children[Jt]=new sn(M.segments.slice(U.pathIndex),M.children),_s(_e,0,X)}return U.match&&0===X.length?new sn(M.segments,{}):U.match&&!M.hasChildren()?co(M,O,D):U.match?_s(M,0,X):co(M,O,D)}function _s(M,O,D){if(0===D.length)return new sn(M.segments,{});{const U=function di(M){return Xi(M[0])?M[0].outlets:{[Jt]:M}}(D),X={};return en(U,(_e,Xe)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(X[Xe]=_o(M.children[Xe],O,_e))}),en(M.children,(_e,Xe)=>{void 0===U[Xe]&&(X[Xe]=_e)}),new sn(M.segments,X)}}function co(M,O,D){const U=M.segments.slice(0,O);let X=0;for(;X<D.length;){const _e=D[X];if(Xi(_e)){const Rt=Us(_e.outlets);return new sn(U,Rt)}if(0===X&&zr(D[0])){U.push(new or(M.segments[O].path,Ws(D[0]))),X++;continue}const Xe=Xi(_e)?_e.outlets[Jt]:`${_e}`,Qe=X<D.length-1?D[X+1]:null;Xe&&Qe&&zr(Qe)?(U.push(new or(Xe,Ws(Qe))),X+=2):(U.push(new or(Xe,{})),X++)}return new sn(U,{})}function Us(M){const O={};return en(M,(D,U)=>{"string"==typeof D&&(D=[D]),null!==D&&(O[U]=co(new sn([],{}),0,D))}),O}function Ws(M){const O={};return en(M,(D,U)=>O[U]=`${D}`),O}function eo(M,O,D){return M==D.path&&cr(O,D.parameters)}class Si{constructor(O,D){this.id=O,this.url=D}}class Bo extends Si{constructor(O,D,U="imperative",X=null){super(O,D),this.type=0,this.navigationTrigger=U,this.restoredState=X}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qr extends Si{constructor(O,D,U){super(O,D),this.urlAfterRedirects=U,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bs extends Si{constructor(O,D,U,X){super(O,D),this.reason=U,this.code=X,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ao extends Si{constructor(O,D,U,X){super(O,D),this.error=U,this.target=X,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ko extends Si{constructor(O,D,U,X){super(O,D),this.urlAfterRedirects=U,this.state=X,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pa extends Si{constructor(O,D,U,X){super(O,D),this.urlAfterRedirects=U,this.state=X,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ns extends Si{constructor(O,D,U,X,_e){super(O,D),this.urlAfterRedirects=U,this.state=X,this.shouldActivate=_e,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lu extends Si{constructor(O,D,U,X){super(O,D),this.urlAfterRedirects=U,this.state=X,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xs extends Si{constructor(O,D,U,X){super(O,D),this.urlAfterRedirects=U,this.state=X,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qa{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qo{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oa{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wt{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ft{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mt{constructor(O,D,U){this.routerEvent=O,this.position=D,this.anchor=U,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wn{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const D=this.pathFromRoot(O);return D.length>1?D[D.length-2]:null}children(O){const D=kn(O,this._root);return D?D.children.map(U=>U.value):[]}firstChild(O){const D=kn(O,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(O){const D=Tr(O,this._root);return D.length<2?[]:D[D.length-2].children.map(X=>X.value).filter(X=>X!==O)}pathFromRoot(O){return Tr(O,this._root).map(D=>D.value)}}function kn(M,O){if(M===O.value)return O;for(const D of O.children){const U=kn(M,D);if(U)return U}return null}function Tr(M,O){if(M===O.value)return[O];for(const D of O.children){const U=Tr(M,D);if(U.length)return U.unshift(O),U}return[]}class oi{constructor(O,D){this.value=O,this.children=D}toString(){return`TreeNode(${this.value})`}}function Xr(M){const O={};return M&&M.children.forEach(D=>O[D.value.outlet]=D),O}class Rs extends wn{constructor(O,D){super(O),this.snapshot=D,to(this,O)}toString(){return this.snapshot.toString()}}function Wi(M,O){const D=function Vo(M,O){const Xe=new bo([],{},{},"",{},Jt,O,null,M.root,-1,{});return new Ra("",new oi(Xe,[]))}(M,O),U=new Ue.X([new or("",{})]),X=new Ue.X({}),_e=new Ue.X({}),Xe=new Ue.X({}),Qe=new Ue.X(""),Rt=new zi(U,X,Xe,Qe,_e,Jt,O,D.root);return Rt.snapshot=D.root,new Rs(new oi(Rt,[]),D)}class zi{constructor(O,D,U,X,_e,Xe,Qe,Rt){this.url=O,this.params=D,this.queryParams=U,this.fragment=X,this.data=_e,this.outlet=Xe,this.component=Qe,this.title=this.data?.pipe((0,xe.U)(bn=>bn[qn]))??(0,ee.of)(void 0),this._futureSnapshot=Rt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xe.U)(O=>wr(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xe.U)(O=>wr(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zs(M,O="emptyOnly"){const D=M.pathFromRoot;let U=0;if("always"!==O)for(U=D.length-1;U>=1;){const X=D[U],_e=D[U-1];if(X.routeConfig&&""===X.routeConfig.path)U--;else{if(_e.component)break;U--}}return function Bu(M){return M.reduce((O,D)=>({params:{...O.params,...D.params},data:{...O.data,...D.data},resolve:{...D.data,...O.resolve,...D.routeConfig?.data,...D._resolvedData}}),{params:{},data:{},resolve:{}})}(D.slice(U))}class bo{constructor(O,D,U,X,_e,Xe,Qe,Rt,bn,Vr,Gn,ji){this.url=O,this.params=D,this.queryParams=U,this.fragment=X,this.data=_e,this.outlet=Xe,this.component=Qe,this.title=this.data?.[qn],this.routeConfig=Rt,this._urlSegment=bn,this._lastPathIndex=Vr,this._correctedLastPathIndex=ji??Vr,this._resolve=Gn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=wr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=wr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(U=>U.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ra extends wn{constructor(O,D){super(D),this.url=O,to(this,D)}toString(){return ho(this._root)}}function to(M,O){O.value._routerState=M,O.children.forEach(D=>to(M,D))}function ho(M){const O=M.children.length>0?` { ${M.children.map(ho).join(", ")} } `:"";return`${M.value}${O}`}function fo(M){if(M.snapshot){const O=M.snapshot,D=M._futureSnapshot;M.snapshot=D,cr(O.queryParams,D.queryParams)||M.queryParams.next(D.queryParams),O.fragment!==D.fragment&&M.fragment.next(D.fragment),cr(O.params,D.params)||M.params.next(D.params),function Ci(M,O){if(M.length!==O.length)return!1;for(let D=0;D<M.length;++D)if(!cr(M[D],O[D]))return!1;return!0}(O.url,D.url)||M.url.next(D.url),cr(O.data,D.data)||M.data.next(D.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function To(M,O){const D=cr(M.params,O.params)&&function rs(M,O){return Un(M,O)&&M.every((D,U)=>cr(D.parameters,O[U].parameters))}(M.url,O.url);return D&&!(!M.parent!=!O.parent)&&(!M.parent||To(M.parent,O.parent))}function Bs(M,O,D){if(D&&M.shouldReuseRoute(O.value,D.value.snapshot)){const U=D.value;U._futureSnapshot=O.value;const X=function Ka(M,O,D){return O.children.map(U=>{for(const X of D.children)if(M.shouldReuseRoute(U.value,X.value.snapshot))return Bs(M,U,X);return Bs(M,U)})}(M,O,D);return new oi(U,X)}{if(M.shouldAttach(O.value)){const _e=M.retrieve(O.value);if(null!==_e){const Xe=_e.route;return Xe.value._futureSnapshot=O.value,Xe.children=O.children.map(Qe=>Bs(M,Qe)),Xe}}const U=function Za(M){return new zi(new Ue.X(M.url),new Ue.X(M.params),new Ue.X(M.queryParams),new Ue.X(M.fragment),new Ue.X(M.data),M.outlet,M.component,M)}(O.value),X=O.children.map(_e=>Bs(M,_e));return new oi(U,X)}}const po="ngNavigationCancelingError";function qs(M,O){const{redirectTo:D,navigationBehaviorOptions:U}=dn(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,X=go(!1,0,O);return X.url=D,X.navigationBehaviorOptions=U,X}function go(M,O,D){const U=new Error("NavigationCancelingError: "+(M||""));return U[po]=!0,U.cancellationCode=O,D&&(U.url=D),U}function Ks(M){return ca(M)&&dn(M.url)}function ca(M){return M&&M[po]}class da{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ms,this.attachRef=null}}let ms=(()=>{class M{constructor(){this.contexts=new Map}onChildOutletCreated(D,U){const X=this.getOrCreateContext(D);X.outlet=U,this.contexts.set(D,X)}onChildOutletDestroyed(D){const U=this.getContext(D);U&&(U.outlet=null,U.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let U=this.getContext(D);return U||(U=new da,this.contexts.set(D,U)),U}getContext(D){return this.contexts.get(D)||null}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const Xo=!1;let ha=(()=>{class M{constructor(D,U,X,_e,Xe){this.parentContexts=D,this.location=U,this.changeDetector=_e,this.environmentInjector=Xe,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=X||Jt,D.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const D=this.parentContexts.getContext(this.name);D&&D.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,Xo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,Xo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,Xo);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,U){this.activated=D,this._activatedRoute=U,this.location.insert(D.hostView),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,U){if(this.isActivated)throw new E.vHH(4013,Xo);this._activatedRoute=D;const X=this.location,Xe=D._futureSnapshot.component,Qe=this.parentContexts.getOrCreateContext(this.name).children,Rt=new xi(D,Qe,X.injector);if(U&&function La(M){return!!M.resolveComponentFactory}(U)){const bn=U.resolveComponentFactory(Xe);this.activated=X.createComponent(bn,X.length,Rt)}else this.activated=X.createComponent(Xe,{index:X.length,injector:Rt,environmentInjector:U??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(D){return new(D||M)(E.Y36(ms),E.Y36(E.s_b),E.$8M("name"),E.Y36(E.sBO),E.Y36(E.lqb))},M.\u0275dir=E.lG2({type:M,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),M})();class xi{constructor(O,D,U){this.route=O,this.childContexts=D,this.parent=U}get(O,D){return O===zi?this.route:O===ms?this.childContexts:this.parent.get(O,D)}}let Sa=(()=>{class M{}return M.\u0275fac=function(D){return new(D||M)},M.\u0275cmp=E.Xpm({type:M,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(D,U){1&D&&E._UZ(0,"router-outlet")},dependencies:[ha],encapsulation:2}),M})();function Vs(M,O){return M.providers&&!M._injector&&(M._injector=(0,E.MMx)(M.providers,O,`Route: ${M.path}`)),M._injector??O}function no(M){const O=M.children&&M.children.map(no),D=O?{...M,children:O}:{...M};return!D.component&&!D.loadComponent&&(O||D.loadChildren)&&D.outlet&&D.outlet!==Jt&&(D.component=Sa),D}function is(M){return M.outlet||Jt}function fr(M,O){const D=M.filter(U=>is(U)===O);return D.push(...M.filter(U=>is(U)!==O)),D}function ur(M){if(!M)return null;if(M.routeConfig?._injector)return M.routeConfig._injector;for(let O=M.parent;O;O=O.parent){const D=O.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class wa{constructor(O,D,U,X){this.routeReuseStrategy=O,this.futureState=D,this.currState=U,this.forwardEvent=X}activate(O){const D=this.futureState._root,U=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,U,O),fo(this.futureState.root),this.activateChildRoutes(D,U,O)}deactivateChildRoutes(O,D,U){const X=Xr(D);O.children.forEach(_e=>{const Xe=_e.value.outlet;this.deactivateRoutes(_e,X[Xe],U),delete X[Xe]}),en(X,(_e,Xe)=>{this.deactivateRouteAndItsChildren(_e,U)})}deactivateRoutes(O,D,U){const X=O.value,_e=D?D.value:null;if(X===_e)if(X.component){const Xe=U.getContext(X.outlet);Xe&&this.deactivateChildRoutes(O,D,Xe.children)}else this.deactivateChildRoutes(O,D,U);else _e&&this.deactivateRouteAndItsChildren(D,U)}deactivateRouteAndItsChildren(O,D){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,D):this.deactivateRouteAndOutlet(O,D)}detachAndStoreRouteSubtree(O,D){const U=D.getContext(O.value.outlet),X=U&&O.value.component?U.children:D,_e=Xr(O);for(const Xe of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Xe],X);if(U&&U.outlet){const Xe=U.outlet.detach(),Qe=U.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:Xe,route:O,contexts:Qe})}}deactivateRouteAndOutlet(O,D){const U=D.getContext(O.value.outlet),X=U&&O.value.component?U.children:D,_e=Xr(O);for(const Xe of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Xe],X);U&&U.outlet&&(U.outlet.deactivate(),U.children.onOutletDeactivated(),U.attachRef=null,U.resolver=null,U.route=null)}activateChildRoutes(O,D,U){const X=Xr(D);O.children.forEach(_e=>{this.activateRoutes(_e,X[_e.value.outlet],U),this.forwardEvent(new ft(_e.value.snapshot))}),O.children.length&&this.forwardEvent(new hi(O.value.snapshot))}activateRoutes(O,D,U){const X=O.value,_e=D?D.value:null;if(fo(X),X===_e)if(X.component){const Xe=U.getOrCreateContext(X.outlet);this.activateChildRoutes(O,D,Xe.children)}else this.activateChildRoutes(O,D,U);else if(X.component){const Xe=U.getOrCreateContext(X.outlet);if(this.routeReuseStrategy.shouldAttach(X.snapshot)){const Qe=this.routeReuseStrategy.retrieve(X.snapshot);this.routeReuseStrategy.store(X.snapshot,null),Xe.children.onOutletReAttached(Qe.contexts),Xe.attachRef=Qe.componentRef,Xe.route=Qe.route.value,Xe.outlet&&Xe.outlet.attach(Qe.componentRef,Qe.route.value),fo(Qe.route.value),this.activateChildRoutes(O,null,Xe.children)}else{const Qe=ur(X.snapshot),Rt=Qe?.get(E._Vd)??null;Xe.attachRef=null,Xe.route=X,Xe.resolver=Rt,Xe.injector=Qe,Xe.outlet&&Xe.outlet.activateWith(X,Xe.injector),this.activateChildRoutes(O,null,Xe.children)}}else this.activateChildRoutes(O,null,U)}}class fa{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class So{constructor(O,D){this.component=O,this.route=D}}function Au(M,O,D){const U=M._root;return ga(U,O?O._root:null,D,[U.value])}function pa(M,O){const D=Symbol(),U=O.get(M,D);return U===D?"function"!=typeof M||(0,E.Z0I)(M)?O.get(M):M:U}function ga(M,O,D,U,X={canDeactivateChecks:[],canActivateChecks:[]}){const _e=Xr(O);return M.children.forEach(Xe=>{(function hn(M,O,D,U,X={canDeactivateChecks:[],canActivateChecks:[]}){const _e=M.value,Xe=O?O.value:null,Qe=D?D.getContext(M.value.outlet):null;if(Xe&&_e.routeConfig===Xe.routeConfig){const Rt=function Jr(M,O,D){if("function"==typeof D)return D(M,O);switch(D){case"pathParamsChange":return!Un(M.url,O.url);case"pathParamsOrQueryParamsChange":return!Un(M.url,O.url)||!cr(M.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!To(M,O)||!cr(M.queryParams,O.queryParams);default:return!To(M,O)}}(Xe,_e,_e.routeConfig.runGuardsAndResolvers);Rt?X.canActivateChecks.push(new fa(U)):(_e.data=Xe.data,_e._resolvedData=Xe._resolvedData),ga(M,O,_e.component?Qe?Qe.children:null:D,U,X),Rt&&Qe&&Qe.outlet&&Qe.outlet.isActivated&&X.canDeactivateChecks.push(new So(Qe.outlet.component,Xe))}else Xe&&ea(O,Qe,X),X.canActivateChecks.push(new fa(U)),ga(M,null,_e.component?Qe?Qe.children:null:D,U,X)})(Xe,_e[Xe.value.outlet],D,U.concat([Xe.value]),X),delete _e[Xe.value.outlet]}),en(_e,(Xe,Qe)=>ea(Xe,D.getContext(Qe),X)),X}function ea(M,O,D){const U=Xr(M),X=M.value;en(U,(_e,Xe)=>{ea(_e,X.component?O?O.children.getContext(Xe):null:O,D)}),D.canDeactivateChecks.push(new So(X.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,X))}function ta(M){return"function"==typeof M}function Oe(M){return M instanceof Pe.K||"EmptyError"===M?.name}const Je=Symbol("INITIAL_VALUE");function ot(){return(0,We.w)(M=>(0,Le.a)(M.map(O=>O.pipe((0,_t.q)(1),(0,Et.O)(Je)))).pipe((0,xe.U)(O=>{for(const D of O)if(!0!==D){if(D===Je)return Je;if(!1===D||D instanceof Qr)return D}return!0}),(0,H.h)(O=>O!==Je),(0,_t.q)(1)))}function Hi(M){return(0,Re.z)((0,Me.b)(O=>{if(dn(O))throw qs(0,O)}),(0,xe.U)(O=>!0===O))}const wi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ro(M,O,D,U,X){const _e=mi(M,O,D);return _e.matched?function Ns(M,O,D,U){const X=O.canMatch;if(!X||0===X.length)return(0,ee.of)(!0);const _e=X.map(Xe=>{const Qe=pa(Xe,M);return pr(function Ut(M){return M&&ta(M.canMatch)}(Qe)?Qe.canMatch(O,D):M.runInContext(()=>Qe(O,D)))});return(0,ee.of)(_e).pipe(ot(),Hi())}(U=Vs(O,U),O,D).pipe((0,xe.U)(Xe=>!0===Xe?_e:{...wi})):(0,ee.of)(_e)}function mi(M,O,D){if(""===O.path)return"full"===O.pathMatch&&(M.hasChildren()||D.length>0)?{...wi}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const X=(O.matcher||vr)(D,M,O);if(!X)return{...wi};const _e={};en(X.posParams,(Qe,Rt)=>{_e[Rt]=Qe.path});const Xe=X.consumed.length>0?{..._e,...X.consumed[X.consumed.length-1].parameters}:_e;return{matched:!0,consumedSegments:X.consumed,remainingSegments:D.slice(X.consumed.length),parameters:Xe,positionalParamSegments:X.posParams??{}}}function hs(M,O,D,U,X="corrected"){if(D.length>0&&function Oo(M,O,D){return D.some(U=>ge(M,O,U)&&is(U)!==Jt)}(M,D,U)){const Xe=new sn(O,function Dr(M,O,D,U){const X={};X[Jt]=U,U._sourceSegment=M,U._segmentIndexShift=O.length;for(const _e of D)if(""===_e.path&&is(_e)!==Jt){const Xe=new sn([],{});Xe._sourceSegment=M,Xe._segmentIndexShift=O.length,X[is(_e)]=Xe}return X}(M,O,U,new sn(D,M.children)));return Xe._sourceSegment=M,Xe._segmentIndexShift=O.length,{segmentGroup:Xe,slicedSegments:[]}}if(0===D.length&&function B(M,O,D){return D.some(U=>ge(M,O,U))}(M,D,U)){const Xe=new sn(M.segments,function Ts(M,O,D,U,X,_e){const Xe={};for(const Qe of U)if(ge(M,D,Qe)&&!X[is(Qe)]){const Rt=new sn([],{});Rt._sourceSegment=M,Rt._segmentIndexShift="legacy"===_e?M.segments.length:O.length,Xe[is(Qe)]=Rt}return{...X,...Xe}}(M,O,D,U,M.children,X));return Xe._sourceSegment=M,Xe._segmentIndexShift=O.length,{segmentGroup:Xe,slicedSegments:D}}const _e=new sn(M.segments,M.children);return _e._sourceSegment=M,_e._segmentIndexShift=O.length,{segmentGroup:_e,slicedSegments:D}}function ge(M,O,D){return(!(M.hasChildren()||O.length>0)||"full"!==D.pathMatch)&&""===D.path}function z(M,O,D,U){return!!(is(M)===U||U!==Jt&&ge(O,D,M))&&("**"===M.path||mi(O,M,D).matched)}function we(M,O,D){return 0===O.length&&!M.children[D]}const et=!1;class Ot{constructor(O){this.segmentGroup=O||null}}class Kt{constructor(O){this.urlTree=O}}function Bn(M){return ut(new Ot(M))}function Cr(M){return ut(new Kt(M))}class io{constructor(O,D,U,X,_e){this.injector=O,this.configLoader=D,this.urlSerializer=U,this.urlTree=X,this.config=_e,this.allowRedirects=!0}apply(){const O=hs(this.urlTree.root,[],[],this.config).segmentGroup,D=new sn(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,D,Jt).pipe((0,xe.U)(_e=>this.createUrlTree(Ze(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ge(_e=>{if(_e instanceof Kt)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof Ot?this.noMatchError(_e):_e}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,Jt).pipe((0,xe.U)(X=>this.createUrlTree(Ze(X),O.queryParams,O.fragment))).pipe(Ge(X=>{throw X instanceof Ot?this.noMatchError(X):X}))}noMatchError(O){return new E.vHH(4002,et)}createUrlTree(O,D,U){const X=ve(O);return new Qr(X,D,U)}expandSegmentGroup(O,D,U,X){return 0===U.segments.length&&U.hasChildren()?this.expandChildren(O,D,U).pipe((0,xe.U)(_e=>new sn([],_e))):this.expandSegment(O,U,D,U.segments,X,!0)}expandChildren(O,D,U){const X=[];for(const _e of Object.keys(U.children))"primary"===_e?X.unshift(_e):X.push(_e);return(0,k.D)(X).pipe(Fe(_e=>{const Xe=U.children[_e],Qe=fr(D,_e);return this.expandSegmentGroup(O,Qe,Xe,_e).pipe((0,xe.U)(Rt=>({segment:Rt,outlet:_e})))}),(0,ct.R)((_e,Xe)=>(_e[Xe.outlet]=Xe.segment,_e),{}),dt())}expandSegment(O,D,U,X,_e,Xe){return(0,k.D)(U).pipe(Fe(Qe=>this.expandSegmentAgainstRoute(O,D,U,Qe,X,_e,Xe).pipe(Ge(bn=>{if(bn instanceof Ot)return(0,ee.of)(null);throw bn}))),(0,fe.P)(Qe=>!!Qe),Ge((Qe,Rt)=>{if(Oe(Qe))return we(D,X,_e)?(0,ee.of)(new sn([],{})):Bn(D);throw Qe}))}expandSegmentAgainstRoute(O,D,U,X,_e,Xe,Qe){return z(X,D,_e,Xe)?void 0===X.redirectTo?this.matchSegmentAgainstRoute(O,D,X,_e,Xe):Qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,D,U,X,_e,Xe):Bn(D):Bn(D)}expandSegmentAgainstRouteUsingRedirect(O,D,U,X,_e,Xe){return"**"===X.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,U,X,Xe):this.expandRegularSegmentAgainstRouteUsingRedirect(O,D,U,X,_e,Xe)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,D,U,X){const _e=this.applyRedirectCommands([],U.redirectTo,{});return U.redirectTo.startsWith("/")?Cr(_e):this.lineralizeSegments(U,_e).pipe((0,he.z)(Xe=>{const Qe=new sn(Xe,{});return this.expandSegment(O,Qe,D,Xe,X,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,D,U,X,_e,Xe){const{matched:Qe,consumedSegments:Rt,remainingSegments:bn,positionalParamSegments:Vr}=mi(D,X,_e);if(!Qe)return Bn(D);const Gn=this.applyRedirectCommands(Rt,X.redirectTo,Vr);return X.redirectTo.startsWith("/")?Cr(Gn):this.lineralizeSegments(X,Gn).pipe((0,he.z)(ji=>this.expandSegment(O,D,U,ji.concat(bn),Xe,!1)))}matchSegmentAgainstRoute(O,D,U,X,_e){return"**"===U.path?(O=Vs(U,O),U.loadChildren?(U._loadedRoutes?(0,ee.of)({routes:U._loadedRoutes,injector:U._loadedInjector}):this.configLoader.loadChildren(O,U)).pipe((0,xe.U)(Qe=>(U._loadedRoutes=Qe.routes,U._loadedInjector=Qe.injector,new sn(X,{})))):(0,ee.of)(new sn(X,{}))):ro(D,U,X,O).pipe((0,We.w)(({matched:Xe,consumedSegments:Qe,remainingSegments:Rt})=>Xe?this.getChildConfig(O=U._injector??O,U,X).pipe((0,he.z)(Vr=>{const Gn=Vr.injector??O,ji=Vr.routes,{segmentGroup:Ui,slicedSegments:gn}=hs(D,Qe,Rt,ji),xa=new sn(Ui.segments,Ui.children);if(0===gn.length&&xa.hasChildren())return this.expandChildren(Gn,ji,xa).pipe((0,xe.U)(Va=>new sn(Qe,Va)));if(0===ji.length&&0===gn.length)return(0,ee.of)(new sn(Qe,{}));const Ei=is(U)===_e;return this.expandSegment(Gn,xa,ji,gn,Ei?Jt:_e,!0).pipe((0,xe.U)(Lo=>new sn(Qe.concat(Lo.segments),Lo.children)))})):Bn(D)))}getChildConfig(O,D,U){return D.children?(0,ee.of)({routes:D.children,injector:O}):D.loadChildren?void 0!==D._loadedRoutes?(0,ee.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function Oi(M,O,D,U){const X=O.canLoad;if(void 0===X||0===X.length)return(0,ee.of)(!0);const _e=X.map(Xe=>{const Qe=pa(Xe,M);return pr(function ie(M){return M&&ta(M.canLoad)}(Qe)?Qe.canLoad(O,D):M.runInContext(()=>Qe(O,D)))});return(0,ee.of)(_e).pipe(ot(),Hi())}(O,D,U).pipe((0,he.z)(X=>X?this.configLoader.loadChildren(O,D).pipe((0,Me.b)(_e=>{D._loadedRoutes=_e.routes,D._loadedInjector=_e.injector})):function Di(M){return ut(go(et,3))}())):(0,ee.of)({routes:[],injector:O})}lineralizeSegments(O,D){let U=[],X=D.root;for(;;){if(U=U.concat(X.segments),0===X.numberOfChildren)return(0,ee.of)(U);if(X.numberOfChildren>1||!X.children[Jt])return ut(new E.vHH(4e3,et));X=X.children[Jt]}}applyRedirectCommands(O,D,U){return this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),O,U)}applyRedirectCreateUrlTree(O,D,U,X){const _e=this.createSegmentGroup(O,D.root,U,X);return new Qr(_e,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(O,D){const U={};return en(O,(X,_e)=>{if("string"==typeof X&&X.startsWith(":")){const Qe=X.substring(1);U[_e]=D[Qe]}else U[_e]=X}),U}createSegmentGroup(O,D,U,X){const _e=this.createSegments(O,D.segments,U,X);let Xe={};return en(D.children,(Qe,Rt)=>{Xe[Rt]=this.createSegmentGroup(O,Qe,U,X)}),new sn(_e,Xe)}createSegments(O,D,U,X){return D.map(_e=>_e.path.startsWith(":")?this.findPosParam(O,_e,X):this.findOrReturn(_e,U))}findPosParam(O,D,U){const X=U[D.path.substring(1)];if(!X)throw new E.vHH(4001,et);return X}findOrReturn(O,D){let U=0;for(const X of D){if(X.path===O.path)return D.splice(U),X;U++}return O}}class Fa{}class wo{constructor(O,D,U,X,_e,Xe,Qe,Rt){this.injector=O,this.rootComponentType=D,this.config=U,this.urlTree=X,this.url=_e,this.paramsInheritanceStrategy=Xe,this.relativeLinkResolution=Qe,this.urlSerializer=Rt}recognize(){const O=hs(this.urlTree.root,[],[],this.config.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,Jt).pipe((0,xe.U)(D=>{if(null===D)return null;const U=new bo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),X=new oi(U,D),_e=new Ra(this.url,X);return this.inheritParamsAndData(_e._root),_e}))}inheritParamsAndData(O){const D=O.value,U=zs(D,this.paramsInheritanceStrategy);D.params=Object.freeze(U.params),D.data=Object.freeze(U.data),O.children.forEach(X=>this.inheritParamsAndData(X))}processSegmentGroup(O,D,U,X){return 0===U.segments.length&&U.hasChildren()?this.processChildren(O,D,U):this.processSegment(O,D,U,U.segments,X)}processChildren(O,D,U){return(0,k.D)(Object.keys(U.children)).pipe(Fe(X=>{const _e=U.children[X],Xe=fr(D,X);return this.processSegmentGroup(O,Xe,_e,X)}),(0,ct.R)((X,_e)=>X&&_e?(X.push(..._e),X):null),function Ht(M,O=!1){return(0,jt.e)((D,U)=>{let X=0;D.subscribe((0,Be.x)(U,_e=>{const Xe=M(_e,X++);(Xe||O)&&U.next(_e),!Xe&&U.complete()}))})}(X=>null!==X),(0,Pt.d)(null),dt(),(0,xe.U)(X=>{if(null===X)return null;const _e=Co(X);return function ma(M){M.sort((O,D)=>O.value.outlet===Jt?-1:D.value.outlet===Jt?1:O.value.outlet.localeCompare(D.value.outlet))}(_e),_e}))}processSegment(O,D,U,X,_e){return(0,k.D)(D).pipe(Fe(Xe=>this.processSegmentAgainstRoute(Xe._injector??O,Xe,U,X,_e)),(0,fe.P)(Xe=>!!Xe),Ge(Xe=>{if(Oe(Xe))return we(U,X,_e)?(0,ee.of)([]):(0,ee.of)(null);throw Xe}))}processSegmentAgainstRoute(O,D,U,X,_e){if(D.redirectTo||!z(D,U,X,_e))return(0,ee.of)(null);let Xe;if("**"===D.path){const Qe=X.length>0?ti(X).parameters:{},Rt=ku(U)+X.length,bn=new bo(X,Qe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tl(D),is(D),D.component??D._loadedComponent??null,D,Vu(U),Rt,ul(D),Rt);Xe=(0,ee.of)({snapshot:bn,consumedSegments:[],remainingSegments:[]})}else Xe=ro(U,D,X,O).pipe((0,xe.U)(({matched:Qe,consumedSegments:Rt,remainingSegments:bn,parameters:Vr})=>{if(!Qe)return null;const Gn=ku(U)+Rt.length;return{snapshot:new bo(Rt,Vr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Tl(D),is(D),D.component??D._loadedComponent??null,D,Vu(U),Gn,ul(D),Gn),consumedSegments:Rt,remainingSegments:bn}}));return Xe.pipe((0,We.w)(Qe=>{if(null===Qe)return(0,ee.of)(null);const{snapshot:Rt,consumedSegments:bn,remainingSegments:Vr}=Qe;O=D._injector??O;const Gn=D._loadedInjector??O,ji=function Ho(M){return M.children?M.children:M.loadChildren?M._loadedRoutes:[]}(D),{segmentGroup:Ui,slicedSegments:gn}=hs(U,bn,Vr,ji.filter(Ei=>void 0===Ei.redirectTo),this.relativeLinkResolution);if(0===gn.length&&Ui.hasChildren())return this.processChildren(Gn,ji,Ui).pipe((0,xe.U)(Ei=>null===Ei?null:[new oi(Rt,Ei)]));if(0===ji.length&&0===gn.length)return(0,ee.of)([new oi(Rt,[])]);const xa=is(D)===_e;return this.processSegment(Gn,ji,Ui,gn,xa?Jt:_e).pipe((0,xe.U)(Ei=>null===Ei?null:[new oi(Rt,Ei)]))}))}}function na(M){const O=M.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function Co(M){const O=[],D=new Set;for(const U of M){if(!na(U)){O.push(U);continue}const X=O.find(_e=>U.value.routeConfig===_e.value.routeConfig);void 0!==X?(X.children.push(...U.children),D.add(X)):O.push(U)}for(const U of D){const X=Co(U.children);O.push(new oi(U.value,X))}return O.filter(U=>!D.has(U))}function Vu(M){let O=M;for(;O._sourceSegment;)O=O._sourceSegment;return O}function ku(M){let O=M,D=O._segmentIndexShift??0;for(;O._sourceSegment;)O=O._sourceSegment,D+=O._segmentIndexShift??0;return D-1}function Tl(M){return M.data||{}}function ul(M){return M.resolve||{}}function so(M){return"string"==typeof M.title||null===M.title}function gr(M){return(0,We.w)(O=>{const D=M(O);return D?(0,k.D)(D).pipe((0,xe.U)(()=>O)):(0,ee.of)(O)})}let No=(()=>{class M{buildTitle(D){let U,X=D.root;for(;void 0!==X;)U=this.getResolvedTitleForRoute(X)??U,X=X.children.find(_e=>_e.outlet===Jt);return U}getResolvedTitleForRoute(D){return D.data[qn]}}return M.\u0275fac=function(D){return new(D||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)(oo)},providedIn:"root"}),M})(),oo=(()=>{class M extends No{constructor(D){super(),this.title=D}updateTitle(D){const U=this.buildTitle(D);void 0!==U&&this.title.setTitle(U)}}return M.\u0275fac=function(D){return new(D||M)(E.LFG(_n.Dx))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();class $u{}class Es extends class En{shouldDetach(O){return!1}store(O,D){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,D){return O.routeConfig===D.routeConfig}}{}const Ss=new E.OlP("",{providedIn:"root",factory:()=>({})}),dr=new E.OlP("ROUTES");let hu=(()=>{class M{constructor(D,U){this.injector=D,this.compiler=U,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,ee.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const U=pr(D.loadComponent()).pipe((0,Me.b)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=_e}),rn(()=>{this.componentLoaders.delete(D)})),X=new yt(U,()=>new le.x).pipe(ze());return this.componentLoaders.set(D,X),X}loadChildren(D,U){if(this.childrenLoaders.get(U))return this.childrenLoaders.get(U);if(U._loadedRoutes)return(0,ee.of)({routes:U._loadedRoutes,injector:U._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(U);const _e=this.loadModuleFactoryOrRoutes(U.loadChildren).pipe((0,xe.U)(Qe=>{this.onLoadEndListener&&this.onLoadEndListener(U);let Rt,bn,Vr=!1;Array.isArray(Qe)?bn=Qe:(Rt=Qe.create(D).injector,bn=Nr(Rt.get(dr,[],E.XFs.Self|E.XFs.Optional)));return{routes:bn.map(no),injector:Rt}}),rn(()=>{this.childrenLoaders.delete(U)})),Xe=new yt(_e,()=>new le.x).pipe(ze());return this.childrenLoaders.set(U,Xe),Xe}loadModuleFactoryOrRoutes(D){return pr(D()).pipe((0,he.z)(U=>U instanceof E.YKP||Array.isArray(U)?(0,ee.of)(U):(0,k.D)(this.compiler.compileModuleAsync(U))))}}return M.\u0275fac=function(D){return new(D||M)(E.LFG(E.zs3),E.LFG(E.Sil))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();class $n{}class Gt{shouldProcessUrl(O){return!0}extract(O){return O}merge(O,D){return O}}function Ls(M){throw M}function Qa(M,O,D){return O.parse("/")}const pc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Sl(){const M=(0,E.f3M)(Mr),O=(0,E.f3M)(ms),D=(0,E.f3M)(Z.Ye),U=(0,E.f3M)(E.zs3),X=(0,E.f3M)(E.Sil),_e=(0,E.f3M)(dr,{optional:!0})??[],Xe=(0,E.f3M)(Ss,{optional:!0})??{},Qe=(0,E.f3M)(oo),Rt=(0,E.f3M)(No,{optional:!0}),bn=(0,E.f3M)($n,{optional:!0}),Vr=(0,E.f3M)($u,{optional:!0}),Gn=new Ds(null,M,O,D,U,X,Nr(_e));return bn&&(Gn.urlHandlingStrategy=bn),Vr&&(Gn.routeReuseStrategy=Vr),Gn.titleStrategy=Rt??Qe,function El(M,O){M.errorHandler&&(O.errorHandler=M.errorHandler),M.malformedUriErrorHandler&&(O.malformedUriErrorHandler=M.malformedUriErrorHandler),M.onSameUrlNavigation&&(O.onSameUrlNavigation=M.onSameUrlNavigation),M.paramsInheritanceStrategy&&(O.paramsInheritanceStrategy=M.paramsInheritanceStrategy),M.relativeLinkResolution&&(O.relativeLinkResolution=M.relativeLinkResolution),M.urlUpdateStrategy&&(O.urlUpdateStrategy=M.urlUpdateStrategy),M.canceledNavigationResolution&&(O.canceledNavigationResolution=M.canceledNavigationResolution)}(Xe,Gn),Gn}let Ds=(()=>{class M{constructor(D,U,X,_e,Xe,Qe,Rt){this.rootComponentType=D,this.urlSerializer=U,this.rootContexts=X,this.location=_e,this.config=Rt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new le.x,this.errorHandler=Ls,this.malformedUriErrorHandler=Qa,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,ee.of)(void 0),this.urlHandlingStrategy=new Gt,this.routeReuseStrategy=new Es,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Xe.get(hu),this.configLoader.onLoadEndListener=ji=>this.triggerEvent(new Qo(ji)),this.configLoader.onLoadStartListener=ji=>this.triggerEvent(new qa(ji)),this.ngModule=Xe.get(E.h0i),this.console=Xe.get(E.c2e);const Gn=Xe.get(E.R0b);this.isNgZoneEnabled=Gn instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(Rt),this.currentUrlTree=function ni(){return new Qr(new sn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Wi(this.currentUrlTree,this.rootComponentType),this.transitions=new Ue.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(D){const U=this.events;return D.pipe((0,H.h)(X=>0!==X.id),(0,xe.U)(X=>({...X,extractedUrl:this.urlHandlingStrategy.extract(X.rawUrl)})),(0,We.w)(X=>{let _e=!1,Xe=!1;return(0,ee.of)(X).pipe((0,Me.b)(Qe=>{this.currentNavigation={id:Qe.id,initialUrl:Qe.rawUrl,extractedUrl:Qe.extractedUrl,trigger:Qe.source,extras:Qe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,We.w)(Qe=>{const Rt=this.browserUrlTree.toString(),bn=!this.navigated||Qe.extractedUrl.toString()!==Rt||Rt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||bn)&&this.urlHandlingStrategy.shouldProcessUrl(Qe.rawUrl))return Xa(Qe.source)&&(this.browserUrlTree=Qe.extractedUrl),(0,ee.of)(Qe).pipe((0,We.w)(Gn=>{const ji=this.transitions.getValue();return U.next(new Bo(Gn.id,this.serializeUrl(Gn.extractedUrl),Gn.source,Gn.restoredState)),ji!==this.transitions.getValue()?mt.E:Promise.resolve(Gn)}),function li(M,O,D,U){return(0,We.w)(X=>function fi(M,O,D,U,X){return new io(M,O,D,U,X).apply()}(M,O,D,X.extractedUrl,U).pipe((0,xe.U)(_e=>({...X,urlAfterRedirects:_e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(Gn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Gn.urlAfterRedirects},X.urlAfterRedirects=Gn.urlAfterRedirects}),function Hl(M,O,D,U,X,_e){return(0,he.z)(Xe=>function Ro(M,O,D,U,X,_e,Xe="emptyOnly",Qe="legacy"){return new wo(M,O,D,U,X,Xe,Qe,_e).recognize().pipe((0,We.w)(Rt=>null===Rt?function mo(M){return new Ke.y(O=>O.error(M))}(new Fa):(0,ee.of)(Rt)))}(M,O,D,Xe.urlAfterRedirects,U.serialize(Xe.urlAfterRedirects),U,X,_e).pipe((0,xe.U)(Qe=>({...Xe,targetSnapshot:Qe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(Gn=>{if(X.targetSnapshot=Gn.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Gn.extras.skipLocationChange){const Ui=this.urlHandlingStrategy.merge(Gn.urlAfterRedirects,Gn.rawUrl);this.setBrowserUrl(Ui,Gn)}this.browserUrlTree=Gn.urlAfterRedirects}const ji=new ko(Gn.id,this.serializeUrl(Gn.extractedUrl),this.serializeUrl(Gn.urlAfterRedirects),Gn.targetSnapshot);U.next(ji)}));if(bn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ji,extractedUrl:Ui,source:gn,restoredState:xa,extras:Ei}=Qe,ia=new Bo(ji,this.serializeUrl(Ui),gn,xa);U.next(ia);const Lo=Wi(Ui,this.rootComponentType).snapshot;return X={...Qe,targetSnapshot:Lo,urlAfterRedirects:Ui,extras:{...Ei,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(X)}return this.rawUrlTree=Qe.rawUrl,Qe.resolve(null),mt.E}),(0,Me.b)(Qe=>{const Rt=new Pa(Qe.id,this.serializeUrl(Qe.extractedUrl),this.serializeUrl(Qe.urlAfterRedirects),Qe.targetSnapshot);this.triggerEvent(Rt)}),(0,xe.U)(Qe=>X={...Qe,guards:Au(Qe.targetSnapshot,Qe.currentSnapshot,this.rootContexts)}),function Nt(M,O){return(0,he.z)(D=>{const{targetSnapshot:U,currentSnapshot:X,guards:{canActivateChecks:_e,canDeactivateChecks:Xe}}=D;return 0===Xe.length&&0===_e.length?(0,ee.of)({...D,guardsResult:!0}):function fn(M,O,D,U){return(0,k.D)(M).pipe((0,he.z)(X=>function Vi(M,O,D,U,X){const _e=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,ee.of)(!0);const Xe=_e.map(Qe=>{const Rt=ur(O)??X,bn=pa(Qe,Rt);return pr(function ke(M){return M&&ta(M.canDeactivate)}(bn)?bn.canDeactivate(M,O,D,U):Rt.runInContext(()=>bn(M,O,D,U))).pipe((0,fe.P)())});return(0,ee.of)(Xe).pipe(ot())}(X.component,X.route,D,O,U)),(0,fe.P)(X=>!0!==X,!0))}(Xe,U,X,M).pipe((0,he.z)(Qe=>Qe&&function ds(M){return"boolean"==typeof M}(Qe)?function Hn(M,O,D,U){return(0,k.D)(O).pipe(Fe(X=>(0,se.z)(function mr(M,O){return null!==M&&O&&O(new Oa(M)),(0,ee.of)(!0)}(X.route.parent,U),function Tn(M,O){return null!==M&&O&&O(new wt(M)),(0,ee.of)(!0)}(X.route,U),function Is(M,O,D){const U=O[O.length-1],_e=O.slice(0,O.length-1).reverse().map(Xe=>function Ti(M){const O=M.routeConfig?M.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:M,guards:O}:null}(Xe)).filter(Xe=>null!==Xe).map(Xe=>Ie(()=>{const Qe=Xe.guards.map(Rt=>{const bn=ur(Xe.node)??D,Vr=pa(Rt,bn);return pr(function q(M){return M&&ta(M.canActivateChild)}(Vr)?Vr.canActivateChild(U,M):bn.runInContext(()=>Vr(U,M))).pipe((0,fe.P)())});return(0,ee.of)(Qe).pipe(ot())}));return(0,ee.of)(_e).pipe(ot())}(M,X.path,D),function Gr(M,O,D){const U=O.routeConfig?O.routeConfig.canActivate:null;if(!U||0===U.length)return(0,ee.of)(!0);const X=U.map(_e=>Ie(()=>{const Xe=ur(O)??D,Qe=pa(_e,Xe);return pr(function Q(M){return M&&ta(M.canActivate)}(Qe)?Qe.canActivate(O,M):Xe.runInContext(()=>Qe(O,M))).pipe((0,fe.P)())}));return(0,ee.of)(X).pipe(ot())}(M,X.route,D))),(0,fe.P)(X=>!0!==X,!0))}(U,_e,M,O):(0,ee.of)(Qe)),(0,xe.U)(Qe=>({...D,guardsResult:Qe})))})}(this.ngModule.injector,Qe=>this.triggerEvent(Qe)),(0,Me.b)(Qe=>{if(X.guardsResult=Qe.guardsResult,dn(Qe.guardsResult))throw qs(0,Qe.guardsResult);const Rt=new ns(Qe.id,this.serializeUrl(Qe.extractedUrl),this.serializeUrl(Qe.urlAfterRedirects),Qe.targetSnapshot,!!Qe.guardsResult);this.triggerEvent(Rt)}),(0,H.h)(Qe=>!!Qe.guardsResult||(this.restoreHistory(Qe),this.cancelNavigationTransition(Qe,"",3),!1)),gr(Qe=>{if(Qe.guards.canActivateChecks.length)return(0,ee.of)(Qe).pipe((0,Me.b)(Rt=>{const bn=new lu(Rt.id,this.serializeUrl(Rt.extractedUrl),this.serializeUrl(Rt.urlAfterRedirects),Rt.targetSnapshot);this.triggerEvent(bn)}),(0,We.w)(Rt=>{let bn=!1;return(0,ee.of)(Rt).pipe(function Hu(M,O){return(0,he.z)(D=>{const{targetSnapshot:U,guards:{canActivateChecks:X}}=D;if(!X.length)return(0,ee.of)(D);let _e=0;return(0,k.D)(X).pipe(Fe(Xe=>function fc(M,O,D,U){const X=M.routeConfig,_e=M._resolve;return void 0!==X?.title&&!so(X)&&(_e[qn]=X.title),function Mu(M,O,D,U){const X=function du(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}(M);if(0===X.length)return(0,ee.of)({});const _e={};return(0,k.D)(X).pipe((0,he.z)(Xe=>function Uc(M,O,D,U){const X=ur(O)??U,_e=pa(M,X);return pr(_e.resolve?_e.resolve(O,D):X.runInContext(()=>_e(O,D)))}(M[Xe],O,D,U).pipe((0,fe.P)(),(0,Me.b)(Qe=>{_e[Xe]=Qe}))),St(1),(0,$t.h)(_e),Ge(Xe=>Oe(Xe)?mt.E:ut(Xe)))}(_e,M,O,U).pipe((0,xe.U)(Xe=>(M._resolvedData=Xe,M.data=zs(M,D).resolve,X&&so(X)&&(M.data[qn]=X.title),null)))}(Xe.route,U,M,O)),(0,Me.b)(()=>_e++),St(1),(0,he.z)(Xe=>_e===X.length?(0,ee.of)(D):mt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>bn=!0,complete:()=>{bn||(this.restoreHistory(Rt),this.cancelNavigationTransition(Rt,"",2))}}))}),(0,Me.b)(Rt=>{const bn=new xs(Rt.id,this.serializeUrl(Rt.extractedUrl),this.serializeUrl(Rt.urlAfterRedirects),Rt.targetSnapshot);this.triggerEvent(bn)}))}),gr(Qe=>{const Rt=bn=>{const Vr=[];bn.routeConfig?.loadComponent&&!bn.routeConfig._loadedComponent&&Vr.push(this.configLoader.loadComponent(bn.routeConfig).pipe((0,Me.b)(Gn=>{bn.component=Gn}),(0,xe.U)(()=>{})));for(const Gn of bn.children)Vr.push(...Rt(Gn));return Vr};return(0,Le.a)(Rt(Qe.targetSnapshot.root)).pipe((0,Pt.d)(),(0,_t.q)(1))}),gr(()=>this.afterPreactivation()),(0,xe.U)(Qe=>{const Rt=function Na(M,O,D){const U=Bs(M,O._root,D?D._root:void 0);return new Rs(U,O)}(this.routeReuseStrategy,Qe.targetSnapshot,Qe.currentRouterState);return X={...Qe,targetRouterState:Rt}}),(0,Me.b)(Qe=>{this.currentUrlTree=Qe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Qe.urlAfterRedirects,Qe.rawUrl),this.routerState=Qe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Qe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Qe),this.browserUrlTree=Qe.urlAfterRedirects)}),((M,O,D)=>(0,xe.U)(U=>(new wa(O,U.targetRouterState,U.currentRouterState,D).activate(M),U)))(this.rootContexts,this.routeReuseStrategy,Qe=>this.triggerEvent(Qe)),(0,Me.b)({next(){_e=!0},complete(){_e=!0}}),rn(()=>{_e||Xe||this.cancelNavigationTransition(X,"",1),this.currentNavigation?.id===X.id&&(this.currentNavigation=null)}),Ge(Qe=>{if(Xe=!0,ca(Qe)){Ks(Qe)||(this.navigated=!0,this.restoreHistory(X,!0));const Rt=new bs(X.id,this.serializeUrl(X.extractedUrl),Qe.message,Qe.cancellationCode);if(U.next(Rt),Ks(Qe)){const bn=this.urlHandlingStrategy.merge(Qe.url,this.rawUrlTree),Vr={skipLocationChange:X.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xa(X.source)};this.scheduleNavigation(bn,"imperative",null,Vr,{resolve:X.resolve,reject:X.reject,promise:X.promise})}else X.resolve(!1)}else{this.restoreHistory(X,!0);const Rt=new Ao(X.id,this.serializeUrl(X.extractedUrl),Qe,X.targetSnapshot??void 0);U.next(Rt);try{X.resolve(this.errorHandler(Qe))}catch(bn){X.reject(bn)}}return mt.E}))}))}resetRootComponentType(D){this.rootComponentType=D,this.routerState.root.component=this.rootComponentType}setTransition(D){this.transitions.next({...this.transitions.value,...D})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(D=>{const U="popstate"===D.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{const X={replaceUrl:!0},_e=D.state?.navigationId?D.state:null;if(_e){const Qe={..._e};delete Qe.navigationId,delete Qe.\u0275routerPageId,0!==Object.keys(Qe).length&&(X.state=Qe)}const Xe=this.parseUrl(D.url);this.scheduleNavigation(Xe,U,_e,X)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(D){this.events.next(D)}resetConfig(D){this.config=D.map(no),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(D,U={}){const{relativeTo:X,queryParams:_e,fragment:Xe,queryParamsHandling:Qe,preserveFragment:Rt}=U,bn=X||this.routerState.root,Vr=Rt?this.currentUrlTree.fragment:Xe;let Gn=null;switch(Qe){case"merge":Gn={...this.currentUrlTree.queryParams,..._e};break;case"preserve":Gn=this.currentUrlTree.queryParams;break;default:Gn=_e||null}return null!==Gn&&(Gn=this.removeEmptyProps(Gn)),ar(bn,this.currentUrlTree,D,Gn,Vr??null)}navigateByUrl(D,U={skipLocationChange:!1}){const X=dn(D)?D:this.parseUrl(D),_e=this.urlHandlingStrategy.merge(X,this.rawUrlTree);return this.scheduleNavigation(_e,"imperative",null,U)}navigate(D,U={skipLocationChange:!1}){return function Ca(M){for(let O=0;O<M.length;O++){if(null==M[O])throw new E.vHH(4008,false)}}(D),this.navigateByUrl(this.createUrlTree(D,U),U)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){let U;try{U=this.urlSerializer.parse(D)}catch(X){U=this.malformedUriErrorHandler(X,this.urlSerializer,D)}return U}isActive(D,U){let X;if(X=!0===U?{...pc}:!1===U?{...fu}:U,dn(D))return Zr(this.currentUrlTree,D,X);const _e=this.parseUrl(D);return Zr(this.currentUrlTree,_e,X)}removeEmptyProps(D){return Object.keys(D).reduce((U,X)=>{const _e=D[X];return null!=_e&&(U[X]=_e),U},{})}processNavigations(){this.navigations.subscribe(D=>{this.navigated=!0,this.lastSuccessfulId=D.id,this.currentPageId=D.targetPageId,this.events.next(new qr(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),D.resolve(!0)},D=>{this.console.warn(`Unhandled Navigation Error: ${D}`)})}scheduleNavigation(D,U,X,_e,Xe){if(this.disposed)return Promise.resolve(!1);let Qe,Rt,bn;Xe?(Qe=Xe.resolve,Rt=Xe.reject,bn=Xe.promise):bn=new Promise((ji,Ui)=>{Qe=ji,Rt=Ui});const Vr=++this.navigationId;let Gn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(X=this.location.getState()),Gn=X&&X.\u0275routerPageId?X.\u0275routerPageId:_e.replaceUrl||_e.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Gn=0,this.setTransition({id:Vr,targetPageId:Gn,source:U,restoredState:X,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:D,extras:_e,resolve:Qe,reject:Rt,promise:bn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),bn.catch(ji=>Promise.reject(ji))}setBrowserUrl(D,U){const X=this.urlSerializer.serialize(D),_e={...U.extras.state,...this.generateNgRouterState(U.id,U.targetPageId)};this.location.isCurrentPathEqualTo(X)||U.extras.replaceUrl?this.location.replaceState(X,"",_e):this.location.go(X,"",_e)}restoreHistory(D,U=!1){if("computed"===this.canceledNavigationResolution){const X=this.currentPageId-D.targetPageId;"popstate"!==D.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===X?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===X&&(this.resetState(D),this.browserUrlTree=D.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(X)}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=D.currentRouterState,this.currentUrlTree=D.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(D,U,X){const _e=new bs(D.id,this.serializeUrl(D.extractedUrl),U,X);this.triggerEvent(_e),D.resolve(!1)}generateNgRouterState(D,U){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:U}:{navigationId:D}}}return M.\u0275fac=function(D){E.$Z()},M.\u0275prov=E.Yz7({token:M,factory:function(){return Sl()},providedIn:"root"}),M})();function Xa(M){return"imperative"!==M}let wl=(()=>{class M{constructor(D,U,X,_e,Xe){this.router=D,this.route=U,this.tabIndexAttribute=X,this.renderer=_e,this.el=Xe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new le.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(D){this._preserveFragment=(0,E.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,E.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,E.D6c)(D)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(D){if(null!=this.tabIndexAttribute)return;const U=this.renderer,X=this.el.nativeElement;null!==D?U.setAttribute(X,"tabindex",D):U.removeAttribute(X,"tabindex")}ngOnChanges(D){this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(D){return new(D||M)(E.Y36(Ds),E.Y36(zi),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq))},M.\u0275dir=E.lG2({type:M,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(D,U){1&D&&E.NdJ("click",function(){return U.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),M})(),pu=(()=>{class M{constructor(D,U,X){this.router=D,this.route=U,this.locationStrategy=X,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new le.x,this.subscription=D.events.subscribe(_e=>{_e instanceof qr&&this.updateTargetUrlAndHref()})}set preserveFragment(D){this._preserveFragment=(0,E.D6c)(D)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(D){this._skipLocationChange=(0,E.D6c)(D)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(D){this._replaceUrl=(0,E.D6c)(D)}get replaceUrl(){return this._replaceUrl}set routerLink(D){this.commands=null!=D?Array.isArray(D)?D:[D]:null}ngOnChanges(D){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(D,U,X,_e,Xe){return!!(0!==D||U||X||_e||Xe||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(D){return new(D||M)(E.Y36(Ds),E.Y36(zi),E.Y36(Z.S$))},M.\u0275dir=E.lG2({type:M,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(D,U){1&D&&E.NdJ("click",function(_e){return U.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&D&&E.uIk("target",U.target)("href",U.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),M})(),Ja=(()=>{class M{constructor(D,U,X,_e,Xe,Qe){this.router=D,this.element=U,this.renderer=X,this.cdr=_e,this.link=Xe,this.linkWithHref=Qe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=D.events.subscribe(Rt=>{Rt instanceof qr&&this.update()})}ngAfterContentInit(){(0,ee.of)(this.links.changes,this.linksWithHrefs.changes,(0,ee.of)(null)).pipe((0,Bt.J)()).subscribe(D=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const D=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(U=>!!U).map(U=>U.onChanges);this.linkInputChangesSubscription=(0,k.D)(D).pipe((0,Bt.J)()).subscribe(U=>{this.isActive!==this.isLinkActive(this.router)(U)&&this.update()})}set routerLinkActive(D){const U=Array.isArray(D)?D:D.split(" ");this.classes=U.filter(X=>!!X)}ngOnChanges(D){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const D=this.hasActiveLinks();this.isActive!==D&&(this.isActive=D,this.cdr.markForCheck(),this.classes.forEach(U=>{D?this.renderer.addClass(this.element.nativeElement,U):this.renderer.removeClass(this.element.nativeElement,U)}),D&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(D))})}isLinkActive(D){const U=function Lr(M){return!!M.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return X=>!!X.urlTree&&D.isActive(X.urlTree,U)}hasActiveLinks(){const D=this.isLinkActive(this.router);return this.link&&D(this.link)||this.linkWithHref&&D(this.linkWithHref)||this.links.some(D)||this.linksWithHrefs.some(D)}}return M.\u0275fac=function(D){return new(D||M)(E.Y36(Ds),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(wl,8),E.Y36(pu,8))},M.\u0275dir=E.lG2({type:M,selectors:[["","routerLinkActive",""]],contentQueries:function(D,U,X){if(1&D&&(E.Suo(X,wl,5),E.Suo(X,pu,5)),2&D){let _e;E.iGM(_e=E.CRH())&&(U.links=_e),E.iGM(_e=E.CRH())&&(U.linksWithHrefs=_e)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[E.TTD]}),M})();class Gu{}let Er=(()=>{class M{constructor(D,U,X,_e,Xe){this.router=D,this.injector=X,this.preloadingStrategy=_e,this.loader=Xe}setUpPreloading(){this.subscription=this.router.events.pipe((0,H.h)(D=>D instanceof qr),Fe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,U){const X=[];for(const _e of U){_e.providers&&!_e._injector&&(_e._injector=(0,E.MMx)(_e.providers,D,`Route: ${_e.path}`));const Xe=_e._injector??D,Qe=_e._loadedInjector??Xe;_e.loadChildren&&!_e._loadedRoutes&&void 0===_e.canLoad||_e.loadComponent&&!_e._loadedComponent?X.push(this.preloadConfig(Xe,_e)):(_e.children||_e._loadedRoutes)&&X.push(this.processRoutes(Qe,_e.children??_e._loadedRoutes))}return(0,k.D)(X).pipe((0,Bt.J)())}preloadConfig(D,U){return this.preloadingStrategy.preload(U,()=>{let X;X=U.loadChildren&&void 0===U.canLoad?this.loader.loadChildren(D,U):(0,ee.of)(null);const _e=X.pipe((0,he.z)(Xe=>null===Xe?(0,ee.of)(void 0):(U._loadedRoutes=Xe.routes,U._loadedInjector=Xe.injector,this.processRoutes(Xe.injector??D,Xe.routes))));if(U.loadComponent&&!U._loadedComponent){const Xe=this.loader.loadComponent(U);return(0,k.D)([_e,Xe]).pipe((0,Bt.J)())}return _e})}}return M.\u0275fac=function(D){return new(D||M)(E.LFG(Ds),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Gu),E.LFG(hu))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const gu=new E.OlP("");let Fr=(()=>{class M{constructor(D,U,X={}){this.router=D,this.viewportScroller=U,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Bo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof qr&&(this.lastId=D.id,this.scheduleScrollEvent(D,this.router.parseUrl(D.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(D=>{D instanceof Mt&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,U){this.router.triggerEvent(new Mt(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return M.\u0275fac=function(D){E.$Z()},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac}),M})();function ps(M,O){return{\u0275kind:M,\u0275providers:O}}function Ba(M){return[{provide:dr,multi:!0,useValue:M}]}function mu(){const M=(0,E.f3M)(E.zs3);return O=>{const D=M.get(E.z2F);if(O!==D.components[0])return;const U=M.get(Ds),X=M.get(Li);1===M.get(rd)&&U.initialNavigation(),M.get(xo,null,E.XFs.Optional)?.setUpPreloading(),M.get(gu,null,E.XFs.Optional)?.init(),U.resetRootComponentType(D.componentTypes[0]),X.next(),X.complete()}}const Li=new E.OlP("",{factory:()=>new le.x}),rd=new E.OlP("",{providedIn:"root",factory:()=>1});const xo=new E.OlP("");function ll(M){return ps(0,[{provide:xo,useExisting:Er},{provide:Gu,useExisting:M}])}const ys=new E.OlP("ROUTER_FORROOT_GUARD"),At=[Z.Ye,{provide:Mr,useClass:ri},{provide:Ds,useFactory:Sl},ms,{provide:zi,useFactory:function Pn(M){return M.routerState.root},deps:[Ds]},hu];function xl(){return new E.PXZ("Router",Ds)}let Fi=(()=>{class M{constructor(D){}static forRoot(D,U){return{ngModule:M,providers:[At,[],Ba(D),{provide:ys,useFactory:tu,deps:[[Ds,new E.FiY,new E.tp0]]},{provide:Ss,useValue:U||{}},U?.useHash?{provide:Z.S$,useClass:Z.Do}:{provide:Z.S$,useClass:Z.b0},{provide:gu,useFactory:()=>{const M=(0,E.f3M)(Ds),O=(0,E.f3M)(Z.EM),D=(0,E.f3M)(Ss);return D.scrollOffset&&O.setOffset(D.scrollOffset),new Fr(M,O,D)}},U?.preloadingStrategy?ll(U.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:xl},U?.initialNavigation?vu(U):[],[{provide:nu,useFactory:mu},{provide:E.tb,multi:!0,useExisting:nu}]]}}static forChild(D){return{ngModule:M,providers:[Ba(D)]}}}return M.\u0275fac=function(D){return new(D||M)(E.LFG(ys,8))},M.\u0275mod=E.oAB({type:M}),M.\u0275inj=E.cJS({imports:[Sa]}),M})();function tu(M){return"guarded"}function vu(M){return["disabled"===M.initialNavigation?ps(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const O=(0,E.f3M)(Ds);return()=>{O.setUpLocationChangeListener()}}},{provide:rd,useValue:2}]).\u0275providers:[],"enabledBlocking"===M.initialNavigation?ps(2,[{provide:rd,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:O=>{const D=O.get(Z.V_,Promise.resolve());let U=!1;return()=>D.then(()=>new Promise(_e=>{const Xe=O.get(Ds),Qe=O.get(Li);(function X(_e){O.get(Ds).events.pipe((0,H.h)(Qe=>Qe instanceof qr||Qe instanceof bs||Qe instanceof Ao),(0,xe.U)(Qe=>Qe instanceof qr||Qe instanceof bs&&(0===Qe.code||1===Qe.code)&&null),(0,H.h)(Qe=>null!==Qe),(0,_t.q)(1)).subscribe(()=>{_e()})})(()=>{_e(!0),U=!0}),Xe.afterPreactivation=()=>(_e(!0),U||Qe.closed?(0,ee.of)(void 0):Qe),Xe.initialNavigation()}))}}]).\u0275providers:[]]}const nu=new E.OlP("")},3942:(Yt,at,W)=>{"use strict";W.d(at,{Z:()=>$e});var E=W(2090),k=W(4859),ee=W(9681),Ue=W(1877);class Pe{constructor(Be,ze){this._delegate=Be,this.firebase=ze,(0,ee._addComponent)(Be,new k.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(Be,ze=ee._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const le=this._delegate.container.getProvider(Be);return!le.isInitialized()&&"EXPLICIT"===(null===(yt=le.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&le.initialize(),le.getImmediate({identifier:ze})}_removeServiceInstance(Be,ze=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(ze)}_addComponent(Be){(0,ee._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,ee._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function Ae(){const jt=function Ke(jt){const Be={},ze={__esModule:!0,initializeApp:function Z(Et,H={}){const he=ee.initializeApp(Et,H);if((0,E.r3)(Be,he.name))return Be[he.name];const fe=new jt(he,ze);return Be[he.name]=fe,fe},app:le,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function We(Et){const H=Et.name,he=H.replace("-compat","");if(ee._registerComponent(Et)&&"PUBLIC"===Et.type){const fe=(Fe=le())=>{if("function"!=typeof Fe[he])throw se.create("invalid-app-argument",{appName:H});return Fe[he]()};void 0!==Et.serviceProps&&(0,E.ZB)(fe,Et.serviceProps),ze[he]=fe,jt.prototype[he]=function(...Fe){return this._getService.bind(this,H).apply(this,Et.multipleInstances?Fe:[])}}return"PUBLIC"===Et.type?ze[he]:null},removeApp:function yt(Et){delete Be[Et]},useAsService:function _t(Et,H){return"serverAuth"===H?null:H},modularAPIs:ee}};function le(Et){if(!(0,E.r3)(Be,Et=Et||ee._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Et});return Be[Et]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function xe(){return Object.keys(Be).map(Et=>Be[Et])}}),le.App=jt,ze}(Pe);return jt.INTERNAL=Object.assign(Object.assign({},jt.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function Be(ze){(0,E.ZB)(jt,ze)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),jt}(),Re=new Ue.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const jt=self.firebase.SDK_VERSION;jt&&jt.indexOf("LITE")>=0&&Re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=Ie;!function mt(jt){(0,ee.registerVersion)("@firebase/app-compat","0.1.39",jt)}()},9681:(Yt,at,W)=>{"use strict";W.r(at),W.d(at,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>cr,_DEFAULT_ENTRY_NAME:()=>kt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Bt,_apps:()=>Ht,_clearComponents:()=>Qn,_components:()=>$t,_getProvider:()=>Jt,_registerComponent:()=>_n,_removeServiceInstance:()=>qn,deleteApp:()=>yr,getApp:()=>Nr,getApps:()=>ti,initializeApp:()=>tr,onLog:()=>Or,registerVersion:()=>pr,setLogLevel:()=>ni});var E=W(5861),k=W(4859),ee=W(1877),Ue=W(2090),Pe=W(8766);class Le{constructor(Qt){this.container=Qt}getPlatformInfoString(){return this.container.getProviders().map(Rn=>{if(function se(Mn){return"VERSION"===Mn.getComponent()?.type}(Rn)){const rr=Rn.getImmediate();return`${rr.library}/${rr.version}`}return null}).filter(Rn=>Rn).join(" ")}}const Ke="@firebase/app",Ie=new ee.Yd("@firebase/app"),kt="[DEFAULT]",dt={[Ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,$t=new Map;function rn(Mn,Qt){try{Mn.container.addComponent(Qt)}catch(Rn){Ie.debug(`Component ${Qt.name} failed to register with FirebaseApp ${Mn.name}`,Rn)}}function Bt(Mn,Qt){Mn.container.addOrOverwriteComponent(Qt)}function _n(Mn){const Qt=Mn.name;if($t.has(Qt))return Ie.debug(`There were multiple attempts to register component ${Qt}.`),!1;$t.set(Qt,Mn);for(const Rn of Ht.values())rn(Rn,Mn);return!0}function Jt(Mn,Qt){const Rn=Mn.container.getProvider("heartbeat").getImmediate({optional:!0});return Rn&&Rn.triggerHeartbeat(),Mn.container.getProvider(Qt)}function qn(Mn,Qt,Rn=kt){Jt(Mn,Qt).clearInstance(Rn)}function Qn(){$t.clear()}const vr=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ci{constructor(Qt,Rn,rr){this._isDeleted=!1,this._options=Object.assign({},Qt),this._config=Object.assign({},Rn),this._name=Rn.name,this._automaticDataCollectionEnabled=Rn.automaticDataCollectionEnabled,this._container=rr,this.container.addComponent(new k.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qt){this.checkDestroyed(),this._automaticDataCollectionEnabled=Qt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Qt){this._isDeleted=Qt}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const cr="9.14.0";function tr(Mn,Qt={}){let Rn=Mn;"object"!=typeof Qt&&(Qt={name:Qt});const rr=Object.assign({name:kt,automaticDataCollectionEnabled:!1},Qt),sr=rr.name;if("string"!=typeof sr||!sr)throw vr.create("bad-app-name",{appName:String(sr)});if(Rn||(Rn=(0,Ue.aH)()),!Rn)throw vr.create("no-options");const Dn=Ht.get(sr);if(Dn){if((0,Ue.vZ)(Rn,Dn.options)&&(0,Ue.vZ)(rr,Dn.config))return Dn;throw vr.create("duplicate-app",{appName:sr})}const it=new k.H0(sr);for(const ht of $t.values())it.addComponent(ht);const rt=new Ci(Rn,rr,it);return Ht.set(sr,rt),rt}function Nr(Mn=kt){const Qt=Ht.get(Mn);if(!Qt&&Mn===kt)return tr();if(!Qt)throw vr.create("no-app",{appName:Mn});return Qt}function ti(){return Array.from(Ht.values())}function yr(Mn){return en.apply(this,arguments)}function en(){return(en=(0,E.Z)(function*(Mn){const Qt=Mn.name;Ht.has(Qt)&&(Ht.delete(Qt),yield Promise.all(Mn.container.getProviders().map(Rn=>Rn.delete())),Mn.isDeleted=!0)})).apply(this,arguments)}function pr(Mn,Qt,Rn){var rr;let sr=null!==(rr=dt[Mn])&&void 0!==rr?rr:Mn;Rn&&(sr+=`-${Rn}`);const Dn=sr.match(/\s|\//),it=Qt.match(/\s|\//);if(Dn||it){const rt=[`Unable to register library "${sr}" with version "${Qt}":`];return Dn&&rt.push(`library name "${sr}" contains illegal characters (whitespace or "/")`),Dn&&it&&rt.push("and"),it&&rt.push(`version name "${Qt}" contains illegal characters (whitespace or "/")`),void Ie.warn(rt.join(" "))}_n(new k.wA(`${sr}-version`,()=>({library:sr,version:Qt}),"VERSION"))}function Or(Mn,Qt){if(null!==Mn&&"function"!=typeof Mn)throw vr.create("invalid-log-argument");(0,ee.Am)(Mn,Qt)}function ni(Mn){(0,ee.Ub)(Mn)}const Zr="firebase-heartbeat-store";let Wr=null;function si(){return Wr||(Wr=(0,Pe.X3)("firebase-heartbeat-database",1,{upgrade:(Mn,Qt)=>{0===Qt&&Mn.createObjectStore(Zr)}}).catch(Mn=>{throw vr.create("idb-open",{originalErrorMessage:Mn.message})})),Wr}function Zn(){return(Zn=(0,E.Z)(function*(Mn){var Qt;try{return(yield si()).transaction(Zr).objectStore(Zr).get(Qr(Mn))}catch(Rn){if(Rn instanceof Ue.ZR)Ie.warn(Rn.message);else{const rr=vr.create("idb-get",{originalErrorMessage:null===(Qt=Rn)||void 0===Qt?void 0:Qt.message});Ie.warn(rr.message)}}})).apply(this,arguments)}function Yr(Mn,Qt){return vi.apply(this,arguments)}function vi(){return(vi=(0,E.Z)(function*(Mn,Qt){var Rn;try{const sr=(yield si()).transaction(Zr,"readwrite");return yield sr.objectStore(Zr).put(Qt,Qr(Mn)),sr.done}catch(rr){if(rr instanceof Ue.ZR)Ie.warn(rr.message);else{const sr=vr.create("idb-set",{originalErrorMessage:null===(Rn=rr)||void 0===Rn?void 0:Rn.message});Ie.warn(sr.message)}}})).apply(this,arguments)}function Qr(Mn){return`${Mn.name}!${Mn.options.appId}`}class rs{constructor(Qt){this.container=Qt,this._heartbeatsCache=null;const Rn=this.container.getProvider("app").getImmediate();this._storage=new Mr(Rn),this._heartbeatsCachePromise=this._storage.read().then(rr=>(this._heartbeatsCache=rr,rr))}triggerHeartbeat(){var Qt=this;return(0,E.Z)(function*(){const rr=Qt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sr=Un();if(null===Qt._heartbeatsCache&&(Qt._heartbeatsCache=yield Qt._heartbeatsCachePromise),Qt._heartbeatsCache.lastSentHeartbeatDate!==sr&&!Qt._heartbeatsCache.heartbeats.some(Dn=>Dn.date===sr))return Qt._heartbeatsCache.heartbeats.push({date:sr,agent:rr}),Qt._heartbeatsCache.heartbeats=Qt._heartbeatsCache.heartbeats.filter(Dn=>{const it=new Date(Dn.date).valueOf();return Date.now()-it<=2592e6}),Qt._storage.overwrite(Qt._heartbeatsCache)})()}getHeartbeatsHeader(){var Qt=this;return(0,E.Z)(function*(){if(null===Qt._heartbeatsCache&&(yield Qt._heartbeatsCachePromise),null===Qt._heartbeatsCache||0===Qt._heartbeatsCache.heartbeats.length)return"";const Rn=Un(),{heartbeatsToSend:rr,unsentEntries:sr}=function ki(Mn,Qt=1024){const Rn=[];let rr=Mn.slice();for(const sr of Mn){const Dn=Rn.find(it=>it.agent===sr.agent);if(Dn){if(Dn.dates.push(sr.date),ri(Rn)>Qt){Dn.dates.pop();break}}else if(Rn.push({agent:sr.agent,dates:[sr.date]}),ri(Rn)>Qt){Rn.pop();break}rr=rr.slice(1)}return{heartbeatsToSend:Rn,unsentEntries:rr}}(Qt._heartbeatsCache.heartbeats),Dn=(0,Ue.L)(JSON.stringify({version:2,heartbeats:rr}));return Qt._heartbeatsCache.lastSentHeartbeatDate=Rn,sr.length>0?(Qt._heartbeatsCache.heartbeats=sr,yield Qt._storage.overwrite(Qt._heartbeatsCache)):(Qt._heartbeatsCache.heartbeats=[],Qt._storage.overwrite(Qt._heartbeatsCache)),Dn})()}}function Un(){return(new Date).toISOString().substring(0,10)}class Mr{constructor(Qt){this.app=Qt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Qt=this;return(0,E.Z)(function*(){return(yield Qt._canUseIndexedDBPromise)&&(yield function nr(Mn){return Zn.apply(this,arguments)}(Qt.app))||{heartbeats:[]}})()}overwrite(Qt){var Rn=this;return(0,E.Z)(function*(){var rr;if(yield Rn._canUseIndexedDBPromise){const Dn=yield Rn.read();return Yr(Rn.app,{lastSentHeartbeatDate:null!==(rr=Qt.lastSentHeartbeatDate)&&void 0!==rr?rr:Dn.lastSentHeartbeatDate,heartbeats:Qt.heartbeats})}})()}add(Qt){var Rn=this;return(0,E.Z)(function*(){var rr;if(yield Rn._canUseIndexedDBPromise){const Dn=yield Rn.read();return Yr(Rn.app,{lastSentHeartbeatDate:null!==(rr=Qt.lastSentHeartbeatDate)&&void 0!==rr?rr:Dn.lastSentHeartbeatDate,heartbeats:[...Dn.heartbeats,...Qt.heartbeats]})}})()}}function ri(Mn){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:Mn})).length}!function Qi(Mn){_n(new k.wA("platform-logger",Qt=>new Le(Qt),"PRIVATE")),_n(new k.wA("heartbeat",Qt=>new rs(Qt),"PRIVATE")),pr(Ke,"0.8.4",Mn),pr(Ke,"0.8.4","esm2017"),pr("fire-js","")}("")},4859:(Yt,at,W)=>{"use strict";W.d(at,{H0:()=>Ke,wA:()=>ee});var E=W(5861),k=W(2090);class ee{constructor(Ie,Re,Se){this.name=Ie,this.instanceFactory=Re,this.type=Se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const Ue="[DEFAULT]";class Pe{constructor(Ie,Re){this.name=Ie,this.container=Re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const Re=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(Re)){const Se=new k.BH;if(this.instancesDeferred.set(Re,Se),this.isInitialized(Re)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:Re});ut&&Se.resolve(ut)}catch{}}return this.instancesDeferred.get(Re).promise}getImmediate(Ie){var Re;const Se=this.normalizeInstanceIdentifier(Ie?.identifier),ut=null!==(Re=Ie?.optional)&&void 0!==Re&&Re;if(!this.isInitialized(Se)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Se})}catch(mt){if(ut)return null;throw mt}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function se(Ae){return"EAGER"===Ae.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[Re,Se]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(Re);try{const mt=this.getOrInitializeService({instanceIdentifier:ut});Se.resolve(mt)}catch{}}}}clearInstance(Ie=Ue){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,E.Z)(function*(){const Re=Array.from(Ie.instances.values());yield Promise.all([...Re.filter(Se=>"INTERNAL"in Se).map(Se=>Se.INTERNAL.delete()),...Re.filter(Se=>"_delete"in Se).map(Se=>Se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=Ue){return this.instances.has(Ie)}getOptions(Ie=Ue){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:Re={}}=Ie,Se=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Se))throw Error(`${this.name}(${Se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:Se,options:Re});for(const[mt,$e]of this.instancesDeferred.entries())Se===this.normalizeInstanceIdentifier(mt)&&$e.resolve(ut);return ut}onInit(Ie,Re){var Se;const ut=this.normalizeInstanceIdentifier(Re),mt=null!==(Se=this.onInitCallbacks.get(ut))&&void 0!==Se?Se:new Set;mt.add(Ie),this.onInitCallbacks.set(ut,mt);const $e=this.instances.get(ut);return $e&&Ie($e,ut),()=>{mt.delete(Ie)}}invokeOnInitCallbacks(Ie,Re){const Se=this.onInitCallbacks.get(Re);if(Se)for(const ut of Se)try{ut(Ie,Re)}catch{}}getOrInitializeService({instanceIdentifier:Ie,options:Re={}}){let Se=this.instances.get(Ie);if(!Se&&this.component&&(Se=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=Ie,Ae===Ue?void 0:Ae),options:Re}),this.instances.set(Ie,Se),this.instancesOptions.set(Ie,Re),this.invokeOnInitCallbacks(Se,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Se)}catch{}var Ae;return Se||null}normalizeInstanceIdentifier(Ie=Ue){return this.component?this.component.multipleInstances?Ie:Ue:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ke{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const Re=this.getProvider(Ie.name);if(Re.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);Re.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const Re=new Pe(Ie,this);return this.providers.set(Ie,Re),Re}getProviders(){return Array.from(this.providers.values())}}},1877:(Yt,at,W)=>{"use strict";W.d(at,{Am:()=>Ae,Ub:()=>Ke,Yd:()=>se,in:()=>k});const E=[];var k=(()=>{return(Ie=k||(k={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",k;var Ie})();const ee={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},Ue=k.INFO,Pe={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},Le=(Ie,Re,...Se)=>{if(Re<Ie.logLevel)return;const ut=(new Date).toISOString(),mt=Pe[Re];if(!mt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Re})`);console[mt](`[${ut}]  ${Ie.name}:`,...Se)};class se{constructor(Re){this.name=Re,this._logLevel=Ue,this._logHandler=Le,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Re){if(!(Re in k))throw new TypeError(`Invalid value "${Re}" assigned to \`logLevel\``);this._logLevel=Re}setLogLevel(Re){this._logLevel="string"==typeof Re?ee[Re]:Re}get logHandler(){return this._logHandler}set logHandler(Re){if("function"!=typeof Re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Re}get userLogHandler(){return this._userLogHandler}set userLogHandler(Re){this._userLogHandler=Re}debug(...Re){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...Re),this._logHandler(this,k.DEBUG,...Re)}log(...Re){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...Re),this._logHandler(this,k.VERBOSE,...Re)}info(...Re){this._userLogHandler&&this._userLogHandler(this,k.INFO,...Re),this._logHandler(this,k.INFO,...Re)}warn(...Re){this._userLogHandler&&this._userLogHandler(this,k.WARN,...Re),this._logHandler(this,k.WARN,...Re)}error(...Re){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...Re),this._logHandler(this,k.ERROR,...Re)}}function Ke(Ie){E.forEach(Re=>{Re.setLogLevel(Ie)})}function Ae(Ie,Re){for(const Se of E){let ut=null;Re&&Re.level&&(ut=ee[Re.level]),Se.userLogHandler=null===Ie?null:(mt,$e,...jt)=>{const Be=jt.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");$e>=(ut??mt.logLevel)&&Ie({level:k[$e].toLowerCase(),message:Be,args:jt,type:mt.name})}}}},8766:(Yt,at,W)=>{"use strict";W.d(at,{Lj:()=>Z,X3:()=>le});var E=W(5861);let ee,Ue;const se=new WeakMap,Ke=new WeakMap,Ae=new WeakMap,Ie=new WeakMap,Re=new WeakMap;let mt={get(H,he,fe){if(H instanceof IDBTransaction){if("done"===he)return Ke.get(H);if("objectStoreNames"===he)return H.objectStoreNames||Ae.get(H);if("store"===he)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return ze(H[he])},set:(H,he,fe)=>(H[he]=fe,!0),has:(H,he)=>H instanceof IDBTransaction&&("done"===he||"store"===he)||he in H};function Be(H){return"function"==typeof H?function jt(H){return H!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(H)?function(...he){return H.apply(yt(this),he),ze(se.get(this))}:function(...he){return ze(H.apply(yt(this),he))}:function(he,...fe){const Fe=H.call(yt(this),he,...fe);return Ae.set(Fe,he.sort?he.sort():[he]),ze(Fe)}}(H):(H instanceof IDBTransaction&&function ut(H){if(Ke.has(H))return;const he=new Promise((fe,Fe)=>{const Me=()=>{H.removeEventListener("complete",Ge),H.removeEventListener("error",ct),H.removeEventListener("abort",ct)},Ge=()=>{fe(),Me()},ct=()=>{Fe(H.error||new DOMException("AbortError","AbortError")),Me()};H.addEventListener("complete",Ge),H.addEventListener("error",ct),H.addEventListener("abort",ct)});Ke.set(H,he)}(H),((H,he)=>he.some(fe=>H instanceof fe))(H,function Pe(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(H,mt):H)}function ze(H){if(H instanceof IDBRequest)return function Se(H){const he=new Promise((fe,Fe)=>{const Me=()=>{H.removeEventListener("success",Ge),H.removeEventListener("error",ct)},Ge=()=>{fe(ze(H.result)),Me()},ct=()=>{Fe(H.error),Me()};H.addEventListener("success",Ge),H.addEventListener("error",ct)});return he.then(fe=>{fe instanceof IDBCursor&&se.set(fe,H)}).catch(()=>{}),Re.set(he,H),he}(H);if(Ie.has(H))return Ie.get(H);const he=Be(H);return he!==H&&(Ie.set(H,he),Re.set(he,H)),he}const yt=H=>Re.get(H);function le(H,he,{blocked:fe,upgrade:Fe,blocking:Me,terminated:Ge}={}){const ct=indexedDB.open(H,he),St=ze(ct);return Fe&&ct.addEventListener("upgradeneeded",Tt=>{Fe(ze(ct.result),Tt.oldVersion,Tt.newVersion,ze(ct.transaction))}),fe&&ct.addEventListener("blocked",()=>fe()),St.then(Tt=>{Ge&&Tt.addEventListener("close",()=>Ge()),Me&&Tt.addEventListener("versionchange",()=>Me())}).catch(()=>{}),St}function Z(H,{blocked:he}={}){const fe=indexedDB.deleteDatabase(H);return he&&fe.addEventListener("blocked",()=>he()),ze(fe).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],_t=new Map;function Et(H,he){if(!(H instanceof IDBDatabase)||he in H||"string"!=typeof he)return;if(_t.get(he))return _t.get(he);const fe=he.replace(/FromIndex$/,""),Fe=he!==fe,Me=We.includes(fe);if(!(fe in(Fe?IDBIndex:IDBObjectStore).prototype)||!Me&&!xe.includes(fe))return;const Ge=function(){var ct=(0,E.Z)(function*(St,...Tt){const Pt=this.transaction(St,Me?"readwrite":"readonly");let kt=Pt.store;return Fe&&(kt=kt.index(Tt.shift())),(yield Promise.all([kt[fe](...Tt),Me&&Pt.done]))[0]});return function(Tt){return ct.apply(this,arguments)}}();return _t.set(he,Ge),Ge}!function $e(H){mt=H(mt)}(H=>({...H,get:(he,fe,Fe)=>Et(he,fe)||H.get(he,fe,Fe),has:(he,fe)=>!!Et(he,fe)||H.has(he,fe)}))},1094:(Yt,at,W)=>{"use strict";W.d(at,{hx:()=>ut,yI:()=>jt});var E=W(5861),k=W(4650),ee=W(4006),Ue=W(6895);const Pe=new k.OlP("ngx-mask config"),Le=new k.OlP("new ngx-mask config"),se=new k.OlP("initial ngx-mask config"),Ke={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new k.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Ae=["Hh:m0:s0","Hh:m0","m0:s0"],Ie=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let Re=(()=>{class ze{constructor(le){this._config=le,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(Z,xe,We,_t)=>{let Et=[],H="";if(Array.isArray(We)){const Ge=new RegExp(We.map(ct=>"[\\^$.|?*+()".indexOf(ct)>=0?`\\${ct}`:ct).join("|"));Et=Z.split(Ge),H=Z.match(Ge)?.[0]??""}else Et=Z.split(We),H=We;const he=Et.length>1?`${H}${Et[1]}`:"";let fe=Et[0]??"";const Fe=this.separatorLimit.replace(/\s/g,"");Fe&&+Fe&&(fe="-"===fe[0]?`-${fe.slice(1,fe.length).slice(0,Fe.length)}`:fe.slice(0,Fe.length));const Me=/(\d+)(\d{3})/;for(;xe&&Me.test(fe);)fe=fe.replace(Me,"$1"+xe+"$2");return void 0===_t?fe+he:0===_t?fe:fe+he.substring(0,_t+1)},this.percentage=Z=>Number(Z)>=0&&Number(Z)<=100,this.getPrecision=Z=>{const xe=Z.split(".");return xe.length>1?Number(xe[xe.length-1]):1/0},this.checkAndRemoveSuffix=Z=>{for(let xe=this.suffix?.length-1;xe>=0;xe--){const We=this.suffix.substring(xe,this.suffix?.length);if(Z.includes(We)&&xe!==this.suffix?.length-1&&(xe-1<0||!Z.includes(this.suffix.substring(xe-1,this.suffix?.length))))return Z.replace(We,"")}return Z},this.checkInputPrecision=(Z,xe,We)=>{if(xe<1/0){if(Array.isArray(We)){const he=We.find(fe=>fe!==this.thousandSeparator);We=he||We[0]}const _t=new RegExp(this._charToRegExpExpression(We)+`\\d{${xe}}.*$`),H=(Z.match(_t)??[])[0]?.length??0;H-1>xe&&(Z=Z.substring(0,Z.length-(H-1-xe))),0===xe&&this._compareOrIncludes(Z[Z.length-1],We,this.thousandSeparator)&&(Z=Z.substring(0,Z.length-1))}return Z},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(le,Z){const[xe,We]=Z;return this.customPattern=We,this.applyMask(le,xe)}applyMask(le,Z,xe=0,We=!1,_t=!1,Et=(()=>{})){if(!Z||"string"!=typeof le)return"";let H=0,he="",fe=!1,Fe=!1,Me=1,Ge=!1;le.slice(0,this.prefix.length)===this.prefix&&(le=le.slice(this.prefix.length,le.length)),this.suffix&&le?.length>0&&(le=this.checkAndRemoveSuffix(le));const ct=le.toString().split("");if("IP"===Z){const Ht=le.split(".");this.ipError=this._validIP(Ht),Z="099.099.099.099"}const St=[];for(let Ht=0;Ht<le.length;Ht++)le[Ht]?.match("\\d")&&St.push(le[Ht]??"");if("CPF_CNPJ"===Z&&(this.cpfCnpjError=11!==St.length&&14!==St.length,Z=St.length>11?"00.000.000/0000-00":"000.000.000-00"),Z.startsWith("percent")){if(le.match("[a-z]|[A-Z]")||le.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){le=this._stripToDecimal(le);const Ht=this.getPrecision(Z);le=this.checkInputPrecision(le,Ht,this.decimalMarker)}le.indexOf(".")>0&&!this.percentage(le.substring(0,le.indexOf(".")))&&(le=`${le.substring(0,le.indexOf(".")-1)}${le.substring(le.indexOf("."),le.length)}`),he=this.percentage(le)?le:le.substring(0,le.length-1)}else if(Z.startsWith("separator")){(le.match("[w\u0430-\u044f\u0410-\u042f]")||le.match("[\u0401\u0451\u0410-\u044f]")||le.match("[a-z]|[A-Z]")||le.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||le.match("[^A-Za-z0-9,]"))&&(le=this._stripToDecimal(le)),le=le.length>1&&"0"===le[0]&&le[1]!==this.thousandSeparator&&!this._compareOrIncludes(le[1],this.decimalMarker,this.thousandSeparator)&&!_t?le.slice(0,le.length-1):le,_t&&(le=this._compareOrIncludes(le[le.length-1],this.decimalMarker,this.thousandSeparator)?le.slice(0,le.length-1):le);const Ht=this._charToRegExpExpression(this.thousandSeparator);let $t='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Ht,"");if(Array.isArray(this.decimalMarker))for(const Qn of this.decimalMarker)$t=$t.replace(this._charToRegExpExpression(Qn),"");else $t=$t.replace(this._charToRegExpExpression(this.decimalMarker),"");const rn=new RegExp("["+$t+"]");(le.match(rn)||1===le.length&&this._compareOrIncludes(le,this.decimalMarker,this.thousandSeparator))&&(le=le.substring(0,le.length-1));const Bt=this.getPrecision(Z),_n=(le=this.checkInputPrecision(le,Bt,this.decimalMarker)).replace(new RegExp(Ht,"g"),"");he=this._formatWithSeparators(_n,this.thousandSeparator,this.decimalMarker,Bt);const Jt=he.indexOf(",")-le.indexOf(","),qn=he.length-le.length;if(qn>0&&","!==he[xe]){Fe=!0;let Qn=0;do{this._shift.add(xe+Qn),Qn++}while(Qn<qn)}else 0!==Jt&&xe>0&&!(he.indexOf(",")>=xe&&xe>3)||!(he.indexOf(".")>=xe&&xe>3)&&qn<=0?(this._shift.clear(),Fe=!0,Me=qn,this._shift.add(xe+=qn)):this._shift.clear()}else for(let Ht=0,$t=ct[0];Ht<ct.length&&H!==Z.length;Ht++,$t=ct[Ht]??"")if(this._checkSymbolMask($t,Z[H]??"")&&"?"===Z[H+1])he+=$t,H+=2;else if("*"===Z[H+1]&&fe&&this._checkSymbolMask($t,Z[H+2]??""))he+=$t,H+=3,fe=!1;else if(this._checkSymbolMask($t,Z[H]??"")&&"*"===Z[H+1])he+=$t,fe=!0;else if("?"===Z[H+1]&&this._checkSymbolMask($t,Z[H+2]??""))he+=$t,H+=3;else if(this._checkSymbolMask($t,Z[H]??"")){if("H"===Z[H]&&Number($t)>2){H+=1,this._shiftStep(Z,H,ct.length),Ht--,this.leadZeroDateTime&&(he+="0");continue}if("h"===Z[H]&&"2"===he&&Number($t)>3){H+=1,Ht--;continue}if("m"===Z[H]&&Number($t)>5){H+=1,this._shiftStep(Z,H,ct.length),Ht--,this.leadZeroDateTime&&(he+="0");continue}if("s"===Z[H]&&Number($t)>5){H+=1,this._shiftStep(Z,H,ct.length),Ht--,this.leadZeroDateTime&&(he+="0");continue}const rn=31;if("d"===Z[H]&&(Number($t)>3&&this.leadZeroDateTime||Number(le.slice(H,H+2))>rn||"/"===le[H+1])){H+=1,this._shiftStep(Z,H,ct.length),Ht--,this.leadZeroDateTime&&(he+="0");continue}if("M"===Z[H]){const _n=0===H&&(Number($t)>2||Number(le.slice(H,H+2))>12||"/"===le[H+1]),Jt=le.slice(H-3,H-1).includes("/")&&("/"===le[H-2]&&Number(le.slice(H-1,H+1))>12&&"/"!==le[H]||"/"===le[H]||"/"===le[H-3]&&Number(le.slice(H-2,H))>12&&"/"!==le[H-1]||"/"===le[H-1]),qn=Number(le.slice(H-3,H-1))<=rn&&!le.slice(H-3,H-1).includes("/")&&"/"===le[H-1]&&(Number(le.slice(H,H+2))>12||"/"===le[H+1]),Qn=Number(le.slice(H-3,H-1))>rn&&!le.slice(H-3,H-1).includes("/")&&!le.slice(H-2,H).includes("/")&&Number(le.slice(H-2,H))>12,wr=Number(le.slice(H-3,H-1))<=rn&&!le.slice(H-3,H-1).includes("/")&&"/"!==le[H-1]&&Number(le.slice(H-1,H+1))>12;if(Number($t)>1&&this.leadZeroDateTime||_n||Jt||qn||Qn||wr){H+=1,this._shiftStep(Z,H,ct.length),Ht--,this.leadZeroDateTime&&(he+="0");continue}}he+=$t,H++}else" "===$t&&" "===Z[H]?(he+=$t,H++):-1!==this.maskSpecialCharacters.indexOf(Z[H]??"")?(he+=Z[H],H++,this._shiftStep(Z,H,ct.length),Ht--):this.maskSpecialCharacters.indexOf($t)>-1&&this.maskAvailablePatterns[Z[H]??""]&&this.maskAvailablePatterns[Z[H]??""]?.optional?(!!ct[H]&&"099.099.099.099"!==Z&&"000.000.000-00"!==Z&&"00.000.000/0000-00"!==Z&&!Z.match(/^9+\.0+$/)&&(he+=ct[H]),H++,Ht--):"*"===this.maskExpression[H+1]&&this._findSpecialChar(this.maskExpression[H+2]??"")&&this._findSpecialChar($t)===this.maskExpression[H+2]&&fe||"?"===this.maskExpression[H+1]&&this._findSpecialChar(this.maskExpression[H+2]??"")&&this._findSpecialChar($t)===this.maskExpression[H+2]&&fe?(H+=3,he+=$t):this.showMaskTyped&&this.maskSpecialCharacters.indexOf($t)<0&&$t!==this.placeHolderCharacter&&(Ge=!0);he.length+1===Z.length&&-1!==this.maskSpecialCharacters.indexOf(Z[Z.length-1]??"")&&(he+=Z[Z.length-1]);let Tt=xe+1;for(;this._shift.has(Tt);)Me++,Tt++;let Pt=We&&!Z.startsWith("separator")?H:this._shift.has(xe)?Me:0;Ge&&Pt--,Et(Pt,Fe),Me<0&&this._shift.clear();let kt=!1;_t&&(kt=ct.every(Ht=>this.maskSpecialCharacters.includes(Ht)));let dt=`${this.prefix}${kt?"":he}${this.suffix}`;return 0===he.length&&(dt=`${this.prefix}${he}`),dt}_findSpecialChar(le){return this.maskSpecialCharacters.find(Z=>Z===le)}_checkSymbolMask(le,Z){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,(this.maskAvailablePatterns[Z]?.pattern&&this.maskAvailablePatterns[Z]?.pattern.test(le))??!1}_stripToDecimal(le){return le.split("").filter((Z,xe)=>{const We="string"==typeof this.decimalMarker?Z===this.decimalMarker:this.decimalMarker.includes(Z);return Z.match("^-?\\d")||Z===this.thousandSeparator||We||"-"===Z&&0===xe&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(le){return le&&(" "===le?"\\s":"[\\^$.|?*+()".indexOf(le)>=0?`\\${le}`:le)}_shiftStep(le,Z,xe){const We=/[*?]/g.test(le.slice(0,Z))?xe:Z;this._shift.add(We+this.prefix.length||0)}_compareOrIncludes(le,Z,xe){return Array.isArray(Z)?Z.filter(We=>We!==xe).includes(le):le===Z}_validIP(le){return!(4===le.length&&!le.some((Z,xe)=>le.length!==xe+1?""===Z||Number(Z)>255:""===Z||Number(Z.substring(0,3))>255))}}return ze.\u0275fac=function(le){return new(le||ze)(k.LFG(Pe))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})(),Se=(()=>{class ze extends Re{constructor(le,Z,xe,We){super(Z),this.document=le,this._config=Z,this._elementRef=xe,this._renderer=We,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=_t=>{}}applyMask(le,Z,xe=0,We=!1,_t=!1,Et=(()=>{})){if(!Z)return le!==this.actualValue?this.actualValue:le;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(le||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(le||"#")),!le&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const H=le&&"number"==typeof this.selStart?le[this.selStart]??"":"";let he="";if(void 0!==this.hiddenInput&&!this.writingValue){let Ge=this.actualValue.split("");""!==le&&Ge.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(le.length>Ge.length?Ge.splice(this.selStart,0,H):le.length<Ge.length&&(Ge.length-le.length==1?Ge.splice(this.selStart-1,1):Ge.splice(this.selStart,this.selEnd-this.selStart))):Ge=[],this.showMaskTyped&&(le=this.removeMask(le)),he=this.actualValue.length&&Ge.length<=le.length?this.shiftTypedSymbols(Ge.join("")):le}this.showMaskTyped&&(le=this.removeMask(le)),he=Boolean(he)&&he.length?he:le;const fe=super.applyMask(he,Z,xe,We,_t,Et);if(this.actualValue=this.getActualValue(fe),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Ge=>!this._compareOrIncludes(Ge,this.decimalMarker,this.thousandSeparator))),this.formControlResult(fe),!this.showMaskTyped)return this.hiddenInput&&fe&&fe.length?this.hideInput(fe,this.maskExpression):fe;const Fe=fe.length,Me=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Ge=this._numberSkipedSymbols(fe);return fe+Me.slice(Fe+Ge)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?fe+Me:fe+Me.slice(Fe)}_numberSkipedSymbols(le){const Z=/(^|\D)(\d\D)/g;let xe=Z.exec(le),We=0;for(;null!=xe;)We+=1,xe=Z.exec(le);return We}applyValueChanges(le,Z,xe,We=(()=>{})){const _t=this._elementRef.nativeElement;_t.value=this.applyMask(_t.value,this.maskExpression,le,Z,xe,We),_t!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(le,Z){return le.split("").map((xe,We)=>this.maskAvailablePatterns&&this.maskAvailablePatterns[Z[We]??""]&&this.maskAvailablePatterns[Z[We]??""]?.symbol?this.maskAvailablePatterns[Z[We]??""]?.symbol:xe).join("")}getActualValue(le){const Z=le.split("").filter((xe,We)=>{const _t=this.maskExpression[We]??"";return this._checkSymbolMask(xe,_t)||this.maskSpecialCharacters.includes(_t)&&xe===_t});return Z.join("")===le?Z.join(""):le}shiftTypedSymbols(le){let Z="";return(le&&le.split("").map((We,_t)=>{if(this.maskSpecialCharacters.includes(le[_t+1]??"")&&le[_t+1]!==this.maskExpression[_t+1])return Z=We,le[_t+1];if(Z.length){const Et=Z;return Z="",Et}return We})||[]).join("")}numberToString(le){return le||0===le?Number(le).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(le)}showMaskInInput(le){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(le){if("IP"===this.maskExpression)return this._checkForIp(le);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(le)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const le=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==le.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(le.value,this.maskExpression))}set formElementProperty([le,Z]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,le,Z))}checkSpecialCharAmount(le){return le.split("").filter(xe=>this._findSpecialChar(xe)).length}removeMask(le){return this._removeMask(this._removeSuffix(this._removePrefix(le)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(le){if("#"===le)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const Z=[];for(let xe=0;xe<le.length;xe++){const We=le[xe]??"";!We||We.match("\\d")&&Z.push(We)}return Z.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Z.length>3&&Z.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:Z.length>6&&Z.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(le){const Z=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,xe=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===le)return Z;const We=[];for(let _t=0;_t<le.length;_t++){const Et=le[_t]??"";!Et||Et.match("\\d")&&We.push(Et)}return We.length<=3?Z.slice(We.length,Z.length):We.length>3&&We.length<=6?Z.slice(We.length+1,Z.length):We.length>6&&We.length<=9?Z.slice(We.length+2,Z.length):We.length>9&&We.length<11?Z.slice(We.length+3,Z.length):11===We.length?"":12===We.length?xe.slice(17===le.length?16:15,xe.length):We.length>12&&We.length<=14?xe.slice(We.length+4,xe.length):""}_getActiveElement(le=this.document){const Z=le?.activeElement?.shadowRoot;return Z?.activeElement?this._getActiveElement(Z):le.activeElement}formControlResult(le){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(le)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(le)):this._removeSuffix(le))}_toNumber(le){if(!this.isNumberValue||""===le)return le;const Z=Number(le);return Number.isNaN(Z)?le:Z}_removeMask(le,Z){return le&&le.replace(this._regExpForRemove(Z),"")}_removePrefix(le){return this.prefix?le&&le.replace(this.prefix,""):le}_removeSuffix(le){return this.suffix?le&&le.replace(this.suffix,""):le}_retrieveSeparatorValue(le){return this._removeMask(this._removeSuffix(this._removePrefix(le)),this.maskSpecialCharacters)}_regExpForRemove(le){return new RegExp(le.map(Z=>`\\${Z}`).join("|"),"gi")}_replaceDecimalMarkerToDot(le){const Z=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return le.replace(this._regExpForRemove(Z),".")}_checkSymbols(le){if(""===le)return le;const Z=this._retrieveSeparatorPrecision(this.maskExpression),xe=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(le));return this.isNumberValue?Z?le===this.decimalMarker?null:this._checkPrecision(this.maskExpression,xe):Number(xe):xe}_retrieveSeparatorPrecision(le){const Z=le.match(new RegExp("^separator\\.([^d]*)"));return Z?Number(Z[1]):null}_checkPrecision(le,Z){return le.indexOf("2")>0?Number(Z).toFixed(2):Number(Z)}}return ze.\u0275fac=function(le){return new(le||ze)(k.LFG(Ue.K0),k.LFG(Pe),k.LFG(k.SBq),k.LFG(k.Qsj))},ze.\u0275prov=k.Yz7({token:ze,factory:ze.\u0275fac}),ze})(),ut=(()=>{class ze{constructor(le,Z,xe){this.document=le,this._maskService=Z,this._config=xe,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new k.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=We=>{},this.onTouch=()=>{}}ngOnChanges(le){const{maskExpression:Z,specialCharacters:xe,patterns:We,prefix:_t,suffix:Et,thousandSeparator:H,decimalMarker:he,dropSpecialCharacters:fe,hiddenInput:Fe,showMaskTyped:Me,placeHolderCharacter:Ge,shownMaskExpression:ct,showTemplate:St,clearIfNotMatch:Tt,validation:Pt,separatorLimit:kt,allowNegativeNumbers:dt,leadZeroDateTime:Ht,triggerOnMaskChange:$t}=le;if(Z&&(Z.currentValue!==Z.previousValue&&!Z.firstChange&&(this._maskService.maskChanged=!0),Z.currentValue&&Z.currentValue.split("||").length>1?(this._maskExpressionArray=Z.currentValue.split("||").sort((rn,Bt)=>rn.length-Bt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=Z.currentValue||"",this._maskService.maskExpression=this._maskValue)),xe){if(!xe.currentValue||!Array.isArray(xe.currentValue))return;this._maskService.maskSpecialCharacters=xe.currentValue||[]}We&&We.currentValue&&(this._maskService.maskAvailablePatterns=We.currentValue),_t&&(this._maskService.prefix=_t.currentValue),Et&&(this._maskService.suffix=Et.currentValue),H&&(this._maskService.thousandSeparator=H.currentValue),he&&(this._maskService.decimalMarker=he.currentValue),fe&&(this._maskService.dropSpecialCharacters=fe.currentValue),Fe&&(this._maskService.hiddenInput=Fe.currentValue),Me&&(this._maskService.showMaskTyped=Me.currentValue),Ge&&(this._maskService.placeHolderCharacter=Ge.currentValue),ct&&(this._maskService.shownMaskExpression=ct.currentValue),St&&(this._maskService.showTemplate=St.currentValue),Tt&&(this._maskService.clearIfNotMatch=Tt.currentValue),Pt&&(this._maskService.validation=Pt.currentValue),kt&&(this._maskService.separatorLimit=kt.currentValue),dt&&(this._maskService.allowNegativeNumbers=dt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(rn=>"-"!==rn))),Ht&&(this._maskService.leadZeroDateTime=Ht.currentValue),$t&&(this._maskService.triggerOnMaskChange=$t.currentValue),this._applyMask()}validate({value:le}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(le);if(this._maskService.cpfCnpjError)return this._createValidationError(le);if(this._maskValue.startsWith("separator")||Ie.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Ae.includes(this._maskValue))return this._validateTime(le);if(le&&le.toString().length>=1){let Z=0;for(const xe in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[xe]?.optional&&(this._maskValue.indexOf(xe)!==this._maskValue.lastIndexOf(xe)?Z+=this._maskValue.split("").filter(_t=>_t===xe).join("").length:-1!==this._maskValue.indexOf(xe)&&Z++,-1!==this._maskValue.indexOf(xe)&&le.toString().length>=this._maskValue.indexOf(xe)||Z===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&le.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&le.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&le.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(le);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const xe=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-Z:this._maskValue.length-Z;if(le.toString().length<xe)return this._createValidationError(le)}}return le&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(le){(""===le||null==le)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(le){const Z=le.target;if(this._inputValue=Z.value,this._setMask(),!this._maskValue)return void this.onChange(Z.value);const xe=1===Z.selectionStart?Z.selectionStart+this._maskService.prefix.length:Z.selectionStart;let We=0,_t=!1;if(this._maskService.applyValueChanges(xe,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(H,he)=>{this._justPasted=!1,We=H,_t=he}),this._getActiveElement()!==Z)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let Et=this._position?this._inputValue.length+xe+We:xe+("Backspace"!==this._code||_t?We:0);Et>this._getActualInputLength()&&(Et=this._getActualInputLength()),Et<0&&(Et=0),Z.setSelectionRange(Et,Et),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(le){if(!this._maskValue)return;const Z=le.target;null!==Z&&null!==Z.selectionStart&&Z.selectionStart===Z.selectionEnd&&Z.selectionStart>this._maskService.prefix.length&&38!==le.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),Z.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===Z.value?(Z.focus(),Z.setSelectionRange(0,0)):Z.selectionStart>this._maskService.actualValue.length&&Z.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const _t=Z&&(Z.value&&Z.value!==this._maskService.prefix?Z.value:this._maskService.prefix+this._maskService.maskIsShown);Z&&Z.value!==_t&&(Z.value=_t),Z&&(Z.selectionStart||Z.selectionEnd)<=this._maskService.prefix.length?Z.selectionStart=this._maskService.prefix.length:Z&&Z.selectionEnd>this._getActualInputLength()&&(Z.selectionEnd=this._getActualInputLength())}onKeyDown(le){if(!this._maskValue)return;this._code=le.code?le.code:le.key;const Z=le.target;if(this._inputValue=Z.value,this._setMask(),38===le.keyCode&&le.preventDefault(),37===le.keyCode||8===le.keyCode||46===le.keyCode){if(8===le.keyCode&&0===Z.value.length&&(Z.selectionStart=Z.selectionEnd),8===le.keyCode&&0!==Z.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&Z.selectionStart<=this.prefix.length)Z.setSelectionRange(this.prefix.length,Z.selectionEnd);else if(this._inputValue.length!==Z.selectionStart&&1!==Z.selectionStart)for(;this.specialCharacters.includes((this._inputValue[Z.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&Z.selectionStart>this.prefix.length||0===this.prefix.length);)Z.setSelectionRange(Z.selectionStart-1,Z.selectionEnd);this.checkSelectionOnDeletion(Z),this._maskService.prefix.length&&Z.selectionStart<=this._maskService.prefix.length&&Z.selectionEnd<=this._maskService.prefix.length&&le.preventDefault();const xe=Z.selectionStart;8===le.keyCode&&!Z.readOnly&&0===xe&&Z.selectionEnd===Z.value.length&&0!==Z.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<Z.selectionStart?Z.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===le.keyCode&&le.ctrlKey||65===le.keyCode&&le.metaKey)&&(Z.setSelectionRange(0,this._getActualInputLength()),le.preventDefault()),this._maskService.selStart=Z.selectionStart,this._maskService.selEnd=Z.selectionEnd}writeValue(le){var Z=this;return(0,E.Z)(function*(){"object"==typeof le&&null!==le&&"value"in le&&("disable"in le&&Z.setDisabledState(Boolean(le.disable)),le=le.value),("number"==typeof le||Z._maskValue.startsWith("separator"))&&(le=Z._maskService.numberToString(le),Array.isArray(Z.decimalMarker)||(le="."!==Z.decimalMarker?le.replace(".",Z.decimalMarker):le),Z._maskService.isNumberValue=!0),"string"!=typeof le&&(le=""),Z._inputValue=le,Z._setMask(),le&&Z._maskService.maskExpression||Z._maskService.maskExpression&&(Z._maskService.prefix||Z._maskService.showMaskTyped)?(Z._maskService.writingValue=!0,Z._maskService.formElementProperty=["value",Z._maskService.applyMask(le,Z._maskService.maskExpression)],Z._maskService.writingValue=!1):Z._maskService.formElementProperty=["value",le],Z._inputValue=le})()}registerOnChange(le){this._maskService.onChange=this.onChange=le}registerOnTouched(le){this.onTouch=le}_getActiveElement(le=this.document){const Z=le?.activeElement?.shadowRoot;return Z?.activeElement?this._getActiveElement(Z):le.activeElement}checkSelectionOnDeletion(le){le.selectionStart=Math.min(Math.max(this.prefix.length,le.selectionStart),this._inputValue.length-this.suffix.length),le.selectionEnd=Math.min(Math.max(this.prefix.length,le.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(le){this._maskService.formElementProperty=["disabled",le]}_repeatPatternSymbols(le){return le.match(/{[0-9]+}/)&&le.split("").reduce((Z,xe,We)=>{if(this._start="{"===xe?We:this._start,"}"!==xe)return this._maskService._findSpecialChar(xe)?Z+xe:Z;this._end=We;const _t=Number(le.slice(this._start+1,this._end));return Z+new Array(_t+1).join(le[this._start-1])},"")||le}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(le){const Z=this._maskValue.split("").filter(xe=>":"!==xe).length;return le&&(0==+(le[le.length-1]??-1)&&le.length<Z||le.length<=Z-2)?this._createValidationError(le):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(le){return{mask:{requiredMask:this._maskValue,actualValue:le}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(le=>{const Z=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(le)?.length;if(this._inputValue&&Z)return this._maskValue=le,this.maskExpression=le,this._maskService.maskExpression=le,Z;this._maskValue=this.maskExpression=this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]??""})}}return ze.\u0275fac=function(le){return new(le||ze)(k.Y36(Ue.K0),k.Y36(Se),k.Y36(Pe))},ze.\u0275dir=k.lG2({type:ze,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(le,Z){1&le&&k.NdJ("paste",function(){return Z.onPaste()})("ngModelChange",function(We){return Z.onModelChange(We)})("input",function(We){return Z.onInput(We)})("blur",function(){return Z.onBlur()})("click",function(We){return Z.onClick(We)})("keydown",function(We){return Z.onKeyDown(We)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[k._Bn([{provide:ee.JU,useExisting:(0,k.Gpc)(()=>ze),multi:!0},{provide:ee.Cf,useExisting:(0,k.Gpc)(()=>ze),multi:!0},Se]),k.TTD]}),ze})();function $e(ze,yt){return yt instanceof Function?{...ze,...yt()}:{...ze,...yt}}let jt=(()=>{class ze{static forRoot(le){return{ngModule:ze,providers:[{provide:Le,useValue:le},{provide:se,useValue:Ke},{provide:Pe,useFactory:$e,deps:[se,Le]},Re]}}static forChild(){return{ngModule:ze}}}return ze.\u0275fac=function(le){return new(le||ze)},ze.\u0275mod=k.oAB({type:ze}),ze.\u0275inj=k.cJS({}),ze})();const Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Be.KeyboardEvent||(Be.KeyboardEvent=function(ze,yt){})},5861:(Yt,at,W)=>{"use strict";function E(ee,Ue,Pe,Le,se,Ke,Ae){try{var Ie=ee[Ke](Ae),Re=Ie.value}catch(Se){return void Pe(Se)}Ie.done?Ue(Re):Promise.resolve(Re).then(Le,se)}function k(ee){return function(){var Ue=this,Pe=arguments;return new Promise(function(Le,se){var Ke=ee.apply(Ue,Pe);function Ae(Re){E(Ke,Le,se,Ae,Ie,"next",Re)}function Ie(Re){E(Ke,Le,se,Ae,Ie,"throw",Re)}Ae(void 0)})}}W.d(at,{Z:()=>k})}},Yt=>{Yt(Yt.s=3260)}]);